function aX(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function qF(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var jF={exports:{}},eA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oX=Symbol.for("react.transitional.element"),lX=Symbol.for("react.fragment");function XF(i,e,t){var n=null;if(t!==void 0&&(n=""+t),e.key!==void 0&&(n=""+e.key),"key"in e){t={};for(var s in e)s!=="key"&&(t[s]=e[s])}else t=e;return e=t.ref,{$$typeof:oX,type:i,key:n,ref:e!==void 0?e:null,props:t}}eA.Fragment=lX;eA.jsx=XF;eA.jsxs=XF;jF.exports=eA;var QD=jF.exports;const WF=QD.Fragment,Ge=QD.jsx,Yi=QD.jsxs;var YF={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD=Symbol.for("react.transitional.element"),uX=Symbol.for("react.portal"),cX=Symbol.for("react.fragment"),hX=Symbol.for("react.strict_mode"),fX=Symbol.for("react.profiler"),dX=Symbol.for("react.consumer"),pX=Symbol.for("react.context"),mX=Symbol.for("react.forward_ref"),gX=Symbol.for("react.suspense"),yX=Symbol.for("react.memo"),KF=Symbol.for("react.lazy"),dI=Symbol.iterator;function vX(i){return i===null||typeof i!="object"?null:(i=dI&&i[dI]||i["@@iterator"],typeof i=="function"?i:null)}var JF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QF=Object.assign,ZF={};function Sg(i,e,t){this.props=i,this.context=e,this.refs=ZF,this.updater=t||JF}Sg.prototype.isReactComponent={};Sg.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Sg.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function $F(){}$F.prototype=Sg.prototype;function $D(i,e,t){this.props=i,this.context=e,this.refs=ZF,this.updater=t||JF}var eR=$D.prototype=new $F;eR.constructor=$D;QF(eR,Sg.prototype);eR.isPureReactComponent=!0;var pI=Array.isArray,dn={H:null,A:null,T:null,S:null,V:null},e8=Object.prototype.hasOwnProperty;function tR(i,e,t,n,s,r){return t=r.ref,{$$typeof:ZD,type:i,key:e,ref:t!==void 0?t:null,props:r}}function _X(i,e){return tR(i.type,e,void 0,void 0,void 0,i.props)}function iR(i){return typeof i=="object"&&i!==null&&i.$$typeof===ZD}function xX(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var mI=/\/+/g;function p2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?xX(""+i.key):e.toString(36)}function gI(){}function bX(i){switch(i.status){case"fulfilled":return i.value;case"rejected":throw i.reason;default:switch(typeof i.status=="string"?i.then(gI,gI):(i.status="pending",i.then(function(e){i.status==="pending"&&(i.status="fulfilled",i.value=e)},function(e){i.status==="pending"&&(i.status="rejected",i.reason=e)})),i.status){case"fulfilled":return i.value;case"rejected":throw i.reason}}throw i}function qp(i,e,t,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case ZD:case uX:a=!0;break;case KF:return a=i._init,qp(a(i._payload),e,t,n,s)}}if(a)return s=s(i),a=n===""?"."+p2(i,0):n,pI(s)?(t="",a!=null&&(t=a.replace(mI,"$&/")+"/"),qp(s,e,t,"",function(u){return u})):s!=null&&(iR(s)&&(s=_X(s,t+(s.key==null||i&&i.key===s.key?"":(""+s.key).replace(mI,"$&/")+"/")+a)),e.push(s)),1;a=0;var o=n===""?".":n+":";if(pI(i))for(var l=0;l<i.length;l++)n=i[l],r=o+p2(n,l),a+=qp(n,e,t,r,s);else if(l=vX(i),typeof l=="function")for(i=l.call(i),l=0;!(n=i.next()).done;)n=n.value,r=o+p2(n,l++),a+=qp(n,e,t,r,s);else if(r==="object"){if(typeof i.then=="function")return qp(bX(i),e,t,n,s);throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function ab(i,e,t){if(i==null)return i;var n=[],s=0;return qp(i,n,"","",function(r){return e.call(t,r,s++)}),n}function TX(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var yI=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function SX(){}$t.Children={map:ab,forEach:function(i,e,t){ab(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return ab(i,function(){e++}),e},toArray:function(i){return ab(i,function(e){return e})||[]},only:function(i){if(!iR(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};$t.Component=Sg;$t.Fragment=cX;$t.Profiler=fX;$t.PureComponent=$D;$t.StrictMode=hX;$t.Suspense=gX;$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dn;$t.__COMPILER_RUNTIME={__proto__:null,c:function(i){return dn.H.useMemoCache(i)}};$t.cache=function(i){return function(){return i.apply(null,arguments)}};$t.cloneElement=function(i,e,t){if(i==null)throw Error("The argument must be a React element, but you passed "+i+".");var n=QF({},i.props),s=i.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!e8.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(n[a]=e[a]);var a=arguments.length-2;if(a===1)n.children=t;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];n.children=o}return tR(i.type,s,void 0,void 0,r,n)};$t.createContext=function(i){return i={$$typeof:pX,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null},i.Provider=i,i.Consumer={$$typeof:dX,_context:i},i};$t.createElement=function(i,e,t){var n,s={},r=null;if(e!=null)for(n in e.key!==void 0&&(r=""+e.key),e)e8.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return tR(i,r,void 0,void 0,null,s)};$t.createRef=function(){return{current:null}};$t.forwardRef=function(i){return{$$typeof:mX,render:i}};$t.isValidElement=iR;$t.lazy=function(i){return{$$typeof:KF,_payload:{_status:-1,_result:i},_init:TX}};$t.memo=function(i,e){return{$$typeof:yX,type:i,compare:e===void 0?null:e}};$t.startTransition=function(i){var e=dn.T,t={};dn.T=t;try{var n=i(),s=dn.S;s!==null&&s(t,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(SX,yI)}catch(r){yI(r)}finally{dn.T=e}};$t.unstable_useCacheRefresh=function(){return dn.H.useCacheRefresh()};$t.use=function(i){return dn.H.use(i)};$t.useActionState=function(i,e,t){return dn.H.useActionState(i,e,t)};$t.useCallback=function(i,e){return dn.H.useCallback(i,e)};$t.useContext=function(i){return dn.H.useContext(i)};$t.useDebugValue=function(){};$t.useDeferredValue=function(i,e){return dn.H.useDeferredValue(i,e)};$t.useEffect=function(i,e,t){var n=dn.H;if(typeof t=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(i,e)};$t.useId=function(){return dn.H.useId()};$t.useImperativeHandle=function(i,e,t){return dn.H.useImperativeHandle(i,e,t)};$t.useInsertionEffect=function(i,e){return dn.H.useInsertionEffect(i,e)};$t.useLayoutEffect=function(i,e){return dn.H.useLayoutEffect(i,e)};$t.useMemo=function(i,e){return dn.H.useMemo(i,e)};$t.useOptimistic=function(i,e){return dn.H.useOptimistic(i,e)};$t.useReducer=function(i,e,t){return dn.H.useReducer(i,e,t)};$t.useRef=function(i){return dn.H.useRef(i)};$t.useState=function(i){return dn.H.useState(i)};$t.useSyncExternalStore=function(i,e,t){return dn.H.useSyncExternalStore(i,e,t)};$t.useTransition=function(){return dn.H.useTransition()};$t.version="19.1.0";YF.exports=$t;var ee=YF.exports;const Kf=Pu(ee),AX=aX({__proto__:null,default:Kf},[ee]);var t8={exports:{}},tA={},i8={exports:{}},n8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(j,Q){var $=j.length;j.push(Q);e:for(;0<$;){var pe=$-1>>>1,Se=j[pe];if(0<s(Se,Q))j[pe]=Q,j[$]=Se,$=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var Q=j[0],$=j.pop();if($!==Q){j[0]=$;e:for(var pe=0,Se=j.length,Le=Se>>>1;pe<Le;){var qe=2*(pe+1)-1,ht=j[qe],me=qe+1,Fe=j[me];if(0>s(ht,$))me<Se&&0>s(Fe,ht)?(j[pe]=Fe,j[me]=$,pe=me):(j[pe]=ht,j[qe]=$,pe=qe);else if(me<Se&&0>s(Fe,$))j[pe]=Fe,j[me]=$,pe=me;else break e}}return Q}function s(j,Q){var $=j.sortIndex-Q.sortIndex;return $!==0?$:j.id-Q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,p=3,m=!1,_=!1,x=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function w(j){for(var Q=t(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=j)n(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function B(j){if(x=!1,w(j),!_)if(t(l)!==null)_=!0,I||(I=!0,re());else{var Q=t(u);Q!==null&&ce(B,Q.startTime-j)}}var I=!1,P=-1,F=5,N=-1;function U(){return b?!0:!(i.unstable_now()-N<F)}function H(){if(b=!1,I){var j=i.unstable_now();N=j;var Q=!0;try{e:{_=!1,x&&(x=!1,T(P),P=-1),m=!0;var $=p;try{t:{for(w(j),d=t(l);d!==null&&!(d.expirationTime>j&&U());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,p=d.priorityLevel;var Se=pe(d.expirationTime<=j);if(j=i.unstable_now(),typeof Se=="function"){d.callback=Se,w(j),Q=!0;break t}d===t(l)&&n(l),w(j)}else n(l);d=t(l)}if(d!==null)Q=!0;else{var Le=t(u);Le!==null&&ce(B,Le.startTime-j),Q=!1}}break e}finally{d=null,p=$,m=!1}Q=void 0}}finally{Q?re():I=!1}}}var re;if(typeof A=="function")re=function(){A(H)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=H,re=function(){ae.postMessage(null)}}else re=function(){v(H,0)};function ce(j,Q){P=v(function(){j(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_next=function(j){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var $=p;p=Q;try{return j()}finally{p=$}},i.unstable_requestPaint=function(){b=!0},i.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=p;p=j;try{return Q()}finally{p=$}},i.unstable_scheduleCallback=function(j,Q,$){var pe=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?pe+$:pe):$=pe,j){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=$+Se,j={id:f++,callback:Q,priorityLevel:j,startTime:$,expirationTime:Se,sortIndex:-1},$>pe?(j.sortIndex=$,e(u,j),t(l)===null&&j===t(u)&&(x?(T(P),P=-1):x=!0,ce(B,$-pe))):(j.sortIndex=Se,e(l,j),_||m||(_=!0,I||(I=!0,re()))),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var Q=p;return function(){var $=p;p=Q;try{return j.apply(this,arguments)}finally{p=$}}}})(n8);i8.exports=n8;var EX=i8.exports,s8={exports:{}},Lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CX=ee;function r8(i){var e="https://react.dev/errors/"+i;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hc(){}var Dr={d:{f:hc,r:function(){throw Error(r8(522))},D:hc,C:hc,L:hc,m:hc,X:hc,S:hc,M:hc},p:0,findDOMNode:null},MX=Symbol.for("react.portal");function wX(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:MX,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}var My=CX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function iA(i,e){if(i==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dr;Lr.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(r8(299));return wX(i,e,null,t)};Lr.flushSync=function(i){var e=My.T,t=Dr.p;try{if(My.T=null,Dr.p=2,i)return i()}finally{My.T=e,Dr.p=t,Dr.d.f()}};Lr.preconnect=function(i,e){typeof i=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Dr.d.C(i,e))};Lr.prefetchDNS=function(i){typeof i=="string"&&Dr.d.D(i)};Lr.preinit=function(i,e){if(typeof i=="string"&&e&&typeof e.as=="string"){var t=e.as,n=iA(t,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;t==="style"?Dr.d.S(i,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:r}):t==="script"&&Dr.d.X(i,{crossOrigin:n,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Lr.preinitModule=function(i,e){if(typeof i=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var t=iA(e.as,e.crossOrigin);Dr.d.M(i,{crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Dr.d.M(i)};Lr.preload=function(i,e){if(typeof i=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var t=e.as,n=iA(t,e.crossOrigin);Dr.d.L(i,t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Lr.preloadModule=function(i,e){if(typeof i=="string")if(e){var t=iA(e.as,e.crossOrigin);Dr.d.m(i,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Dr.d.m(i)};Lr.requestFormReset=function(i){Dr.d.r(i)};Lr.unstable_batchedUpdates=function(i,e){return i(e)};Lr.useFormState=function(i,e,t){return My.H.useFormState(i,e,t)};Lr.useFormStatus=function(){return My.H.useHostTransitionStatus()};Lr.version="19.1.0";function a8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a8)}catch(i){console.error(i)}}a8(),s8.exports=Lr;var DX=s8.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=EX,o8=ee,RX=DX;function ke(i){var e="https://react.dev/errors/"+i;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l8(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function i_(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function u8(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function vI(i){if(i_(i)!==i)throw Error(ke(188))}function BX(i){var e=i.alternate;if(!e){if(e=i_(i),e===null)throw Error(ke(188));return e!==i?null:i}for(var t=i,n=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return vI(s),i;if(r===n)return vI(s),e;r=r.sibling}throw Error(ke(188))}if(t.return!==n.return)t=s,n=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,n=r;break}if(o===n){a=!0,n=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,n=s;break}if(o===n){a=!0,n=r,t=s;break}o=o.sibling}if(!a)throw Error(ke(189))}}if(t.alternate!==n)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?i:e}function c8(i){var e=i.tag;if(e===5||e===26||e===27||e===6)return i;for(i=i.child;i!==null;){if(e=c8(i),e!==null)return e;i=i.sibling}return null}var ln=Object.assign,LX=Symbol.for("react.element"),ob=Symbol.for("react.transitional.element"),fy=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),h8=Symbol.for("react.strict_mode"),PM=Symbol.for("react.profiler"),IX=Symbol.for("react.provider"),f8=Symbol.for("react.consumer"),cu=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),UM=Symbol.for("react.suspense"),NM=Symbol.for("react.suspense_list"),sR=Symbol.for("react.memo"),Dc=Symbol.for("react.lazy"),FM=Symbol.for("react.activity"),OX=Symbol.for("react.memo_cache_sentinel"),_I=Symbol.iterator;function P0(i){return i===null||typeof i!="object"?null:(i=_I&&i[_I]||i["@@iterator"],typeof i=="function"?i:null)}var PX=Symbol.for("react.client.reference");function kM(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===PX?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Yp:return"Fragment";case PM:return"Profiler";case h8:return"StrictMode";case UM:return"Suspense";case NM:return"SuspenseList";case FM:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case fy:return"Portal";case cu:return(i.displayName||"Context")+".Provider";case f8:return(i._context.displayName||"Context")+".Consumer";case nR:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case sR:return e=i.displayName||null,e!==null?e:kM(i.type)||"Memo";case Dc:e=i._payload,i=i._init;try{return kM(i(e))}catch{}}return null}var dy=Array.isArray,Nt=o8.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wi=RX.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,If={pending:!1,data:null,method:null,action:null},HM=[],Kp=-1;function wl(i){return{current:i}}function As(i){0>Kp||(i.current=HM[Kp],HM[Kp]=null,Kp--)}function pn(i,e){Kp++,HM[Kp]=i.current,i.current=e}var dl=wl(null),hv=wl(null),qc=wl(null),tS=wl(null);function iS(i,e){switch(pn(qc,e),pn(hv,i),pn(dl,null),e.nodeType){case 9:case 11:i=(i=e.documentElement)&&(i=i.namespaceURI)?AO(i):0;break;default:if(i=e.tagName,e=e.namespaceURI)e=AO(e),i=Dk(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}As(dl),pn(dl,i)}function Fm(){As(dl),As(hv),As(qc)}function zM(i){i.memoizedState!==null&&pn(tS,i);var e=dl.current,t=Dk(e,i.type);e!==t&&(pn(hv,i),pn(dl,t))}function nS(i){hv.current===i&&(As(dl),As(hv)),tS.current===i&&(As(tS),bv._currentValue=If)}var GM=Object.prototype.hasOwnProperty,rR=os.unstable_scheduleCallback,m2=os.unstable_cancelCallback,UX=os.unstable_shouldYield,NX=os.unstable_requestPaint,pl=os.unstable_now,FX=os.unstable_getCurrentPriorityLevel,d8=os.unstable_ImmediatePriority,p8=os.unstable_UserBlockingPriority,sS=os.unstable_NormalPriority,kX=os.unstable_LowPriority,m8=os.unstable_IdlePriority,HX=os.log,zX=os.unstable_setDisableYieldValue,n_=null,xa=null;function kc(i){if(typeof HX=="function"&&zX(i),xa&&typeof xa.setStrictMode=="function")try{xa.setStrictMode(n_,i)}catch{}}var ba=Math.clz32?Math.clz32:qX,GX=Math.log,VX=Math.LN2;function qX(i){return i>>>=0,i===0?32:31-(GX(i)/VX|0)|0}var lb=256,ub=4194304;function hf(i){var e=i&42;if(e!==0)return e;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function nA(i,e,t){var n=i.pendingLanes;if(n===0)return 0;var s=0,r=i.suspendedLanes,a=i.pingedLanes;i=i.warmLanes;var o=n&134217727;return o!==0?(n=o&~r,n!==0?s=hf(n):(a&=o,a!==0?s=hf(a):t||(t=o&~i,t!==0&&(s=hf(t))))):(o=n&~r,o!==0?s=hf(o):a!==0?s=hf(a):t||(t=n&~i,t!==0&&(s=hf(t)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,t=e&-e,r>=t||r===32&&(t&4194048)!==0)?e:s}function s_(i,e){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&e)===0}function jX(i,e){switch(i){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g8(){var i=lb;return lb<<=1,!(lb&4194048)&&(lb=256),i}function y8(){var i=ub;return ub<<=1,!(ub&62914560)&&(ub=4194304),i}function g2(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function r_(i,e){i.pendingLanes|=e,e!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function XX(i,e,t,n,s,r){var a=i.pendingLanes;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=t,i.entangledLanes&=t,i.errorRecoveryDisabledLanes&=t,i.shellSuspendCounter=0;var o=i.entanglements,l=i.expirationTimes,u=i.hiddenUpdates;for(t=a&~t;0<t;){var f=31-ba(t),d=1<<f;o[f]=0,l[f]=-1;var p=u[f];if(p!==null)for(u[f]=null,f=0;f<p.length;f++){var m=p[f];m!==null&&(m.lane&=-536870913)}t&=~d}n!==0&&v8(i,n,0),r!==0&&s===0&&i.tag!==0&&(i.suspendedLanes|=r&~(a&~e))}function v8(i,e,t){i.pendingLanes|=e,i.suspendedLanes&=~e;var n=31-ba(e);i.entangledLanes|=e,i.entanglements[n]=i.entanglements[n]|1073741824|t&4194090}function _8(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-ba(t),s=1<<n;s&e|i[n]&e&&(i[n]|=e),t&=~s}}function aR(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function oR(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function x8(){var i=wi.p;return i!==0?i:(i=window.event,i===void 0?32:kk(i.type))}function WX(i,e){var t=wi.p;try{return wi.p=i,e()}finally{wi.p=t}}var ch=Math.random().toString(36).slice(2),Zs="__reactFiber$"+ch,Kr="__reactProps$"+ch,Ag="__reactContainer$"+ch,VM="__reactEvents$"+ch,YX="__reactListeners$"+ch,KX="__reactHandles$"+ch,xI="__reactResources$"+ch,a_="__reactMarker$"+ch;function lR(i){delete i[Zs],delete i[Kr],delete i[VM],delete i[YX],delete i[KX]}function Jp(i){var e=i[Zs];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Ag]||t[Zs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=MO(i);i!==null;){if(t=i[Zs])return t;i=MO(i)}return e}i=t,t=i.parentNode}return null}function Eg(i){if(i=i[Zs]||i[Ag]){var e=i.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return i}return null}function py(i){var e=i.tag;if(e===5||e===26||e===27||e===6)return i.stateNode;throw Error(ke(33))}function vm(i){var e=i[xI];return e||(e=i[xI]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function xs(i){i[a_]=!0}var b8=new Set,T8={};function hd(i,e){km(i,e),km(i+"Capture",e)}function km(i,e){for(T8[i]=e,i=0;i<e.length;i++)b8.add(e[i])}var JX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bI={},TI={};function QX(i){return GM.call(TI,i)?!0:GM.call(bI,i)?!1:JX.test(i)?TI[i]=!0:(bI[i]=!0,!1)}function wT(i,e,t){if(QX(e))if(t===null)i.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":i.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){i.removeAttribute(e);return}}i.setAttribute(e,""+t)}}function cb(i,e,t){if(t===null)i.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(e);return}i.setAttribute(e,""+t)}}function Kl(i,e,t,n){if(n===null)i.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(t);return}i.setAttributeNS(e,t,""+n)}}var y2,SI;function jp(i){if(y2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);y2=e&&e[1]||"",SI=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+y2+i+SI}var v2=!1;function _2(i,e){if(!i||v2)return"";v2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var p=m}Reflect.construct(i,[],d)}else{try{d.call()}catch(m){p=m}i.call(d.prototype)}}else{try{throw Error()}catch(m){p=m}(d=i())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&p&&typeof m.stack=="string")return[m.stack,p.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split(`
`),u=o.split(`
`);for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===u.length)for(n=l.length-1,s=u.length-1;1<=n&&0<=s&&l[n]!==u[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==u[s]){if(n!==1||s!==1)do if(n--,s--,0>s||l[n]!==u[s]){var f=`
`+l[n].replace(" at new "," at ");return i.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",i.displayName)),f}while(1<=n&&0<=s);break}}}finally{v2=!1,Error.prepareStackTrace=t}return(t=i?i.displayName||i.name:"")?jp(t):""}function ZX(i){switch(i.tag){case 26:case 27:case 5:return jp(i.type);case 16:return jp("Lazy");case 13:return jp("Suspense");case 19:return jp("SuspenseList");case 0:case 15:return _2(i.type,!1);case 11:return _2(i.type.render,!1);case 1:return _2(i.type,!0);case 31:return jp("Activity");default:return""}}function AI(i){try{var e="";do e+=ZX(i),i=i.return;while(i);return e}catch(t){return`
Error generating stack: `+t.message+`
`+t.stack}}function Qa(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function S8(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $X(i){var e=S8(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function rS(i){i._valueTracker||(i._valueTracker=$X(i))}function A8(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=S8(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function aS(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var eW=/[\n"\\]/g;function eo(i){return i.replace(eW,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qM(i,e,t,n,s,r,a,o){i.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?i.type=a:i.removeAttribute("type"),e!=null?a==="number"?(e===0&&i.value===""||i.value!=e)&&(i.value=""+Qa(e)):i.value!==""+Qa(e)&&(i.value=""+Qa(e)):a!=="submit"&&a!=="reset"||i.removeAttribute("value"),e!=null?jM(i,a,Qa(e)):t!=null?jM(i,a,Qa(t)):n!=null&&i.removeAttribute("value"),s==null&&r!=null&&(i.defaultChecked=!!r),s!=null&&(i.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?i.name=""+Qa(o):i.removeAttribute("name")}function E8(i,e,t,n,s,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(i.type=r),e!=null||t!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;t=t!=null?""+Qa(t):"",e=e!=null?""+Qa(e):t,o||e===i.value||(i.value=e),i.defaultValue=e}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,i.checked=o?i.checked:!!n,i.defaultChecked=!!n,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(i.name=a)}function jM(i,e,t){e==="number"&&aS(i.ownerDocument)===i||i.defaultValue===""+t||(i.defaultValue=""+t)}function _m(i,e,t,n){if(i=i.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<i.length;t++)s=e.hasOwnProperty("$"+i[t].value),i[t].selected!==s&&(i[t].selected=s),s&&n&&(i[t].defaultSelected=!0)}else{for(t=""+Qa(t),e=null,s=0;s<i.length;s++){if(i[s].value===t){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}e!==null||i[s].disabled||(e=i[s])}e!==null&&(e.selected=!0)}}function C8(i,e,t){if(e!=null&&(e=""+Qa(e),e!==i.value&&(i.value=e),t==null)){i.defaultValue!==e&&(i.defaultValue=e);return}i.defaultValue=t!=null?""+Qa(t):""}function M8(i,e,t,n){if(e==null){if(n!=null){if(t!=null)throw Error(ke(92));if(dy(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),e=t}t=Qa(e),i.defaultValue=t,n=i.textContent,n===t&&n!==""&&n!==null&&(i.value=n)}function Hm(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var tW=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function EI(i,e,t){var n=e.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?n?i.setProperty(e,""):e==="float"?i.cssFloat="":i[e]="":n?i.setProperty(e,t):typeof t!="number"||t===0||tW.has(e)?e==="float"?i.cssFloat=t:i[e]=(""+t).trim():i[e]=t+"px"}function w8(i,e,t){if(e!=null&&typeof e!="object")throw Error(ke(62));if(i=i.style,t!=null){for(var n in t)!t.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="");for(var s in e)n=e[s],e.hasOwnProperty(s)&&t[s]!==n&&EI(i,s,n)}else for(var r in e)e.hasOwnProperty(r)&&EI(i,r,e[r])}function uR(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iW=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nW=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function DT(i){return nW.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var XM=null;function cR(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qp=null,xm=null;function CI(i){var e=Eg(i);if(e&&(i=e.stateNode)){var t=i[Kr]||null;e:switch(i=e.stateNode,e.type){case"input":if(qM(i,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+eo(""+e)+'"][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var s=n[Kr]||null;if(!s)throw Error(ke(90));qM(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<t.length;e++)n=t[e],n.form===i.form&&A8(n)}break e;case"textarea":C8(i,t.value,t.defaultValue);break e;case"select":e=t.value,e!=null&&_m(i,!!t.multiple,e,!1)}}}var x2=!1;function D8(i,e,t){if(x2)return i(e,t);x2=!0;try{var n=i(e);return n}finally{if(x2=!1,(Qp!==null||xm!==null)&&(dA(),Qp&&(e=Qp,i=xm,xm=Qp=null,CI(e),i)))for(e=0;e<i.length;e++)CI(i[e])}}function fv(i,e){var t=i.stateNode;if(t===null)return null;var n=t[Kr]||null;if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var Su=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),WM=!1;if(Su)try{var U0={};Object.defineProperty(U0,"passive",{get:function(){WM=!0}}),window.addEventListener("test",U0,U0),window.removeEventListener("test",U0,U0)}catch{WM=!1}var Hc=null,hR=null,RT=null;function R8(){if(RT)return RT;var i,e=hR,t=e.length,n,s="value"in Hc?Hc.value:Hc.textContent,r=s.length;for(i=0;i<t&&e[i]===s[i];i++);var a=t-i;for(n=1;n<=a&&e[t-n]===s[r-n];n++);return RT=s.slice(i,1<n?1-n:void 0)}function BT(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function hb(){return!0}function MI(){return!1}function Jr(i){function e(t,n,s,r,a){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?hb:MI,this.isPropagationStopped=MI,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hb)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hb)},persist:function(){},isPersistent:hb}),e}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sA=Jr(fd),o_=ln({},fd,{view:0,detail:0}),sW=Jr(o_),b2,T2,N0,rA=ln({},o_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fR,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==N0&&(N0&&i.type==="mousemove"?(b2=i.screenX-N0.screenX,T2=i.screenY-N0.screenY):T2=b2=0,N0=i),b2)},movementY:function(i){return"movementY"in i?i.movementY:T2}}),wI=Jr(rA),rW=ln({},rA,{dataTransfer:0}),aW=Jr(rW),oW=ln({},o_,{relatedTarget:0}),S2=Jr(oW),lW=ln({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),uW=Jr(lW),cW=ln({},fd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hW=Jr(cW),fW=ln({},fd,{data:0}),DI=Jr(fW),dW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gW(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=mW[i])?!!e[i]:!1}function fR(){return gW}var yW=ln({},o_,{key:function(i){if(i.key){var e=dW[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=BT(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pW[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fR,charCode:function(i){return i.type==="keypress"?BT(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?BT(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),vW=Jr(yW),_W=ln({},rA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RI=Jr(_W),xW=ln({},o_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fR}),bW=Jr(xW),TW=ln({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),SW=Jr(TW),AW=ln({},rA,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EW=Jr(AW),CW=ln({},fd,{newState:0,oldState:0}),MW=Jr(CW),wW=[9,13,27,32],dR=Su&&"CompositionEvent"in window,wy=null;Su&&"documentMode"in document&&(wy=document.documentMode);var DW=Su&&"TextEvent"in window&&!wy,B8=Su&&(!dR||wy&&8<wy&&11>=wy),BI=String.fromCharCode(32),LI=!1;function L8(i,e){switch(i){case"keyup":return wW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I8(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zp=!1;function RW(i,e){switch(i){case"compositionend":return I8(e);case"keypress":return e.which!==32?null:(LI=!0,BI);case"textInput":return i=e.data,i===BI&&LI?null:i;default:return null}}function BW(i,e){if(Zp)return i==="compositionend"||!dR&&L8(i,e)?(i=R8(),RT=hR=Hc=null,Zp=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B8&&e.locale!=="ko"?null:e.data;default:return null}}var LW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function II(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!LW[i.type]:e==="textarea"}function O8(i,e,t,n){Qp?xm?xm.push(n):xm=[n]:Qp=n,e=AS(e,"onChange"),0<e.length&&(t=new sA("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var Dy=null,dv=null;function IW(i){Ck(i,0)}function aA(i){var e=py(i);if(A8(e))return i}function OI(i,e){if(i==="change")return e}var P8=!1;if(Su){var A2;if(Su){var E2="oninput"in document;if(!E2){var PI=document.createElement("div");PI.setAttribute("oninput","return;"),E2=typeof PI.oninput=="function"}A2=E2}else A2=!1;P8=A2&&(!document.documentMode||9<document.documentMode)}function UI(){Dy&&(Dy.detachEvent("onpropertychange",U8),dv=Dy=null)}function U8(i){if(i.propertyName==="value"&&aA(dv)){var e=[];O8(e,dv,i,cR(i)),D8(IW,e)}}function OW(i,e,t){i==="focusin"?(UI(),Dy=e,dv=t,Dy.attachEvent("onpropertychange",U8)):i==="focusout"&&UI()}function PW(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return aA(dv)}function UW(i,e){if(i==="click")return aA(e)}function NW(i,e){if(i==="input"||i==="change")return aA(e)}function FW(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Ea=typeof Object.is=="function"?Object.is:FW;function pv(i,e){if(Ea(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!GM.call(e,s)||!Ea(i[s],e[s]))return!1}return!0}function NI(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function FI(i,e){var t=NI(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=NI(t)}}function N8(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?N8(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function F8(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var e=aS(i.document);e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=aS(i.document)}return e}function pR(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}var kW=Su&&"documentMode"in document&&11>=document.documentMode,$p=null,YM=null,Ry=null,KM=!1;function kI(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;KM||$p==null||$p!==aS(n)||(n=$p,"selectionStart"in n&&pR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ry&&pv(Ry,n)||(Ry=n,n=AS(YM,"onSelect"),0<n.length&&(e=new sA("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=$p)))}function Wh(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var em={animationend:Wh("Animation","AnimationEnd"),animationiteration:Wh("Animation","AnimationIteration"),animationstart:Wh("Animation","AnimationStart"),transitionrun:Wh("Transition","TransitionRun"),transitionstart:Wh("Transition","TransitionStart"),transitioncancel:Wh("Transition","TransitionCancel"),transitionend:Wh("Transition","TransitionEnd")},C2={},k8={};Su&&(k8=document.createElement("div").style,"AnimationEvent"in window||(delete em.animationend.animation,delete em.animationiteration.animation,delete em.animationstart.animation),"TransitionEvent"in window||delete em.transitionend.transition);function dd(i){if(C2[i])return C2[i];if(!em[i])return i;var e=em[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in k8)return C2[i]=e[t];return i}var H8=dd("animationend"),z8=dd("animationiteration"),G8=dd("animationstart"),HW=dd("transitionrun"),zW=dd("transitionstart"),GW=dd("transitioncancel"),V8=dd("transitionend"),q8=new Map,JM="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");JM.push("scrollEnd");function Go(i,e){q8.set(i,e),hd(e,[i])}var HI=new WeakMap;function to(i,e){if(typeof i=="object"&&i!==null){var t=HI.get(i);return t!==void 0?t:(e={value:i,source:e,stack:AI(e)},HI.set(i,e),e)}return{value:i,source:e,stack:AI(e)}}var Ja=[],tm=0,mR=0;function oA(){for(var i=tm,e=mR=tm=0;e<i;){var t=Ja[e];Ja[e++]=null;var n=Ja[e];Ja[e++]=null;var s=Ja[e];Ja[e++]=null;var r=Ja[e];if(Ja[e++]=null,n!==null&&s!==null){var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}r!==0&&j8(t,s,r)}}function lA(i,e,t,n){Ja[tm++]=i,Ja[tm++]=e,Ja[tm++]=t,Ja[tm++]=n,mR|=n,i.lanes|=n,i=i.alternate,i!==null&&(i.lanes|=n)}function gR(i,e,t,n){return lA(i,e,t,n),oS(i)}function Cg(i,e){return lA(i,null,null,e),oS(i)}function j8(i,e,t){i.lanes|=t;var n=i.alternate;n!==null&&(n.lanes|=t);for(var s=!1,r=i.return;r!==null;)r.childLanes|=t,n=r.alternate,n!==null&&(n.childLanes|=t),r.tag===22&&(i=r.stateNode,i===null||i._visibility&1||(s=!0)),i=r,r=r.return;return i.tag===3?(r=i.stateNode,s&&e!==null&&(s=31-ba(t),i=r.hiddenUpdates,n=i[s],n===null?i[s]=[e]:n.push(e),e.lane=t|536870912),r):null}function oS(i){if(50<Hy)throw Hy=0,yw=null,Error(ke(185));for(var e=i.return;e!==null;)i=e,e=i.return;return i.tag===3?i.stateNode:null}var im={};function VW(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(i,e,t,n){return new VW(i,e,t,n)}function yR(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yu(i,e){var t=i.alternate;return t===null?(t=ga(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&65011712,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t.refCleanup=i.refCleanup,t}function X8(i,e){i.flags&=65011714;var t=i.alternate;return t===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,i.type=t.type,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i}function LT(i,e,t,n,s,r){var a=0;if(n=i,typeof i=="function")yR(i)&&(a=1);else if(typeof i=="string")a=jY(i,t,dl.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case FM:return i=ga(31,t,e,s),i.elementType=FM,i.lanes=r,i;case Yp:return Of(t.children,s,r,e);case h8:a=8,s|=24;break;case PM:return i=ga(12,t,e,s|2),i.elementType=PM,i.lanes=r,i;case UM:return i=ga(13,t,e,s),i.elementType=UM,i.lanes=r,i;case NM:return i=ga(19,t,e,s),i.elementType=NM,i.lanes=r,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case IX:case cu:a=10;break e;case f8:a=9;break e;case nR:a=11;break e;case sR:a=14;break e;case Dc:a=16,n=null;break e}a=29,t=Error(ke(130,i===null?"null":typeof i,"")),n=null}return e=ga(a,t,e,s),e.elementType=i,e.type=n,e.lanes=r,e}function Of(i,e,t,n){return i=ga(7,i,n,e),i.lanes=t,i}function M2(i,e,t){return i=ga(6,i,null,e),i.lanes=t,i}function w2(i,e,t){return e=ga(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}var nm=[],sm=0,lS=null,uS=0,Za=[],$a=0,Pf=null,hu=1,fu="";function ff(i,e){nm[sm++]=uS,nm[sm++]=lS,lS=i,uS=e}function W8(i,e,t){Za[$a++]=hu,Za[$a++]=fu,Za[$a++]=Pf,Pf=i;var n=hu;i=fu;var s=32-ba(n)-1;n&=~(1<<s),t+=1;var r=32-ba(e)+s;if(30<r){var a=s-s%5;r=(n&(1<<a)-1).toString(32),n>>=a,s-=a,hu=1<<32-ba(e)+s|t<<s|n,fu=r+i}else hu=1<<r|t<<s|n,fu=i}function vR(i){i.return!==null&&(ff(i,1),W8(i,1,0))}function _R(i){for(;i===lS;)lS=nm[--sm],nm[sm]=null,uS=nm[--sm],nm[sm]=null;for(;i===Pf;)Pf=Za[--$a],Za[$a]=null,fu=Za[--$a],Za[$a]=null,hu=Za[--$a],Za[$a]=null}var Er=null,Rn=null,Mi=!1,Uf=null,ol=!1,QM=Error(ke(519));function Jf(i){var e=Error(ke(418,""));throw mv(to(e,i)),QM}function zI(i){var e=i.stateNode,t=i.type,n=i.memoizedProps;switch(e[Zs]=i,e[Kr]=n,t){case"dialog":ri("cancel",e),ri("close",e);break;case"iframe":case"object":case"embed":ri("load",e);break;case"video":case"audio":for(t=0;t<vv.length;t++)ri(vv[t],e);break;case"source":ri("error",e);break;case"img":case"image":case"link":ri("error",e),ri("load",e);break;case"details":ri("toggle",e);break;case"input":ri("invalid",e),E8(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),rS(e);break;case"select":ri("invalid",e);break;case"textarea":ri("invalid",e),M8(e,n.value,n.defaultValue,n.children),rS(e)}t=n.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||e.textContent===""+t||n.suppressHydrationWarning===!0||wk(e.textContent,t)?(n.popover!=null&&(ri("beforetoggle",e),ri("toggle",e)),n.onScroll!=null&&ri("scroll",e),n.onScrollEnd!=null&&ri("scrollend",e),n.onClick!=null&&(e.onclick=gA),e=!0):e=!1,e||Jf(i)}function GI(i){for(Er=i.return;Er;)switch(Er.tag){case 5:case 13:ol=!1;return;case 27:case 3:ol=!0;return;default:Er=Er.return}}function F0(i){if(i!==Er)return!1;if(!Mi)return GI(i),Mi=!0,!1;var e=i.tag,t;if((t=e!==3&&e!==27)&&((t=e===5)&&(t=i.type,t=!(t!=="form"&&t!=="button")||Sw(i.type,i.memoizedProps)),t=!t),t&&Rn&&Jf(i),GI(i),e===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8)if(t=i.data,t==="/$"){if(e===0){Rn=Uo(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++;i=i.nextSibling}Rn=null}}else e===27?(e=Rn,hh(i.type)?(i=Cw,Cw=null,Rn=i):Rn=e):Rn=Er?Uo(i.stateNode.nextSibling):null;return!0}function l_(){Rn=Er=null,Mi=!1}function VI(){var i=Uf;return i!==null&&(Gr===null?Gr=i:Gr.push.apply(Gr,i),Uf=null),i}function mv(i){Uf===null?Uf=[i]:Uf.push(i)}var ZM=wl(null),pd=null,du=null;function Ic(i,e,t){pn(ZM,e._currentValue),e._currentValue=t}function vu(i){i._currentValue=ZM.current,As(ZM)}function $M(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function ew(i,e,t,n){var s=i.child;for(s!==null&&(s.return=i);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=s;for(var l=0;l<e.length;l++)if(o.context===e[l]){r.lanes|=t,o=r.alternate,o!==null&&(o.lanes|=t),$M(r.return,t,i),n||(a=null);break e}r=o.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(ke(341));a.lanes|=t,r=a.alternate,r!==null&&(r.lanes|=t),$M(a,t,i),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===i){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function u_(i,e,t,n){i=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(ke(387));if(a=a.memoizedProps,a!==null){var o=s.type;Ea(s.pendingProps.value,a.value)||(i!==null?i.push(o):i=[o])}}else if(s===tS.current){if(a=s.alternate,a===null)throw Error(ke(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(i!==null?i.push(bv):i=[bv])}s=s.return}i!==null&&ew(e,i,t,n),e.flags|=262144}function cS(i){for(i=i.firstContext;i!==null;){if(!Ea(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qf(i){pd=i,du=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $s(i){return Y8(pd,i)}function fb(i,e){return pd===null&&Qf(i),Y8(i,e)}function Y8(i,e){var t=e._currentValue;if(e={context:e,memoizedValue:t,next:null},du===null){if(i===null)throw Error(ke(308));du=e,i.dependencies={lanes:0,firstContext:e},i.flags|=524288}else du=du.next=e;return t}var qW=typeof AbortController<"u"?AbortController:function(){var i=[],e=this.signal={aborted:!1,addEventListener:function(t,n){i.push(n)}};this.abort=function(){e.aborted=!0,i.forEach(function(t){return t()})}},jW=os.unstable_scheduleCallback,XW=os.unstable_NormalPriority,ns={$$typeof:cu,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xR(){return{controller:new qW,data:new Map,refCount:0}}function c_(i){i.refCount--,i.refCount===0&&jW(XW,function(){i.controller.abort()})}var By=null,tw=0,zm=0,bm=null;function WW(i,e){if(By===null){var t=By=[];tw=0,zm=VR(),bm={status:"pending",value:void 0,then:function(n){t.push(n)}}}return tw++,e.then(qI,qI),e}function qI(){if(--tw===0&&By!==null){bm!==null&&(bm.status="fulfilled");var i=By;By=null,zm=0,bm=null;for(var e=0;e<i.length;e++)(0,i[e])()}}function YW(i,e){var t=[],n={status:"pending",value:null,reason:null,then:function(s){t.push(s)}};return i.then(function(){n.status="fulfilled",n.value=e;for(var s=0;s<t.length;s++)(0,t[s])(e)},function(s){for(n.status="rejected",n.reason=s,s=0;s<t.length;s++)(0,t[s])(void 0)}),n}var jI=Nt.S;Nt.S=function(i,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&WW(i,e),jI!==null&&jI(i,e)};var Nf=wl(null);function bR(){var i=Nf.current;return i!==null?i:Qi.pooledCache}function IT(i,e){e===null?pn(Nf,Nf.current):pn(Nf,e.pool)}function K8(){var i=bR();return i===null?null:{parent:ns._currentValue,pool:i}}var h_=Error(ke(460)),J8=Error(ke(474)),uA=Error(ke(542)),iw={then:function(){}};function XI(i){return i=i.status,i==="fulfilled"||i==="rejected"}function db(){}function Q8(i,e,t){switch(t=i[t],t===void 0?i.push(e):t!==e&&(e.then(db,db),e=t),e.status){case"fulfilled":return e.value;case"rejected":throw i=e.reason,YI(i),i;default:if(typeof e.status=="string")e.then(db,db);else{if(i=Qi,i!==null&&100<i.shellSuspendCounter)throw Error(ke(482));i=e,i.status="pending",i.then(function(n){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=n}},function(n){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw i=e.reason,YI(i),i}throw Ly=e,h_}}var Ly=null;function WI(){if(Ly===null)throw Error(ke(459));var i=Ly;return Ly=null,i}function YI(i){if(i===h_||i===uA)throw Error(ke(483))}var Rc=!1;function TR(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nw(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function jc(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xc(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,Fi&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,e=oS(i),j8(i,null,t),e}return lA(i,n,e,t),oS(i)}function Iy(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194048)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,_8(i,t)}}function D2(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}var sw=!1;function Oy(){if(sw){var i=bm;if(i!==null)throw i}}function Py(i,e,t,n){sw=!1;var s=i.updateQueue;Rc=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var f=i.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;a=0,f=u=l=null,o=r;do{var p=o.lane&-536870913,m=p!==o.lane;if(m?(xi&p)===p:(n&p)===p){p!==0&&p===zm&&(sw=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var _=i,x=o;p=e;var b=t;switch(x.tag){case 1:if(_=x.payload,typeof _=="function"){d=_.call(b,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,p=typeof _=="function"?_.call(b,d,p):_,p==null)break e;d=ln({},d,p);break e;case 2:Rc=!0}}p=o.callback,p!==null&&(i.flags|=64,m&&(i.flags|=8192),m=s.callbacks,m===null?s.callbacks=[p]:m.push(p))}else m={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=m,l=d):f=f.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);f===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=f,r===null&&(s.shared.lanes=0),ih|=a,i.lanes=a,i.memoizedState=d}}function Z8(i,e){if(typeof i!="function")throw Error(ke(191,i));i.call(e)}function $8(i,e){var t=i.callbacks;if(t!==null)for(i.callbacks=null,i=0;i<t.length;i++)Z8(t[i],e)}var Gm=wl(null),hS=wl(0);function KI(i,e){i=Cu,pn(hS,i),pn(Gm,e),Cu=i|e.baseLanes}function rw(){pn(hS,Cu),pn(Gm,Gm.current)}function SR(){Cu=hS.current,As(Gm),As(hS)}var eh=0,ii=null,Vi=null,Wn=null,fS=!1,Tm=!1,Zf=!1,dS=0,gv=0,Sm=null,KW=0;function Pn(){throw Error(ke(321))}function AR(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Ea(i[t],e[t]))return!1;return!0}function ER(i,e,t,n,s,r){return eh=r,ii=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nt.H=i===null||i.memoizedState===null?R5:B5,Zf=!1,r=t(n,s),Zf=!1,Tm&&(r=t5(e,t,n,s)),e5(i),r}function e5(i){Nt.H=pS;var e=Vi!==null&&Vi.next!==null;if(eh=0,Wn=Vi=ii=null,fS=!1,gv=0,Sm=null,e)throw Error(ke(300));i===null||Ts||(i=i.dependencies,i!==null&&cS(i)&&(Ts=!0))}function t5(i,e,t,n){ii=i;var s=0;do{if(Tm&&(Sm=null),gv=0,Tm=!1,25<=s)throw Error(ke(301));if(s+=1,Wn=Vi=null,i.updateQueue!=null){var r=i.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Nt.H=iY,r=e(t,n)}while(Tm);return r}function JW(){var i=Nt.H,e=i.useState()[0];return e=typeof e.then=="function"?f_(e):e,i=i.useState()[0],(Vi!==null?Vi.memoizedState:null)!==i&&(ii.flags|=1024),e}function CR(){var i=dS!==0;return dS=0,i}function MR(i,e,t){e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~t}function wR(i){if(fS){for(i=i.memoizedState;i!==null;){var e=i.queue;e!==null&&(e.pending=null),i=i.next}fS=!1}eh=0,Wn=Vi=ii=null,Tm=!1,gv=dS=0,Sm=null}function kr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ii.memoizedState=Wn=i:Wn=Wn.next=i,Wn}function Kn(){if(Vi===null){var i=ii.alternate;i=i!==null?i.memoizedState:null}else i=Vi.next;var e=Wn===null?ii.memoizedState:Wn.next;if(e!==null)Wn=e,Vi=i;else{if(i===null)throw ii.alternate===null?Error(ke(467)):Error(ke(310));Vi=i,i={memoizedState:Vi.memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},Wn===null?ii.memoizedState=Wn=i:Wn=Wn.next=i}return Wn}function DR(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function f_(i){var e=gv;return gv+=1,Sm===null&&(Sm=[]),i=Q8(Sm,i,e),e=ii,(Wn===null?e.memoizedState:Wn.next)===null&&(e=e.alternate,Nt.H=e===null||e.memoizedState===null?R5:B5),i}function cA(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return f_(i);if(i.$$typeof===cu)return $s(i)}throw Error(ke(438,String(i)))}function RR(i){var e=null,t=ii.updateQueue;if(t!==null&&(e=t.memoCache),e==null){var n=ii.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),t===null&&(t=DR(),ii.updateQueue=t),t.memoCache=e,t=e.data[e.index],t===void 0)for(t=e.data[e.index]=Array(i),n=0;n<i;n++)t[n]=OX;return e.index++,t}function Au(i,e){return typeof e=="function"?e(i):e}function OT(i){var e=Kn();return BR(e,Vi,i)}function BR(i,e,t){var n=i.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,n.pending=null}if(r=i.baseState,s===null)i.memoizedState=r;else{e=s.next;var o=a=null,l=null,u=e,f=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(xi&d)===d:(eh&d)===d){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===zm&&(f=!0);else if((eh&p)===p){u=u.next,p===zm&&(f=!0);continue}else d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=d,a=r):l=l.next=d,ii.lanes|=p,ih|=p;d=u.action,Zf&&t(r,d),r=u.hasEagerState?u.eagerState:t(r,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=p,a=r):l=l.next=p,ii.lanes|=d,ih|=d;u=u.next}while(u!==null&&u!==e);if(l===null?a=r:l.next=o,!Ea(r,i.memoizedState)&&(Ts=!0,f&&(t=bm,t!==null)))throw t;i.memoizedState=r,i.baseState=a,i.baseQueue=l,n.lastRenderedState=r}return s===null&&(n.lanes=0),[i.memoizedState,n.dispatch]}function R2(i){var e=Kn(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=i;var n=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=i(r,a.action),a=a.next;while(a!==s);Ea(r,e.memoizedState)||(Ts=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function i5(i,e,t){var n=ii,s=Kn(),r=Mi;if(r){if(t===void 0)throw Error(ke(407));t=t()}else t=e();var a=!Ea((Vi||s).memoizedState,t);a&&(s.memoizedState=t,Ts=!0),s=s.queue;var o=r5.bind(null,n,s,i);if(d_(2048,8,o,[i]),s.getSnapshot!==e||a||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,Vm(9,hA(),s5.bind(null,n,s,t,e),null),Qi===null)throw Error(ke(349));r||eh&124||n5(n,e,t)}return t}function n5(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=ii.updateQueue,e===null?(e=DR(),ii.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function s5(i,e,t,n){e.value=t,e.getSnapshot=n,a5(e)&&o5(i)}function r5(i,e,t){return t(function(){a5(e)&&o5(i)})}function a5(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Ea(i,t)}catch{return!0}}function o5(i){var e=Cg(i,2);e!==null&&Sa(e,i,2)}function aw(i){var e=kr();if(typeof i=="function"){var t=i;if(i=t(),Zf){kc(!0);try{t()}finally{kc(!1)}}}return e.memoizedState=e.baseState=i,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:i},e}function l5(i,e,t,n){return i.baseState=t,BR(i,Vi,typeof n=="function"?n:Au)}function QW(i,e,t,n,s){if(fA(i))throw Error(ke(485));if(i=e.action,i!==null){var r={payload:s,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Nt.T!==null?t(!0):r.isTransition=!1,n(r),t=e.pending,t===null?(r.next=e.pending=r,u5(e,r)):(r.next=t.next,e.pending=t.next=r)}}function u5(i,e){var t=e.action,n=e.payload,s=i.state;if(e.isTransition){var r=Nt.T,a={};Nt.T=a;try{var o=t(s,n),l=Nt.S;l!==null&&l(a,o),JI(i,e,o)}catch(u){ow(i,e,u)}finally{Nt.T=r}}else try{r=t(s,n),JI(i,e,r)}catch(u){ow(i,e,u)}}function JI(i,e,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(n){QI(i,e,n)},function(n){return ow(i,e,n)}):QI(i,e,t)}function QI(i,e,t){e.status="fulfilled",e.value=t,c5(e),i.state=t,e=i.pending,e!==null&&(t=e.next,t===e?i.pending=null:(t=t.next,e.next=t,u5(i,t)))}function ow(i,e,t){var n=i.pending;if(i.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=t,c5(e),e=e.next;while(e!==n)}i.action=null}function c5(i){i=i.listeners;for(var e=0;e<i.length;e++)(0,i[e])()}function h5(i,e){return e}function ZI(i,e){if(Mi){var t=Qi.formState;if(t!==null){e:{var n=ii;if(Mi){if(Rn){t:{for(var s=Rn,r=ol;s.nodeType!==8;){if(!r){s=null;break t}if(s=Uo(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Rn=Uo(s.nextSibling),n=s.data==="F!";break e}}Jf(n)}n=!1}n&&(e=t[0])}}return t=kr(),t.memoizedState=t.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h5,lastRenderedState:e},t.queue=n,t=M5.bind(null,ii,n),n.dispatch=t,n=aw(!1),r=PR.bind(null,ii,!1,n.queue),n=kr(),s={state:e,dispatch:null,action:i,pending:null},n.queue=s,t=QW.bind(null,ii,s,r,t),s.dispatch=t,n.memoizedState=i,[e,t,!1]}function $I(i){var e=Kn();return f5(e,Vi,i)}function f5(i,e,t){if(e=BR(i,e,h5)[0],i=OT(Au)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=f_(e)}catch(a){throw a===h_?uA:a}else n=e;e=Kn();var s=e.queue,r=s.dispatch;return t!==e.memoizedState&&(ii.flags|=2048,Vm(9,hA(),ZW.bind(null,s,t),null)),[n,r,i]}function ZW(i,e){i.action=e}function eO(i){var e=Kn(),t=Vi;if(t!==null)return f5(e,t,i);Kn(),e=e.memoizedState,t=Kn();var n=t.queue.dispatch;return t.memoizedState=i,[e,n,!1]}function Vm(i,e,t,n){return i={tag:i,create:t,deps:n,inst:e,next:null},e=ii.updateQueue,e===null&&(e=DR(),ii.updateQueue=e),t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i),i}function hA(){return{destroy:void 0,resource:void 0}}function d5(){return Kn().memoizedState}function PT(i,e,t,n){var s=kr();n=n===void 0?null:n,ii.flags|=i,s.memoizedState=Vm(1|e,hA(),t,n)}function d_(i,e,t,n){var s=Kn();n=n===void 0?null:n;var r=s.memoizedState.inst;Vi!==null&&n!==null&&AR(n,Vi.memoizedState.deps)?s.memoizedState=Vm(e,r,t,n):(ii.flags|=i,s.memoizedState=Vm(1|e,r,t,n))}function tO(i,e){PT(8390656,8,i,e)}function p5(i,e){d_(2048,8,i,e)}function m5(i,e){return d_(4,2,i,e)}function g5(i,e){return d_(4,4,i,e)}function y5(i,e){if(typeof e=="function"){i=i();var t=e(i);return function(){typeof t=="function"?t():e(null)}}if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function v5(i,e,t){t=t!=null?t.concat([i]):null,d_(4,4,y5.bind(null,e,i),t)}function LR(){}function _5(i,e){var t=Kn();e=e===void 0?null:e;var n=t.memoizedState;return e!==null&&AR(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function x5(i,e){var t=Kn();e=e===void 0?null:e;var n=t.memoizedState;if(e!==null&&AR(e,n[1]))return n[0];if(n=i(),Zf){kc(!0);try{i()}finally{kc(!1)}}return t.memoizedState=[n,e],n}function IR(i,e,t){return t===void 0||eh&1073741824?i.memoizedState=e:(i.memoizedState=t,i=ck(),ii.lanes|=i,ih|=i,t)}function b5(i,e,t,n){return Ea(t,e)?t:Gm.current!==null?(i=IR(i,t,n),Ea(i,e)||(Ts=!0),i):eh&42?(i=ck(),ii.lanes|=i,ih|=i,e):(Ts=!0,i.memoizedState=t)}function T5(i,e,t,n,s){var r=wi.p;wi.p=r!==0&&8>r?r:8;var a=Nt.T,o={};Nt.T=o,PR(i,!1,e,t);try{var l=s(),u=Nt.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=YW(l,n);Uy(i,e,f,Ta(i))}else Uy(i,e,n,Ta(i))}catch(d){Uy(i,e,{then:function(){},status:"rejected",reason:d},Ta())}finally{wi.p=r,Nt.T=a}}function $W(){}function lw(i,e,t,n){if(i.tag!==5)throw Error(ke(476));var s=S5(i).queue;T5(i,s,e,If,t===null?$W:function(){return A5(i),t(n)})}function S5(i){var e=i.memoizedState;if(e!==null)return e;e={memoizedState:If,baseState:If,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:If},next:null};var t={};return e.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:t},next:null},i.memoizedState=e,i=i.alternate,i!==null&&(i.memoizedState=e),e}function A5(i){var e=S5(i).next.queue;Uy(i,e,{},Ta())}function OR(){return $s(bv)}function E5(){return Kn().memoizedState}function C5(){return Kn().memoizedState}function eY(i){for(var e=i.return;e!==null;){switch(e.tag){case 24:case 3:var t=Ta();i=jc(t);var n=Xc(e,i,t);n!==null&&(Sa(n,e,t),Iy(n,e,t)),e={cache:xR()},i.payload=e;return}e=e.return}}function tY(i,e,t){var n=Ta();t={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null},fA(i)?w5(e,t):(t=gR(i,e,t,n),t!==null&&(Sa(t,i,n),D5(t,e,n)))}function M5(i,e,t){var n=Ta();Uy(i,e,t,n)}function Uy(i,e,t,n){var s={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null};if(fA(i))w5(e,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,Ea(o,a))return lA(i,e,s,0),Qi===null&&oA(),!1}catch{}finally{}if(t=gR(i,e,s,n),t!==null)return Sa(t,i,n),D5(t,e,n),!0}return!1}function PR(i,e,t,n){if(n={lane:2,revertLane:VR(),action:n,hasEagerState:!1,eagerState:null,next:null},fA(i)){if(e)throw Error(ke(479))}else e=gR(i,t,n,2),e!==null&&Sa(e,i,2)}function fA(i){var e=i.alternate;return i===ii||e!==null&&e===ii}function w5(i,e){Tm=fS=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function D5(i,e,t){if(t&4194048){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,_8(i,t)}}var pS={readContext:$s,use:cA,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},R5={readContext:$s,use:cA,useCallback:function(i,e){return kr().memoizedState=[i,e===void 0?null:e],i},useContext:$s,useEffect:tO,useImperativeHandle:function(i,e,t){t=t!=null?t.concat([i]):null,PT(4194308,4,y5.bind(null,e,i),t)},useLayoutEffect:function(i,e){return PT(4194308,4,i,e)},useInsertionEffect:function(i,e){PT(4,2,i,e)},useMemo:function(i,e){var t=kr();e=e===void 0?null:e;var n=i();if(Zf){kc(!0);try{i()}finally{kc(!1)}}return t.memoizedState=[n,e],n},useReducer:function(i,e,t){var n=kr();if(t!==void 0){var s=t(e);if(Zf){kc(!0);try{t(e)}finally{kc(!1)}}}else s=e;return n.memoizedState=n.baseState=s,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},n.queue=i,i=i.dispatch=tY.bind(null,ii,i),[n.memoizedState,i]},useRef:function(i){var e=kr();return i={current:i},e.memoizedState=i},useState:function(i){i=aw(i);var e=i.queue,t=M5.bind(null,ii,e);return e.dispatch=t,[i.memoizedState,t]},useDebugValue:LR,useDeferredValue:function(i,e){var t=kr();return IR(t,i,e)},useTransition:function(){var i=aw(!1);return i=T5.bind(null,ii,i.queue,!0,!1),kr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,e,t){var n=ii,s=kr();if(Mi){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),Qi===null)throw Error(ke(349));xi&124||n5(n,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,tO(r5.bind(null,n,r,i),[i]),n.flags|=2048,Vm(9,hA(),s5.bind(null,n,r,t,e),null),t},useId:function(){var i=kr(),e=Qi.identifierPrefix;if(Mi){var t=fu,n=hu;t=(n&~(1<<32-ba(n)-1)).toString(32)+t,e="«"+e+"R"+t,t=dS++,0<t&&(e+="H"+t.toString(32)),e+="»"}else t=KW++,e="«"+e+"r"+t.toString(32)+"»";return i.memoizedState=e},useHostTransitionStatus:OR,useFormState:ZI,useActionState:ZI,useOptimistic:function(i){var e=kr();e.memoizedState=e.baseState=i;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=t,e=PR.bind(null,ii,!0,t),t.dispatch=e,[i,e]},useMemoCache:RR,useCacheRefresh:function(){return kr().memoizedState=eY.bind(null,ii)}},B5={readContext:$s,use:cA,useCallback:_5,useContext:$s,useEffect:p5,useImperativeHandle:v5,useInsertionEffect:m5,useLayoutEffect:g5,useMemo:x5,useReducer:OT,useRef:d5,useState:function(){return OT(Au)},useDebugValue:LR,useDeferredValue:function(i,e){var t=Kn();return b5(t,Vi.memoizedState,i,e)},useTransition:function(){var i=OT(Au)[0],e=Kn().memoizedState;return[typeof i=="boolean"?i:f_(i),e]},useSyncExternalStore:i5,useId:E5,useHostTransitionStatus:OR,useFormState:$I,useActionState:$I,useOptimistic:function(i,e){var t=Kn();return l5(t,Vi,i,e)},useMemoCache:RR,useCacheRefresh:C5},iY={readContext:$s,use:cA,useCallback:_5,useContext:$s,useEffect:p5,useImperativeHandle:v5,useInsertionEffect:m5,useLayoutEffect:g5,useMemo:x5,useReducer:R2,useRef:d5,useState:function(){return R2(Au)},useDebugValue:LR,useDeferredValue:function(i,e){var t=Kn();return Vi===null?IR(t,i,e):b5(t,Vi.memoizedState,i,e)},useTransition:function(){var i=R2(Au)[0],e=Kn().memoizedState;return[typeof i=="boolean"?i:f_(i),e]},useSyncExternalStore:i5,useId:E5,useHostTransitionStatus:OR,useFormState:eO,useActionState:eO,useOptimistic:function(i,e){var t=Kn();return Vi!==null?l5(t,Vi,i,e):(t.baseState=i,[i,t.queue.dispatch])},useMemoCache:RR,useCacheRefresh:C5},Am=null,yv=0;function pb(i){var e=yv;return yv+=1,Am===null&&(Am=[]),Q8(Am,i,e)}function k0(i,e){e=e.props.ref,i.ref=e!==void 0?e:null}function mb(i,e){throw e.$$typeof===LX?Error(ke(525)):(i=Object.prototype.toString.call(e),Error(ke(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)))}function iO(i){var e=i._init;return e(i._payload)}function L5(i){function e(v,T){if(i){var A=v.deletions;A===null?(v.deletions=[T],v.flags|=16):A.push(T)}}function t(v,T){if(!i)return null;for(;T!==null;)e(v,T),T=T.sibling;return null}function n(v){for(var T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(v,T){return v=yu(v,T),v.index=0,v.sibling=null,v}function r(v,T,A){return v.index=A,i?(A=v.alternate,A!==null?(A=A.index,A<T?(v.flags|=67108866,T):A):(v.flags|=67108866,T)):(v.flags|=1048576,T)}function a(v){return i&&v.alternate===null&&(v.flags|=67108866),v}function o(v,T,A,w){return T===null||T.tag!==6?(T=M2(A,v.mode,w),T.return=v,T):(T=s(T,A),T.return=v,T)}function l(v,T,A,w){var B=A.type;return B===Yp?f(v,T,A.props.children,w,A.key):T!==null&&(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Dc&&iO(B)===T.type)?(T=s(T,A.props),k0(T,A),T.return=v,T):(T=LT(A.type,A.key,A.props,null,v.mode,w),k0(T,A),T.return=v,T)}function u(v,T,A,w){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=w2(A,v.mode,w),T.return=v,T):(T=s(T,A.children||[]),T.return=v,T)}function f(v,T,A,w,B){return T===null||T.tag!==7?(T=Of(A,v.mode,w,B),T.return=v,T):(T=s(T,A),T.return=v,T)}function d(v,T,A){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=M2(""+T,v.mode,A),T.return=v,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ob:return A=LT(T.type,T.key,T.props,null,v.mode,A),k0(A,T),A.return=v,A;case fy:return T=w2(T,v.mode,A),T.return=v,T;case Dc:var w=T._init;return T=w(T._payload),d(v,T,A)}if(dy(T)||P0(T))return T=Of(T,v.mode,A,null),T.return=v,T;if(typeof T.then=="function")return d(v,pb(T),A);if(T.$$typeof===cu)return d(v,fb(v,T),A);mb(v,T)}return null}function p(v,T,A,w){var B=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return B!==null?null:o(v,T,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ob:return A.key===B?l(v,T,A,w):null;case fy:return A.key===B?u(v,T,A,w):null;case Dc:return B=A._init,A=B(A._payload),p(v,T,A,w)}if(dy(A)||P0(A))return B!==null?null:f(v,T,A,w,null);if(typeof A.then=="function")return p(v,T,pb(A),w);if(A.$$typeof===cu)return p(v,T,fb(v,A),w);mb(v,A)}return null}function m(v,T,A,w,B){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return v=v.get(A)||null,o(T,v,""+w,B);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ob:return v=v.get(w.key===null?A:w.key)||null,l(T,v,w,B);case fy:return v=v.get(w.key===null?A:w.key)||null,u(T,v,w,B);case Dc:var I=w._init;return w=I(w._payload),m(v,T,A,w,B)}if(dy(w)||P0(w))return v=v.get(A)||null,f(T,v,w,B,null);if(typeof w.then=="function")return m(v,T,A,pb(w),B);if(w.$$typeof===cu)return m(v,T,A,fb(T,w),B);mb(T,w)}return null}function _(v,T,A,w){for(var B=null,I=null,P=T,F=T=0,N=null;P!==null&&F<A.length;F++){P.index>F?(N=P,P=null):N=P.sibling;var U=p(v,P,A[F],w);if(U===null){P===null&&(P=N);break}i&&P&&U.alternate===null&&e(v,P),T=r(U,T,F),I===null?B=U:I.sibling=U,I=U,P=N}if(F===A.length)return t(v,P),Mi&&ff(v,F),B;if(P===null){for(;F<A.length;F++)P=d(v,A[F],w),P!==null&&(T=r(P,T,F),I===null?B=P:I.sibling=P,I=P);return Mi&&ff(v,F),B}for(P=n(P);F<A.length;F++)N=m(P,v,F,A[F],w),N!==null&&(i&&N.alternate!==null&&P.delete(N.key===null?F:N.key),T=r(N,T,F),I===null?B=N:I.sibling=N,I=N);return i&&P.forEach(function(H){return e(v,H)}),Mi&&ff(v,F),B}function x(v,T,A,w){if(A==null)throw Error(ke(151));for(var B=null,I=null,P=T,F=T=0,N=null,U=A.next();P!==null&&!U.done;F++,U=A.next()){P.index>F?(N=P,P=null):N=P.sibling;var H=p(v,P,U.value,w);if(H===null){P===null&&(P=N);break}i&&P&&H.alternate===null&&e(v,P),T=r(H,T,F),I===null?B=H:I.sibling=H,I=H,P=N}if(U.done)return t(v,P),Mi&&ff(v,F),B;if(P===null){for(;!U.done;F++,U=A.next())U=d(v,U.value,w),U!==null&&(T=r(U,T,F),I===null?B=U:I.sibling=U,I=U);return Mi&&ff(v,F),B}for(P=n(P);!U.done;F++,U=A.next())U=m(P,v,F,U.value,w),U!==null&&(i&&U.alternate!==null&&P.delete(U.key===null?F:U.key),T=r(U,T,F),I===null?B=U:I.sibling=U,I=U);return i&&P.forEach(function(re){return e(v,re)}),Mi&&ff(v,F),B}function b(v,T,A,w){if(typeof A=="object"&&A!==null&&A.type===Yp&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ob:e:{for(var B=A.key;T!==null;){if(T.key===B){if(B=A.type,B===Yp){if(T.tag===7){t(v,T.sibling),w=s(T,A.props.children),w.return=v,v=w;break e}}else if(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Dc&&iO(B)===T.type){t(v,T.sibling),w=s(T,A.props),k0(w,A),w.return=v,v=w;break e}t(v,T);break}else e(v,T);T=T.sibling}A.type===Yp?(w=Of(A.props.children,v.mode,w,A.key),w.return=v,v=w):(w=LT(A.type,A.key,A.props,null,v.mode,w),k0(w,A),w.return=v,v=w)}return a(v);case fy:e:{for(B=A.key;T!==null;){if(T.key===B)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){t(v,T.sibling),w=s(T,A.children||[]),w.return=v,v=w;break e}else{t(v,T);break}else e(v,T);T=T.sibling}w=w2(A,v.mode,w),w.return=v,v=w}return a(v);case Dc:return B=A._init,A=B(A._payload),b(v,T,A,w)}if(dy(A))return _(v,T,A,w);if(P0(A)){if(B=P0(A),typeof B!="function")throw Error(ke(150));return A=B.call(A),x(v,T,A,w)}if(typeof A.then=="function")return b(v,T,pb(A),w);if(A.$$typeof===cu)return b(v,T,fb(v,A),w);mb(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,T!==null&&T.tag===6?(t(v,T.sibling),w=s(T,A),w.return=v,v=w):(t(v,T),w=M2(A,v.mode,w),w.return=v,v=w),a(v)):t(v,T)}return function(v,T,A,w){try{yv=0;var B=b(v,T,A,w);return Am=null,B}catch(P){if(P===h_||P===uA)throw P;var I=ga(29,P,null,v.mode);return I.lanes=w,I.return=v,I}finally{}}}var qm=L5(!0),I5=L5(!1),oo=wl(null),ml=null;function Oc(i){var e=i.alternate;pn(ss,ss.current&1),pn(oo,i),ml===null&&(e===null||Gm.current!==null||e.memoizedState!==null)&&(ml=i)}function O5(i){if(i.tag===22){if(pn(ss,ss.current),pn(oo,i),ml===null){var e=i.alternate;e!==null&&e.memoizedState!==null&&(ml=i)}}else Pc()}function Pc(){pn(ss,ss.current),pn(oo,oo.current)}function pu(i){As(oo),ml===i&&(ml=null),As(ss)}var ss=wl(0);function mS(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||Ew(t)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function B2(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:ln({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var uw={enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Ta(),s=jc(n);s.payload=e,t!=null&&(s.callback=t),e=Xc(i,s,n),e!==null&&(Sa(e,i,n),Iy(e,i,n))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Ta(),s=jc(n);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Xc(i,s,n),e!==null&&(Sa(e,i,n),Iy(e,i,n))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Ta(),n=jc(t);n.tag=2,e!=null&&(n.callback=e),e=Xc(i,n,t),e!==null&&(Sa(e,i,t),Iy(e,i,t))}};function nO(i,e,t,n,s,r,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,a):e.prototype&&e.prototype.isPureReactComponent?!pv(t,n)||!pv(s,r):!0}function sO(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&uw.enqueueReplaceState(e,e.state,null)}function $f(i,e){var t=e;if("ref"in e){t={};for(var n in e)n!=="ref"&&(t[n]=e[n])}if(i=i.defaultProps){t===e&&(t=ln({},t));for(var s in i)t[s]===void 0&&(t[s]=i[s])}return t}var gS=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function P5(i){gS(i)}function U5(i){console.error(i)}function N5(i){gS(i)}function yS(i,e){try{var t=i.onUncaughtError;t(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function rO(i,e,t){try{var n=i.onCaughtError;n(t.value,{componentStack:t.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function cw(i,e,t){return t=jc(t),t.tag=3,t.payload={element:null},t.callback=function(){yS(i,e)},t}function F5(i){return i=jc(i),i.tag=3,i}function k5(i,e,t,n){var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=n.value;i.payload=function(){return s(r)},i.callback=function(){rO(e,t,n)}}var a=t.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(i.callback=function(){rO(e,t,n),typeof s!="function"&&(Wc===null?Wc=new Set([this]):Wc.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})})}function nY(i,e,t,n,s){if(t.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=t.alternate,e!==null&&u_(e,t,s,!0),t=oo.current,t!==null){switch(t.tag){case 13:return ml===null?vw():t.alternate===null&&Ln===0&&(Ln=3),t.flags&=-257,t.flags|=65536,t.lanes=s,n===iw?t.flags|=16384:(e=t.updateQueue,e===null?t.updateQueue=new Set([n]):e.add(n),G2(i,n,s)),!1;case 22:return t.flags|=65536,n===iw?t.flags|=16384:(e=t.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=e):(t=e.retryQueue,t===null?e.retryQueue=new Set([n]):t.add(n)),G2(i,n,s)),!1}throw Error(ke(435,t.tag))}return G2(i,n,s),vw(),!1}if(Mi)return e=oo.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,n!==QM&&(i=Error(ke(422),{cause:n}),mv(to(i,t)))):(n!==QM&&(e=Error(ke(423),{cause:n}),mv(to(e,t))),i=i.current.alternate,i.flags|=65536,s&=-s,i.lanes|=s,n=to(n,t),s=cw(i.stateNode,n,s),D2(i,s),Ln!==4&&(Ln=2)),!1;var r=Error(ke(520),{cause:n});if(r=to(r,t),ky===null?ky=[r]:ky.push(r),Ln!==4&&(Ln=2),e===null)return!0;n=to(n,t),t=e;do{switch(t.tag){case 3:return t.flags|=65536,i=s&-s,t.lanes|=i,i=cw(t.stateNode,n,i),D2(t,i),!1;case 1:if(e=t.type,r=t.stateNode,(t.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Wc===null||!Wc.has(r))))return t.flags|=65536,s&=-s,t.lanes|=s,s=F5(s),k5(s,i,t,n),D2(t,s),!1}t=t.return}while(t!==null);return!1}var H5=Error(ke(461)),Ts=!1;function Os(i,e,t,n){e.child=i===null?I5(e,null,t,n):qm(e,i.child,t,n)}function aO(i,e,t,n,s){t=t.render;var r=e.ref;if("ref"in n){var a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}else a=n;return Qf(e),n=ER(i,e,t,a,r,s),o=CR(),i!==null&&!Ts?(MR(i,e,s),Eu(i,e,s)):(Mi&&o&&vR(e),e.flags|=1,Os(i,e,n,s),e.child)}function oO(i,e,t,n,s){if(i===null){var r=t.type;return typeof r=="function"&&!yR(r)&&r.defaultProps===void 0&&t.compare===null?(e.tag=15,e.type=r,z5(i,e,r,n,s)):(i=LT(t.type,null,n,e,e.mode,s),i.ref=e.ref,i.return=e,e.child=i)}if(r=i.child,!UR(i,s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:pv,t(a,n)&&i.ref===e.ref)return Eu(i,e,s)}return e.flags|=1,i=yu(r,n),i.ref=e.ref,i.return=e,e.child=i}function z5(i,e,t,n,s){if(i!==null){var r=i.memoizedProps;if(pv(r,n)&&i.ref===e.ref)if(Ts=!1,e.pendingProps=n=r,UR(i,s))i.flags&131072&&(Ts=!0);else return e.lanes=i.lanes,Eu(i,e,s)}return hw(i,e,t,n,s)}function G5(i,e,t){var n=e.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden"){if(e.flags&128){if(n=r!==null?r.baseLanes|t:t,i!==null){for(s=e.child=i.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~n}else e.childLanes=0,e.child=null;return lO(i,e,n,t)}if(t&536870912)e.memoizedState={baseLanes:0,cachePool:null},i!==null&&IT(e,r!==null?r.cachePool:null),r!==null?KI(e,r):rw(),O5(e);else return e.lanes=e.childLanes=536870912,lO(i,e,r!==null?r.baseLanes|t:t,t)}else r!==null?(IT(e,r.cachePool),KI(e,r),Pc(),e.memoizedState=null):(i!==null&&IT(e,null),rw(),Pc());return Os(i,e,s,t),e.child}function lO(i,e,t,n){var s=bR();return s=s===null?null:{parent:ns._currentValue,pool:s},e.memoizedState={baseLanes:t,cachePool:s},i!==null&&IT(e,null),rw(),O5(e),i!==null&&u_(i,e,n,!0),null}function UT(i,e){var t=e.ref;if(t===null)i!==null&&i.ref!==null&&(e.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(ke(284));(i===null||i.ref!==t)&&(e.flags|=4194816)}}function hw(i,e,t,n,s){return Qf(e),t=ER(i,e,t,n,void 0,s),n=CR(),i!==null&&!Ts?(MR(i,e,s),Eu(i,e,s)):(Mi&&n&&vR(e),e.flags|=1,Os(i,e,t,s),e.child)}function uO(i,e,t,n,s,r){return Qf(e),e.updateQueue=null,t=t5(e,n,t,s),e5(i),n=CR(),i!==null&&!Ts?(MR(i,e,r),Eu(i,e,r)):(Mi&&n&&vR(e),e.flags|=1,Os(i,e,t,r),e.child)}function cO(i,e,t,n,s){if(Qf(e),e.stateNode===null){var r=im,a=t.contextType;typeof a=="object"&&a!==null&&(r=$s(a)),r=new t(n,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=uw,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=n,r.state=e.memoizedState,r.refs={},TR(e),a=t.contextType,r.context=typeof a=="object"&&a!==null?$s(a):im,r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(B2(e,t,a,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&uw.enqueueReplaceState(r,r.state,null),Py(e,n,r,s),Oy(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(i===null){r=e.stateNode;var o=e.memoizedProps,l=$f(t,o);r.props=l;var u=r.context,f=t.contextType;a=im,typeof f=="object"&&f!==null&&(a=$s(f));var d=t.getDerivedStateFromProps;f=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,f||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||u!==a)&&sO(e,r,n,a),Rc=!1;var p=e.memoizedState;r.state=p,Py(e,n,r,s),Oy(),u=e.memoizedState,o||p!==u||Rc?(typeof d=="function"&&(B2(e,t,d,n),u=e.memoizedState),(l=Rc||nO(e,t,l,n,p,u,a))?(f||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),r.props=n,r.state=u,r.context=a,n=l):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{r=e.stateNode,nw(i,e),a=e.memoizedProps,f=$f(t,a),r.props=f,d=e.pendingProps,p=r.context,u=t.contextType,l=im,typeof u=="object"&&u!==null&&(l=$s(u)),o=t.getDerivedStateFromProps,(u=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==d||p!==l)&&sO(e,r,n,l),Rc=!1,p=e.memoizedState,r.state=p,Py(e,n,r,s),Oy();var m=e.memoizedState;a!==d||p!==m||Rc||i!==null&&i.dependencies!==null&&cS(i.dependencies)?(typeof o=="function"&&(B2(e,t,o,n),m=e.memoizedState),(f=Rc||nO(e,t,f,n,p,m,l)||i!==null&&i.dependencies!==null&&cS(i.dependencies))?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,m,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,m,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),r.props=n,r.state=m,r.context=l,n=f):(typeof r.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),n=!1)}return r=n,UT(i,e),n=(e.flags&128)!==0,r||n?(r=e.stateNode,t=n&&typeof t.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,i!==null&&n?(e.child=qm(e,i.child,null,s),e.child=qm(e,null,t,s)):Os(i,e,t,s),e.memoizedState=r.state,i=e.child):i=Eu(i,e,s),i}function hO(i,e,t,n){return l_(),e.flags|=256,Os(i,e,t,n),e.child}var L2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function I2(i){return{baseLanes:i,cachePool:K8()}}function O2(i,e,t){return i=i!==null?i.childLanes&~t:0,e&&(i|=io),i}function V5(i,e,t){var n=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=i!==null&&i.memoizedState===null?!1:(ss.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,i===null){if(Mi){if(s?Oc(e):Pc(),Mi){var o=Rn,l;if(l=o){e:{for(l=o,o=ol;l.nodeType!==8;){if(!o){o=null;break e}if(l=Uo(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:Pf!==null?{id:hu,overflow:fu}:null,retryLane:536870912,hydrationErrors:null},l=ga(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Er=e,Rn=null,l=!0):l=!1}l||Jf(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Ew(o)?e.lanes=32:e.lanes=536870912,null;pu(e)}return o=n.children,n=n.fallback,s?(Pc(),s=e.mode,o=vS({mode:"hidden",children:o},s),n=Of(n,s,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,s=e.child,s.memoizedState=I2(t),s.childLanes=O2(i,a,t),e.memoizedState=L2,n):(Oc(e),fw(e,o))}if(l=i.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(r)e.flags&256?(Oc(e),e.flags&=-257,e=P2(i,e,t)):e.memoizedState!==null?(Pc(),e.child=i.child,e.flags|=128,e=null):(Pc(),s=n.fallback,o=e.mode,n=vS({mode:"visible",children:n.children},o),s=Of(s,o,t,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,qm(e,i.child,null,t),n=e.child,n.memoizedState=I2(t),n.childLanes=O2(i,a,t),e.memoizedState=L2,e=s);else if(Oc(e),Ew(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,n=Error(ke(419)),n.stack="",n.digest=a,mv({value:n,source:null,stack:null}),e=P2(i,e,t)}else if(Ts||u_(i,e,t,!1),a=(t&i.childLanes)!==0,Ts||a){if(a=Qi,a!==null&&(n=t&-t,n=n&42?1:aR(n),n=n&(a.suspendedLanes|t)?0:n,n!==0&&n!==l.retryLane))throw l.retryLane=n,Cg(i,n),Sa(a,i,n),H5;o.data==="$?"||vw(),e=P2(i,e,t)}else o.data==="$?"?(e.flags|=192,e.child=i.child,e=null):(i=l.treeContext,Rn=Uo(o.nextSibling),Er=e,Mi=!0,Uf=null,ol=!1,i!==null&&(Za[$a++]=hu,Za[$a++]=fu,Za[$a++]=Pf,hu=i.id,fu=i.overflow,Pf=e),e=fw(e,n.children),e.flags|=4096);return e}return s?(Pc(),s=n.fallback,o=e.mode,l=i.child,u=l.sibling,n=yu(l,{mode:"hidden",children:n.children}),n.subtreeFlags=l.subtreeFlags&65011712,u!==null?s=yu(u,s):(s=Of(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=i.child.memoizedState,o===null?o=I2(t):(l=o.cachePool,l!==null?(u=ns._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=K8(),o={baseLanes:o.baseLanes|t,cachePool:l}),s.memoizedState=o,s.childLanes=O2(i,a,t),e.memoizedState=L2,n):(Oc(e),t=i.child,i=t.sibling,t=yu(t,{mode:"visible",children:n.children}),t.return=e,t.sibling=null,i!==null&&(a=e.deletions,a===null?(e.deletions=[i],e.flags|=16):a.push(i)),e.child=t,e.memoizedState=null,t)}function fw(i,e){return e=vS({mode:"visible",children:e},i.mode),e.return=i,i.child=e}function vS(i,e){return i=ga(22,i,null,e),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function P2(i,e,t){return qm(e,i.child,null,t),i=fw(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function fO(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),$M(i.return,e,t)}function U2(i,e,t,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=s)}function q5(i,e,t){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(Os(i,e,n.children,t),n=ss.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fO(i,t,e);else if(i.tag===19)fO(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}switch(pn(ss,n),s){case"forwards":for(t=e.child,s=null;t!==null;)i=t.alternate,i!==null&&mS(i)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),U2(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(i=s.alternate,i!==null&&mS(i)===null){e.child=s;break}i=s.sibling,s.sibling=t,t=s,s=i}U2(e,!0,t,null,r);break;case"together":U2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eu(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),ih|=e.lanes,!(t&e.childLanes))if(i!==null){if(u_(i,e,t,!1),(t&e.childLanes)===0)return null}else return null;if(i!==null&&e.child!==i.child)throw Error(ke(153));if(e.child!==null){for(i=e.child,t=yu(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=yu(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function UR(i,e){return i.lanes&e?!0:(i=i.dependencies,!!(i!==null&&cS(i)))}function sY(i,e,t){switch(e.tag){case 3:iS(e,e.stateNode.containerInfo),Ic(e,ns,i.memoizedState.cache),l_();break;case 27:case 5:zM(e);break;case 4:iS(e,e.stateNode.containerInfo);break;case 10:Ic(e,e.type,e.memoizedProps.value);break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Oc(e),e.flags|=128,null):t&e.child.childLanes?V5(i,e,t):(Oc(e),i=Eu(i,e,t),i!==null?i.sibling:null);Oc(e);break;case 19:var s=(i.flags&128)!==0;if(n=(t&e.childLanes)!==0,n||(u_(i,e,t,!1),n=(t&e.childLanes)!==0),s){if(n)return q5(i,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pn(ss,ss.current),n)break;return null;case 22:case 23:return e.lanes=0,G5(i,e,t);case 24:Ic(e,ns,i.memoizedState.cache)}return Eu(i,e,t)}function j5(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps)Ts=!0;else{if(!UR(i,t)&&!(e.flags&128))return Ts=!1,sY(i,e,t);Ts=!!(i.flags&131072)}else Ts=!1,Mi&&e.flags&1048576&&W8(e,uS,e.index);switch(e.lanes=0,e.tag){case 16:e:{i=e.pendingProps;var n=e.elementType,s=n._init;if(n=s(n._payload),e.type=n,typeof n=="function")yR(n)?(i=$f(n,i),e.tag=1,e=cO(null,e,n,i,t)):(e.tag=0,e=hw(null,e,n,i,t));else{if(n!=null){if(s=n.$$typeof,s===nR){e.tag=11,e=aO(null,e,n,i,t);break e}else if(s===sR){e.tag=14,e=oO(null,e,n,i,t);break e}}throw e=kM(n)||n,Error(ke(306,e,""))}}return e;case 0:return hw(i,e,e.type,e.pendingProps,t);case 1:return n=e.type,s=$f(n,e.pendingProps),cO(i,e,n,s,t);case 3:e:{if(iS(e,e.stateNode.containerInfo),i===null)throw Error(ke(387));n=e.pendingProps;var r=e.memoizedState;s=r.element,nw(i,e),Py(e,n,null,t);var a=e.memoizedState;if(n=a.cache,Ic(e,ns,n),n!==r.cache&&ew(e,[ns],t,!0),Oy(),n=a.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=hO(i,e,n,t);break e}else if(n!==s){s=to(Error(ke(424)),e),mv(s),e=hO(i,e,n,t);break e}else{switch(i=e.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Rn=Uo(i.firstChild),Er=e,Mi=!0,Uf=null,ol=!0,t=I5(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(l_(),n===s){e=Eu(i,e,t);break e}Os(i,e,n,t)}e=e.child}return e;case 26:return UT(i,e),i===null?(t=DO(e.type,null,e.pendingProps,null))?e.memoizedState=t:Mi||(t=e.type,i=e.pendingProps,n=ES(qc.current).createElement(t),n[Zs]=e,n[Kr]=i,Ns(n,t,i),xs(n),e.stateNode=n):e.memoizedState=DO(e.type,i.memoizedProps,e.pendingProps,i.memoizedState),null;case 27:return zM(e),i===null&&Mi&&(n=e.stateNode=Bk(e.type,e.pendingProps,qc.current),Er=e,ol=!0,s=Rn,hh(e.type)?(Cw=s,Rn=Uo(n.firstChild)):Rn=s),Os(i,e,e.pendingProps.children,t),UT(i,e),i===null&&(e.flags|=4194304),e.child;case 5:return i===null&&Mi&&((s=n=Rn)&&(n=LY(n,e.type,e.pendingProps,ol),n!==null?(e.stateNode=n,Er=e,Rn=Uo(n.firstChild),ol=!1,s=!0):s=!1),s||Jf(e)),zM(e),s=e.type,r=e.pendingProps,a=i!==null?i.memoizedProps:null,n=r.children,Sw(s,r)?n=null:a!==null&&Sw(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=ER(i,e,JW,null,null,t),bv._currentValue=s),UT(i,e),Os(i,e,n,t),e.child;case 6:return i===null&&Mi&&((i=t=Rn)&&(t=IY(t,e.pendingProps,ol),t!==null?(e.stateNode=t,Er=e,Rn=null,i=!0):i=!1),i||Jf(e)),null;case 13:return V5(i,e,t);case 4:return iS(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=qm(e,null,n,t):Os(i,e,n,t),e.child;case 11:return aO(i,e,e.type,e.pendingProps,t);case 7:return Os(i,e,e.pendingProps,t),e.child;case 8:return Os(i,e,e.pendingProps.children,t),e.child;case 12:return Os(i,e,e.pendingProps.children,t),e.child;case 10:return n=e.pendingProps,Ic(e,e.type,n.value),Os(i,e,n.children,t),e.child;case 9:return s=e.type._context,n=e.pendingProps.children,Qf(e),s=$s(s),n=n(s),e.flags|=1,Os(i,e,n,t),e.child;case 14:return oO(i,e,e.type,e.pendingProps,t);case 15:return z5(i,e,e.type,e.pendingProps,t);case 19:return q5(i,e,t);case 31:return n=e.pendingProps,t=e.mode,n={mode:n.mode,children:n.children},i===null?(t=vS(n,t),t.ref=e.ref,e.child=t,t.return=e,e=t):(t=yu(i.child,n),t.ref=e.ref,e.child=t,t.return=e,e=t),e;case 22:return G5(i,e,t);case 24:return Qf(e),n=$s(ns),i===null?(s=bR(),s===null&&(s=Qi,r=xR(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=t),s=r),e.memoizedState={parent:n,cache:s},TR(e),Ic(e,ns,s)):(i.lanes&t&&(nw(i,e),Py(e,null,null,t),Oy()),s=i.memoizedState,r=e.memoizedState,s.parent!==n?(s={parent:n,cache:n},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Ic(e,ns,n)):(n=r.cache,Ic(e,ns,n),n!==s.cache&&ew(e,[ns],t,!0))),Os(i,e,e.pendingProps.children,t),e.child;case 29:throw e.pendingProps}throw Error(ke(156,e.tag))}function Jl(i){i.flags|=4}function dO(i,e){if(e.type!=="stylesheet"||e.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!Ok(e)){if(e=oo.current,e!==null&&((xi&4194048)===xi?ml!==null:(xi&62914560)!==xi&&!(xi&536870912)||e!==ml))throw Ly=iw,J8;i.flags|=8192}}function gb(i,e){e!==null&&(i.flags|=4),i.flags&16384&&(e=i.tag!==22?y8():536870912,i.lanes|=e,jm|=e)}function H0(i,e){if(!Mi)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function gn(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function rY(i,e,t){var n=e.pendingProps;switch(_R(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return gn(e),null;case 3:return t=e.stateNode,n=null,i!==null&&(n=i.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),vu(ns),Fm(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(i===null||i.child===null)&&(F0(e)?Jl(e):i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,VI())),gn(e),null;case 26:return t=e.memoizedState,i===null?(Jl(e),t!==null?(gn(e),dO(e,t)):(gn(e),e.flags&=-16777217)):t?t!==i.memoizedState?(Jl(e),gn(e),dO(e,t)):(gn(e),e.flags&=-16777217):(i.memoizedProps!==n&&Jl(e),gn(e),e.flags&=-16777217),null;case 27:nS(e),t=qc.current;var s=e.type;if(i!==null&&e.stateNode!=null)i.memoizedProps!==n&&Jl(e);else{if(!n){if(e.stateNode===null)throw Error(ke(166));return gn(e),null}i=dl.current,F0(e)?zI(e):(i=Bk(s,n,t),e.stateNode=i,Jl(e))}return gn(e),null;case 5:if(nS(e),t=e.type,i!==null&&e.stateNode!=null)i.memoizedProps!==n&&Jl(e);else{if(!n){if(e.stateNode===null)throw Error(ke(166));return gn(e),null}if(i=dl.current,F0(e))zI(e);else{switch(s=ES(qc.current),i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",t);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;default:switch(t){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",t);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?s.createElement(t,{is:n.is}):s.createElement(t)}}i[Zs]=e,i[Kr]=n;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=i;e:switch(Ns(i,t,n),t){case"button":case"input":case"select":case"textarea":i=!!n.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Jl(e)}}return gn(e),e.flags&=-16777217,null;case 6:if(i&&e.stateNode!=null)i.memoizedProps!==n&&Jl(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ke(166));if(i=qc.current,F0(e)){if(i=e.stateNode,t=e.memoizedProps,n=null,s=Er,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}i[Zs]=e,i=!!(i.nodeValue===t||n!==null&&n.suppressHydrationWarning===!0||wk(i.nodeValue,t)),i||Jf(e)}else i=ES(i).createTextNode(n),i[Zs]=e,e.stateNode=i}return gn(e),null;case 13:if(n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(s=F0(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[Zs]=e}else l_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),s=!1}else s=VI(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(pu(e),e):(pu(e),null)}if(pu(e),e.flags&128)return e.lanes=t,e;if(t=n!==null,i=i!==null&&i.memoizedState!==null,t){n=e.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var r=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)}return t!==i&&t&&(e.child.flags|=8192),gb(e,e.updateQueue),gn(e),null;case 4:return Fm(),i===null&&qR(e.stateNode.containerInfo),gn(e),null;case 10:return vu(e.type),gn(e),null;case 19:if(As(ss),s=e.memoizedState,s===null)return gn(e),null;if(n=(e.flags&128)!==0,r=s.rendering,r===null)if(n)H0(s,!1);else{if(Ln!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(r=mS(i),r!==null){for(e.flags|=128,H0(s,!1),i=r.updateQueue,e.updateQueue=i,gb(e,i),e.subtreeFlags=0,i=t,t=e.child;t!==null;)X8(t,i),t=t.sibling;return pn(ss,ss.current&1|2),e.child}i=i.sibling}s.tail!==null&&pl()>xS&&(e.flags|=128,n=!0,H0(s,!1),e.lanes=4194304)}else{if(!n)if(i=mS(r),i!==null){if(e.flags|=128,n=!0,i=i.updateQueue,e.updateQueue=i,gb(e,i),H0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Mi)return gn(e),null}else 2*pl()-s.renderingStartTime>xS&&t!==536870912&&(e.flags|=128,n=!0,H0(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(i=s.last,i!==null?i.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pl(),e.sibling=null,i=ss.current,pn(ss,n?i&1|2:i&1),e):(gn(e),null);case 22:case 23:return pu(e),SR(),n=e.memoizedState!==null,i!==null?i.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?t&536870912&&!(e.flags&128)&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),t=e.updateQueue,t!==null&&gb(e,t.retryQueue),t=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==t&&(e.flags|=2048),i!==null&&As(Nf),null;case 24:return t=null,i!==null&&(t=i.memoizedState.cache),e.memoizedState.cache!==t&&(e.flags|=2048),vu(ns),gn(e),null;case 25:return null;case 30:return null}throw Error(ke(156,e.tag))}function aY(i,e){switch(_R(e),e.tag){case 1:return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return vu(ns),Fm(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 26:case 27:case 5:return nS(e),null;case 13:if(pu(e),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));l_()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return As(ss),null;case 4:return Fm(),null;case 10:return vu(e.type),null;case 22:case 23:return pu(e),SR(),i!==null&&As(Nf),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 24:return vu(ns),null;case 25:return null;default:return null}}function X5(i,e){switch(_R(e),e.tag){case 3:vu(ns),Fm();break;case 26:case 27:case 5:nS(e);break;case 4:Fm();break;case 13:pu(e);break;case 19:As(ss);break;case 10:vu(e.type);break;case 22:case 23:pu(e),SR(),i!==null&&As(Nf);break;case 24:vu(ns)}}function p_(i,e){try{var t=e.updateQueue,n=t!==null?t.lastEffect:null;if(n!==null){var s=n.next;t=s;do{if((t.tag&i)===i){n=void 0;var r=t.create,a=t.inst;n=r(),a.destroy=n}t=t.next}while(t!==s)}}catch(o){ji(e,e.return,o)}}function th(i,e,t){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&i)===i){var a=n.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,s=e;var l=t,u=o;try{u()}catch(f){ji(s,l,f)}}}n=n.next}while(n!==r)}}catch(f){ji(e,e.return,f)}}function W5(i){var e=i.updateQueue;if(e!==null){var t=i.stateNode;try{$8(e,t)}catch(n){ji(i,i.return,n)}}}function Y5(i,e,t){t.props=$f(i.type,i.memoizedProps),t.state=i.memoizedState;try{t.componentWillUnmount()}catch(n){ji(i,e,n)}}function Ny(i,e){try{var t=i.ref;if(t!==null){switch(i.tag){case 26:case 27:case 5:var n=i.stateNode;break;case 30:n=i.stateNode;break;default:n=i.stateNode}typeof t=="function"?i.refCleanup=t(n):t.current=n}}catch(s){ji(i,e,s)}}function ll(i,e){var t=i.ref,n=i.refCleanup;if(t!==null)if(typeof n=="function")try{n()}catch(s){ji(i,e,s)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(s){ji(i,e,s)}else t.current=null}function K5(i){var e=i.type,t=i.memoizedProps,n=i.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(s){ji(i,i.return,s)}}function N2(i,e,t){try{var n=i.stateNode;MY(n,i.type,t,e),n[Kr]=e}catch(s){ji(i,i.return,s)}}function J5(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&hh(i.type)||i.tag===4}function F2(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||J5(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&hh(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dw(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(i,e):(e=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,e.appendChild(i),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gA));else if(n!==4&&(n===27&&hh(i.type)&&(t=i.stateNode,e=null),i=i.child,i!==null))for(dw(i,e,t),i=i.sibling;i!==null;)dw(i,e,t),i=i.sibling}function _S(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(n===27&&hh(i.type)&&(t=i.stateNode),i=i.child,i!==null))for(_S(i,e,t),i=i.sibling;i!==null;)_S(i,e,t),i=i.sibling}function Q5(i){var e=i.stateNode,t=i.memoizedProps;try{for(var n=i.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Ns(e,n,t),e[Zs]=i,e[Kr]=t}catch(r){ji(i,i.return,r)}}var au=!1,kn=!1,k2=!1,pO=typeof WeakSet=="function"?WeakSet:Set,vs=null;function oY(i,e){if(i=i.containerInfo,bw=DS,i=F8(i),pR(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,f=0,d=i,p=null;t:for(;;){for(var m;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==r||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===i)break t;if(p===t&&++u===s&&(o=a),p===r&&++f===n&&(l=a),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Tw={focusedElem:i,selectionRange:t},DS=!1,vs=e;vs!==null;)if(e=vs,i=e.child,(e.subtreeFlags&1024)!==0&&i!==null)i.return=e,vs=i;else for(;vs!==null;){switch(e=vs,r=e.alternate,i=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&r!==null){i=void 0,t=e,s=r.memoizedProps,r=r.memoizedState,n=t.stateNode;try{var _=$f(t.type,s,t.elementType===t.type);i=n.getSnapshotBeforeUpdate(_,r),n.__reactInternalSnapshotBeforeUpdate=i}catch(x){ji(t,t.return,x)}}break;case 3:if(i&1024){if(i=e.stateNode.containerInfo,t=i.nodeType,t===9)Aw(i);else if(t===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Aw(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(ke(163))}if(i=e.sibling,i!==null){i.return=e.return,vs=i;break}vs=e.return}}function Z5(i,e,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:fc(i,t),n&4&&p_(5,t);break;case 1:if(fc(i,t),n&4)if(i=t.stateNode,e===null)try{i.componentDidMount()}catch(a){ji(t,t.return,a)}else{var s=$f(t.type,e.memoizedProps);e=e.memoizedState;try{i.componentDidUpdate(s,e,i.__reactInternalSnapshotBeforeUpdate)}catch(a){ji(t,t.return,a)}}n&64&&W5(t),n&512&&Ny(t,t.return);break;case 3:if(fc(i,t),n&64&&(i=t.updateQueue,i!==null)){if(e=null,t.child!==null)switch(t.child.tag){case 27:case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}try{$8(i,e)}catch(a){ji(t,t.return,a)}}break;case 27:e===null&&n&4&&Q5(t);case 26:case 5:fc(i,t),e===null&&n&4&&K5(t),n&512&&Ny(t,t.return);break;case 12:fc(i,t);break;case 13:fc(i,t),n&4&&tk(i,t),n&64&&(i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(t=gY.bind(null,t),OY(i,t))));break;case 22:if(n=t.memoizedState!==null||au,!n){e=e!==null&&e.memoizedState!==null||kn,s=au;var r=kn;au=n,(kn=e)&&!r?Mc(i,t,(t.subtreeFlags&8772)!==0):fc(i,t),au=s,kn=r}break;case 30:break;default:fc(i,t)}}function $5(i){var e=i.alternate;e!==null&&(i.alternate=null,$5(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&lR(e)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var un=null,Hr=!1;function Ql(i,e,t){for(t=t.child;t!==null;)ek(i,e,t),t=t.sibling}function ek(i,e,t){if(xa&&typeof xa.onCommitFiberUnmount=="function")try{xa.onCommitFiberUnmount(n_,t)}catch{}switch(t.tag){case 26:kn||ll(t,e),Ql(i,e,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:kn||ll(t,e);var n=un,s=Hr;hh(t.type)&&(un=t.stateNode,Hr=!1),Ql(i,e,t),zy(t.stateNode),un=n,Hr=s;break;case 5:kn||ll(t,e);case 6:if(n=un,s=Hr,un=null,Ql(i,e,t),un=n,Hr=s,un!==null)if(Hr)try{(un.nodeType===9?un.body:un.nodeName==="HTML"?un.ownerDocument.body:un).removeChild(t.stateNode)}catch(r){ji(t,e,r)}else try{un.removeChild(t.stateNode)}catch(r){ji(t,e,r)}break;case 18:un!==null&&(Hr?(i=un,CO(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.stateNode),Av(i)):CO(un,t.stateNode));break;case 4:n=un,s=Hr,un=t.stateNode.containerInfo,Hr=!0,Ql(i,e,t),un=n,Hr=s;break;case 0:case 11:case 14:case 15:kn||th(2,t,e),kn||th(4,t,e),Ql(i,e,t);break;case 1:kn||(ll(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"&&Y5(t,e,n)),Ql(i,e,t);break;case 21:Ql(i,e,t);break;case 22:kn=(n=kn)||t.memoizedState!==null,Ql(i,e,t),kn=n;break;default:Ql(i,e,t)}}function tk(i,e){if(e.memoizedState===null&&(i=e.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Av(i)}catch(t){ji(e,e.return,t)}}function lY(i){switch(i.tag){case 13:case 19:var e=i.stateNode;return e===null&&(e=i.stateNode=new pO),e;case 22:return i=i.stateNode,e=i._retryCache,e===null&&(e=i._retryCache=new pO),e;default:throw Error(ke(435,i.tag))}}function H2(i,e){var t=lY(i);e.forEach(function(n){var s=yY.bind(null,i,n);t.has(n)||(t.add(n),n.then(s,s))})}function ua(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n],r=i,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(hh(o.type)){un=o.stateNode,Hr=!1;break e}break;case 5:un=o.stateNode,Hr=!1;break e;case 3:case 4:un=o.stateNode.containerInfo,Hr=!0;break e}o=o.return}if(un===null)throw Error(ke(160));ek(r,a,s),un=null,Hr=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)ik(e,i),e=e.sibling}var Lo=null;function ik(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ua(e,i),ca(i),n&4&&(th(3,i,i.return),p_(3,i),th(5,i,i.return));break;case 1:ua(e,i),ca(i),n&512&&(kn||t===null||ll(t,t.return)),n&64&&au&&(i=i.updateQueue,i!==null&&(n=i.callbacks,n!==null&&(t=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=t===null?n:t.concat(n))));break;case 26:var s=Lo;if(ua(e,i),ca(i),n&512&&(kn||t===null||ll(t,t.return)),n&4){var r=t!==null?t.memoizedState:null;if(n=i.memoizedState,t===null)if(n===null)if(i.stateNode===null){e:{n=i.type,t=i.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":r=s.getElementsByTagName("title")[0],(!r||r[a_]||r[Zs]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Ns(r,n,t),r[Zs]=i,xs(r),n=r;break e;case"link":var a=BO("link","href",s).get(n+(t.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&r.getAttribute("rel")===(t.rel==null?null:t.rel)&&r.getAttribute("title")===(t.title==null?null:t.title)&&r.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){a.splice(o,1);break t}}r=s.createElement(n),Ns(r,n,t),s.head.appendChild(r);break;case"meta":if(a=BO("meta","content",s).get(n+(t.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(t.content==null?null:""+t.content)&&r.getAttribute("name")===(t.name==null?null:t.name)&&r.getAttribute("property")===(t.property==null?null:t.property)&&r.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&r.getAttribute("charset")===(t.charSet==null?null:t.charSet)){a.splice(o,1);break t}}r=s.createElement(n),Ns(r,n,t),s.head.appendChild(r);break;default:throw Error(ke(468,n))}r[Zs]=i,xs(r),n=r}i.stateNode=n}else LO(s,i.type,i.stateNode);else i.stateNode=RO(s,n,i.memoizedProps);else r!==n?(r===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):r.count--,n===null?LO(s,i.type,i.stateNode):RO(s,n,i.memoizedProps)):n===null&&i.stateNode!==null&&N2(i,i.memoizedProps,t.memoizedProps)}break;case 27:ua(e,i),ca(i),n&512&&(kn||t===null||ll(t,t.return)),t!==null&&n&4&&N2(i,i.memoizedProps,t.memoizedProps);break;case 5:if(ua(e,i),ca(i),n&512&&(kn||t===null||ll(t,t.return)),i.flags&32){s=i.stateNode;try{Hm(s,"")}catch(m){ji(i,i.return,m)}}n&4&&i.stateNode!=null&&(s=i.memoizedProps,N2(i,s,t!==null?t.memoizedProps:s)),n&1024&&(k2=!0);break;case 6:if(ua(e,i),ca(i),n&4){if(i.stateNode===null)throw Error(ke(162));n=i.memoizedProps,t=i.stateNode;try{t.nodeValue=n}catch(m){ji(i,i.return,m)}}break;case 3:if(kT=null,s=Lo,Lo=CS(e.containerInfo),ua(e,i),Lo=s,ca(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Av(e.containerInfo)}catch(m){ji(i,i.return,m)}k2&&(k2=!1,nk(i));break;case 4:n=Lo,Lo=CS(i.stateNode.containerInfo),ua(e,i),ca(i),Lo=n;break;case 12:ua(e,i),ca(i);break;case 13:ua(e,i),ca(i),i.child.flags&8192&&i.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(zR=pl()),n&4&&(n=i.updateQueue,n!==null&&(i.updateQueue=null,H2(i,n)));break;case 22:s=i.memoizedState!==null;var l=t!==null&&t.memoizedState!==null,u=au,f=kn;if(au=u||s,kn=f||l,ua(e,i),kn=f,au=u,ca(i),n&8192)e:for(e=i.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(t===null||l||au||kn||df(i)),t=null,e=i;;){if(e.tag===5||e.tag===26){if(t===null){l=t=e;try{if(r=l.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,p=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){ji(l,l.return,m)}}}else if(e.tag===6){if(t===null){l=e;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(m){ji(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===i)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;t===e&&(t=null),e=e.return}t===e&&(t=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=i.updateQueue,n!==null&&(t=n.retryQueue,t!==null&&(n.retryQueue=null,H2(i,t))));break;case 19:ua(e,i),ca(i),n&4&&(n=i.updateQueue,n!==null&&(i.updateQueue=null,H2(i,n)));break;case 30:break;case 21:break;default:ua(e,i),ca(i)}}function ca(i){var e=i.flags;if(e&2){try{for(var t,n=i.return;n!==null;){if(J5(n)){t=n;break}n=n.return}if(t==null)throw Error(ke(160));switch(t.tag){case 27:var s=t.stateNode,r=F2(i);_S(i,r,s);break;case 5:var a=t.stateNode;t.flags&32&&(Hm(a,""),t.flags&=-33);var o=F2(i);_S(i,o,a);break;case 3:case 4:var l=t.stateNode.containerInfo,u=F2(i);dw(i,u,l);break;default:throw Error(ke(161))}}catch(f){ji(i,i.return,f)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function nk(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var e=i;nk(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),i=i.sibling}}function fc(i,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Z5(i,e.alternate,e),e=e.sibling}function df(i){for(i=i.child;i!==null;){var e=i;switch(e.tag){case 0:case 11:case 14:case 15:th(4,e,e.return),df(e);break;case 1:ll(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&Y5(e,e.return,t),df(e);break;case 27:zy(e.stateNode);case 26:case 5:ll(e,e.return),df(e);break;case 22:e.memoizedState===null&&df(e);break;case 30:df(e);break;default:df(e)}i=i.sibling}}function Mc(i,e,t){for(t=t&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,s=i,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:Mc(s,r,t),p_(4,r);break;case 1:if(Mc(s,r,t),n=r,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){ji(n,n.return,u)}if(n=r,s=n.updateQueue,s!==null){var o=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Z8(l[s],o)}catch(u){ji(n,n.return,u)}}t&&a&64&&W5(r),Ny(r,r.return);break;case 27:Q5(r);case 26:case 5:Mc(s,r,t),t&&n===null&&a&4&&K5(r),Ny(r,r.return);break;case 12:Mc(s,r,t);break;case 13:Mc(s,r,t),t&&a&4&&tk(s,r);break;case 22:r.memoizedState===null&&Mc(s,r,t),Ny(r,r.return);break;case 30:break;default:Mc(s,r,t)}e=e.sibling}}function NR(i,e){var t=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==t&&(i!=null&&i.refCount++,t!=null&&c_(t))}function FR(i,e){i=null,e.alternate!==null&&(i=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==i&&(e.refCount++,i!=null&&c_(i))}function il(i,e,t,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sk(i,e,t,n),e=e.sibling}function sk(i,e,t,n){var s=e.flags;switch(e.tag){case 0:case 11:case 15:il(i,e,t,n),s&2048&&p_(9,e);break;case 1:il(i,e,t,n);break;case 3:il(i,e,t,n),s&2048&&(i=null,e.alternate!==null&&(i=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==i&&(e.refCount++,i!=null&&c_(i)));break;case 12:if(s&2048){il(i,e,t,n),i=e.stateNode;try{var r=e.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(l){ji(e,e.return,l)}}else il(i,e,t,n);break;case 13:il(i,e,t,n);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?il(i,e,t,n):Fy(i,e):r._visibility&2?il(i,e,t,n):(r._visibility|=2,Xp(i,e,t,n,(e.subtreeFlags&10256)!==0)),s&2048&&NR(a,e);break;case 24:il(i,e,t,n),s&2048&&FR(e.alternate,e);break;default:il(i,e,t,n)}}function Xp(i,e,t,n,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=i,a=e,o=t,l=n,u=a.flags;switch(a.tag){case 0:case 11:case 15:Xp(r,a,o,l,s),p_(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?Xp(r,a,o,l,s):Fy(r,a):(f._visibility|=2,Xp(r,a,o,l,s)),s&&u&2048&&NR(a.alternate,a);break;case 24:Xp(r,a,o,l,s),s&&u&2048&&FR(a.alternate,a);break;default:Xp(r,a,o,l,s)}e=e.sibling}}function Fy(i,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var t=i,n=e,s=n.flags;switch(n.tag){case 22:Fy(t,n),s&2048&&NR(n.alternate,n);break;case 24:Fy(t,n),s&2048&&FR(n.alternate,n);break;default:Fy(t,n)}e=e.sibling}}var my=8192;function pp(i){if(i.subtreeFlags&my)for(i=i.child;i!==null;)rk(i),i=i.sibling}function rk(i){switch(i.tag){case 26:pp(i),i.flags&my&&i.memoizedState!==null&&WY(Lo,i.memoizedState,i.memoizedProps);break;case 5:pp(i);break;case 3:case 4:var e=Lo;Lo=CS(i.stateNode.containerInfo),pp(i),Lo=e;break;case 22:i.memoizedState===null&&(e=i.alternate,e!==null&&e.memoizedState!==null?(e=my,my=16777216,pp(i),my=e):pp(i));break;default:pp(i)}}function ak(i){var e=i.alternate;if(e!==null&&(i=e.child,i!==null)){e.child=null;do e=i.sibling,i.sibling=null,i=e;while(i!==null)}}function z0(i){var e=i.deletions;if(i.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var n=e[t];vs=n,lk(n,i)}ak(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ok(i),i=i.sibling}function ok(i){switch(i.tag){case 0:case 11:case 15:z0(i),i.flags&2048&&th(9,i,i.return);break;case 3:z0(i);break;case 12:z0(i);break;case 22:var e=i.stateNode;i.memoizedState!==null&&e._visibility&2&&(i.return===null||i.return.tag!==13)?(e._visibility&=-3,NT(i)):z0(i);break;default:z0(i)}}function NT(i){var e=i.deletions;if(i.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var n=e[t];vs=n,lk(n,i)}ak(i)}for(i=i.child;i!==null;){switch(e=i,e.tag){case 0:case 11:case 15:th(8,e,e.return),NT(e);break;case 22:t=e.stateNode,t._visibility&2&&(t._visibility&=-3,NT(e));break;default:NT(e)}i=i.sibling}}function lk(i,e){for(;vs!==null;){var t=vs;switch(t.tag){case 0:case 11:case 15:th(8,t,e);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var n=t.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:c_(t.memoizedState.cache)}if(n=t.child,n!==null)n.return=t,vs=n;else e:for(t=i;vs!==null;){n=vs;var s=n.sibling,r=n.return;if($5(n),n===t){vs=null;break e}if(s!==null){s.return=r,vs=s;break e}vs=r}}}var uY={getCacheForType:function(i){var e=$s(ns),t=e.data.get(i);return t===void 0&&(t=i(),e.data.set(i,t)),t}},cY=typeof WeakMap=="function"?WeakMap:Map,Fi=0,Qi=null,ai=null,xi=0,Ni=0,ma=null,zc=!1,Mg=!1,kR=!1,Cu=0,Ln=0,ih=0,Ff=0,HR=0,io=0,jm=0,ky=null,Gr=null,pw=!1,zR=0,xS=1/0,bS=null,Wc=null,Us=0,Yc=null,Xm=null,Em=0,mw=0,gw=null,uk=null,Hy=0,yw=null;function Ta(){if(Fi&2&&xi!==0)return xi&-xi;if(Nt.T!==null){var i=zm;return i!==0?i:VR()}return x8()}function ck(){io===0&&(io=!(xi&536870912)||Mi?g8():536870912);var i=oo.current;return i!==null&&(i.flags|=32),io}function Sa(i,e,t){(i===Qi&&(Ni===2||Ni===9)||i.cancelPendingCommit!==null)&&(Wm(i,0),Gc(i,xi,io,!1)),r_(i,t),(!(Fi&2)||i!==Qi)&&(i===Qi&&(!(Fi&2)&&(Ff|=t),Ln===4&&Gc(i,xi,io,!1)),Dl(i))}function hk(i,e,t){if(Fi&6)throw Error(ke(327));var n=!t&&(e&124)===0&&(e&i.expiredLanes)===0||s_(i,e),s=n?dY(i,e):z2(i,e,!0),r=n;do{if(s===0){Mg&&!n&&Gc(i,e,0,!1);break}else{if(t=i.current.alternate,r&&!hY(t)){s=z2(i,e,!1),r=!1;continue}if(s===2){if(r=e,i.errorRecoveryDisabledLanes&r)var a=0;else a=i.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=i;s=ky;var l=o.current.memoizedState.isDehydrated;if(l&&(Wm(o,a).flags|=256),a=z2(o,a,!1),a!==2){if(kR&&!l){o.errorRecoveryDisabledLanes|=r,Ff|=r,s=4;break e}r=Gr,Gr=s,r!==null&&(Gr===null?Gr=r:Gr.push.apply(Gr,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Wm(i,0),Gc(i,e,0,!0);break}e:{switch(n=i,r=s,r){case 0:case 1:throw Error(ke(345));case 4:if((e&4194048)!==e)break;case 6:Gc(n,e,io,!zc);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(ke(329))}if((e&62914560)===e&&(s=zR+300-pl(),10<s)){if(Gc(n,e,io,!zc),nA(n,0,!0)!==0)break e;n.timeoutHandle=Rk(mO.bind(null,n,t,Gr,bS,pw,e,io,Ff,jm,zc,r,2,-0,0),s);break e}mO(n,t,Gr,bS,pw,e,io,Ff,jm,zc,r,0,-0,0)}}break}while(1);Dl(i)}function mO(i,e,t,n,s,r,a,o,l,u,f,d,p,m){if(i.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(xv={stylesheets:null,count:0,unsuspend:XY},rk(e),d=YY(),d!==null)){i.cancelPendingCommit=d(yO.bind(null,i,e,r,t,n,s,a,o,l,f,1,p,m)),Gc(i,r,a,!u);return}yO(i,e,r,t,n,s,a,o,l)}function hY(i){for(var e=i;;){var t=e.tag;if((t===0||t===11||t===15)&&e.flags&16384&&(t=e.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var n=0;n<t.length;n++){var s=t[n],r=s.getSnapshot;s=s.value;try{if(!Ea(r(),s))return!1}catch{return!1}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gc(i,e,t,n){e&=~HR,e&=~Ff,i.suspendedLanes|=e,i.pingedLanes&=~e,n&&(i.warmLanes|=e),n=i.expirationTimes;for(var s=e;0<s;){var r=31-ba(s),a=1<<r;n[r]=-1,s&=~a}t!==0&&v8(i,t,e)}function dA(){return Fi&6?!0:(m_(0,!1),!1)}function GR(){if(ai!==null){if(Ni===0)var i=ai.return;else i=ai,du=pd=null,wR(i),Am=null,yv=0,i=ai;for(;i!==null;)X5(i.alternate,i),i=i.return;ai=null}}function Wm(i,e){var t=i.timeoutHandle;t!==-1&&(i.timeoutHandle=-1,DY(t)),t=i.cancelPendingCommit,t!==null&&(i.cancelPendingCommit=null,t()),GR(),Qi=i,ai=t=yu(i.current,null),xi=e,Ni=0,ma=null,zc=!1,Mg=s_(i,e),kR=!1,jm=io=HR=Ff=ih=Ln=0,Gr=ky=null,pw=!1,e&8&&(e|=e&32);var n=i.entangledLanes;if(n!==0)for(i=i.entanglements,n&=e;0<n;){var s=31-ba(n),r=1<<s;e|=i[s],n&=~r}return Cu=e,oA(),t}function fk(i,e){ii=null,Nt.H=pS,e===h_||e===uA?(e=WI(),Ni=3):e===J8?(e=WI(),Ni=4):Ni=e===H5?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ma=e,ai===null&&(Ln=1,yS(i,to(e,i.current)))}function dk(){var i=Nt.H;return Nt.H=pS,i===null?pS:i}function pk(){var i=Nt.A;return Nt.A=uY,i}function vw(){Ln=4,zc||(xi&4194048)!==xi&&oo.current!==null||(Mg=!0),!(ih&134217727)&&!(Ff&134217727)||Qi===null||Gc(Qi,xi,io,!1)}function z2(i,e,t){var n=Fi;Fi|=2;var s=dk(),r=pk();(Qi!==i||xi!==e)&&(bS=null,Wm(i,e)),e=!1;var a=Ln;e:do try{if(Ni!==0&&ai!==null){var o=ai,l=ma;switch(Ni){case 8:GR(),a=6;break e;case 3:case 2:case 9:case 6:oo.current===null&&(e=!0);var u=Ni;if(Ni=0,ma=null,rm(i,o,l,u),t&&Mg){a=0;break e}break;default:u=Ni,Ni=0,ma=null,rm(i,o,l,u)}}fY(),a=Ln;break}catch(f){fk(i,f)}while(1);return e&&i.shellSuspendCounter++,du=pd=null,Fi=n,Nt.H=s,Nt.A=r,ai===null&&(Qi=null,xi=0,oA()),a}function fY(){for(;ai!==null;)mk(ai)}function dY(i,e){var t=Fi;Fi|=2;var n=dk(),s=pk();Qi!==i||xi!==e?(bS=null,xS=pl()+500,Wm(i,e)):Mg=s_(i,e);e:do try{if(Ni!==0&&ai!==null){e=ai;var r=ma;t:switch(Ni){case 1:Ni=0,ma=null,rm(i,e,r,1);break;case 2:case 9:if(XI(r)){Ni=0,ma=null,gO(e);break}e=function(){Ni!==2&&Ni!==9||Qi!==i||(Ni=7),Dl(i)},r.then(e,e);break e;case 3:Ni=7;break e;case 4:Ni=5;break e;case 7:XI(r)?(Ni=0,ma=null,gO(e)):(Ni=0,ma=null,rm(i,e,r,7));break;case 5:var a=null;switch(ai.tag){case 26:a=ai.memoizedState;case 5:case 27:var o=ai;if(!a||Ok(a)){Ni=0,ma=null;var l=o.sibling;if(l!==null)ai=l;else{var u=o.return;u!==null?(ai=u,pA(u)):ai=null}break t}}Ni=0,ma=null,rm(i,e,r,5);break;case 6:Ni=0,ma=null,rm(i,e,r,6);break;case 8:GR(),Ln=6;break e;default:throw Error(ke(462))}}pY();break}catch(f){fk(i,f)}while(1);return du=pd=null,Nt.H=n,Nt.A=s,Fi=t,ai!==null?0:(Qi=null,xi=0,oA(),Ln)}function pY(){for(;ai!==null&&!UX();)mk(ai)}function mk(i){var e=j5(i.alternate,i,Cu);i.memoizedProps=i.pendingProps,e===null?pA(i):ai=e}function gO(i){var e=i,t=e.alternate;switch(e.tag){case 15:case 0:e=uO(t,e,e.pendingProps,e.type,void 0,xi);break;case 11:e=uO(t,e,e.pendingProps,e.type.render,e.ref,xi);break;case 5:wR(e);default:X5(t,e),e=ai=X8(e,Cu),e=j5(t,e,Cu)}i.memoizedProps=i.pendingProps,e===null?pA(i):ai=e}function rm(i,e,t,n){du=pd=null,wR(e),Am=null,yv=0;var s=e.return;try{if(nY(i,s,e,t,xi)){Ln=1,yS(i,to(t,i.current)),ai=null;return}}catch(r){if(s!==null)throw ai=s,r;Ln=1,yS(i,to(t,i.current)),ai=null;return}e.flags&32768?(Mi||n===1?i=!0:Mg||xi&536870912?i=!1:(zc=i=!0,(n===2||n===9||n===3||n===6)&&(n=oo.current,n!==null&&n.tag===13&&(n.flags|=16384))),gk(e,i)):pA(e)}function pA(i){var e=i;do{if(e.flags&32768){gk(e,zc);return}i=e.return;var t=rY(e.alternate,e,Cu);if(t!==null){ai=t;return}if(e=e.sibling,e!==null){ai=e;return}ai=e=i}while(e!==null);Ln===0&&(Ln=5)}function gk(i,e){do{var t=aY(i.alternate,i);if(t!==null){t.flags&=32767,ai=t;return}if(t=i.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!e&&(i=i.sibling,i!==null)){ai=i;return}ai=i=t}while(i!==null);Ln=6,ai=null}function yO(i,e,t,n,s,r,a,o,l){i.cancelPendingCommit=null;do mA();while(Us!==0);if(Fi&6)throw Error(ke(327));if(e!==null){if(e===i.current)throw Error(ke(177));if(r=e.lanes|e.childLanes,r|=mR,XX(i,t,r,a,o,l),i===Qi&&(ai=Qi=null,xi=0),Xm=e,Yc=i,Em=t,mw=r,gw=s,uk=n,e.subtreeFlags&10256||e.flags&10256?(i.callbackNode=null,i.callbackPriority=0,vY(sS,function(){return bk(),null})):(i.callbackNode=null,i.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=Nt.T,Nt.T=null,s=wi.p,wi.p=2,a=Fi,Fi|=4;try{oY(i,e,t)}finally{Fi=a,wi.p=s,Nt.T=n}}Us=1,yk(),vk(),_k()}}function yk(){if(Us===1){Us=0;var i=Yc,e=Xm,t=(e.flags&13878)!==0;if(e.subtreeFlags&13878||t){t=Nt.T,Nt.T=null;var n=wi.p;wi.p=2;var s=Fi;Fi|=4;try{ik(e,i);var r=Tw,a=F8(i.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&N8(o.ownerDocument.documentElement,o)){if(l!==null&&pR(o)){var u=l.start,f=l.end;if(f===void 0&&(f=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(f,o.value.length);else{var d=o.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var m=p.getSelection(),_=o.textContent.length,x=Math.min(l.start,_),b=l.end===void 0?x:Math.min(l.end,_);!m.extend&&x>b&&(a=b,b=x,x=a);var v=FI(o,x),T=FI(o,b);if(v&&T&&(m.rangeCount!==1||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==T.node||m.focusOffset!==T.offset)){var A=d.createRange();A.setStart(v.node,v.offset),m.removeAllRanges(),x>b?(m.addRange(A),m.extend(T.node,T.offset)):(A.setEnd(T.node,T.offset),m.addRange(A))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}DS=!!bw,Tw=bw=null}finally{Fi=s,wi.p=n,Nt.T=t}}i.current=e,Us=2}}function vk(){if(Us===2){Us=0;var i=Yc,e=Xm,t=(e.flags&8772)!==0;if(e.subtreeFlags&8772||t){t=Nt.T,Nt.T=null;var n=wi.p;wi.p=2;var s=Fi;Fi|=4;try{Z5(i,e.alternate,e)}finally{Fi=s,wi.p=n,Nt.T=t}}Us=3}}function _k(){if(Us===4||Us===3){Us=0,NX();var i=Yc,e=Xm,t=Em,n=uk;e.subtreeFlags&10256||e.flags&10256?Us=5:(Us=0,Xm=Yc=null,xk(i,i.pendingLanes));var s=i.pendingLanes;if(s===0&&(Wc=null),oR(t),e=e.stateNode,xa&&typeof xa.onCommitFiberRoot=="function")try{xa.onCommitFiberRoot(n_,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=Nt.T,s=wi.p,wi.p=2,Nt.T=null;try{for(var r=i.onRecoverableError,a=0;a<n.length;a++){var o=n[a];r(o.value,{componentStack:o.stack})}}finally{Nt.T=e,wi.p=s}}Em&3&&mA(),Dl(i),s=i.pendingLanes,t&4194090&&s&42?i===yw?Hy++:(Hy=0,yw=i):Hy=0,m_(0,!1)}}function xk(i,e){(i.pooledCacheLanes&=e)===0&&(e=i.pooledCache,e!=null&&(i.pooledCache=null,c_(e)))}function mA(i){return yk(),vk(),_k(),bk()}function bk(){if(Us!==5)return!1;var i=Yc,e=mw;mw=0;var t=oR(Em),n=Nt.T,s=wi.p;try{wi.p=32>t?32:t,Nt.T=null,t=gw,gw=null;var r=Yc,a=Em;if(Us=0,Xm=Yc=null,Em=0,Fi&6)throw Error(ke(331));var o=Fi;if(Fi|=4,ok(r.current),sk(r,r.current,a,t),Fi=o,m_(0,!1),xa&&typeof xa.onPostCommitFiberRoot=="function")try{xa.onPostCommitFiberRoot(n_,r)}catch{}return!0}finally{wi.p=s,Nt.T=n,xk(i,e)}}function vO(i,e,t){e=to(t,e),e=cw(i.stateNode,e,2),i=Xc(i,e,2),i!==null&&(r_(i,2),Dl(i))}function ji(i,e,t){if(i.tag===3)vO(i,i,t);else for(;e!==null;){if(e.tag===3){vO(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Wc===null||!Wc.has(n))){i=to(t,i),t=F5(2),n=Xc(e,t,2),n!==null&&(k5(t,n,e,i),r_(n,2),Dl(n));break}}e=e.return}}function G2(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new cY;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(kR=!0,s.add(t),i=mY.bind(null,i,e,t),e.then(i,i))}function mY(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),i.pingedLanes|=i.suspendedLanes&t,i.warmLanes&=~t,Qi===i&&(xi&t)===t&&(Ln===4||Ln===3&&(xi&62914560)===xi&&300>pl()-zR?!(Fi&2)&&Wm(i,0):HR|=t,jm===xi&&(jm=0)),Dl(i)}function Tk(i,e){e===0&&(e=y8()),i=Cg(i,e),i!==null&&(r_(i,e),Dl(i))}function gY(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Tk(i,t)}function yY(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=i.stateNode;break;case 22:n=i.stateNode._retryCache;break;default:throw Error(ke(314))}n!==null&&n.delete(e),Tk(i,t)}function vY(i,e){return rR(i,e)}var TS=null,Wp=null,_w=!1,SS=!1,V2=!1,kf=0;function Dl(i){i!==Wp&&i.next===null&&(Wp===null?TS=Wp=i:Wp=Wp.next=i),SS=!0,_w||(_w=!0,xY())}function m_(i,e){if(!V2&&SS){V2=!0;do for(var t=!1,n=TS;n!==null;){if(!e)if(i!==0){var s=n.pendingLanes;if(s===0)var r=0;else{var a=n.suspendedLanes,o=n.pingedLanes;r=(1<<31-ba(42|i)+1)-1,r&=s&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(t=!0,_O(n,r))}else r=xi,r=nA(n,n===Qi?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(r&3)||s_(n,r)||(t=!0,_O(n,r));n=n.next}while(t);V2=!1}}function _Y(){Sk()}function Sk(){SS=_w=!1;var i=0;kf!==0&&(wY()&&(i=kf),kf=0);for(var e=pl(),t=null,n=TS;n!==null;){var s=n.next,r=Ak(n,e);r===0?(n.next=null,t===null?TS=s:t.next=s,s===null&&(Wp=t)):(t=n,(i!==0||r&3)&&(SS=!0)),n=s}m_(i,!1)}function Ak(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes&-62914561;0<r;){var a=31-ba(r),o=1<<a,l=s[a];l===-1?(!(o&t)||o&n)&&(s[a]=jX(o,e)):l<=e&&(i.expiredLanes|=o),r&=~o}if(e=Qi,t=xi,t=nA(i,i===e?t:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),n=i.callbackNode,t===0||i===e&&(Ni===2||Ni===9)||i.cancelPendingCommit!==null)return n!==null&&n!==null&&m2(n),i.callbackNode=null,i.callbackPriority=0;if(!(t&3)||s_(i,t)){if(e=t&-t,e===i.callbackPriority)return e;switch(n!==null&&m2(n),oR(t)){case 2:case 8:t=p8;break;case 32:t=sS;break;case 268435456:t=m8;break;default:t=sS}return n=Ek.bind(null,i),t=rR(t,n),i.callbackPriority=e,i.callbackNode=t,e}return n!==null&&n!==null&&m2(n),i.callbackPriority=2,i.callbackNode=null,2}function Ek(i,e){if(Us!==0&&Us!==5)return i.callbackNode=null,i.callbackPriority=0,null;var t=i.callbackNode;if(mA()&&i.callbackNode!==t)return null;var n=xi;return n=nA(i,i===Qi?n:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),n===0?null:(hk(i,n,e),Ak(i,pl()),i.callbackNode!=null&&i.callbackNode===t?Ek.bind(null,i):null)}function _O(i,e){if(mA())return null;hk(i,e,!0)}function xY(){RY(function(){Fi&6?rR(d8,_Y):Sk()})}function VR(){return kf===0&&(kf=g8()),kf}function xO(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:DT(""+i)}function bO(i,e){var t=e.ownerDocument.createElement("input");return t.name=e.name,t.value=e.value,i.id&&t.setAttribute("form",i.id),e.parentNode.insertBefore(t,e),i=new FormData(i),t.parentNode.removeChild(t),i}function bY(i,e,t,n,s){if(e==="submit"&&t&&t.stateNode===s){var r=xO((s[Kr]||null).action),a=n.submitter;a&&(e=(e=a[Kr]||null)?xO(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var o=new sA("action","action",null,n,s);i.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(kf!==0){var l=a?bO(s,a):new FormData(s);lw(t,{pending:!0,data:l,method:s.method,action:r},null,l)}}else typeof r=="function"&&(o.preventDefault(),l=a?bO(s,a):new FormData(s),lw(t,{pending:!0,data:l,method:s.method,action:r},r,l))},currentTarget:s}]})}}for(var q2=0;q2<JM.length;q2++){var j2=JM[q2],TY=j2.toLowerCase(),SY=j2[0].toUpperCase()+j2.slice(1);Go(TY,"on"+SY)}Go(H8,"onAnimationEnd");Go(z8,"onAnimationIteration");Go(G8,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(HW,"onTransitionRun");Go(zW,"onTransitionStart");Go(GW,"onTransitionCancel");Go(V8,"onTransitionEnd");km("onMouseEnter",["mouseout","mouseover"]);km("onMouseLeave",["mouseout","mouseover"]);km("onPointerEnter",["pointerout","pointerover"]);km("onPointerLeave",["pointerout","pointerover"]);hd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hd("onBeforeInput",["compositionend","keypress","textInput","paste"]);hd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vv));function Ck(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],s=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(f){gS(f)}s.currentTarget=null,r=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(f){gS(f)}s.currentTarget=null,r=l}}}}function ri(i,e){var t=e[VM];t===void 0&&(t=e[VM]=new Set);var n=i+"__bubble";t.has(n)||(Mk(e,i,2,!1),t.add(n))}function X2(i,e,t){var n=0;e&&(n|=4),Mk(t,i,n,e)}var yb="_reactListening"+Math.random().toString(36).slice(2);function qR(i){if(!i[yb]){i[yb]=!0,b8.forEach(function(t){t!=="selectionchange"&&(AY.has(t)||X2(t,!1,i),X2(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[yb]||(e[yb]=!0,X2("selectionchange",!1,e))}}function Mk(i,e,t,n){switch(kk(e)){case 2:var s=QY;break;case 8:s=ZY;break;default:s=YR}t=s.bind(null,e,t,i),s=void 0,!WM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(e,t,{capture:!0,passive:s}):i.addEventListener(e,t,!0):s!==void 0?i.addEventListener(e,t,{passive:s}):i.addEventListener(e,t,!1)}function W2(i,e,t,n,s){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;o!==null;){if(a=Jp(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){n=r=a;continue e}o=o.parentNode}}n=n.return}D8(function(){var u=r,f=cR(t),d=[];e:{var p=q8.get(i);if(p!==void 0){var m=sA,_=i;switch(i){case"keypress":if(BT(t)===0)break e;case"keydown":case"keyup":m=vW;break;case"focusin":_="focus",m=S2;break;case"focusout":_="blur",m=S2;break;case"beforeblur":case"afterblur":m=S2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=wI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bW;break;case H8:case z8:case G8:m=uW;break;case V8:m=SW;break;case"scroll":case"scrollend":m=sW;break;case"wheel":m=EW;break;case"copy":case"cut":case"paste":m=hW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RI;break;case"toggle":case"beforetoggle":m=MW}var x=(e&4)!==0,b=!x&&(i==="scroll"||i==="scrollend"),v=x?p!==null?p+"Capture":null:p;x=[];for(var T=u,A;T!==null;){var w=T;if(A=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||A===null||v===null||(w=fv(T,v),w!=null&&x.push(_v(T,w,A))),b)break;T=T.return}0<x.length&&(p=new m(p,_,null,t,f),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=i==="mouseover"||i==="pointerover",m=i==="mouseout"||i==="pointerout",p&&t!==XM&&(_=t.relatedTarget||t.fromElement)&&(Jp(_)||_[Ag]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=t.relatedTarget||t.toElement,m=u,_=_?Jp(_):null,_!==null&&(b=i_(_),x=_.tag,_!==b||x!==5&&x!==27&&x!==6)&&(_=null)):(m=null,_=u),m!==_)){if(x=wI,w="onMouseLeave",v="onMouseEnter",T="mouse",(i==="pointerout"||i==="pointerover")&&(x=RI,w="onPointerLeave",v="onPointerEnter",T="pointer"),b=m==null?p:py(m),A=_==null?p:py(_),p=new x(w,T+"leave",m,t,f),p.target=b,p.relatedTarget=A,w=null,Jp(f)===u&&(x=new x(v,T+"enter",_,t,f),x.target=A,x.relatedTarget=b,w=x),b=w,m&&_)t:{for(x=m,v=_,T=0,A=x;A;A=mp(A))T++;for(A=0,w=v;w;w=mp(w))A++;for(;0<T-A;)x=mp(x),T--;for(;0<A-T;)v=mp(v),A--;for(;T--;){if(x===v||v!==null&&x===v.alternate)break t;x=mp(x),v=mp(v)}x=null}else x=null;m!==null&&TO(d,p,m,x,!1),_!==null&&b!==null&&TO(d,b,_,x,!0)}}e:{if(p=u?py(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var B=OI;else if(II(p))if(P8)B=NW;else{B=PW;var I=OW}else m=p.nodeName,!m||m.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?u&&uR(u.elementType)&&(B=OI):B=UW;if(B&&(B=B(i,u))){O8(d,B,t,f);break e}I&&I(i,p,u),i==="focusout"&&u&&p.type==="number"&&u.memoizedProps.value!=null&&jM(p,"number",p.value)}switch(I=u?py(u):window,i){case"focusin":(II(I)||I.contentEditable==="true")&&($p=I,YM=u,Ry=null);break;case"focusout":Ry=YM=$p=null;break;case"mousedown":KM=!0;break;case"contextmenu":case"mouseup":case"dragend":KM=!1,kI(d,t,f);break;case"selectionchange":if(kW)break;case"keydown":case"keyup":kI(d,t,f)}var P;if(dR)e:{switch(i){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Zp?L8(i,t)&&(F="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(F="onCompositionStart");F&&(B8&&t.locale!=="ko"&&(Zp||F!=="onCompositionStart"?F==="onCompositionEnd"&&Zp&&(P=R8()):(Hc=f,hR="value"in Hc?Hc.value:Hc.textContent,Zp=!0)),I=AS(u,F),0<I.length&&(F=new DI(F,i,null,t,f),d.push({event:F,listeners:I}),P?F.data=P:(P=I8(t),P!==null&&(F.data=P)))),(P=DW?RW(i,t):BW(i,t))&&(F=AS(u,"onBeforeInput"),0<F.length&&(I=new DI("onBeforeInput","beforeinput",null,t,f),d.push({event:I,listeners:F}),I.data=P)),bY(d,i,u,t,f)}Ck(d,e)})}function _v(i,e,t){return{instance:i,listener:e,currentTarget:t}}function AS(i,e){for(var t=e+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=fv(i,t),s!=null&&n.unshift(_v(i,s,r)),s=fv(i,e),s!=null&&n.push(_v(i,s,r))),i.tag===3)return n;i=i.return}return[]}function mp(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function TO(i,e,t,n,s){for(var r=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===n)break;o!==5&&o!==26&&o!==27||u===null||(l=u,s?(u=fv(t,r),u!=null&&a.unshift(_v(t,u,l))):s||(u=fv(t,r),u!=null&&a.push(_v(t,u,l)))),t=t.return}a.length!==0&&i.push({event:e,listeners:a})}var EY=/\r\n?/g,CY=/\u0000|\uFFFD/g;function SO(i){return(typeof i=="string"?i:""+i).replace(EY,`
`).replace(CY,"")}function wk(i,e){return e=SO(e),SO(i)===e}function gA(){}function Gi(i,e,t,n,s,r){switch(t){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||Hm(i,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&Hm(i,""+n);break;case"className":cb(i,"class",n);break;case"tabIndex":cb(i,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":cb(i,t,n);break;case"style":w8(i,n,r);break;case"data":if(e!=="object"){cb(i,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||t!=="href")){i.removeAttribute(t);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){i.removeAttribute(t);break}n=DT(""+n),i.setAttribute(t,n);break;case"action":case"formAction":if(typeof n=="function"){i.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(t==="formAction"?(e!=="input"&&Gi(i,e,"name",s.name,s,null),Gi(i,e,"formEncType",s.formEncType,s,null),Gi(i,e,"formMethod",s.formMethod,s,null),Gi(i,e,"formTarget",s.formTarget,s,null)):(Gi(i,e,"encType",s.encType,s,null),Gi(i,e,"method",s.method,s,null),Gi(i,e,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){i.removeAttribute(t);break}n=DT(""+n),i.setAttribute(t,n);break;case"onClick":n!=null&&(i.onclick=gA);break;case"onScroll":n!=null&&ri("scroll",i);break;case"onScrollEnd":n!=null&&ri("scrollend",i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(ke(61));if(t=n.__html,t!=null){if(s.children!=null)throw Error(ke(60));i.innerHTML=t}}break;case"multiple":i.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":i.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){i.removeAttribute("xlink:href");break}t=DT(""+n),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(t,""+n):i.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(t,""):i.removeAttribute(t);break;case"capture":case"download":n===!0?i.setAttribute(t,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(t,n):i.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?i.setAttribute(t,n):i.removeAttribute(t);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?i.removeAttribute(t):i.setAttribute(t,n);break;case"popover":ri("beforetoggle",i),ri("toggle",i),wT(i,"popover",n);break;case"xlinkActuate":Kl(i,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Kl(i,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Kl(i,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Kl(i,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Kl(i,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Kl(i,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Kl(i,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Kl(i,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Kl(i,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":wT(i,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=iW.get(t)||t,wT(i,t,n))}}function xw(i,e,t,n,s,r){switch(t){case"style":w8(i,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(ke(61));if(t=n.__html,t!=null){if(s.children!=null)throw Error(ke(60));i.innerHTML=t}}break;case"children":typeof n=="string"?Hm(i,n):(typeof n=="number"||typeof n=="bigint")&&Hm(i,""+n);break;case"onScroll":n!=null&&ri("scroll",i);break;case"onScrollEnd":n!=null&&ri("scrollend",i);break;case"onClick":n!=null&&(i.onclick=gA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!T8.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(s=t.endsWith("Capture"),e=t.slice(2,s?t.length-7:void 0),r=i[Kr]||null,r=r!=null?r[t]:null,typeof r=="function"&&i.removeEventListener(e,r,s),typeof n=="function")){typeof r!="function"&&r!==null&&(t in i?i[t]=null:i.hasAttribute(t)&&i.removeAttribute(t)),i.addEventListener(e,n,s);break e}t in i?i[t]=n:n===!0?i.setAttribute(t,""):wT(i,t,n)}}}function Ns(i,e,t){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ri("error",i),ri("load",i);var n=!1,s=!1,r;for(r in t)if(t.hasOwnProperty(r)){var a=t[r];if(a!=null)switch(r){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ke(137,e));default:Gi(i,e,r,a,t,null)}}s&&Gi(i,e,"srcSet",t.srcSet,t,null),n&&Gi(i,e,"src",t.src,t,null);return;case"input":ri("invalid",i);var o=r=a=s=null,l=null,u=null;for(n in t)if(t.hasOwnProperty(n)){var f=t[n];if(f!=null)switch(n){case"name":s=f;break;case"type":a=f;break;case"checked":l=f;break;case"defaultChecked":u=f;break;case"value":r=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ke(137,e));break;default:Gi(i,e,n,f,t,null)}}E8(i,r,o,l,u,a,s,!1),rS(i);return;case"select":ri("invalid",i),n=a=r=null;for(s in t)if(t.hasOwnProperty(s)&&(o=t[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":n=o;default:Gi(i,e,s,o,t,null)}e=r,t=a,i.multiple=!!n,e!=null?_m(i,!!n,e,!1):t!=null&&_m(i,!!n,t,!0);return;case"textarea":ri("invalid",i),r=s=n=null;for(a in t)if(t.hasOwnProperty(a)&&(o=t[a],o!=null))switch(a){case"value":n=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(ke(91));break;default:Gi(i,e,a,o,t,null)}M8(i,n,s,r),rS(i);return;case"option":for(l in t)if(t.hasOwnProperty(l)&&(n=t[l],n!=null))switch(l){case"selected":i.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Gi(i,e,l,n,t,null)}return;case"dialog":ri("beforetoggle",i),ri("toggle",i),ri("cancel",i),ri("close",i);break;case"iframe":case"object":ri("load",i);break;case"video":case"audio":for(n=0;n<vv.length;n++)ri(vv[n],i);break;case"image":ri("error",i),ri("load",i);break;case"details":ri("toggle",i);break;case"embed":case"source":case"link":ri("error",i),ri("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in t)if(t.hasOwnProperty(u)&&(n=t[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(ke(137,e));default:Gi(i,e,u,n,t,null)}return;default:if(uR(e)){for(f in t)t.hasOwnProperty(f)&&(n=t[f],n!==void 0&&xw(i,e,f,n,t,void 0));return}}for(o in t)t.hasOwnProperty(o)&&(n=t[o],n!=null&&Gi(i,e,o,n,t,null))}function MY(i,e,t,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,o=null,l=null,u=null,f=null;for(m in t){var d=t[m];if(t.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=d;default:n.hasOwnProperty(m)||Gi(i,e,m,null,n,d)}}for(var p in n){var m=n[p];if(d=t[p],n.hasOwnProperty(p)&&(m!=null||d!=null))switch(p){case"type":r=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":a=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(ke(137,e));break;default:m!==d&&Gi(i,e,p,m,n,d)}}qM(i,a,o,l,u,f,r,s);return;case"select":m=a=o=p=null;for(r in t)if(l=t[r],t.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":m=l;default:n.hasOwnProperty(r)||Gi(i,e,r,null,n,l)}for(s in n)if(r=n[s],l=t[s],n.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":p=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==l&&Gi(i,e,s,r,n,l)}e=o,t=a,n=m,p!=null?_m(i,!!t,p,!1):!!n!=!!t&&(e!=null?_m(i,!!t,e,!0):_m(i,!!t,t?[]:"",!1));return;case"textarea":m=p=null;for(o in t)if(s=t[o],t.hasOwnProperty(o)&&s!=null&&!n.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Gi(i,e,o,null,n,s)}for(a in n)if(s=n[a],r=t[a],n.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(ke(91));break;default:s!==r&&Gi(i,e,a,s,n,r)}C8(i,p,m);return;case"option":for(var _ in t)if(p=t[_],t.hasOwnProperty(_)&&p!=null&&!n.hasOwnProperty(_))switch(_){case"selected":i.selected=!1;break;default:Gi(i,e,_,null,n,p)}for(l in n)if(p=n[l],m=t[l],n.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Gi(i,e,l,p,n,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in t)p=t[x],t.hasOwnProperty(x)&&p!=null&&!n.hasOwnProperty(x)&&Gi(i,e,x,null,n,p);for(u in n)if(p=n[u],m=t[u],n.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(ke(137,e));break;default:Gi(i,e,u,p,n,m)}return;default:if(uR(e)){for(var b in t)p=t[b],t.hasOwnProperty(b)&&p!==void 0&&!n.hasOwnProperty(b)&&xw(i,e,b,void 0,n,p);for(f in n)p=n[f],m=t[f],!n.hasOwnProperty(f)||p===m||p===void 0&&m===void 0||xw(i,e,f,p,n,m);return}}for(var v in t)p=t[v],t.hasOwnProperty(v)&&p!=null&&!n.hasOwnProperty(v)&&Gi(i,e,v,null,n,p);for(d in n)p=n[d],m=t[d],!n.hasOwnProperty(d)||p===m||p==null&&m==null||Gi(i,e,d,p,n,m)}var bw=null,Tw=null;function ES(i){return i.nodeType===9?i:i.ownerDocument}function AO(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dk(i,e){if(i===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&e==="foreignObject"?0:i}function Sw(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y2=null;function wY(){var i=window.event;return i&&i.type==="popstate"?i===Y2?!1:(Y2=i,!0):(Y2=null,!1)}var Rk=typeof setTimeout=="function"?setTimeout:void 0,DY=typeof clearTimeout=="function"?clearTimeout:void 0,EO=typeof Promise=="function"?Promise:void 0,RY=typeof queueMicrotask=="function"?queueMicrotask:typeof EO<"u"?function(i){return EO.resolve(null).then(i).catch(BY)}:Rk;function BY(i){setTimeout(function(){throw i})}function hh(i){return i==="head"}function CO(i,e){var t=e,n=0,s=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(0<n&&8>n){t=n;var a=i.ownerDocument;if(t&1&&zy(a.documentElement),t&2&&zy(a.body),t&4)for(t=a.head,zy(t),a=t.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[a_]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||t.removeChild(a),a=o}}if(s===0){i.removeChild(r),Av(e);return}s--}else t==="$"||t==="$?"||t==="$!"?s++:n=t.charCodeAt(0)-48;else n=0;t=r}while(t);Av(e)}function Aw(i){var e=i.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var t=e;switch(e=e.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":Aw(t),lR(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}i.removeChild(t)}}function LY(i,e,t,n){for(;i.nodeType===1;){var s=t;if(i.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(n){if(!i[a_])switch(e){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(r=i.getAttribute("rel"),r==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(r!==s.rel||i.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||i.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||i.getAttribute("title")!==(s.title==null?null:s.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(r=i.getAttribute("src"),(r!==(s.src==null?null:s.src)||i.getAttribute("type")!==(s.type==null?null:s.type)||i.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(e==="input"&&i.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&i.getAttribute("name")===r)return i}else return i;if(i=Uo(i.nextSibling),i===null)break}return null}function IY(i,e,t){if(e==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!t||(i=Uo(i.nextSibling),i===null))return null;return i}function Ew(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function OY(i,e){var t=i.ownerDocument;if(i.data!=="$?"||t.readyState==="complete")e();else{var n=function(){e(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),i._reactRetry=n}}function Uo(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return i}var Cw=null;function MO(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}function Bk(i,e,t){switch(e=ES(t),i){case"html":if(i=e.documentElement,!i)throw Error(ke(452));return i;case"head":if(i=e.head,!i)throw Error(ke(453));return i;case"body":if(i=e.body,!i)throw Error(ke(454));return i;default:throw Error(ke(451))}}function zy(i){for(var e=i.attributes;e.length;)i.removeAttributeNode(e[0]);lR(i)}var lo=new Map,wO=new Set;function CS(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Uu=wi.d;wi.d={f:PY,r:UY,D:NY,C:FY,L:kY,m:HY,X:GY,S:zY,M:VY};function PY(){var i=Uu.f(),e=dA();return i||e}function UY(i){var e=Eg(i);e!==null&&e.tag===5&&e.type==="form"?A5(e):Uu.r(i)}var wg=typeof document>"u"?null:document;function Lk(i,e,t){var n=wg;if(n&&typeof e=="string"&&e){var s=eo(e);s='link[rel="'+i+'"][href="'+s+'"]',typeof t=="string"&&(s+='[crossorigin="'+t+'"]'),wO.has(s)||(wO.add(s),i={rel:i,crossOrigin:t,href:e},n.querySelector(s)===null&&(e=n.createElement("link"),Ns(e,"link",i),xs(e),n.head.appendChild(e)))}}function NY(i){Uu.D(i),Lk("dns-prefetch",i,null)}function FY(i,e){Uu.C(i,e),Lk("preconnect",i,e)}function kY(i,e,t){Uu.L(i,e,t);var n=wg;if(n&&i&&e){var s='link[rel="preload"][as="'+eo(e)+'"]';e==="image"&&t&&t.imageSrcSet?(s+='[imagesrcset="'+eo(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(s+='[imagesizes="'+eo(t.imageSizes)+'"]')):s+='[href="'+eo(i)+'"]';var r=s;switch(e){case"style":r=Ym(i);break;case"script":r=Dg(i)}lo.has(r)||(i=ln({rel:"preload",href:e==="image"&&t&&t.imageSrcSet?void 0:i,as:e},t),lo.set(r,i),n.querySelector(s)!==null||e==="style"&&n.querySelector(g_(r))||e==="script"&&n.querySelector(y_(r))||(e=n.createElement("link"),Ns(e,"link",i),xs(e),n.head.appendChild(e)))}}function HY(i,e){Uu.m(i,e);var t=wg;if(t&&i){var n=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+eo(n)+'"][href="'+eo(i)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Dg(i)}if(!lo.has(r)&&(i=ln({rel:"modulepreload",href:i},e),lo.set(r,i),t.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(y_(r)))return}n=t.createElement("link"),Ns(n,"link",i),xs(n),t.head.appendChild(n)}}}function zY(i,e,t){Uu.S(i,e,t);var n=wg;if(n&&i){var s=vm(n).hoistableStyles,r=Ym(i);e=e||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=n.querySelector(g_(r)))o.loading=5;else{i=ln({rel:"stylesheet",href:i,"data-precedence":e},t),(t=lo.get(r))&&jR(i,t);var l=a=n.createElement("link");xs(l),Ns(l,"link",i),l._p=new Promise(function(u,f){l.onload=u,l.onerror=f}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,FT(a,e,n)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}}function GY(i,e){Uu.X(i,e);var t=wg;if(t&&i){var n=vm(t).hoistableScripts,s=Dg(i),r=n.get(s);r||(r=t.querySelector(y_(s)),r||(i=ln({src:i,async:!0},e),(e=lo.get(s))&&XR(i,e),r=t.createElement("script"),xs(r),Ns(r,"link",i),t.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function VY(i,e){Uu.M(i,e);var t=wg;if(t&&i){var n=vm(t).hoistableScripts,s=Dg(i),r=n.get(s);r||(r=t.querySelector(y_(s)),r||(i=ln({src:i,async:!0,type:"module"},e),(e=lo.get(s))&&XR(i,e),r=t.createElement("script"),xs(r),Ns(r,"link",i),t.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function DO(i,e,t,n){var s=(s=qc.current)?CS(s):null;if(!s)throw Error(ke(446));switch(i){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(e=Ym(t.href),t=vm(s).hoistableStyles,n=t.get(e),n||(n={type:"style",instance:null,count:0,state:null},t.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){i=Ym(t.href);var r=vm(s).hoistableStyles,a=r.get(i);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(i,a),(r=s.querySelector(g_(i)))&&!r._p&&(a.instance=r,a.state.loading=5),lo.has(i)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},lo.set(i,t),r||qY(s,i,t,a.state))),e&&n===null)throw Error(ke(528,""));return a}if(e&&n!==null)throw Error(ke(529,""));return null;case"script":return e=t.async,t=t.src,typeof t=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Dg(t),t=vm(s).hoistableScripts,n=t.get(e),n||(n={type:"script",instance:null,count:0,state:null},t.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(ke(444,i))}}function Ym(i){return'href="'+eo(i)+'"'}function g_(i){return'link[rel="stylesheet"]['+i+"]"}function Ik(i){return ln({},i,{"data-precedence":i.precedence,precedence:null})}function qY(i,e,t,n){i.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=i.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),Ns(e,"link",t),xs(e),i.head.appendChild(e))}function Dg(i){return'[src="'+eo(i)+'"]'}function y_(i){return"script[async]"+i}function RO(i,e,t){if(e.count++,e.instance===null)switch(e.type){case"style":var n=i.querySelector('style[data-href~="'+eo(t.href)+'"]');if(n)return e.instance=n,xs(n),n;var s=ln({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return n=(i.ownerDocument||i).createElement("style"),xs(n),Ns(n,"style",s),FT(n,t.precedence,i),e.instance=n;case"stylesheet":s=Ym(t.href);var r=i.querySelector(g_(s));if(r)return e.state.loading|=4,e.instance=r,xs(r),r;n=Ik(t),(s=lo.get(s))&&jR(n,s),r=(i.ownerDocument||i).createElement("link"),xs(r);var a=r;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Ns(r,"link",n),e.state.loading|=4,FT(r,t.precedence,i),e.instance=r;case"script":return r=Dg(t.src),(s=i.querySelector(y_(r)))?(e.instance=s,xs(s),s):(n=t,(s=lo.get(r))&&(n=ln({},t),XR(n,s)),i=i.ownerDocument||i,s=i.createElement("script"),xs(s),Ns(s,"link",n),i.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(ke(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,FT(n,t.precedence,i));return e.instance}function FT(i,e,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,a=0;a<n.length;a++){var o=n[a];if(o.dataset.precedence===e)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(i,r.nextSibling):(e=t.nodeType===9?t.head:t,e.insertBefore(i,e.firstChild))}function jR(i,e){i.crossOrigin==null&&(i.crossOrigin=e.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=e.referrerPolicy),i.title==null&&(i.title=e.title)}function XR(i,e){i.crossOrigin==null&&(i.crossOrigin=e.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=e.referrerPolicy),i.integrity==null&&(i.integrity=e.integrity)}var kT=null;function BO(i,e,t){if(kT===null){var n=new Map,s=kT=new Map;s.set(t,n)}else s=kT,n=s.get(t),n||(n=new Map,s.set(t,n));if(n.has(i))return n;for(n.set(i,null),t=t.getElementsByTagName(i),s=0;s<t.length;s++){var r=t[s];if(!(r[a_]||r[Zs]||i==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=i+a;var o=n.get(a);o?o.push(r):n.set(a,[r])}}return n}function LO(i,e,t){i=i.ownerDocument||i,i.head.insertBefore(t,e==="title"?i.querySelector("head > title"):null)}function jY(i,e,t){if(t===1||e.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return i=e.disabled,typeof e.precedence=="string"&&i==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Ok(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var xv=null;function XY(){}function WY(i,e,t){if(xv===null)throw Error(ke(475));var n=xv;if(e.type==="stylesheet"&&(typeof t.media!="string"||matchMedia(t.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=Ym(t.href),r=i.querySelector(g_(s));if(r){i=r._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=MS.bind(n),i.then(n,n)),e.state.loading|=4,e.instance=r,xs(r);return}r=i.ownerDocument||i,t=Ik(t),(s=lo.get(s))&&jR(t,s),r=r.createElement("link"),xs(r);var a=r;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Ns(r,"link",t),e.instance=r}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(e,i),(i=e.state.preload)&&!(e.state.loading&3)&&(n.count++,e=MS.bind(n),i.addEventListener("load",e),i.addEventListener("error",e))}}function YY(){if(xv===null)throw Error(ke(475));var i=xv;return i.stylesheets&&i.count===0&&Mw(i,i.stylesheets),0<i.count?function(e){var t=setTimeout(function(){if(i.stylesheets&&Mw(i,i.stylesheets),i.unsuspend){var n=i.unsuspend;i.unsuspend=null,n()}},6e4);return i.unsuspend=e,function(){i.unsuspend=null,clearTimeout(t)}}:null}function MS(){if(this.count--,this.count===0){if(this.stylesheets)Mw(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wS=null;function Mw(i,e){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wS=new Map,e.forEach(KY,i),wS=null,MS.call(i))}function KY(i,e){if(!(e.state.loading&4)){var t=wS.get(i);if(t)var n=t.get(null);else{t=new Map,wS.set(i,t);for(var s=i.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(t.set(a.dataset.precedence,a),n=a)}n&&t.set(null,n)}s=e.instance,a=s.getAttribute("data-precedence"),r=t.get(a)||n,r===n&&t.set(null,s),t.set(a,s),this.count++,n=MS.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(s,i.firstChild)),e.state.loading|=4}}var bv={$$typeof:cu,Provider:null,Consumer:null,_currentValue:If,_currentValue2:If,_threadCount:0};function JY(i,e,t,n,s,r,a,o){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=g2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g2(0),this.hiddenUpdates=g2(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Pk(i,e,t,n,s,r,a,o,l,u,f,d){return i=new JY(i,e,t,a,o,l,u,d),e=1,r===!0&&(e|=24),r=ga(3,null,null,e),i.current=r,r.stateNode=i,e=xR(),e.refCount++,i.pooledCache=e,e.refCount++,r.memoizedState={element:n,isDehydrated:t,cache:e},TR(r),i}function Uk(i){return i?(i=im,i):im}function Nk(i,e,t,n,s,r){s=Uk(s),n.context===null?n.context=s:n.pendingContext=s,n=jc(e),n.payload={element:t},r=r===void 0?null:r,r!==null&&(n.callback=r),t=Xc(i,n,e),t!==null&&(Sa(t,i,e),Iy(t,i,e))}function IO(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function WR(i,e){IO(i,e),(i=i.alternate)&&IO(i,e)}function Fk(i){if(i.tag===13){var e=Cg(i,67108864);e!==null&&Sa(e,i,67108864),WR(i,67108864)}}var DS=!0;function QY(i,e,t,n){var s=Nt.T;Nt.T=null;var r=wi.p;try{wi.p=2,YR(i,e,t,n)}finally{wi.p=r,Nt.T=s}}function ZY(i,e,t,n){var s=Nt.T;Nt.T=null;var r=wi.p;try{wi.p=8,YR(i,e,t,n)}finally{wi.p=r,Nt.T=s}}function YR(i,e,t,n){if(DS){var s=ww(n);if(s===null)W2(i,e,n,RS,t),OO(i,n);else if(eK(s,i,e,t,n))n.stopPropagation();else if(OO(i,n),e&4&&-1<$Y.indexOf(i)){for(;s!==null;){var r=Eg(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=hf(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ba(a);o.entanglements[1]|=l,a&=~l}Dl(r),!(Fi&6)&&(xS=pl()+500,m_(0,!1))}}break;case 13:o=Cg(r,2),o!==null&&Sa(o,r,2),dA(),WR(r,2)}if(r=ww(n),r===null&&W2(i,e,n,RS,t),r===s)break;s=r}s!==null&&n.stopPropagation()}else W2(i,e,n,null,t)}}function ww(i){return i=cR(i),KR(i)}var RS=null;function KR(i){if(RS=null,i=Jp(i),i!==null){var e=i_(i);if(e===null)i=null;else{var t=e.tag;if(t===13){if(i=u8(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null)}}return RS=i,null}function kk(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(FX()){case d8:return 2;case p8:return 8;case sS:case kX:return 32;case m8:return 268435456;default:return 32}default:return 32}}var Dw=!1,Kc=null,Jc=null,Qc=null,Tv=new Map,Sv=new Map,Uc=[],$Y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OO(i,e){switch(i){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Qc=null;break;case"pointerover":case"pointerout":Tv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sv.delete(e.pointerId)}}function G0(i,e,t,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Eg(e),e!==null&&Fk(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),i)}function eK(i,e,t,n,s){switch(e){case"focusin":return Kc=G0(Kc,i,e,t,n,s),!0;case"dragenter":return Jc=G0(Jc,i,e,t,n,s),!0;case"mouseover":return Qc=G0(Qc,i,e,t,n,s),!0;case"pointerover":var r=s.pointerId;return Tv.set(r,G0(Tv.get(r)||null,i,e,t,n,s)),!0;case"gotpointercapture":return r=s.pointerId,Sv.set(r,G0(Sv.get(r)||null,i,e,t,n,s)),!0}return!1}function Hk(i){var e=Jp(i.target);if(e!==null){var t=i_(e);if(t!==null){if(e=t.tag,e===13){if(e=u8(t),e!==null){i.blockedOn=e,WX(i.priority,function(){if(t.tag===13){var n=Ta();n=aR(n);var s=Cg(t,n);s!==null&&Sa(s,t,n),WR(t,n)}});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function HT(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=ww(i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);XM=n,t.target.dispatchEvent(n),XM=null}else return e=Eg(t),e!==null&&Fk(e),i.blockedOn=t,!1;e.shift()}return!0}function PO(i,e,t){HT(i)&&t.delete(e)}function tK(){Dw=!1,Kc!==null&&HT(Kc)&&(Kc=null),Jc!==null&&HT(Jc)&&(Jc=null),Qc!==null&&HT(Qc)&&(Qc=null),Tv.forEach(PO),Sv.forEach(PO)}function vb(i,e){i.blockedOn===e&&(i.blockedOn=null,Dw||(Dw=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,tK)))}var _b=null;function UO(i){_b!==i&&(_b=i,os.unstable_scheduleCallback(os.unstable_NormalPriority,function(){_b===i&&(_b=null);for(var e=0;e<i.length;e+=3){var t=i[e],n=i[e+1],s=i[e+2];if(typeof n!="function"){if(KR(n||t)===null)continue;break}var r=Eg(t);r!==null&&(i.splice(e,3),e-=3,lw(r,{pending:!0,data:s,method:t.method,action:n},n,s))}}))}function Av(i){function e(l){return vb(l,i)}Kc!==null&&vb(Kc,i),Jc!==null&&vb(Jc,i),Qc!==null&&vb(Qc,i),Tv.forEach(e),Sv.forEach(e);for(var t=0;t<Uc.length;t++){var n=Uc[t];n.blockedOn===i&&(n.blockedOn=null)}for(;0<Uc.length&&(t=Uc[0],t.blockedOn===null);)Hk(t),t.blockedOn===null&&Uc.shift();if(t=(i.ownerDocument||i).$$reactFormReplay,t!=null)for(n=0;n<t.length;n+=3){var s=t[n],r=t[n+1],a=s[Kr]||null;if(typeof r=="function")a||UO(t);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Kr]||null)o=a.formAction;else if(KR(s)!==null)continue}else o=a.action;typeof o=="function"?t[n+1]=o:(t.splice(n,3),n-=3),UO(t)}}}function JR(i){this._internalRoot=i}yA.prototype.render=JR.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(ke(409));var t=e.current,n=Ta();Nk(t,n,i,e,null,null)};yA.prototype.unmount=JR.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Nk(i.current,2,null,i,null,null),dA(),e[Ag]=null}};function yA(i){this._internalRoot=i}yA.prototype.unstable_scheduleHydration=function(i){if(i){var e=x8();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Uc.length&&e!==0&&e<Uc[t].priority;t++);Uc.splice(t,0,i),t===0&&Hk(i)}};var NO=o8.version;if(NO!=="19.1.0")throw Error(ke(527,NO,"19.1.0"));wi.findDOMNode=function(i){var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(ke(188)):(i=Object.keys(i).join(","),Error(ke(268,i)));return i=BX(e),i=i!==null?c8(i):null,i=i===null?null:i.stateNode,i};var iK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Nt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xb.isDisabled&&xb.supportsFiber)try{n_=xb.inject(iK),xa=xb}catch{}}tA.createRoot=function(i,e){if(!l8(i))throw Error(ke(299));var t=!1,n="",s=P5,r=U5,a=N5,o=null;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=Pk(i,1,!1,null,null,t,n,s,r,a,o,null),i[Ag]=e.current,qR(i),new JR(e)};tA.hydrateRoot=function(i,e,t){if(!l8(i))throw Error(ke(299));var n=!1,s="",r=P5,a=U5,o=N5,l=null,u=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks),t.formState!==void 0&&(u=t.formState)),e=Pk(i,1,!0,e,t??null,n,s,r,a,o,l,u),e.context=Uk(null),t=e.current,n=Ta(),n=aR(n),s=jc(n),s.callback=null,Xc(t,s,n),t=n,e.current.lanes=t,r_(e,t),Dl(e),i[Ag]=e.current,qR(i),new yA(e)};tA.version="19.1.0";function zk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zk)}catch(i){console.error(i)}}zk(),t8.exports=tA;var Gk=t8.exports;const nK=Pu(Gk);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function BS(){return BS=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},BS.apply(this,arguments)}var Tf;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Tf||(Tf={}));const FO="popstate";function sK(i){i===void 0&&(i={});function e(n,s){let{pathname:r,search:a,hash:o}=n.location;return Rw("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:qk(s)}return aK(e,t,null,i)}function Vk(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function rK(){return Math.random().toString(36).substr(2,8)}function kO(i,e){return{usr:i.state,key:i.key,idx:e}}function Rw(i,e,t,n){return t===void 0&&(t=null),BS({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?jk(e):e,{state:t,key:e&&e.key||n||rK()})}function qk(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function jk(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function aK(i,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:r=!1}=n,a=s.history,o=Tf.Pop,l=null,u=f();u==null&&(u=0,a.replaceState(BS({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function d(){o=Tf.Pop;let b=f(),v=b==null?null:b-u;u=b,l&&l({action:o,location:x.location,delta:v})}function p(b,v){o=Tf.Push;let T=Rw(x.location,b,v);t&&t(T,b),u=f()+1;let A=kO(T,u),w=x.createHref(T);try{a.pushState(A,"",w)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(w)}r&&l&&l({action:o,location:x.location,delta:1})}function m(b,v){o=Tf.Replace;let T=Rw(x.location,b,v);t&&t(T,b),u=f();let A=kO(T,u),w=x.createHref(T);a.replaceState(A,"",w),r&&l&&l({action:o,location:x.location,delta:0})}function _(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof b=="string"?b:qk(b);return T=T.replace(/ $/,"%20"),Vk(v,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,v)}let x={get action(){return o},get location(){return i(s,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(FO,d),l=b,()=>{s.removeEventListener(FO,d),l=null}},createHref(b){return e(s,b)},createURL:_,encodeLocation(b){let v=_(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(b){return a.go(b)}};return x}var HO;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(HO||(HO={}));function oK(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}const Xk=["post","put","patch","delete"];new Set(Xk);const lK=["get",...Xk];new Set(lK);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bw(){return Bw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Bw.apply(this,arguments)}const uK=ee.createContext(null),Wk=ee.createContext(null);function cK(){return ee.useContext(Wk)!=null}function hK(i,e){i==null||i.v7_startTransition,(i==null?void 0:i.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function fK(i){let{basename:e="/",children:t=null,location:n,navigationType:s=Tf.Pop,navigator:r,static:a=!1,future:o}=i;cK()&&Vk(!1);let l=e.replace(/^\/*/,"/"),u=ee.useMemo(()=>({basename:l,navigator:r,static:a,future:Bw({v7_relativeSplatPath:!1},o)}),[l,o,r,a]);typeof n=="string"&&(n=jk(n));let{pathname:f="/",search:d="",hash:p="",state:m=null,key:_="default"}=n,x=ee.useMemo(()=>{let b=oK(f,l);return b==null?null:{location:{pathname:b,search:d,hash:p,state:m,key:_},navigationType:s}},[l,f,d,p,m,_,s]);return x==null?null:ee.createElement(uK.Provider,{value:u},ee.createElement(Wk.Provider,{children:t,value:x}))}new Promise(()=>{});/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dK="6";try{window.__reactRouterVersion=dK}catch{}const pK="startTransition",zO=AX[pK];function mK(i){let{basename:e,children:t,future:n,window:s}=i,r=ee.useRef();r.current==null&&(r.current=sK({window:s,v5Compat:!0}));let a=r.current,[o,l]=ee.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},f=ee.useCallback(d=>{u&&zO?zO(()=>l(d)):l(d)},[l,u]);return ee.useLayoutEffect(()=>a.listen(f),[a,f]),ee.useEffect(()=>hK(n),[n]),ee.createElement(fK,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}var GO;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(GO||(GO={}));var VO;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(VO||(VO={}));const K2={headText:"font-black text-white text-[28px] sm:text-[36px] md:text-[48px] lg:text-[60px] leading-tight lg:leading-[78px] mt-5 md:mt-3",padding:"sm:px-16 px-6 sm:py-16 py-10",paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"text-white sm:text-[18px] text-[14px] uppercase tracking-wider",subText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]"};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fh="175",pf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Yk=0,Lw=1,Kk=2,gK=3,Jk=0,vA=1,Gy=2,Bo=3,Ho=0,rs=1,Qs=2,nr=0,Hf=1,LS=2,Iw=3,Ow=4,Qk=5,Nc=100,Zk=101,$k=102,eH=103,tH=104,iH=200,nH=201,sH=202,rH=203,IS=204,OS=205,aH=206,oH=207,lH=208,uH=209,cH=210,hH=211,fH=212,dH=213,pH=214,PS=0,US=1,NS=2,ed=3,FS=4,kS=5,HS=6,zS=7,v_=0,mH=1,gH=2,No=0,yH=1,vH=2,_H=3,QR=4,xH=5,bH=6,TH=7,Pw="attached",SH="detached",_A=300,Mu=301,nh=302,Ev=303,Cv=304,Rg=306,sh=1e3,va=1001,Km=1002,In=1003,xA=1004,yK=1004,Sf=1005,vK=1005,on=1006,Cm=1007,_K=1007,no=1008,xK=1008,Cs=1009,ZR=1010,$R=1011,Jm=1012,bA=1013,Sl=1014,Rr=1015,md=1016,TA=1017,SA=1018,td=1020,eB=35902,tB=1021,iB=1022,er=1023,nB=1024,sB=1025,Qm=1026,id=1027,AA=1028,__=1029,rB=1030,EA=1031,bK=1032,CA=1033,Vy=33776,qy=33777,jy=33778,Xy=33779,GS=35840,VS=35841,qS=35842,jS=35843,XS=36196,WS=37492,YS=37496,KS=37808,JS=37809,QS=37810,ZS=37811,$S=37812,e1=37813,t1=37814,i1=37815,n1=37816,s1=37817,r1=37818,a1=37819,o1=37820,l1=37821,Wy=36492,u1=36494,c1=36495,aB=36283,h1=36284,f1=36285,d1=36286,AH=2200,EH=2201,CH=2202,Zm=2300,$m=2301,zT=2302,Af=2400,Ef=2401,Mv=2402,MA=2500,oB=2501,MH=0,lB=1,p1=2,dh=3200,wH=3201,TK=3202,SK=3203,ph=0,DH=1,Oo="",Ci="srgb",Al="srgb-linear",wv="linear",Ui="srgb",AK=0,gf=7680,EK=7681,CK=7682,MK=7683,wK=34055,DK=34056,RK=5386,BK=512,LK=513,IK=514,OK=515,PK=516,UK=517,NK=518,Uw=519,RH=512,BH=513,LH=514,uB=515,IH=516,OH=517,PH=518,UH=519,Dv=35044,FK=35048,kK=35040,HK=35045,zK=35049,GK=35041,VK=35046,qK=35050,jK=35042,XK="100",Nw="300 es",Po=2e3,Rv=2001,WK={COMPUTE:"compute",RENDER:"render"};let Ra=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}};const Ws=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qO=1234567;const zf=Math.PI/180,eg=180/Math.PI;function Aa(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ws[i&255]+Ws[i>>8&255]+Ws[i>>16&255]+Ws[i>>24&255]+"-"+Ws[e&255]+Ws[e>>8&255]+"-"+Ws[e>>16&15|64]+Ws[e>>24&255]+"-"+Ws[t&63|128]+Ws[t>>8&255]+"-"+Ws[t>>16&255]+Ws[t>>24&255]+Ws[n&255]+Ws[n>>8&255]+Ws[n>>16&255]+Ws[n>>24&255]).toLowerCase()}function zt(i,e,t){return Math.max(e,Math.min(t,i))}function cB(i,e){return(i%e+e)%e}function YK(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function KK(i,e,t){return i!==e?(t-i)/(e-i):0}function Yy(i,e,t){return(1-t)*i+t*e}function JK(i,e,t,n){return Yy(i,e,1-Math.exp(-t*n))}function QK(i,e=1){return e-Math.abs(cB(i,e*2)-e)}function ZK(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function $K(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function eJ(i,e){return i+Math.floor(Math.random()*(e-i+1))}function tJ(i,e){return i+Math.random()*(e-i)}function iJ(i){return i*(.5-Math.random())}function nJ(i){i!==void 0&&(qO=i);let e=qO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sJ(i){return i*zf}function rJ(i){return i*eg}function aJ(i){return(i&i-1)===0&&i!==0}function oJ(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function lJ(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function uJ(i,e,t,n,s){const r=Math.cos,a=Math.sin,o=r(t/2),l=a(t/2),u=r((e+n)/2),f=a((e+n)/2),d=r((e-n)/2),p=a((e-n)/2),m=r((n-e)/2),_=a((n-e)/2);switch(s){case"XYX":i.set(o*f,l*d,l*p,o*u);break;case"YZY":i.set(l*p,o*f,l*d,o*u);break;case"ZXZ":i.set(l*d,l*p,o*f,o*u);break;case"XZX":i.set(o*f,l*_,l*m,o*u);break;case"YXY":i.set(l*m,o*f,l*_,o*u);break;case"ZYZ":i.set(l*_,l*m,o*f,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Cr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Yt(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const tg={DEG2RAD:zf,RAD2DEG:eg,generateUUID:Aa,clamp:zt,euclideanModulo:cB,mapLinear:YK,inverseLerp:KK,lerp:Yy,damp:JK,pingpong:QK,smoothstep:ZK,smootherstep:$K,randInt:eJ,randFloat:tJ,randFloatSpread:iJ,seededRandom:nJ,degToRad:sJ,radToDeg:rJ,isPowerOfTwo:aJ,ceilPowerOfTwo:oJ,floorPowerOfTwo:lJ,setQuaternionFromProperEuler:uJ,normalize:Yt,denormalize:Cr};class Te{constructor(e=0,t=0){Te.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=zt(this.x,e.x,t.x),this.y=zt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=zt(this.x,e,t),this.y=zt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(zt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*s+e.x,this.y=r*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class qt{constructor(e,t,n,s,r,a,o,l,u){qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,u)}set(e,t,n,s,r,a,o,l,u){const f=this.elements;return f[0]=e,f[1]=s,f[2]=o,f[3]=t,f[4]=r,f[5]=l,f[6]=n,f[7]=a,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[3],l=n[6],u=n[1],f=n[4],d=n[7],p=n[2],m=n[5],_=n[8],x=s[0],b=s[3],v=s[6],T=s[1],A=s[4],w=s[7],B=s[2],I=s[5],P=s[8];return r[0]=a*x+o*T+l*B,r[3]=a*b+o*A+l*I,r[6]=a*v+o*w+l*P,r[1]=u*x+f*T+d*B,r[4]=u*b+f*A+d*I,r[7]=u*v+f*w+d*P,r[2]=p*x+m*T+_*B,r[5]=p*b+m*A+_*I,r[8]=p*v+m*w+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8];return t*a*f-t*o*u-n*r*f+n*o*l+s*r*u-s*a*l}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8],d=f*a-o*u,p=o*l-f*r,m=u*r-a*l,_=t*d+n*p+s*m;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/_;return e[0]=d*x,e[1]=(s*u-f*n)*x,e[2]=(o*n-s*a)*x,e[3]=p*x,e[4]=(f*t-s*l)*x,e[5]=(s*r-o*t)*x,e[6]=m*x,e[7]=(n*l-u*t)*x,e[8]=(a*t-n*r)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,a,o){const l=Math.cos(r),u=Math.sin(r);return this.set(n*l,n*u,-n*(l*a+u*o)+a+e,-s*u,s*l,-s*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(J2.makeScale(e,t)),this}rotate(e){return this.premultiply(J2.makeRotation(-e)),this}translate(e,t){return this.premultiply(J2.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const J2=new qt;function NH(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const cJ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function am(i,e){return new cJ[i](e)}function Bv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function FH(){const i=Bv("canvas");return i.style.display="block",i}const jO={};function GT(i){i in jO||(jO[i]=!0,console.warn(i))}function hJ(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function fJ(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function dJ(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const XO=new qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),WO=new qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function pJ(){const i={enabled:!0,workingColorSpace:Al,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===Ui&&(s.r=_u(s.r),s.g=_u(s.g),s.b=_u(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ui&&(s.r=Mm(s.r),s.g=Mm(s.g),s.b=Mm(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Oo?wv:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Al]:{primaries:e,whitePoint:n,transfer:wv,toXYZ:XO,fromXYZ:WO,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ci},outputColorSpaceConfig:{drawingBufferColorSpace:Ci}},[Ci]:{primaries:e,whitePoint:n,transfer:Ui,toXYZ:XO,fromXYZ:WO,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ci}}}),i}const pi=pJ();function _u(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Mm(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let gp;class kH{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{gp===void 0&&(gp=Bv("canvas")),gp.width=e.width,gp.height=e.height;const s=gp.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=gp}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=_u(r[a]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(_u(t[n]/255)*255):t[n]=_u(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mJ=0;class Vc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mJ++}),this.uuid=Aa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(Q2(s[a].image)):r.push(Q2(s[a]))}else r=Q2(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function Q2(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?kH.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gJ=0;class Zi extends Ra{constructor(e=Zi.DEFAULT_IMAGE,t=Zi.DEFAULT_MAPPING,n=va,s=va,r=on,a=no,o=er,l=Cs,u=Zi.DEFAULT_ANISOTROPY,f=Oo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gJ++}),this.uuid=Aa(),this.name="",this.source=new Vc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Te(0,0),this.repeat=new Te(1,1),this.center=new Te(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_A)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sh:e.x=e.x-Math.floor(e.x);break;case va:e.x=e.x<0?0:1;break;case Km:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sh:e.y=e.y-Math.floor(e.y);break;case va:e.y=e.y<0?0:1;break;case Km:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Zi.DEFAULT_IMAGE=null;Zi.DEFAULT_MAPPING=_A;Zi.DEFAULT_ANISOTROPY=1;class di{constructor(e=0,t=0,n=0,s=1){di.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const l=e.elements,u=l[0],f=l[4],d=l[8],p=l[1],m=l[5],_=l[9],x=l[2],b=l[6],v=l[10];if(Math.abs(f-p)<.01&&Math.abs(d-x)<.01&&Math.abs(_-b)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+x)<.1&&Math.abs(_+b)<.1&&Math.abs(u+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,w=(m+1)/2,B=(v+1)/2,I=(f+p)/4,P=(d+x)/4,F=(_+b)/4;return A>w&&A>B?A<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(A),s=I/n,r=P/n):w>B?w<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(w),n=I/s,r=F/s):B<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(B),n=P/r,s=F/r),this.set(n,s,r,t),this}let T=Math.sqrt((b-_)*(b-_)+(d-x)*(d-x)+(p-f)*(p-f));return Math.abs(T)<.001&&(T=1),this.x=(b-_)/T,this.y=(d-x)/T,this.z=(p-f)/T,this.w=Math.acos((u+m+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=zt(this.x,e.x,t.x),this.y=zt(this.y,e.y,t.y),this.z=zt(this.z,e.z,t.z),this.w=zt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=zt(this.x,e,t),this.y=zt(this.y,e,t),this.z=zt(this.z,e,t),this.w=zt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class wA extends Ra{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new di(0,0,e,t),this.scissorTest=!1,this.viewport=new di(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:on,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Zi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Vc(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class On extends wA{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class x_ extends Zi{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=In,this.minFilter=In,this.wrapR=va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yJ extends On{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new x_(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class DA extends Zi{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=In,this.minFilter=In,this.wrapR=va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vJ extends On{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new DA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class as{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,a,o){let l=n[s+0],u=n[s+1],f=n[s+2],d=n[s+3];const p=r[a+0],m=r[a+1],_=r[a+2],x=r[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d;return}if(o===1){e[t+0]=p,e[t+1]=m,e[t+2]=_,e[t+3]=x;return}if(d!==x||l!==p||u!==m||f!==_){let b=1-o;const v=l*p+u*m+f*_+d*x,T=v>=0?1:-1,A=1-v*v;if(A>Number.EPSILON){const B=Math.sqrt(A),I=Math.atan2(B,v*T);b=Math.sin(b*I)/B,o=Math.sin(o*I)/B}const w=o*T;if(l=l*b+p*w,u=u*b+m*w,f=f*b+_*w,d=d*b+x*w,b===1-o){const B=1/Math.sqrt(l*l+u*u+f*f+d*d);l*=B,u*=B,f*=B,d*=B}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,s,r,a){const o=n[s],l=n[s+1],u=n[s+2],f=n[s+3],d=r[a],p=r[a+1],m=r[a+2],_=r[a+3];return e[t]=o*_+f*d+l*m-u*p,e[t+1]=l*_+f*p+u*d-o*m,e[t+2]=u*_+f*m+o*p-l*d,e[t+3]=f*_-o*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(n/2),f=o(s/2),d=o(r/2),p=l(n/2),m=l(s/2),_=l(r/2);switch(a){case"XYZ":this._x=p*f*d+u*m*_,this._y=u*m*d-p*f*_,this._z=u*f*_+p*m*d,this._w=u*f*d-p*m*_;break;case"YXZ":this._x=p*f*d+u*m*_,this._y=u*m*d-p*f*_,this._z=u*f*_-p*m*d,this._w=u*f*d+p*m*_;break;case"ZXY":this._x=p*f*d-u*m*_,this._y=u*m*d+p*f*_,this._z=u*f*_+p*m*d,this._w=u*f*d-p*m*_;break;case"ZYX":this._x=p*f*d-u*m*_,this._y=u*m*d+p*f*_,this._z=u*f*_-p*m*d,this._w=u*f*d+p*m*_;break;case"YZX":this._x=p*f*d+u*m*_,this._y=u*m*d+p*f*_,this._z=u*f*_-p*m*d,this._w=u*f*d-p*m*_;break;case"XZY":this._x=p*f*d-u*m*_,this._y=u*m*d-p*f*_,this._z=u*f*_+p*m*d,this._w=u*f*d+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],a=t[1],o=t[5],l=t[9],u=t[2],f=t[6],d=t[10],p=n+o+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(f-l)*m,this._y=(r-u)*m,this._z=(a-s)*m}else if(n>o&&n>d){const m=2*Math.sqrt(1+n-o-d);this._w=(f-l)/m,this._x=.25*m,this._y=(s+a)/m,this._z=(r+u)/m}else if(o>d){const m=2*Math.sqrt(1+o-n-d);this._w=(r-u)/m,this._x=(s+a)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+d-n-o);this._w=(a-s)/m,this._x=(r+u)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,a=e._w,o=t._x,l=t._y,u=t._z,f=t._w;return this._x=n*f+a*o+s*u-r*l,this._y=s*f+a*l+r*o-n*u,this._z=r*f+a*u+n*l-s*o,this._w=a*f-n*o-s*l-r*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-t;return this._w=m*a+t*this._w,this._x=m*n+t*this._x,this._y=m*s+t*this._y,this._z=m*r+t*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,o),d=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=a*d+this._w*p,this._x=n*d+this._x*p,this._y=s*d+this._y*p,this._z=r*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,t=0,n=0){W.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*s-o*n),f=2*(o*t-r*s),d=2*(r*n-a*t);return this.x=t+l*u+a*d-o*f,this.y=n+l*f+o*u-r*d,this.z=s+l*d+r*f-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=zt(this.x,e.x,t.x),this.y=zt(this.y,e.y,t.y),this.z=zt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=zt(this.x,e,t),this.y=zt(this.y,e,t),this.z=zt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=s*l-r*o,this.y=r*a-n*l,this.z=n*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Z2.copy(this).projectOnVector(e),this.sub(Z2)}reflect(e){return this.sub(Z2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(zt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Z2=new W,YO=new as;class sr{constructor(e=new W(1/0,1/0,1/0),t=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Mo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Mo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Mo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Mo):Mo.fromBufferAttribute(r,a),Mo.applyMatrix4(e.matrixWorld),this.expandByPoint(Mo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bb.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),bb.copy(n.boundingBox)),bb.applyMatrix4(e.matrixWorld),this.union(bb)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Mo),Mo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(V0),Tb.subVectors(this.max,V0),yp.subVectors(e.a,V0),vp.subVectors(e.b,V0),_p.subVectors(e.c,V0),dc.subVectors(vp,yp),pc.subVectors(_p,vp),Yh.subVectors(yp,_p);let t=[0,-dc.z,dc.y,0,-pc.z,pc.y,0,-Yh.z,Yh.y,dc.z,0,-dc.x,pc.z,0,-pc.x,Yh.z,0,-Yh.x,-dc.y,dc.x,0,-pc.y,pc.x,0,-Yh.y,Yh.x,0];return!$2(t,yp,vp,_p,Tb)||(t=[1,0,0,0,1,0,0,0,1],!$2(t,yp,vp,_p,Tb))?!1:(Sb.crossVectors(dc,pc),t=[Sb.x,Sb.y,Sb.z],$2(t,yp,vp,_p,Tb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Mo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Mo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Zl=[new W,new W,new W,new W,new W,new W,new W,new W],Mo=new W,bb=new sr,yp=new W,vp=new W,_p=new W,dc=new W,pc=new W,Yh=new W,V0=new W,Tb=new W,Sb=new W,Kh=new W;function $2(i,e,t,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){Kh.fromArray(i,r);const o=s.x*Math.abs(Kh.x)+s.y*Math.abs(Kh.y)+s.z*Math.abs(Kh.z),l=e.dot(Kh),u=t.dot(Kh),f=n.dot(Kh);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>o)return!1}return!0}const _J=new sr,q0=new W,eC=new W;class Es{constructor(e=new W,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_J.setFromPoints(e).getCenter(n);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;q0.subVectors(e,this.center);const t=q0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(q0,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(eC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(q0.copy(e.center).add(eC)),this.expandByPoint(q0.copy(e.center).sub(eC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $l=new W,tC=new W,Ab=new W,mc=new W,iC=new W,Eb=new W,nC=new W;class gd{constructor(e=new W,t=new W(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$l)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$l.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($l.copy(this.origin).addScaledVector(this.direction,t),$l.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){tC.copy(e).add(t).multiplyScalar(.5),Ab.copy(t).sub(e).normalize(),mc.copy(this.origin).sub(tC);const r=e.distanceTo(t)*.5,a=-this.direction.dot(Ab),o=mc.dot(this.direction),l=-mc.dot(Ab),u=mc.lengthSq(),f=Math.abs(1-a*a);let d,p,m,_;if(f>0)if(d=a*l-o,p=a*o-l,_=r*f,d>=0)if(p>=-_)if(p<=_){const x=1/f;d*=x,p*=x,m=d*(d+a*p+2*o)+p*(a*d+p+2*l)+u}else p=r,d=Math.max(0,-(a*p+o)),m=-d*d+p*(p+2*l)+u;else p=-r,d=Math.max(0,-(a*p+o)),m=-d*d+p*(p+2*l)+u;else p<=-_?(d=Math.max(0,-(-a*r+o)),p=d>0?-r:Math.min(Math.max(-r,-l),r),m=-d*d+p*(p+2*l)+u):p<=_?(d=0,p=Math.min(Math.max(-r,-l),r),m=p*(p+2*l)+u):(d=Math.max(0,-(a*r+o)),p=d>0?r:Math.min(Math.max(-r,-l),r),m=-d*d+p*(p+2*l)+u);else p=a>0?-r:r,d=Math.max(0,-(a*p+o)),m=-d*d+p*(p+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(tC).addScaledVector(Ab,p),m}intersectSphere(e,t){$l.subVectors(e.center,this.origin);const n=$l.dot(this.direction),s=$l.dot($l)-n*n,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,a,o,l;const u=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(n=(e.min.x-p.x)*u,s=(e.max.x-p.x)*u):(n=(e.max.x-p.x)*u,s=(e.min.x-p.x)*u),f>=0?(r=(e.min.y-p.y)*f,a=(e.max.y-p.y)*f):(r=(e.max.y-p.y)*f,a=(e.min.y-p.y)*f),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),d>=0?(o=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(o=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),n>l||o>s)||((o>n||n!==n)&&(n=o),(l<s||s!==s)&&(s=l),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,$l)!==null}intersectTriangle(e,t,n,s,r){iC.subVectors(t,e),Eb.subVectors(n,e),nC.crossVectors(iC,Eb);let a=this.direction.dot(nC),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;mc.subVectors(this.origin,e);const l=o*this.direction.dot(Eb.crossVectors(mc,Eb));if(l<0)return null;const u=o*this.direction.dot(iC.cross(mc));if(u<0||l+u>a)return null;const f=-o*mc.dot(nC);return f<0?null:this.at(f/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class vt{constructor(e,t,n,s,r,a,o,l,u,f,d,p,m,_,x,b){vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,u,f,d,p,m,_,x,b)}set(e,t,n,s,r,a,o,l,u,f,d,p,m,_,x,b){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=s,v[1]=r,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=f,v[10]=d,v[14]=p,v[3]=m,v[7]=_,v[11]=x,v[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/xp.setFromMatrixColumn(e,0).length(),r=1/xp.setFromMatrixColumn(e,1).length(),a=1/xp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(s),u=Math.sin(s),f=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const p=a*f,m=a*d,_=o*f,x=o*d;t[0]=l*f,t[4]=-l*d,t[8]=u,t[1]=m+_*u,t[5]=p-x*u,t[9]=-o*l,t[2]=x-p*u,t[6]=_+m*u,t[10]=a*l}else if(e.order==="YXZ"){const p=l*f,m=l*d,_=u*f,x=u*d;t[0]=p+x*o,t[4]=_*o-m,t[8]=a*u,t[1]=a*d,t[5]=a*f,t[9]=-o,t[2]=m*o-_,t[6]=x+p*o,t[10]=a*l}else if(e.order==="ZXY"){const p=l*f,m=l*d,_=u*f,x=u*d;t[0]=p-x*o,t[4]=-a*d,t[8]=_+m*o,t[1]=m+_*o,t[5]=a*f,t[9]=x-p*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const p=a*f,m=a*d,_=o*f,x=o*d;t[0]=l*f,t[4]=_*u-m,t[8]=p*u+x,t[1]=l*d,t[5]=x*u+p,t[9]=m*u-_,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const p=a*l,m=a*u,_=o*l,x=o*u;t[0]=l*f,t[4]=x-p*d,t[8]=_*d+m,t[1]=d,t[5]=a*f,t[9]=-o*f,t[2]=-u*f,t[6]=m*d+_,t[10]=p-x*d}else if(e.order==="XZY"){const p=a*l,m=a*u,_=o*l,x=o*u;t[0]=l*f,t[4]=-d,t[8]=u*f,t[1]=p*d+x,t[5]=a*f,t[9]=m*d-_,t[2]=_*d-m,t[6]=o*f,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xJ,e,bJ)}lookAt(e,t,n){const s=this.elements;return ha.subVectors(e,t),ha.lengthSq()===0&&(ha.z=1),ha.normalize(),gc.crossVectors(n,ha),gc.lengthSq()===0&&(Math.abs(n.z)===1?ha.x+=1e-4:ha.z+=1e-4,ha.normalize(),gc.crossVectors(n,ha)),gc.normalize(),Cb.crossVectors(ha,gc),s[0]=gc.x,s[4]=Cb.x,s[8]=ha.x,s[1]=gc.y,s[5]=Cb.y,s[9]=ha.y,s[2]=gc.z,s[6]=Cb.z,s[10]=ha.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[4],l=n[8],u=n[12],f=n[1],d=n[5],p=n[9],m=n[13],_=n[2],x=n[6],b=n[10],v=n[14],T=n[3],A=n[7],w=n[11],B=n[15],I=s[0],P=s[4],F=s[8],N=s[12],U=s[1],H=s[5],re=s[9],J=s[13],ae=s[2],ce=s[6],j=s[10],Q=s[14],$=s[3],pe=s[7],Se=s[11],Le=s[15];return r[0]=a*I+o*U+l*ae+u*$,r[4]=a*P+o*H+l*ce+u*pe,r[8]=a*F+o*re+l*j+u*Se,r[12]=a*N+o*J+l*Q+u*Le,r[1]=f*I+d*U+p*ae+m*$,r[5]=f*P+d*H+p*ce+m*pe,r[9]=f*F+d*re+p*j+m*Se,r[13]=f*N+d*J+p*Q+m*Le,r[2]=_*I+x*U+b*ae+v*$,r[6]=_*P+x*H+b*ce+v*pe,r[10]=_*F+x*re+b*j+v*Se,r[14]=_*N+x*J+b*Q+v*Le,r[3]=T*I+A*U+w*ae+B*$,r[7]=T*P+A*H+w*ce+B*pe,r[11]=T*F+A*re+w*j+B*Se,r[15]=T*N+A*J+w*Q+B*Le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],u=e[13],f=e[2],d=e[6],p=e[10],m=e[14],_=e[3],x=e[7],b=e[11],v=e[15];return _*(+r*l*d-s*u*d-r*o*p+n*u*p+s*o*m-n*l*m)+x*(+t*l*m-t*u*p+r*a*p-s*a*m+s*u*f-r*l*f)+b*(+t*u*d-t*o*m-r*a*d+n*a*m+r*o*f-n*u*f)+v*(-s*o*f-t*l*d+t*o*p+s*a*d-n*a*p+n*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],m=e[11],_=e[12],x=e[13],b=e[14],v=e[15],T=d*b*u-x*p*u+x*l*m-o*b*m-d*l*v+o*p*v,A=_*p*u-f*b*u-_*l*m+a*b*m+f*l*v-a*p*v,w=f*x*u-_*d*u+_*o*m-a*x*m-f*o*v+a*d*v,B=_*d*l-f*x*l-_*o*p+a*x*p+f*o*b-a*d*b,I=t*T+n*A+s*w+r*B;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/I;return e[0]=T*P,e[1]=(x*p*r-d*b*r-x*s*m+n*b*m+d*s*v-n*p*v)*P,e[2]=(o*b*r-x*l*r+x*s*u-n*b*u-o*s*v+n*l*v)*P,e[3]=(d*l*r-o*p*r-d*s*u+n*p*u+o*s*m-n*l*m)*P,e[4]=A*P,e[5]=(f*b*r-_*p*r+_*s*m-t*b*m-f*s*v+t*p*v)*P,e[6]=(_*l*r-a*b*r-_*s*u+t*b*u+a*s*v-t*l*v)*P,e[7]=(a*p*r-f*l*r+f*s*u-t*p*u-a*s*m+t*l*m)*P,e[8]=w*P,e[9]=(_*d*r-f*x*r-_*n*m+t*x*m+f*n*v-t*d*v)*P,e[10]=(a*x*r-_*o*r+_*n*u-t*x*u-a*n*v+t*o*v)*P,e[11]=(f*o*r-a*d*r-f*n*u+t*d*u+a*n*m-t*o*m)*P,e[12]=B*P,e[13]=(f*x*s-_*d*s+_*n*p-t*x*p-f*n*b+t*d*b)*P,e[14]=(_*o*s-a*x*s-_*n*l+t*x*l+a*n*b-t*o*b)*P,e[15]=(a*d*s-f*o*s+f*n*l-t*d*l-a*n*p+t*o*p)*P,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,a=e.x,o=e.y,l=e.z,u=r*a,f=r*o;return this.set(u*a+n,u*o-s*l,u*l+s*o,0,u*o+s*l,f*o+n,f*l-s*a,0,u*l-s*o,f*l+s*a,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,a){return this.set(1,n,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,u=r+r,f=a+a,d=o+o,p=r*u,m=r*f,_=r*d,x=a*f,b=a*d,v=o*d,T=l*u,A=l*f,w=l*d,B=n.x,I=n.y,P=n.z;return s[0]=(1-(x+v))*B,s[1]=(m+w)*B,s[2]=(_-A)*B,s[3]=0,s[4]=(m-w)*I,s[5]=(1-(p+v))*I,s[6]=(b+T)*I,s[7]=0,s[8]=(_+A)*P,s[9]=(b-T)*P,s[10]=(1-(p+x))*P,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=xp.set(s[0],s[1],s[2]).length();const a=xp.set(s[4],s[5],s[6]).length(),o=xp.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],wo.copy(this);const u=1/r,f=1/a,d=1/o;return wo.elements[0]*=u,wo.elements[1]*=u,wo.elements[2]*=u,wo.elements[4]*=f,wo.elements[5]*=f,wo.elements[6]*=f,wo.elements[8]*=d,wo.elements[9]*=d,wo.elements[10]*=d,t.setFromRotationMatrix(wo),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,s,r,a,o=Po){const l=this.elements,u=2*r/(t-e),f=2*r/(n-s),d=(t+e)/(t-e),p=(n+s)/(n-s);let m,_;if(o===Po)m=-(a+r)/(a-r),_=-2*a*r/(a-r);else if(o===Rv)m=-a/(a-r),_=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,s,r,a,o=Po){const l=this.elements,u=1/(t-e),f=1/(n-s),d=1/(a-r),p=(t+e)*u,m=(n+s)*f;let _,x;if(o===Po)_=(a+r)*d,x=-2*d;else if(o===Rv)_=r*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const xp=new W,wo=new vt,xJ=new W(0,0,0),bJ=new W(1,1,1),gc=new W,Cb=new W,ha=new W,KO=new vt,JO=new as;class Ca{constructor(e=0,t=0,n=0,s=Ca.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],l=s[1],u=s[5],f=s[9],d=s[2],p=s[6],m=s[10];switch(t){case"XYZ":this._y=Math.asin(zt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-zt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(zt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-zt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(zt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-zt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return KO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(KO,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return JO.setFromEuler(this),this.setFromQuaternion(JO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ca.DEFAULT_ORDER="XYZ";class ig{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let TJ=0;const QO=new W,bp=new as,eu=new vt,Mb=new W,j0=new W,SJ=new W,AJ=new as,ZO=new W(1,0,0),$O=new W(0,1,0),eP=new W(0,0,1),tP={type:"added"},EJ={type:"removed"},Tp={type:"childadded",child:null},sC={type:"childremoved",child:null};class gi extends Ra{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TJ++}),this.uuid=Aa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gi.DEFAULT_UP.clone();const e=new W,t=new Ca,n=new as,s=new W(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new vt},normalMatrix:{value:new qt}}),this.matrix=new vt,this.matrixWorld=new vt,this.matrixAutoUpdate=gi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ig,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bp.setFromAxisAngle(e,t),this.quaternion.multiply(bp),this}rotateOnWorldAxis(e,t){return bp.setFromAxisAngle(e,t),this.quaternion.premultiply(bp),this}rotateX(e){return this.rotateOnAxis(ZO,e)}rotateY(e){return this.rotateOnAxis($O,e)}rotateZ(e){return this.rotateOnAxis(eP,e)}translateOnAxis(e,t){return QO.copy(e).applyQuaternion(this.quaternion),this.position.add(QO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZO,e)}translateY(e){return this.translateOnAxis($O,e)}translateZ(e){return this.translateOnAxis(eP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Mb.copy(e):Mb.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),j0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eu.lookAt(j0,Mb,this.up):eu.lookAt(Mb,j0,this.up),this.quaternion.setFromRotationMatrix(eu),s&&(eu.extractRotation(s.matrixWorld),bp.setFromRotationMatrix(eu),this.quaternion.premultiply(bp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(tP),Tp.child=e,this.dispatchEvent(Tp),Tp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(EJ),sC.child=e,this.dispatchEvent(sC),sC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),eu.multiply(e.parent.matrixWorld)),e.applyMatrix4(eu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(tP),Tp.child=e,this.dispatchEvent(Tp),Tp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(j0,e,SJ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(j0,AJ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const d=l[u];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(r(e.materials,this.material[l]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];s.animations.push(r(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),f=a(e.images),d=a(e.shapes),p=a(e.skeletons),m=a(e.animations),_=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),f.length>0&&(n.images=f),d.length>0&&(n.shapes=d),p.length>0&&(n.skeletons=p),m.length>0&&(n.animations=m),_.length>0&&(n.nodes=_)}return n.object=s,n;function a(o){const l=[];for(const u in o){const f=o[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}gi.DEFAULT_UP=new W(0,1,0);gi.DEFAULT_MATRIX_AUTO_UPDATE=!0;gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Do=new W,tu=new W,rC=new W,iu=new W,Sp=new W,Ap=new W,iP=new W,aC=new W,oC=new W,lC=new W,uC=new di,cC=new di,hC=new di;class jr{constructor(e=new W,t=new W,n=new W){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Do.subVectors(e,t),s.cross(Do);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){Do.subVectors(s,t),tu.subVectors(n,t),rC.subVectors(e,t);const a=Do.dot(Do),o=Do.dot(tu),l=Do.dot(rC),u=tu.dot(tu),f=tu.dot(rC),d=a*u-o*o;if(d===0)return r.set(0,0,0),null;const p=1/d,m=(u*l-o*f)*p,_=(a*f-o*l)*p;return r.set(1-m-_,_,m)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,iu)===null?!1:iu.x>=0&&iu.y>=0&&iu.x+iu.y<=1}static getInterpolation(e,t,n,s,r,a,o,l){return this.getBarycoord(e,t,n,s,iu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,iu.x),l.addScaledVector(a,iu.y),l.addScaledVector(o,iu.z),l)}static getInterpolatedAttribute(e,t,n,s,r,a){return uC.setScalar(0),cC.setScalar(0),hC.setScalar(0),uC.fromBufferAttribute(e,t),cC.fromBufferAttribute(e,n),hC.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(uC,r.x),a.addScaledVector(cC,r.y),a.addScaledVector(hC,r.z),a}static isFrontFacing(e,t,n,s){return Do.subVectors(n,t),tu.subVectors(e,t),Do.cross(tu).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Do.subVectors(this.c,this.b),tu.subVectors(this.a,this.b),Do.cross(tu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return jr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return jr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return jr.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return jr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return jr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let a,o;Sp.subVectors(s,n),Ap.subVectors(r,n),aC.subVectors(e,n);const l=Sp.dot(aC),u=Ap.dot(aC);if(l<=0&&u<=0)return t.copy(n);oC.subVectors(e,s);const f=Sp.dot(oC),d=Ap.dot(oC);if(f>=0&&d<=f)return t.copy(s);const p=l*d-f*u;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(Sp,a);lC.subVectors(e,r);const m=Sp.dot(lC),_=Ap.dot(lC);if(_>=0&&m<=_)return t.copy(r);const x=m*u-l*_;if(x<=0&&u>=0&&_<=0)return o=u/(u-_),t.copy(n).addScaledVector(Ap,o);const b=f*_-m*d;if(b<=0&&d-f>=0&&m-_>=0)return iP.subVectors(r,s),o=(d-f)/(d-f+(m-_)),t.copy(s).addScaledVector(iP,o);const v=1/(b+x+p);return a=x*v,o=p*v,t.copy(n).addScaledVector(Sp,a).addScaledVector(Ap,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const HH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yc={h:0,s:0,l:0},wb={h:0,s:0,l:0};function fC(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class $e{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ci){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pi.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=pi.workingColorSpace){return this.r=e,this.g=t,this.b=n,pi.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=pi.workingColorSpace){if(e=cB(e,1),t=zt(t,0,1),n=zt(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=fC(a,r,e+1/3),this.g=fC(a,r,e),this.b=fC(a,r,e-1/3)}return pi.toWorkingColorSpace(this,s),this}setStyle(e,t=Ci){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ci){const n=HH[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_u(e.r),this.g=_u(e.g),this.b=_u(e.b),this}copyLinearToSRGB(e){return this.r=Mm(e.r),this.g=Mm(e.g),this.b=Mm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ci){return pi.fromWorkingColorSpace(Ys.copy(this),e),Math.round(zt(Ys.r*255,0,255))*65536+Math.round(zt(Ys.g*255,0,255))*256+Math.round(zt(Ys.b*255,0,255))}getHexString(e=Ci){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=pi.workingColorSpace){pi.fromWorkingColorSpace(Ys.copy(this),t);const n=Ys.r,s=Ys.g,r=Ys.b,a=Math.max(n,s,r),o=Math.min(n,s,r);let l,u;const f=(o+a)/2;if(o===a)l=0,u=0;else{const d=a-o;switch(u=f<=.5?d/(a+o):d/(2-a-o),a){case n:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-n)/d+2;break;case r:l=(n-s)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=pi.workingColorSpace){return pi.fromWorkingColorSpace(Ys.copy(this),t),e.r=Ys.r,e.g=Ys.g,e.b=Ys.b,e}getStyle(e=Ci){pi.fromWorkingColorSpace(Ys.copy(this),e);const t=Ys.r,n=Ys.g,s=Ys.b;return e!==Ci?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(yc),this.setHSL(yc.h+e,yc.s+t,yc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(yc),e.getHSL(wb);const n=Yy(yc.h,wb.h,t),s=Yy(yc.s,wb.s,t),r=Yy(yc.l,wb.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ys=new $e;$e.NAMES=HH;let CJ=0;class zn extends Ra{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:CJ++}),this.uuid=Aa(),this.name="",this.type="Material",this.blending=Hf,this.side=Ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=IS,this.blendDst=OS,this.blendEquation=Nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $e(0,0,0),this.blendAlpha=0,this.depthFunc=ed,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Uw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gf,this.stencilZFail=gf,this.stencilZPass=gf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Hf&&(n.blending=this.blending),this.side!==Ho&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==IS&&(n.blendSrc=this.blendSrc),this.blendDst!==OS&&(n.blendDst=this.blendDst),this.blendEquation!==Nc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ed&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Uw&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==gf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==gf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const o in r){const l=r[o];delete l.metadata,a.push(l)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class _a extends zn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ou=MJ();function MJ(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,s[l]=24,s[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,s[l]=-u-1,s[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,s[l]=13,s[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,s[l]=24,s[l|256]=24):(n[l]=31744,n[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,r[l]=u|f}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:o}}function Fr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=zt(i,-65504,65504),ou.floatView[0]=i;const e=ou.uint32View[0],t=e>>23&511;return ou.baseTable[t]+((e&8388607)>>ou.shiftTable[t])}function gy(i){const e=i>>10;return ou.uint32View[0]=ou.mantissaTable[ou.offsetTable[e]+(i&1023)]+ou.exponentTable[e],ou.floatView[0]}class wJ{static toHalfFloat(e){return Fr(e)}static fromHalfFloat(e){return gy(e)}}const Xn=new W,Db=new Te;let DJ=0;class li{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:DJ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Dv,this.updateRanges=[],this.gpuType=Rr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Db.fromBufferAttribute(this,t),Db.applyMatrix3(e),this.setXY(t,Db.x,Db.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Xn.fromBufferAttribute(this,t),Xn.applyMatrix3(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Xn.fromBufferAttribute(this,t),Xn.applyMatrix4(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xn.fromBufferAttribute(this,t),Xn.applyNormalMatrix(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xn.fromBufferAttribute(this,t),Xn.transformDirection(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Cr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Cr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Cr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Cr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Cr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array),r=Yt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Dv&&(e.usage=this.usage),e}}class RJ extends li{constructor(e,t,n){super(new Int8Array(e),t,n)}}class BJ extends li{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class LJ extends li{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class IJ extends li{constructor(e,t,n){super(new Int16Array(e),t,n)}}class hB extends li{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class OJ extends li{constructor(e,t,n){super(new Int32Array(e),t,n)}}class fB extends li{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class PJ extends li{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=gy(this.array[e*this.itemSize]);return this.normalized&&(t=Cr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=Fr(t),this}getY(e){let t=gy(this.array[e*this.itemSize+1]);return this.normalized&&(t=Cr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=Fr(t),this}getZ(e){let t=gy(this.array[e*this.itemSize+2]);return this.normalized&&(t=Cr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=Fr(t),this}getW(e){let t=gy(this.array[e*this.itemSize+3]);return this.normalized&&(t=Cr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=Fr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this.array[e+2]=Fr(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array),r=Yt(r,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this.array[e+2]=Fr(s),this.array[e+3]=Fr(r),this}}class bt extends li{constructor(e,t,n){super(new Float32Array(e),t,n)}}let UJ=0;const qa=new vt,dC=new gi,Ep=new W,fa=new sr,X0=new sr,ys=new W;class Ht extends Ra{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:UJ++}),this.uuid=Aa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(NH(e)?fB:hB)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new qt().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qa.makeRotationFromQuaternion(e),this.applyMatrix4(qa),this}rotateX(e){return qa.makeRotationX(e),this.applyMatrix4(qa),this}rotateY(e){return qa.makeRotationY(e),this.applyMatrix4(qa),this}rotateZ(e){return qa.makeRotationZ(e),this.applyMatrix4(qa),this}translate(e,t,n){return qa.makeTranslation(e,t,n),this.applyMatrix4(qa),this}scale(e,t,n){return qa.makeScale(e,t,n),this.applyMatrix4(qa),this}lookAt(e){return dC.lookAt(e),dC.updateMatrix(),this.applyMatrix4(dC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ep).negate(),this.translate(Ep.x,Ep.y,Ep.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new bt(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new sr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];fa.setFromBufferAttribute(r),this.morphTargetsRelative?(ys.addVectors(this.boundingBox.min,fa.min),this.boundingBox.expandByPoint(ys),ys.addVectors(this.boundingBox.max,fa.max),this.boundingBox.expandByPoint(ys)):(this.boundingBox.expandByPoint(fa.min),this.boundingBox.expandByPoint(fa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(e){const n=this.boundingSphere.center;if(fa.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];X0.setFromBufferAttribute(o),this.morphTargetsRelative?(ys.addVectors(fa.min,X0.min),fa.expandByPoint(ys),ys.addVectors(fa.max,X0.max),fa.expandByPoint(ys)):(fa.expandByPoint(X0.min),fa.expandByPoint(X0.max))}fa.getCenter(n);let s=0;for(let r=0,a=e.count;r<a;r++)ys.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(ys));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],l=this.morphTargetsRelative;for(let u=0,f=o.count;u<f;u++)ys.fromBufferAttribute(o,u),l&&(Ep.fromBufferAttribute(e,u),ys.add(Ep)),s=Math.max(s,n.distanceToSquared(ys))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new li(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let F=0;F<n.count;F++)o[F]=new W,l[F]=new W;const u=new W,f=new W,d=new W,p=new Te,m=new Te,_=new Te,x=new W,b=new W;function v(F,N,U){u.fromBufferAttribute(n,F),f.fromBufferAttribute(n,N),d.fromBufferAttribute(n,U),p.fromBufferAttribute(r,F),m.fromBufferAttribute(r,N),_.fromBufferAttribute(r,U),f.sub(u),d.sub(u),m.sub(p),_.sub(p);const H=1/(m.x*_.y-_.x*m.y);isFinite(H)&&(x.copy(f).multiplyScalar(_.y).addScaledVector(d,-m.y).multiplyScalar(H),b.copy(d).multiplyScalar(m.x).addScaledVector(f,-_.x).multiplyScalar(H),o[F].add(x),o[N].add(x),o[U].add(x),l[F].add(b),l[N].add(b),l[U].add(b))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let F=0,N=T.length;F<N;++F){const U=T[F],H=U.start,re=U.count;for(let J=H,ae=H+re;J<ae;J+=3)v(e.getX(J+0),e.getX(J+1),e.getX(J+2))}const A=new W,w=new W,B=new W,I=new W;function P(F){B.fromBufferAttribute(s,F),I.copy(B);const N=o[F];A.copy(N),A.sub(B.multiplyScalar(B.dot(N))).normalize(),w.crossVectors(I,N);const H=w.dot(l[F])<0?-1:1;a.setXYZW(F,A.x,A.y,A.z,H)}for(let F=0,N=T.length;F<N;++F){const U=T[F],H=U.start,re=U.count;for(let J=H,ae=H+re;J<ae;J+=3)P(e.getX(J+0)),P(e.getX(J+1)),P(e.getX(J+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new li(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const s=new W,r=new W,a=new W,o=new W,l=new W,u=new W,f=new W,d=new W;if(e)for(let p=0,m=e.count;p<m;p+=3){const _=e.getX(p+0),x=e.getX(p+1),b=e.getX(p+2);s.fromBufferAttribute(t,_),r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,b),f.subVectors(a,r),d.subVectors(s,r),f.cross(d),o.fromBufferAttribute(n,_),l.fromBufferAttribute(n,x),u.fromBufferAttribute(n,b),o.add(f),l.add(f),u.add(f),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(x,l.x,l.y,l.z),n.setXYZ(b,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)s.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),a.fromBufferAttribute(t,p+2),f.subVectors(a,r),d.subVectors(s,r),f.cross(d),n.setXYZ(p+0,f.x,f.y,f.z),n.setXYZ(p+1,f.x,f.y,f.z),n.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ys.fromBufferAttribute(e,t),ys.normalize(),e.setXYZ(t,ys.x,ys.y,ys.z)}toNonIndexed(){function e(o,l){const u=o.array,f=o.itemSize,d=o.normalized,p=new u.constructor(l.length*f);let m=0,_=0;for(let x=0,b=l.length;x<b;x++){o.isInterleavedBufferAttribute?m=l[x]*o.data.stride+o.offset:m=l[x]*f;for(let v=0;v<f;v++)p[_++]=u[m++]}return new li(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ht,n=this.index.array,s=this.attributes;for(const o in s){const l=s[o],u=e(l,n);t.setAttribute(o,u)}const r=this.morphAttributes;for(const o in r){const l=[],u=r[o];for(let f=0,d=u.length;f<d;f++){const p=u[f],m=e(p,n);l.push(m)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];f.push(m.toJSON(e.data))}f.length>0&&(s[l]=f,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const u in s){const f=s[u];this.setAttribute(u,f.clone(t))}const r=e.morphAttributes;for(const u in r){const f=[],d=r[u];for(let p=0,m=d.length;p<m;p++)f.push(d[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,f=a.length;u<f;u++){const d=a[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nP=new vt,Jh=new gd,Rb=new Es,sP=new W,Bb=new W,Lb=new W,Ib=new W,pC=new W,Ob=new W,rP=new W,Pb=new W;class _n extends gi{constructor(e=new Ht,t=new _a){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){Ob.set(0,0,0);for(let l=0,u=r.length;l<u;l++){const f=o[l],d=r[l];f!==0&&(pC.fromBufferAttribute(d,e),a?Ob.addScaledVector(pC,f):Ob.addScaledVector(pC.sub(t),f))}t.add(Ob)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Rb.copy(n.boundingSphere),Rb.applyMatrix4(r),Jh.copy(e.ray).recast(e.near),!(Rb.containsPoint(Jh.origin)===!1&&(Jh.intersectSphere(Rb,sP)===null||Jh.origin.distanceToSquared(sP)>(e.far-e.near)**2))&&(nP.copy(r).invert(),Jh.copy(e.ray).applyMatrix4(nP),!(n.boundingBox!==null&&Jh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Jh)))}_computeIntersections(e,t,n){let s;const r=this.geometry,a=this.material,o=r.index,l=r.attributes.position,u=r.attributes.uv,f=r.attributes.uv1,d=r.attributes.normal,p=r.groups,m=r.drawRange;if(o!==null)if(Array.isArray(a))for(let _=0,x=p.length;_<x;_++){const b=p[_],v=a[b.materialIndex],T=Math.max(b.start,m.start),A=Math.min(o.count,Math.min(b.start+b.count,m.start+m.count));for(let w=T,B=A;w<B;w+=3){const I=o.getX(w),P=o.getX(w+1),F=o.getX(w+2);s=Ub(this,v,e,n,u,f,d,I,P,F),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=b.materialIndex,t.push(s))}}else{const _=Math.max(0,m.start),x=Math.min(o.count,m.start+m.count);for(let b=_,v=x;b<v;b+=3){const T=o.getX(b),A=o.getX(b+1),w=o.getX(b+2);s=Ub(this,a,e,n,u,f,d,T,A,w),s&&(s.faceIndex=Math.floor(b/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let _=0,x=p.length;_<x;_++){const b=p[_],v=a[b.materialIndex],T=Math.max(b.start,m.start),A=Math.min(l.count,Math.min(b.start+b.count,m.start+m.count));for(let w=T,B=A;w<B;w+=3){const I=w,P=w+1,F=w+2;s=Ub(this,v,e,n,u,f,d,I,P,F),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=b.materialIndex,t.push(s))}}else{const _=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let b=_,v=x;b<v;b+=3){const T=b,A=b+1,w=b+2;s=Ub(this,a,e,n,u,f,d,T,A,w),s&&(s.faceIndex=Math.floor(b/3),t.push(s))}}}}function NJ(i,e,t,n,s,r,a,o){let l;if(e.side===rs?l=n.intersectTriangle(a,r,s,!0,o):l=n.intersectTriangle(s,r,a,e.side===Ho,o),l===null)return null;Pb.copy(o),Pb.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(Pb);return u<t.near||u>t.far?null:{distance:u,point:Pb.clone(),object:i}}function Ub(i,e,t,n,s,r,a,o,l,u){i.getVertexPosition(o,Bb),i.getVertexPosition(l,Lb),i.getVertexPosition(u,Ib);const f=NJ(i,e,t,n,Bb,Lb,Ib,rP);if(f){const d=new W;jr.getBarycoord(rP,Bb,Lb,Ib,d),s&&(f.uv=jr.getInterpolatedAttribute(s,o,l,u,d,new Te)),r&&(f.uv1=jr.getInterpolatedAttribute(r,o,l,u,d,new Te)),a&&(f.normal=jr.getInterpolatedAttribute(a,o,l,u,d,new W),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const p={a:o,b:l,c:u,normal:new W,materialIndex:0};jr.getNormal(Bb,Lb,Ib,p.normal),f.face=p,f.barycoord=d}return f}class yd extends Ht{constructor(e=1,t=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const l=[],u=[],f=[],d=[];let p=0,m=0;_("z","y","x",-1,-1,n,t,e,a,r,0),_("z","y","x",1,-1,n,t,-e,a,r,1),_("x","z","y",1,1,e,n,t,s,a,2),_("x","z","y",1,-1,e,n,-t,s,a,3),_("x","y","z",1,-1,e,t,n,s,r,4),_("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(l),this.setAttribute("position",new bt(u,3)),this.setAttribute("normal",new bt(f,3)),this.setAttribute("uv",new bt(d,2));function _(x,b,v,T,A,w,B,I,P,F,N){const U=w/P,H=B/F,re=w/2,J=B/2,ae=I/2,ce=P+1,j=F+1;let Q=0,$=0;const pe=new W;for(let Se=0;Se<j;Se++){const Le=Se*H-J;for(let qe=0;qe<ce;qe++){const ht=qe*U-re;pe[x]=ht*T,pe[b]=Le*A,pe[v]=ae,u.push(pe.x,pe.y,pe.z),pe[x]=0,pe[b]=0,pe[v]=I>0?1:-1,f.push(pe.x,pe.y,pe.z),d.push(qe/P),d.push(1-Se/F),Q+=1}}for(let Se=0;Se<F;Se++)for(let Le=0;Le<P;Le++){const qe=p+Le+ce*Se,ht=p+Le+ce*(Se+1),me=p+(Le+1)+ce*(Se+1),Fe=p+(Le+1)+ce*Se;l.push(qe,ht,Fe),l.push(ht,me,Fe),$+=6}o.addGroup(m,$,N),m+=$,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ng(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function Tr(i){const e={};for(let t=0;t<i.length;t++){const n=ng(i[t]);for(const s in n)e[s]=n[s]}return e}function FJ(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function zH(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pi.workingColorSpace}const GH={clone:ng,merge:Tr};var kJ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,HJ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class bn extends zn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kJ,this.fragmentShader=HJ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ng(e.uniforms),this.uniformsGroups=FJ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class b_ extends gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vt,this.projectionMatrix=new vt,this.projectionMatrixInverse=new vt,this.coordinateSystem=Po}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const vc=new W,aP=new Te,oP=new Te;class rn extends b_{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=eg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return eg*2*Math.atan(Math.tan(zf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){vc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(vc.x,vc.y).multiplyScalar(-e/vc.z),vc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(vc.x,vc.y).multiplyScalar(-e/vc.z)}getViewSize(e,t){return this.getViewBounds(e,aP,oP),t.subVectors(oP,aP)}setViewOffset(e,t,n,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(zf*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;r+=a.offsetX*s/l,t-=a.offsetY*n/u,s*=a.width/l,n*=a.height/u}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Cp=-90,Mp=1;class dB extends gi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new rn(Cp,Mp,e,t);s.layers=this.layers,this.add(s);const r=new rn(Cp,Mp,e,t);r.layers=this.layers,this.add(r);const a=new rn(Cp,Mp,e,t);a.layers=this.layers,this.add(a);const o=new rn(Cp,Mp,e,t);o.layers=this.layers,this.add(o);const l=new rn(Cp,Mp,e,t);l.layers=this.layers,this.add(l);const u=new rn(Cp,Mp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,a,o,l]=t;for(const u of t)this.remove(u);if(e===Po)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Rv)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,l,u,f]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,a),e.setRenderTarget(n,2,s),e.render(t,o),e.setRenderTarget(n,3,s),e.render(t,l),e.setRenderTarget(n,4,s),e.render(t,u),n.texture.generateMipmaps=x,e.setRenderTarget(n,5,s),e.render(t,f),e.setRenderTarget(d,p,m),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class T_ extends Zi{constructor(e=[],t=Mu,n,s,r,a,o,l,u,f){super(e,t,n,s,r,a,o,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class pB extends On{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new T_(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:on}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new yd(5,5,5),r=new bn({name:"CubemapFromEquirect",uniforms:ng(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:rs,blending:nr});r.uniforms.tEquirect.value=t;const a=new _n(s,r),o=t.minFilter;return t.minFilter===no&&(t.minFilter=on),new dB(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,s);e.setRenderTarget(r)}}class mu extends gi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zJ={type:"move"};class VT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,n),v=this._getHandJoint(u,x);b!==null&&(v.matrix.fromArray(b.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=b.radius),v.visible=b!==null}const f=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=f.position.distanceTo(d.position),m=.02,_=.005;u.inputState.pinching&&p>m+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(zJ)))}return o!==null&&(o.visible=s!==null),l!==null&&(l.visible=r!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new mu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class RA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new $e(e),this.density=t}clone(){return new RA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class BA{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new $e(e),this.near=t,this.far=n}clone(){return new BA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Lv extends gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ca,this.environmentIntensity=1,this.environmentRotation=new Ca,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class S_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Dv,this.updateRanges=[],this.version=0,this.uuid=Aa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _r=new W;class rh{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix4(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyNormalMatrix(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.transformDirection(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Cr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Cr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Cr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Cr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Cr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),n=Yt(n,this.array),s=Yt(s,this.array),r=Yt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new li(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mB extends zn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wp;const W0=new W,Dp=new W,Rp=new W,Bp=new Te,Y0=new Te,VH=new vt,Nb=new W,K0=new W,Fb=new W,lP=new Te,mC=new Te,uP=new Te;class qH extends gi{constructor(e=new mB){if(super(),this.isSprite=!0,this.type="Sprite",wp===void 0){wp=new Ht;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new S_(t,5);wp.setIndex([0,1,2,0,2,3]),wp.setAttribute("position",new rh(n,3,0,!1)),wp.setAttribute("uv",new rh(n,2,3,!1))}this.geometry=wp,this.material=e,this.center=new Te(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dp.setFromMatrixScale(this.matrixWorld),VH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Dp.multiplyScalar(-Rp.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;kb(Nb.set(-.5,-.5,0),Rp,a,Dp,s,r),kb(K0.set(.5,-.5,0),Rp,a,Dp,s,r),kb(Fb.set(.5,.5,0),Rp,a,Dp,s,r),lP.set(0,0),mC.set(1,0),uP.set(1,1);let o=e.ray.intersectTriangle(Nb,K0,Fb,!1,W0);if(o===null&&(kb(K0.set(-.5,.5,0),Rp,a,Dp,s,r),mC.set(0,1),o=e.ray.intersectTriangle(Nb,Fb,K0,!1,W0),o===null))return;const l=e.ray.origin.distanceTo(W0);l<e.near||l>e.far||t.push({distance:l,point:W0.clone(),uv:jr.getInterpolation(W0,Nb,K0,Fb,lP,mC,uP,new Te),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function kb(i,e,t,n,s,r){Bp.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(Y0.x=r*Bp.x-s*Bp.y,Y0.y=s*Bp.x+r*Bp.y):Y0.copy(Bp),i.copy(e),i.x+=Y0.x,i.y+=Y0.y,i.applyMatrix4(VH)}const Hb=new W,cP=new W;class jH extends gi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Hb.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(Hb);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Hb.setFromMatrixPosition(e.matrixWorld),cP.setFromMatrixPosition(this.matrixWorld);const n=Hb.distanceTo(cP)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let a=t[s].distance;if(t[s].object.visible&&(a-=a*t[s].hysteresis),n>=a)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const hP=new W,fP=new di,dP=new di,GJ=new W,pP=new vt,zb=new W,gC=new Es,mP=new vt,yC=new gd;class gB extends _n{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Pw,this.bindMatrix=new vt,this.bindMatrixInverse=new vt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new sr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,zb),this.boundingBox.expandByPoint(zb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Es),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,zb),this.boundingSphere.expandByPoint(zb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gC.copy(this.boundingSphere),gC.applyMatrix4(s),e.ray.intersectsSphere(gC)!==!1&&(mP.copy(s).invert(),yC.copy(e.ray).applyMatrix4(mP),!(this.boundingBox!==null&&yC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,yC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new di,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Pw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===SH?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;fP.fromBufferAttribute(s.attributes.skinIndex,e),dP.fromBufferAttribute(s.attributes.skinWeight,e),hP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=dP.getComponent(r);if(a!==0){const o=fP.getComponent(r);pP.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(GJ.copy(hP).applyMatrix4(pP),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class LA extends gi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gl extends Zi{constructor(e=null,t=1,n=1,s,r,a,o,l,u=In,f=In,d,p){super(null,a,o,l,u,f,s,r,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const gP=new vt,VJ=new vt;class A_{constructor(e=[],t=[]){this.uuid=Aa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new vt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new vt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const o=e[r]?e[r].matrixWorld:VJ;gP.multiplyMatrices(o,t[r]),gP.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new A_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new gl(t,e,e,er,Rr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new LA),this.bones.push(a),this.boneInverses.push(new vt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const a=t[s];e.bones.push(a.uuid);const o=n[s];e.boneInverses.push(o.toArray())}return e}}class nd extends li{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Lp=new vt,yP=new vt,Gb=[],vP=new sr,qJ=new vt,J0=new _n,Q0=new Es;class yB extends _n{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nd(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,qJ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new sr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Lp),vP.copy(e.boundingBox).applyMatrix4(Lp),this.boundingBox.union(vP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Es),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Lp),Q0.copy(e.boundingSphere).applyMatrix4(Lp),this.boundingSphere.union(Q0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=e*r+1;for(let o=0;o<n.length;o++)n[o]=s[a+o]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(J0.geometry=this.geometry,J0.material=this.material,J0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Q0.copy(this.boundingSphere),Q0.applyMatrix4(n),e.ray.intersectsSphere(Q0)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Lp),yP.multiplyMatrices(n,Lp),J0.matrixWorld=yP,J0.raycast(e,Gb);for(let a=0,o=Gb.length;a<o;a++){const l=Gb[a];l.instanceId=r,l.object=this,t.push(l)}Gb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new gl(new Float32Array(s*this.count),s,this.count,AA,Rr));const r=this.morphTexture.source.data.data;let a=0;for(let u=0;u<n.length;u++)a+=n[u];const o=this.geometry.morphTargetsRelative?1:1-a,l=s*e;r[l]=o,r.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const vC=new W,jJ=new W,XJ=new qt;class ru{constructor(e=new W(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=vC.subVectors(n,t).cross(jJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(vC),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||XJ.getNormalMatrix(e),s=this.coplanarPoint(vC).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qh=new Es,Vb=new W;class E_{constructor(e=new ru,t=new ru,n=new ru,s=new ru,r=new ru,a=new ru){this.planes=[e,t,n,s,r,a]}set(e,t,n,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Po){const n=this.planes,s=e.elements,r=s[0],a=s[1],o=s[2],l=s[3],u=s[4],f=s[5],d=s[6],p=s[7],m=s[8],_=s[9],x=s[10],b=s[11],v=s[12],T=s[13],A=s[14],w=s[15];if(n[0].setComponents(l-r,p-u,b-m,w-v).normalize(),n[1].setComponents(l+r,p+u,b+m,w+v).normalize(),n[2].setComponents(l+a,p+f,b+_,w+T).normalize(),n[3].setComponents(l-a,p-f,b-_,w-T).normalize(),n[4].setComponents(l-o,p-d,b-x,w-A).normalize(),t===Po)n[5].setComponents(l+o,p+d,b+x,w+A).normalize();else if(t===Rv)n[5].setComponents(o,d,x,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Qh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qh)}intersectsSprite(e){return Qh.center.set(0,0,0),Qh.radius=.7071067811865476,Qh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qh)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(Vb.x=s.normal.x>0?e.max.x:e.min.x,Vb.y=s.normal.y>0?e.max.y:e.min.y,Vb.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Vb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _C(i,e){return i-e}function WJ(i,e){return i.z-e.z}function YJ(i,e){return e.z-i.z}class KJ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=s}reset(){this.list.length=0,this.index=0}}const Nr=new vt,JJ=new $e(1,1,1),xC=new E_,qb=new sr,Zh=new Es,Z0=new W,_P=new W,QJ=new W,bC=new KJ,Ks=new _n,jb=[];function ZJ(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)e.setComponent(r+t,a,i.getComponent(r,a))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function $h(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class XH extends _n{constructor(e,t,n=t*2,s){super(new Ht,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new gl(t,e,e,er,Rr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new gl(t,e,e,__,Sl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new gl(t,e,e,er,Rr);n.colorSpace=pi.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const a=e.getAttribute(r),{array:o,itemSize:l,normalized:u}=a,f=new o.constructor(n*l),d=new li(f,l,u);t.setAttribute(r,d)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new li(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new sr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Nr),this.getBoundingBoxAt(r,qb).applyMatrix4(Nr),e.union(qb)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Nr),this.getBoundingSphereAt(r,Zh).applyMatrix4(Nr),e.union(Zh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(_C),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Nr.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(JJ.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(_C),l=this._availableGeometryIds.shift(),r[l]=s):(l=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(l,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(s&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const f in n.attributes){const d=t.getAttribute(f),p=n.getAttribute(f);ZJ(d,p,l);const m=d.itemSize;for(let _=d.count,x=u;_<x;_++){const b=l+_;for(let v=0;v<m;v++)p.setComponent(b,v,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,u*m)}if(s){const f=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let p=0;p<a.count;p++)r.setX(f+p,l+a.getX(p));for(let p=a.count,m=d;p<m;p++)r.setX(f+p,l);r.needsUpdate=!0,r.addUpdateRange(f,o.reservedIndexCount)}return o.start=s?o.indexStart:o.vertexStart,o.count=s?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),r=this.geometry;for(let a=0,o=n.length;a<o;a++){const l=s[a],u=n[l];if(u.active!==!1){if(r.index!==null){if(u.indexStart!==t){const{indexStart:f,vertexStart:d,reservedIndexCount:p}=u,m=r.index,_=m.array,x=e-d;for(let b=f;b<f+p;b++)_[b]=_[b]+x;m.array.copyWithin(t,f,f+p),m.addUpdateRange(t,p),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:f,reservedVertexCount:d}=u,p=r.attributes;for(const m in p){const _=p[m],{array:x,itemSize:b}=_;x.copyWithin(e*b,f*b,(f+d)*b),_.addUpdateRange(e*b,d*b)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=r.index?u.indexStart:u.vertexStart,this._nextIndexStart=r.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new sr,a=n.index,o=n.attributes.position;for(let l=s.start,u=s.start+s.count;l<u;l++){let f=l;a&&(f=a.getX(f)),r.expandByPoint(Z0.fromBufferAttribute(o,f))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new Es;this.getBoundingBoxAt(e,qb),qb.getCenter(r.center);const a=n.index,o=n.attributes.position;let l=0;for(let u=s.start,f=s.start+s.count;u<f;u++){let d=u;a&&(d=a.getX(d)),Z0.fromBufferAttribute(o,d),l=Math.max(l,r.center.distanceToSquared(Z0))}r.radius=Math.sqrt(l),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(_C);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);$h(this._multiDrawCounts,s),$h(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),$h(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),$h(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),$h(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ht,this._initializeGeometry(r));const a=this.geometry;r.index&&$h(r.index.array,a.index.array);for(const o in r.attributes)$h(r.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;Ks.material=this.material,Ks.geometry.index=a.index,Ks.geometry.attributes=a.attributes,Ks.geometry.boundingBox===null&&(Ks.geometry.boundingBox=new sr),Ks.geometry.boundingSphere===null&&(Ks.geometry.boundingSphere=new Es);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const u=n[o].geometryIndex,f=s[u];Ks.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(o,Ks.matrixWorld).premultiply(r),this.getBoundingBoxAt(u,Ks.geometry.boundingBox),this.getBoundingSphereAt(u,Ks.geometry.boundingSphere),Ks.raycast(e,jb);for(let d=0,p=jb.length;d<p;d++){const m=jb[d];m.object=this,m.batchId=o,t.push(m)}jb.length=0}Ks.material=null,Ks.geometry.index=null,Ks.geometry.attributes={},Ks.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,f=this._multiDrawCounts,d=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,_=m.image.data;p&&(Nr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),xC.setFromProjectionMatrix(Nr,e.coordinateSystem));let x=0;if(this.sortObjects){Nr.copy(this.matrixWorld).invert(),Z0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Nr),_P.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Nr);for(let T=0,A=l.length;T<A;T++)if(l[T].visible&&l[T].active){const w=l[T].geometryIndex;this.getMatrixAt(T,Nr),this.getBoundingSphereAt(w,Zh).applyMatrix4(Nr);let B=!1;if(p&&(B=!xC.intersectsSphere(Zh)),!B){const I=d[w],P=QJ.subVectors(Zh.center,Z0).dot(_P);bC.push(I.start,I.count,P,T)}}const b=bC.list,v=this.customSort;v===null?b.sort(r.transparent?YJ:WJ):v.call(this,b,n);for(let T=0,A=b.length;T<A;T++){const w=b[T];u[x]=w.start*o,f[x]=w.count,_[x]=w.index,x++}bC.reset()}else for(let b=0,v=l.length;b<v;b++)if(l[b].visible&&l[b].active){const T=l[b].geometryIndex;let A=!1;if(p&&(this.getMatrixAt(b,Nr),this.getBoundingSphereAt(T,Zh).applyMatrix4(Nr),A=!xC.intersectsSphere(Zh)),!A){const w=d[T];u[x]=w.start*o,f[x]=w.count,_[x]=b,x++}}m.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,a){this.onBeforeRender(e,null,s,r,a)}}class lr extends zn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $e(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const m1=new W,g1=new W,xP=new vt,$0=new gd,Xb=new Es,TC=new W,bP=new W;class wu extends gi{constructor(e=new Ht,t=new lr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)m1.fromBufferAttribute(t,s-1),g1.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=m1.distanceTo(g1);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Xb.copy(n.boundingSphere),Xb.applyMatrix4(s),Xb.radius+=r,e.ray.intersectsSphere(Xb)===!1)return;xP.copy(s).invert(),$0.copy(e.ray).applyMatrix4(xP);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(f!==null){const m=Math.max(0,a.start),_=Math.min(f.count,a.start+a.count);for(let x=m,b=_-1;x<b;x+=u){const v=f.getX(x),T=f.getX(x+1),A=Wb(this,e,$0,l,v,T,x);A&&t.push(A)}if(this.isLineLoop){const x=f.getX(_-1),b=f.getX(m),v=Wb(this,e,$0,l,x,b,_-1);v&&t.push(v)}}else{const m=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let x=m,b=_-1;x<b;x+=u){const v=Wb(this,e,$0,l,x,x+1,x);v&&t.push(v)}if(this.isLineLoop){const x=Wb(this,e,$0,l,_-1,m,_-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function Wb(i,e,t,n,s,r,a){const o=i.geometry.attributes.position;if(m1.fromBufferAttribute(o,s),g1.fromBufferAttribute(o,r),t.distanceSqToSegment(m1,g1,TC,bP)>n)return;TC.applyMatrix4(i.matrixWorld);const u=e.ray.origin.distanceTo(TC);if(!(u<e.near||u>e.far))return{distance:u,point:bP.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const TP=new W,SP=new W;class Vo extends wu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)TP.fromBufferAttribute(t,s),SP.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+TP.distanceTo(SP);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vB extends wu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class IA extends zn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const AP=new vt,Fw=new gd,Yb=new Es,Kb=new W;class _B extends gi{constructor(e=new Ht,t=new IA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Yb.copy(n.boundingSphere),Yb.applyMatrix4(s),Yb.radius+=r,e.ray.intersectsSphere(Yb)===!1)return;AP.copy(s).invert(),Fw.copy(e.ray).applyMatrix4(AP);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=n.index,d=n.attributes.position;if(u!==null){const p=Math.max(0,a.start),m=Math.min(u.count,a.start+a.count);for(let _=p,x=m;_<x;_++){const b=u.getX(_);Kb.fromBufferAttribute(d,b),EP(Kb,b,l,s,e,t,this)}}else{const p=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count);for(let _=p,x=m;_<x;_++)Kb.fromBufferAttribute(d,_),EP(Kb,_,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function EP(i,e,t,n,s,r,a){const o=Fw.distanceSqToPoint(i);if(o<t){const l=new W;Fw.closestPointToPoint(i,l),l.applyMatrix4(n);const u=s.ray.origin.distanceTo(l);if(u<s.near||u>s.far)return;r.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class WH extends Zi{constructor(e,t,n,s,r=on,a=on,o,l,u){super(e,t,n,s,r,a,o,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class $J extends WH{constructor(e,t,n,s,r,a,o,l){super({},e,t,n,s,r,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class eQ extends Zi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=In,this.minFilter=In,this.generateMipmaps=!1,this.needsUpdate=!0}}class OA extends Zi{constructor(e,t,n,s,r,a,o,l,u,f,d,p){super(null,a,o,l,u,f,s,r,d,p),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class tQ extends OA{constructor(e,t,n,s,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=va,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class iQ extends OA{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Mu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class nQ extends Zi{constructor(e,t,n,s,r,a,o,l,u){super(e,t,n,s,r,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class PA extends Zi{constructor(e,t,n=Sl,s,r,a,o=In,l=In,u,f=Qm){if(f!==Qm&&f!==id)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,o,l,f,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Vc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class qo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let o=0,l=r-1,u;for(;o<=l;)if(s=Math.floor(o+(l-o)/2),u=n[s]-a,u<0)o=s+1;else if(u>0)l=s-1;else{l=s;break}if(s=l,n[s]===a)return s/(r-1);const f=n[s],p=n[s+1]-f,m=(a-f)/p;return(s+m)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),l=t||(a.isVector2?new Te:new W);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new W,s=[],r=[],a=[],o=new W,l=new vt;for(let m=0;m<=e;m++){const _=m/e;s[m]=this.getTangentAt(_,new W)}r[0]=new W,a[0]=new W;let u=Number.MAX_VALUE;const f=Math.abs(s[0].x),d=Math.abs(s[0].y),p=Math.abs(s[0].z);f<=u&&(u=f,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),p<=u&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let m=1;m<=e;m++){if(r[m]=r[m-1].clone(),a[m]=a[m-1].clone(),o.crossVectors(s[m-1],s[m]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(zt(s[m-1].dot(s[m]),-1,1));r[m].applyMatrix4(l.makeRotationAxis(o,_))}a[m].crossVectors(s[m],r[m])}if(t===!0){let m=Math.acos(zt(r[0].dot(r[e]),-1,1));m/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(m=-m);for(let _=1;_<=e;_++)r[_].applyMatrix4(l.makeRotationAxis(s[_],m*_)),a[_].crossVectors(s[_],r[_])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class UA extends qo{constructor(e=0,t=0,n=1,s=1,r=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new Te){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const o=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*f-m*d+this.aX,u=p*d+m*f+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class YH extends UA{constructor(e,t,n,s,r,a){super(e,t,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function xB(){let i=0,e=0,t=0,n=0;function s(r,a,o,l){i=r,e=o,t=-3*r+3*a-2*o-l,n=2*r-2*a+o+l}return{initCatmullRom:function(r,a,o,l,u){s(a,o,u*(o-r),u*(l-a))},initNonuniformCatmullRom:function(r,a,o,l,u,f,d){let p=(a-r)/u-(o-r)/(u+f)+(o-a)/f,m=(o-a)/f-(l-a)/(f+d)+(l-o)/d;p*=f,m*=f,s(a,o,p,m)},calc:function(r){const a=r*r,o=a*r;return i+e*r+t*a+n*o}}}const Jb=new W,SC=new xB,AC=new xB,EC=new xB;class KH extends qo{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new W){const n=t,s=this.points,r=s.length,a=(r-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:l===0&&o===r-1&&(o=r-2,l=1);let u,f;this.closed||o>0?u=s[(o-1)%r]:(Jb.subVectors(s[0],s[1]).add(s[0]),u=Jb);const d=s[o%r],p=s[(o+1)%r];if(this.closed||o+2<r?f=s[(o+2)%r]:(Jb.subVectors(s[r-1],s[r-2]).add(s[r-1]),f=Jb),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(p),m),b=Math.pow(p.distanceToSquared(f),m);x<1e-4&&(x=1),_<1e-4&&(_=x),b<1e-4&&(b=x),SC.initNonuniformCatmullRom(u.x,d.x,p.x,f.x,_,x,b),AC.initNonuniformCatmullRom(u.y,d.y,p.y,f.y,_,x,b),EC.initNonuniformCatmullRom(u.z,d.z,p.z,f.z,_,x,b)}else this.curveType==="catmullrom"&&(SC.initCatmullRom(u.x,d.x,p.x,f.x,this.tension),AC.initCatmullRom(u.y,d.y,p.y,f.y,this.tension),EC.initCatmullRom(u.z,d.z,p.z,f.z,this.tension));return n.set(SC.calc(l),AC.calc(l),EC.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new W().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CP(i,e,t,n,s){const r=(n-e)*.5,a=(s-t)*.5,o=i*i,l=i*o;return(2*t-2*n+r+a)*l+(-3*t+3*n-2*r-a)*o+r*i+t}function sQ(i,e){const t=1-i;return t*t*e}function rQ(i,e){return 2*(1-i)*i*e}function aQ(i,e){return i*i*e}function Ky(i,e,t,n){return sQ(i,e)+rQ(i,t)+aQ(i,n)}function oQ(i,e){const t=1-i;return t*t*t*e}function lQ(i,e){const t=1-i;return 3*t*t*i*e}function uQ(i,e){return 3*(1-i)*i*i*e}function cQ(i,e){return i*i*i*e}function Jy(i,e,t,n,s){return oQ(i,e)+lQ(i,t)+uQ(i,n)+cQ(i,s)}class bB extends qo{constructor(e=new Te,t=new Te,n=new Te,s=new Te){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Te){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Jy(e,s.x,r.x,a.x,o.x),Jy(e,s.y,r.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class JH extends qo{constructor(e=new W,t=new W,n=new W,s=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new W){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Jy(e,s.x,r.x,a.x,o.x),Jy(e,s.y,r.y,a.y,o.y),Jy(e,s.z,r.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TB extends qo{constructor(e=new Te,t=new Te){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Te){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QH extends qo{constructor(e=new W,t=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new W){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new W){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SB extends qo{constructor(e=new Te,t=new Te,n=new Te){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Te){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(Ky(e,s.x,r.x,a.x),Ky(e,s.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AB extends qo{constructor(e=new W,t=new W,n=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new W){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(Ky(e,s.x,r.x,a.x),Ky(e,s.y,r.y,a.y),Ky(e,s.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EB extends qo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Te){const n=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,l=s[a===0?a:a-1],u=s[a],f=s[a>s.length-2?s.length-1:a+1],d=s[a>s.length-3?s.length-1:a+2];return n.set(CP(o,l.x,u.x,f.x,d.x),CP(o,l.y,u.y,f.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Te().fromArray(s))}return this}}var y1=Object.freeze({__proto__:null,ArcCurve:YH,CatmullRomCurve3:KH,CubicBezierCurve:bB,CubicBezierCurve3:JH,EllipseCurve:UA,LineCurve:TB,LineCurve3:QH,QuadraticBezierCurve:SB,QuadraticBezierCurve3:AB,SplineCurve:EB});class ZH extends qo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new y1[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,o=this.curves[r],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const f=l[u];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new y1[s.type]().fromJSON(s))}return this}}class Iv extends ZH{constructor(e){super(),this.type="Path",this.currentPoint=new Te,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new TB(this.currentPoint.clone(),new Te(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new SB(this.currentPoint.clone(),new Te(e,t),new Te(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,a){const o=new bB(this.currentPoint.clone(),new Te(e,t),new Te(n,s),new Te(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new EB(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,s,r,a),this}absarc(e,t,n,s,r,a){return this.absellipse(e,t,n,n,s,r,a),this}ellipse(e,t,n,s,r,a,o,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,n,s,r,a,o,l),this}absellipse(e,t,n,s,r,a,o,l){const u=new UA(e,t,n,s,r,a,o,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class C_ extends Ht{constructor(e=[new Te(0,-.5),new Te(.5,0),new Te(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=zt(s,0,Math.PI*2);const r=[],a=[],o=[],l=[],u=[],f=1/t,d=new W,p=new Te,m=new W,_=new W,x=new W;let b=0,v=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:b=e[T+1].x-e[T].x,v=e[T+1].y-e[T].y,m.x=v*1,m.y=-b,m.z=v*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:b=e[T+1].x-e[T].x,v=e[T+1].y-e[T].y,m.x=v*1,m.y=-b,m.z=v*0,_.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(_)}for(let T=0;T<=t;T++){const A=n+T*f*s,w=Math.sin(A),B=Math.cos(A);for(let I=0;I<=e.length-1;I++){d.x=e[I].x*w,d.y=e[I].y,d.z=e[I].x*B,a.push(d.x,d.y,d.z),p.x=T/t,p.y=I/(e.length-1),o.push(p.x,p.y);const P=l[3*I+0]*w,F=l[3*I+1],N=l[3*I+0]*B;u.push(P,F,N)}}for(let T=0;T<t;T++)for(let A=0;A<e.length-1;A++){const w=A+T*e.length,B=w,I=w+e.length,P=w+e.length+1,F=w+1;r.push(B,I,F),r.push(P,F,I)}this.setIndex(r),this.setAttribute("position",new bt(a,3)),this.setAttribute("uv",new bt(o,2)),this.setAttribute("normal",new bt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C_(e.points,e.segments,e.phiStart,e.phiLength)}}class NA extends C_{constructor(e=1,t=1,n=4,s=8){const r=new Iv;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(n),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:s}}static fromJSON(e){return new NA(e.radius,e.length,e.capSegments,e.radialSegments)}}class FA extends Ht{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],a=[],o=[],l=[],u=new W,f=new Te;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=n+d/t*s;u.x=e*Math.cos(m),u.y=e*Math.sin(m),a.push(u.x,u.y,u.z),o.push(0,0,1),f.x=(a[p]/e+1)/2,f.y=(a[p+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=t;d++)r.push(d,d+1,0);this.setIndex(r),this.setAttribute("position",new bt(a,3)),this.setAttribute("normal",new bt(o,3)),this.setAttribute("uv",new bt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bg extends Ht{constructor(e=1,t=1,n=1,s=32,r=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:l};const u=this;s=Math.floor(s),r=Math.floor(r);const f=[],d=[],p=[],m=[];let _=0;const x=[],b=n/2;let v=0;T(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(f),this.setAttribute("position",new bt(d,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(m,2));function T(){const w=new W,B=new W;let I=0;const P=(t-e)/n;for(let F=0;F<=r;F++){const N=[],U=F/r,H=U*(t-e)+e;for(let re=0;re<=s;re++){const J=re/s,ae=J*l+o,ce=Math.sin(ae),j=Math.cos(ae);B.x=H*ce,B.y=-U*n+b,B.z=H*j,d.push(B.x,B.y,B.z),w.set(ce,P,j).normalize(),p.push(w.x,w.y,w.z),m.push(J,1-U),N.push(_++)}x.push(N)}for(let F=0;F<s;F++)for(let N=0;N<r;N++){const U=x[N][F],H=x[N+1][F],re=x[N+1][F+1],J=x[N][F+1];(e>0||N!==0)&&(f.push(U,H,J),I+=3),(t>0||N!==r-1)&&(f.push(H,re,J),I+=3)}u.addGroup(v,I,0),v+=I}function A(w){const B=_,I=new Te,P=new W;let F=0;const N=w===!0?e:t,U=w===!0?1:-1;for(let re=1;re<=s;re++)d.push(0,b*U,0),p.push(0,U,0),m.push(.5,.5),_++;const H=_;for(let re=0;re<=s;re++){const ae=re/s*l+o,ce=Math.cos(ae),j=Math.sin(ae);P.x=N*j,P.y=b*U,P.z=N*ce,d.push(P.x,P.y,P.z),p.push(0,U,0),I.x=ce*.5+.5,I.y=j*.5*U+.5,m.push(I.x,I.y),_++}for(let re=0;re<s;re++){const J=B+re,ae=H+re;w===!0?f.push(ae,ae+1,J):f.push(ae+1,ae,J),F+=3}u.addGroup(v,F,w===!0?1:2),v+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kA extends Bg{constructor(e=1,t=1,n=32,s=1,r=!1,a=0,o=Math.PI*2){super(0,e,t,n,s,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o}}static fromJSON(e){return new kA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class mh extends Ht{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],a=[];o(s),u(n),f(),this.setAttribute("position",new bt(r,3)),this.setAttribute("normal",new bt(r.slice(),3)),this.setAttribute("uv",new bt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function o(T){const A=new W,w=new W,B=new W;for(let I=0;I<t.length;I+=3)m(t[I+0],A),m(t[I+1],w),m(t[I+2],B),l(A,w,B,T)}function l(T,A,w,B){const I=B+1,P=[];for(let F=0;F<=I;F++){P[F]=[];const N=T.clone().lerp(w,F/I),U=A.clone().lerp(w,F/I),H=I-F;for(let re=0;re<=H;re++)re===0&&F===I?P[F][re]=N:P[F][re]=N.clone().lerp(U,re/H)}for(let F=0;F<I;F++)for(let N=0;N<2*(I-F)-1;N++){const U=Math.floor(N/2);N%2===0?(p(P[F][U+1]),p(P[F+1][U]),p(P[F][U])):(p(P[F][U+1]),p(P[F+1][U+1]),p(P[F+1][U]))}}function u(T){const A=new W;for(let w=0;w<r.length;w+=3)A.x=r[w+0],A.y=r[w+1],A.z=r[w+2],A.normalize().multiplyScalar(T),r[w+0]=A.x,r[w+1]=A.y,r[w+2]=A.z}function f(){const T=new W;for(let A=0;A<r.length;A+=3){T.x=r[A+0],T.y=r[A+1],T.z=r[A+2];const w=b(T)/2/Math.PI+.5,B=v(T)/Math.PI+.5;a.push(w,1-B)}_(),d()}function d(){for(let T=0;T<a.length;T+=6){const A=a[T+0],w=a[T+2],B=a[T+4],I=Math.max(A,w,B),P=Math.min(A,w,B);I>.9&&P<.1&&(A<.2&&(a[T+0]+=1),w<.2&&(a[T+2]+=1),B<.2&&(a[T+4]+=1))}}function p(T){r.push(T.x,T.y,T.z)}function m(T,A){const w=T*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function _(){const T=new W,A=new W,w=new W,B=new W,I=new Te,P=new Te,F=new Te;for(let N=0,U=0;N<r.length;N+=9,U+=6){T.set(r[N+0],r[N+1],r[N+2]),A.set(r[N+3],r[N+4],r[N+5]),w.set(r[N+6],r[N+7],r[N+8]),I.set(a[U+0],a[U+1]),P.set(a[U+2],a[U+3]),F.set(a[U+4],a[U+5]),B.copy(T).add(A).add(w).divideScalar(3);const H=b(B);x(I,U+0,T,H),x(P,U+2,A,H),x(F,U+4,w,H)}}function x(T,A,w,B){B<0&&T.x===1&&(a[A]=T.x-1),w.x===0&&w.z===0&&(a[A]=B/2/Math.PI+.5)}function b(T){return Math.atan2(T.z,-T.x)}function v(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mh(e.vertices,e.indices,e.radius,e.details)}}class HA extends mh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new HA(e.radius,e.detail)}}const Qb=new W,Zb=new W,CC=new W,$b=new jr;class $H extends Ht{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(zf*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],f=["a","b","c"],d=new Array(3),p={},m=[];for(let _=0;_<l;_+=3){a?(u[0]=a.getX(_),u[1]=a.getX(_+1),u[2]=a.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:x,b,c:v}=$b;if(x.fromBufferAttribute(o,u[0]),b.fromBufferAttribute(o,u[1]),v.fromBufferAttribute(o,u[2]),$b.getNormal(CC),d[0]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,d[1]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,d[2]=`${Math.round(v.x*s)},${Math.round(v.y*s)},${Math.round(v.z*s)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let T=0;T<3;T++){const A=(T+1)%3,w=d[T],B=d[A],I=$b[f[T]],P=$b[f[A]],F=`${w}_${B}`,N=`${B}_${w}`;N in p&&p[N]?(CC.dot(p[N].normal)<=r&&(m.push(I.x,I.y,I.z),m.push(P.x,P.y,P.z)),p[N]=null):F in p||(p[F]={index0:u[T],index1:u[A],normal:CC.clone()})}}for(const _ in p)if(p[_]){const{index0:x,index1:b}=p[_];Qb.fromBufferAttribute(o,x),Zb.fromBufferAttribute(o,b),m.push(Qb.x,Qb.y,Qb.z),m.push(Zb.x,Zb.y,Zb.z)}this.setAttribute("position",new bt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Gf extends Iv{constructor(e){super(e),this.uuid=Aa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new Iv().fromJSON(s))}return this}}function hQ(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=e6(i,0,s,t,!0);const a=[];if(!r||r.next===r.prev)return a;let o,l,u;if(n&&(r=gQ(i,e,r,t)),i.length>80*t){o=1/0,l=1/0;let f=-1/0,d=-1/0;for(let p=t;p<s;p+=t){const m=i[p],_=i[p+1];m<o&&(o=m),_<l&&(l=_),m>f&&(f=m),_>d&&(d=_)}u=Math.max(f-o,d-l),u=u!==0?32767/u:0}return Ov(r,a,t,o,l,u,0),a}function e6(i,e,t,n,s){let r;if(s===MQ(i,e,t,n)>0)for(let a=e;a<t;a+=n)r=MP(a/n|0,i[a],i[a+1],r);else for(let a=t-n;a>=e;a-=n)r=MP(a/n|0,i[a],i[a+1],r);return r&&sg(r,r.next)&&(Uv(r),r=r.next),r}function sd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(sg(t,t.next)||yn(t.prev,t,t.next)===0)){if(Uv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Ov(i,e,t,n,s,r,a){if(!i)return;!a&&r&&bQ(i,n,s,r);let o=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(r?dQ(i,n,s,r):fQ(i)){e.push(l.i,i.i,u.i),Uv(i),i=u.next,o=u.next;continue}if(i=u,i===o){a?a===1?(i=pQ(sd(i),e),Ov(i,e,t,n,s,r,2)):a===2&&mQ(i,e,t,n,s,r):Ov(sd(i),e,t,n,s,r,1);break}}}function fQ(i){const e=i.prev,t=i,n=i.next;if(yn(e,t,n)>=0)return!1;const s=e.x,r=t.x,a=n.x,o=e.y,l=t.y,u=n.y,f=Math.min(s,r,a),d=Math.min(o,l,u),p=Math.max(s,r,a),m=Math.max(o,l,u);let _=n.next;for(;_!==e;){if(_.x>=f&&_.x<=p&&_.y>=d&&_.y<=m&&yy(s,o,r,l,a,u,_.x,_.y)&&yn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function dQ(i,e,t,n){const s=i.prev,r=i,a=i.next;if(yn(s,r,a)>=0)return!1;const o=s.x,l=r.x,u=a.x,f=s.y,d=r.y,p=a.y,m=Math.min(o,l,u),_=Math.min(f,d,p),x=Math.max(o,l,u),b=Math.max(f,d,p),v=kw(m,_,e,t,n),T=kw(x,b,e,t,n);let A=i.prevZ,w=i.nextZ;for(;A&&A.z>=v&&w&&w.z<=T;){if(A.x>=m&&A.x<=x&&A.y>=_&&A.y<=b&&A!==s&&A!==a&&yy(o,f,l,d,u,p,A.x,A.y)&&yn(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=m&&w.x<=x&&w.y>=_&&w.y<=b&&w!==s&&w!==a&&yy(o,f,l,d,u,p,w.x,w.y)&&yn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=v;){if(A.x>=m&&A.x<=x&&A.y>=_&&A.y<=b&&A!==s&&A!==a&&yy(o,f,l,d,u,p,A.x,A.y)&&yn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=T;){if(w.x>=m&&w.x<=x&&w.y>=_&&w.y<=b&&w!==s&&w!==a&&yy(o,f,l,d,u,p,w.x,w.y)&&yn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function pQ(i,e){let t=i;do{const n=t.prev,s=t.next.next;!sg(n,s)&&i6(n,t,t.next,s)&&Pv(n,s)&&Pv(s,n)&&(e.push(n.i,t.i,s.i),Uv(t),Uv(t.next),t=i=s),t=t.next}while(t!==i);return sd(t)}function mQ(i,e,t,n,s,r){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&AQ(a,o)){let l=n6(a,o);a=sd(a,a.next),l=sd(l,l.next),Ov(a,e,t,n,s,r,0),Ov(l,e,t,n,s,r,0);return}o=o.next}a=a.next}while(a!==i)}function gQ(i,e,t,n){const s=[];for(let r=0,a=e.length;r<a;r++){const o=e[r]*n,l=r<a-1?e[r+1]*n:i.length,u=e6(i,o,l,n,!1);u===u.next&&(u.steiner=!0),s.push(SQ(u))}s.sort(yQ);for(let r=0;r<s.length;r++)t=vQ(s[r],t);return t}function yQ(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function vQ(i,e){const t=_Q(i,e);if(!t)return e;const n=n6(t,i);return sd(n,n.next),sd(t,t.next)}function _Q(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,a;if(sg(i,t))return t;do{if(sg(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const d=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=n&&d>r&&(r=d,a=t.x<t.next.x?t:t.next,d===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,u=a.y;let f=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&t6(s<u?n:r,s,l,u,s<u?r:n,s,t.x,t.y)){const d=Math.abs(s-t.y)/(n-t.x);Pv(t,i)&&(d<f||d===f&&(t.x>a.x||t.x===a.x&&xQ(a,t)))&&(a=t,f=d)}t=t.next}while(t!==o);return a}function xQ(i,e){return yn(i.prev,i,e.prev)<0&&yn(e.next,i,i.next)<0}function bQ(i,e,t,n){let s=i;do s.z===0&&(s.z=kw(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,TQ(s)}function TQ(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let a=n,o=0;for(let u=0;u<t&&(o++,a=a.nextZ,!!a);u++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,o--):(s=a,a=a.nextZ,l--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,t*=2}while(e>1);return i}function kw(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function SQ(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function t6(i,e,t,n,s,r,a,o){return(s-a)*(e-o)>=(i-a)*(r-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(r-o)>=(s-a)*(n-o)}function yy(i,e,t,n,s,r,a,o){return!(i===a&&e===o)&&t6(i,e,t,n,s,r,a,o)}function AQ(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!EQ(i,e)&&(Pv(i,e)&&Pv(e,i)&&CQ(i,e)&&(yn(i.prev,i,e.prev)||yn(i,e.prev,e))||sg(i,e)&&yn(i.prev,i,i.next)>0&&yn(e.prev,e,e.next)>0)}function yn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function sg(i,e){return i.x===e.x&&i.y===e.y}function i6(i,e,t,n){const s=tT(yn(i,e,t)),r=tT(yn(i,e,n)),a=tT(yn(t,n,i)),o=tT(yn(t,n,e));return!!(s!==r&&a!==o||s===0&&eT(i,t,e)||r===0&&eT(i,n,e)||a===0&&eT(t,i,n)||o===0&&eT(t,e,n))}function eT(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function tT(i){return i>0?1:i<0?-1:0}function EQ(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&i6(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Pv(i,e){return yn(i.prev,i,i.next)<0?yn(i,e,i.next)>=0&&yn(i,i.prev,e)>=0:yn(i,e,i.prev)<0||yn(i,i.next,e)<0}function CQ(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function n6(i,e){const t=Hw(i.i,i.x,i.y),n=Hw(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function MP(i,e,t,n){const s=Hw(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Uv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Hw(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function MQ(i,e,t,n){let s=0;for(let r=e,a=t-n;r<t;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class wQ{static triangulate(e,t,n=2){return hQ(e,t,n)}}class yl{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return yl.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];wP(e),DP(n,e);let a=e.length;t.forEach(wP);for(let l=0;l<t.length;l++)s.push(a),a+=t[l].length,DP(n,t[l]);const o=wQ.triangulate(n,s);for(let l=0;l<o.length;l+=3)r.push(o.slice(l,l+3));return r}}function wP(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function DP(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class zA extends Ht{constructor(e=new Gf([new Te(.5,.5),new Te(-.5,.5),new Te(-.5,-.5),new Te(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new bt(s,3)),this.setAttribute("uv",new bt(r,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:DQ;let A,w=!1,B,I,P,F;v&&(A=v.getSpacedPoints(f),w=!0,p=!1,B=v.computeFrenetFrames(f,!1),I=new W,P=new W,F=new W),p||(b=0,m=0,_=0,x=0);const N=o.extractPoints(u);let U=N.shape;const H=N.holes;if(!yl.isClockWise(U)){U=U.reverse();for(let Pe=0,Ie=H.length;Pe<Ie;Pe++){const Me=H[Pe];yl.isClockWise(Me)&&(H[Pe]=Me.reverse())}}function J(Pe){const Me=10000000000000001e-36;let We=Pe[0];for(let ge=1;ge<=Pe.length;ge++){const X=ge%Pe.length,k=Pe[X],ue=k.x-We.x,Ae=k.y-We.y,Re=ue*ue+Ae*Ae,we=Math.max(Math.abs(k.x),Math.abs(k.y),Math.abs(We.x),Math.abs(We.y)),et=Me*we*we;if(Re<=et){Pe.splice(X,1),ge--;continue}We=k}}J(U),H.forEach(J);const ae=H.length,ce=U;for(let Pe=0;Pe<ae;Pe++){const Ie=H[Pe];U=U.concat(Ie)}function j(Pe,Ie,Me){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(Ie,Me)}const Q=U.length;function $(Pe,Ie,Me){let We,ge,X;const k=Pe.x-Ie.x,ue=Pe.y-Ie.y,Ae=Me.x-Pe.x,Re=Me.y-Pe.y,we=k*k+ue*ue,et=k*Re-ue*Ae;if(Math.abs(et)>Number.EPSILON){const Ke=Math.sqrt(we),lt=Math.sqrt(Ae*Ae+Re*Re),Vt=Ie.x-ue/Ke,ze=Ie.y+k/Ke,Ve=Me.x-Re/lt,xt=Me.y+Ae/lt,_t=((Ve-Vt)*Re-(xt-ze)*Ae)/(k*Re-ue*Ae);We=Vt+k*_t-Pe.x,ge=ze+ue*_t-Pe.y;const rt=We*We+ge*ge;if(rt<=2)return new Te(We,ge);X=Math.sqrt(rt/2)}else{let Ke=!1;k>Number.EPSILON?Ae>Number.EPSILON&&(Ke=!0):k<-Number.EPSILON?Ae<-Number.EPSILON&&(Ke=!0):Math.sign(ue)===Math.sign(Re)&&(Ke=!0),Ke?(We=-ue,ge=k,X=Math.sqrt(we)):(We=k,ge=ue,X=Math.sqrt(we/2))}return new Te(We/X,ge/X)}const pe=[];for(let Pe=0,Ie=ce.length,Me=Ie-1,We=Pe+1;Pe<Ie;Pe++,Me++,We++)Me===Ie&&(Me=0),We===Ie&&(We=0),pe[Pe]=$(ce[Pe],ce[Me],ce[We]);const Se=[];let Le,qe=pe.concat();for(let Pe=0,Ie=ae;Pe<Ie;Pe++){const Me=H[Pe];Le=[];for(let We=0,ge=Me.length,X=ge-1,k=We+1;We<ge;We++,X++,k++)X===ge&&(X=0),k===ge&&(k=0),Le[We]=$(Me[We],Me[X],Me[k]);Se.push(Le),qe=qe.concat(Le)}const ht=[],me=[];for(let Pe=0;Pe<b;Pe++){const Ie=Pe/b,Me=m*Math.cos(Ie*Math.PI/2),We=_*Math.sin(Ie*Math.PI/2)+x;for(let ge=0,X=ce.length;ge<X;ge++){const k=j(ce[ge],pe[ge],We);yt(k.x,k.y,-Me),Ie==0&&ht.push(k)}for(let ge=0,X=ae;ge<X;ge++){const k=H[ge];Le=Se[ge];const ue=[];for(let Ae=0,Re=k.length;Ae<Re;Ae++){const we=j(k[Ae],Le[Ae],We);yt(we.x,we.y,-Me),Ie==0&&ue.push(we)}Ie==0&&me.push(ue)}}const Fe=yl.triangulateShape(ht,me),nt=Fe.length,Qe=_+x;for(let Pe=0;Pe<Q;Pe++){const Ie=p?j(U[Pe],qe[Pe],Qe):U[Pe];w?(P.copy(B.normals[0]).multiplyScalar(Ie.x),I.copy(B.binormals[0]).multiplyScalar(Ie.y),F.copy(A[0]).add(P).add(I),yt(F.x,F.y,F.z)):yt(Ie.x,Ie.y,0)}for(let Pe=1;Pe<=f;Pe++)for(let Ie=0;Ie<Q;Ie++){const Me=p?j(U[Ie],qe[Ie],Qe):U[Ie];w?(P.copy(B.normals[Pe]).multiplyScalar(Me.x),I.copy(B.binormals[Pe]).multiplyScalar(Me.y),F.copy(A[Pe]).add(P).add(I),yt(F.x,F.y,F.z)):yt(Me.x,Me.y,d/f*Pe)}for(let Pe=b-1;Pe>=0;Pe--){const Ie=Pe/b,Me=m*Math.cos(Ie*Math.PI/2),We=_*Math.sin(Ie*Math.PI/2)+x;for(let ge=0,X=ce.length;ge<X;ge++){const k=j(ce[ge],pe[ge],We);yt(k.x,k.y,d+Me)}for(let ge=0,X=H.length;ge<X;ge++){const k=H[ge];Le=Se[ge];for(let ue=0,Ae=k.length;ue<Ae;ue++){const Re=j(k[ue],Le[ue],We);w?yt(Re.x,Re.y+A[f-1].y,A[f-1].x+Me):yt(Re.x,Re.y,d+Me)}}}gt(),Gt();function gt(){const Pe=s.length/3;if(p){let Ie=0,Me=Q*Ie;for(let We=0;We<nt;We++){const ge=Fe[We];Ut(ge[2]+Me,ge[1]+Me,ge[0]+Me)}Ie=f+b*2,Me=Q*Ie;for(let We=0;We<nt;We++){const ge=Fe[We];Ut(ge[0]+Me,ge[1]+Me,ge[2]+Me)}}else{for(let Ie=0;Ie<nt;Ie++){const Me=Fe[Ie];Ut(Me[2],Me[1],Me[0])}for(let Ie=0;Ie<nt;Ie++){const Me=Fe[Ie];Ut(Me[0]+Q*f,Me[1]+Q*f,Me[2]+Q*f)}}n.addGroup(Pe,s.length/3-Pe,0)}function Gt(){const Pe=s.length/3;let Ie=0;dt(ce,Ie),Ie+=ce.length;for(let Me=0,We=H.length;Me<We;Me++){const ge=H[Me];dt(ge,Ie),Ie+=ge.length}n.addGroup(Pe,s.length/3-Pe,1)}function dt(Pe,Ie){let Me=Pe.length;for(;--Me>=0;){const We=Me;let ge=Me-1;ge<0&&(ge=Pe.length-1);for(let X=0,k=f+b*2;X<k;X++){const ue=Q*X,Ae=Q*(X+1),Re=Ie+We+ue,we=Ie+ge+ue,et=Ie+ge+Ae,Ke=Ie+We+Ae;Ct(Re,we,et,Ke)}}}function yt(Pe,Ie,Me){l.push(Pe),l.push(Ie),l.push(Me)}function Ut(Pe,Ie,Me){te(Pe),te(Ie),te(Me);const We=s.length/3,ge=T.generateTopUV(n,s,We-3,We-2,We-1);ui(ge[0]),ui(ge[1]),ui(ge[2])}function Ct(Pe,Ie,Me,We){te(Pe),te(Ie),te(We),te(Ie),te(Me),te(We);const ge=s.length/3,X=T.generateSideWallUV(n,s,ge-6,ge-3,ge-2,ge-1);ui(X[0]),ui(X[1]),ui(X[3]),ui(X[1]),ui(X[2]),ui(X[3])}function te(Pe){s.push(l[Pe*3+0]),s.push(l[Pe*3+1]),s.push(l[Pe*3+2])}function ui(Pe){r.push(Pe.x),r.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return RQ(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=t[e.shapes[r]];n.push(o)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new y1[s.type]().fromJSON(s)),new zA(n,e.options)}}const DQ={generateTopUV:function(i,e,t,n,s){const r=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],u=e[s*3],f=e[s*3+1];return[new Te(r,a),new Te(o,l),new Te(u,f)]},generateSideWallUV:function(i,e,t,n,s,r){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[n*3],f=e[n*3+1],d=e[n*3+2],p=e[s*3],m=e[s*3+1],_=e[s*3+2],x=e[r*3],b=e[r*3+1],v=e[r*3+2];return Math.abs(o-f)<Math.abs(a-u)?[new Te(a,1-l),new Te(u,1-d),new Te(p,1-_),new Te(x,1-v)]:[new Te(o,1-l),new Te(f,1-d),new Te(m,1-_),new Te(b,1-v)]}};function RQ(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class GA extends mh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GA(e.radius,e.detail)}}class M_ extends mh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new M_(e.radius,e.detail)}}class vd extends Ht{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,a=t/2,o=Math.floor(n),l=Math.floor(s),u=o+1,f=l+1,d=e/o,p=t/l,m=[],_=[],x=[],b=[];for(let v=0;v<f;v++){const T=v*p-a;for(let A=0;A<u;A++){const w=A*d-r;_.push(w,-T,0),x.push(0,0,1),b.push(A/o),b.push(1-v/l)}}for(let v=0;v<l;v++)for(let T=0;T<o;T++){const A=T+u*v,w=T+u*(v+1),B=T+1+u*(v+1),I=T+1+u*v;m.push(A,w,I),m.push(w,B,I)}this.setIndex(m),this.setAttribute("position",new bt(_,3)),this.setAttribute("normal",new bt(x,3)),this.setAttribute("uv",new bt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.width,e.height,e.widthSegments,e.heightSegments)}}class VA extends Ht{constructor(e=.5,t=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const o=[],l=[],u=[],f=[];let d=e;const p=(t-e)/s,m=new W,_=new Te;for(let x=0;x<=s;x++){for(let b=0;b<=n;b++){const v=r+b/n*a;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),u.push(0,0,1),_.x=(m.x/t+1)/2,_.y=(m.y/t+1)/2,f.push(_.x,_.y)}d+=p}for(let x=0;x<s;x++){const b=x*(n+1);for(let v=0;v<n;v++){const T=v+b,A=T,w=T+n+1,B=T+n+2,I=T+1;o.push(A,w,I),o.push(w,B,I)}}this.setIndex(o),this.setAttribute("position",new bt(l,3)),this.setAttribute("normal",new bt(u,3)),this.setAttribute("uv",new bt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new VA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class qA extends Ht{constructor(e=new Gf([new Te(0,.5),new Te(-.5,-.5),new Te(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(o,l,f),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new bt(s,3)),this.setAttribute("normal",new bt(r,3)),this.setAttribute("uv",new bt(a,2));function u(f){const d=s.length/3,p=f.extractPoints(t);let m=p.shape;const _=p.holes;yl.isClockWise(m)===!1&&(m=m.reverse());for(let b=0,v=_.length;b<v;b++){const T=_[b];yl.isClockWise(T)===!0&&(_[b]=T.reverse())}const x=yl.triangulateShape(m,_);for(let b=0,v=_.length;b<v;b++){const T=_[b];m=m.concat(T)}for(let b=0,v=m.length;b<v;b++){const T=m[b];s.push(T.x,T.y,0),r.push(0,0,1),a.push(T.x,T.y)}for(let b=0,v=x.length;b<v;b++){const T=x[b],A=T[0]+d,w=T[1]+d,B=T[2]+d;n.push(A,w,B),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return BQ(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const a=t[e.shapes[s]];n.push(a)}return new qA(n,e.curveSegments)}}function BQ(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class w_ extends Ht{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let u=0;const f=[],d=new W,p=new W,m=[],_=[],x=[],b=[];for(let v=0;v<=n;v++){const T=[],A=v/n;let w=0;v===0&&a===0?w=.5/t:v===n&&l===Math.PI&&(w=-.5/t);for(let B=0;B<=t;B++){const I=B/t;d.x=-e*Math.cos(s+I*r)*Math.sin(a+A*o),d.y=e*Math.cos(a+A*o),d.z=e*Math.sin(s+I*r)*Math.sin(a+A*o),_.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),b.push(I+w,1-A),T.push(u++)}f.push(T)}for(let v=0;v<n;v++)for(let T=0;T<t;T++){const A=f[v][T+1],w=f[v][T],B=f[v+1][T],I=f[v+1][T+1];(v!==0||a>0)&&m.push(A,w,I),(v!==n-1||l<Math.PI)&&m.push(w,B,I)}this.setIndex(m),this.setAttribute("position",new bt(_,3)),this.setAttribute("normal",new bt(x,3)),this.setAttribute("uv",new bt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jA extends mh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jA(e.radius,e.detail)}}class XA extends Ht{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],o=[],l=[],u=[],f=new W,d=new W,p=new W;for(let m=0;m<=n;m++)for(let _=0;_<=s;_++){const x=_/s*r,b=m/n*Math.PI*2;d.x=(e+t*Math.cos(b))*Math.cos(x),d.y=(e+t*Math.cos(b))*Math.sin(x),d.z=t*Math.sin(b),o.push(d.x,d.y,d.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),u.push(_/s),u.push(m/n)}for(let m=1;m<=n;m++)for(let _=1;_<=s;_++){const x=(s+1)*m+_-1,b=(s+1)*(m-1)+_-1,v=(s+1)*(m-1)+_,T=(s+1)*m+_;a.push(x,b,T),a.push(b,v,T)}this.setIndex(a),this.setAttribute("position",new bt(o,3)),this.setAttribute("normal",new bt(l,3)),this.setAttribute("uv",new bt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class WA extends Ht{constructor(e=1,t=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const o=[],l=[],u=[],f=[],d=new W,p=new W,m=new W,_=new W,x=new W,b=new W,v=new W;for(let A=0;A<=n;++A){const w=A/n*r*Math.PI*2;T(w,r,a,e,m),T(w+.01,r,a,e,_),b.subVectors(_,m),v.addVectors(_,m),x.crossVectors(b,v),v.crossVectors(x,b),x.normalize(),v.normalize();for(let B=0;B<=s;++B){const I=B/s*Math.PI*2,P=-t*Math.cos(I),F=t*Math.sin(I);d.x=m.x+(P*v.x+F*x.x),d.y=m.y+(P*v.y+F*x.y),d.z=m.z+(P*v.z+F*x.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),f.push(A/n),f.push(B/s)}}for(let A=1;A<=n;A++)for(let w=1;w<=s;w++){const B=(s+1)*(A-1)+(w-1),I=(s+1)*A+(w-1),P=(s+1)*A+w,F=(s+1)*(A-1)+w;o.push(B,I,F),o.push(I,P,F)}this.setIndex(o),this.setAttribute("position",new bt(l,3)),this.setAttribute("normal",new bt(u,3)),this.setAttribute("uv",new bt(f,2));function T(A,w,B,I,P){const F=Math.cos(A),N=Math.sin(A),U=B/w*A,H=Math.cos(U);P.x=I*(2+H)*.5*F,P.y=I*(2+H)*N*.5,P.z=I*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class YA extends Ht{constructor(e=new AB(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new W,l=new W,u=new Te;let f=new W;const d=[],p=[],m=[],_=[];x(),this.setIndex(_),this.setAttribute("position",new bt(d,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(m,2));function x(){for(let A=0;A<t;A++)b(A);b(r===!1?t:0),T(),v()}function b(A){f=e.getPointAt(A/t,f);const w=a.normals[A],B=a.binormals[A];for(let I=0;I<=s;I++){const P=I/s*Math.PI*2,F=Math.sin(P),N=-Math.cos(P);l.x=N*w.x+F*B.x,l.y=N*w.y+F*B.y,l.z=N*w.z+F*B.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=f.x+n*l.x,o.y=f.y+n*l.y,o.z=f.z+n*l.z,d.push(o.x,o.y,o.z)}}function v(){for(let A=1;A<=t;A++)for(let w=1;w<=s;w++){const B=(s+1)*(A-1)+(w-1),I=(s+1)*A+(w-1),P=(s+1)*A+w,F=(s+1)*(A-1)+w;_.push(B,I,F),_.push(I,P,F)}}function T(){for(let A=0;A<=t;A++)for(let w=0;w<=s;w++)u.x=A/t,u.y=w/s,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new YA(new y1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class s6 extends Ht{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new W,r=new W;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const d=l[u],p=d.start,m=d.count;for(let _=p,x=p+m;_<x;_+=3)for(let b=0;b<3;b++){const v=o.getX(_+b),T=o.getX(_+(b+1)%3);s.fromBufferAttribute(a,v),r.fromBufferAttribute(a,T),RP(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const f=3*o+u,d=3*o+(u+1)%3;s.fromBufferAttribute(a,f),r.fromBufferAttribute(a,d),RP(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new bt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function RP(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var BP=Object.freeze({__proto__:null,BoxGeometry:yd,CapsuleGeometry:NA,CircleGeometry:FA,ConeGeometry:kA,CylinderGeometry:Bg,DodecahedronGeometry:HA,EdgesGeometry:$H,ExtrudeGeometry:zA,IcosahedronGeometry:GA,LatheGeometry:C_,OctahedronGeometry:M_,PlaneGeometry:vd,PolyhedronGeometry:mh,RingGeometry:VA,ShapeGeometry:qA,SphereGeometry:w_,TetrahedronGeometry:jA,TorusGeometry:XA,TorusKnotGeometry:WA,TubeGeometry:YA,WireframeGeometry:s6});class r6 extends zn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class a6 extends bn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class D_ extends zn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ho extends D_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Te(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class o6 extends zn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l6 extends zn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class CB extends zn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class u6 extends zn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KA extends zn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=dh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MB extends zn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class c6 extends zn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class h6 extends lr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Cf(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function f6(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function d6(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function zw(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const o=t[r]*e;for(let l=0;l!==e;++l)s[a++]=i[o+l]}return s}function wB(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=i[s++];while(r!==void 0)}function LQ(i,e,t,n,s=30){const r=i.clone();r.name=e;const a=[];for(let l=0;l<r.tracks.length;++l){const u=r.tracks[l],f=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const _=u.times[m]*s;if(!(_<t||_>=n)){d.push(u.times[m]);for(let x=0;x<f;++x)p.push(u.values[m*f+x])}}d.length!==0&&(u.times=Cf(d,u.times.constructor),u.values=Cf(p,u.values.constructor),a.push(u))}r.tracks=a;let o=1/0;for(let l=0;l<r.tracks.length;++l)o>r.tracks[l].times[0]&&(o=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*o);return r.resetDuration(),r}function IQ(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let a=0;a<s;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=i.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(u===void 0)continue;let f=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const _=o.times.length-1;let x;if(r<=o.times[0]){const v=f,T=d-f;x=o.values.slice(v,T)}else if(r>=o.times[_]){const v=_*d+f,T=v+d-f;x=o.values.slice(v,T)}else{const v=o.createInterpolant(),T=f,A=d-f;v.evaluate(r),x=v.resultBuffer.slice(T,A)}l==="quaternion"&&new as().fromArray(x).normalize().conjugate().toArray(x);const b=u.times.length;for(let v=0;v<b;++v){const T=v*m+p;if(l==="quaternion")as.multiplyQuaternionsFlat(u.values,T,x,0,u.values,T);else{const A=m-p*2;for(let w=0;w<A;++w)u.values[T+w]-=x[w]}}}return i.blendMode=oB,i}class OQ{static convertArray(e,t){return Cf(e,t)}static isTypedArray(e){return f6(e)}static getKeyframeOrder(e){return d6(e)}static sortedArray(e,t,n){return zw(e,t,n)}static flattenJSON(e,t,n,s){wB(e,t,n,s)}static subclip(e,t,n,s,r=30){return LQ(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return IQ(e,t,n,s)}}class Lg{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let a;i:{n:if(!(e<s)){for(let o=n+2;;){if(s===void 0){if(e<r)break n;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=s,s=t[++n],e<s)break t}a=t.length;break i}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let l=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(s=r,r=t[--n-1],e>=r)break t}a=n,n=0;break i}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let a=0;a!==s;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class p6 extends Lg{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Af,endingEnd:Af}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,a=e+1,o=s[r],l=s[a];if(o===void 0)switch(this.getSettings_().endingStart){case Ef:r=e,o=2*t-n;break;case Mv:r=s.length-2,o=t+s[r]-s[r+1];break;default:r=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Ef:a=e,l=2*n-t;break;case Mv:a=1,l=n+s[1]-s[0];break;default:a=e-1,l=t}const u=(n-t)*.5,f=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-n),this._offsetPrev=r*f,this._offsetNext=a*f}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,_=(n-t)/(s-t),x=_*_,b=x*_,v=-p*b+2*p*x-p*_,T=(1+p)*b+(-1.5-2*p)*x+(-.5+p)*_+1,A=(-1-m)*b+(1.5+m)*x+.5*_,w=m*b-m*x;for(let B=0;B!==o;++B)r[B]=v*a[f+B]+T*a[u+B]+A*a[l+B]+w*a[d+B];return r}}class DB extends Lg{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=(n-t)/(s-t),d=1-f;for(let p=0;p!==o;++p)r[p]=a[u+p]*d+a[l+p]*f;return r}}class m6 extends Lg{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class fo{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cf(t,this.TimeBufferType),this.values=Cf(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Cf(e.times,Array),values:Cf(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new m6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new p6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zm:t=this.InterpolantFactoryMethodDiscrete;break;case $m:t=this.InterpolantFactoryMethodLinear;break;case zT:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zm;case this.InterpolantFactoryMethodLinear:return $m;case this.InterpolantFactoryMethodSmooth:return zT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==r;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(s!==void 0&&f6(s))for(let o=0,l=s.length;o!==l;++o){const u=s[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===zT,r=e.length-1;let a=1;for(let o=1;o<r;++o){let l=!1;const u=e[o],f=e[o+1];if(u!==f&&(o!==1||u!==e[0]))if(s)l=!0;else{const d=o*n,p=d-n,m=d+n;for(let _=0;_!==n;++_){const x=t[d+_];if(x!==t[p+_]||x!==t[m+_]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*n,p=a*n;for(let m=0;m!==n;++m)t[p+m]=t[d+m]}++a}}if(r>0){e[a]=e[r];for(let o=r*n,l=a*n,u=0;u!==n;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}fo.prototype.ValueTypeName="";fo.prototype.TimeBufferType=Float32Array;fo.prototype.ValueBufferType=Float32Array;fo.prototype.DefaultInterpolation=$m;class _d extends fo{constructor(e,t,n){super(e,t,n)}}_d.prototype.ValueTypeName="bool";_d.prototype.ValueBufferType=Array;_d.prototype.DefaultInterpolation=Zm;_d.prototype.InterpolantFactoryMethodLinear=void 0;_d.prototype.InterpolantFactoryMethodSmooth=void 0;class RB extends fo{constructor(e,t,n,s){super(e,t,n,s)}}RB.prototype.ValueTypeName="color";class rd extends fo{constructor(e,t,n,s){super(e,t,n,s)}}rd.prototype.ValueTypeName="number";class g6 extends Lg{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(s-t);let u=e*o;for(let f=u+o;u!==f;u+=4)as.slerpFlat(r,0,a,u-o,a,u,l);return r}}class ad extends fo{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new g6(this.times,this.values,this.getValueSize(),e)}}ad.prototype.ValueTypeName="quaternion";ad.prototype.InterpolantFactoryMethodSmooth=void 0;class xd extends fo{constructor(e,t,n){super(e,t,n)}}xd.prototype.ValueTypeName="string";xd.prototype.ValueBufferType=Array;xd.prototype.DefaultInterpolation=Zm;xd.prototype.InterpolantFactoryMethodLinear=void 0;xd.prototype.InterpolantFactoryMethodSmooth=void 0;class od extends fo{constructor(e,t,n,s){super(e,t,n,s)}}od.prototype.ValueTypeName="vector";class rg{constructor(e="",t=-1,n=[],s=MA){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=Aa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(UQ(n[a]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(fo.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,a=[];for(let o=0;o<r;o++){let l=[],u=[];l.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);const f=d6(l);l=zw(l,1,f),u=zw(u,1,f),!s&&l[0]===0&&(l.push(r),u.push(u[0])),a.push(new rd(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],f=u.name.match(r);if(f&&f.length>1){const d=f[1];let p=s[d];p||(s[d]=p=[]),p.push(u)}}const a=[];for(const o in s)a.push(this.CreateFromMorphTargetSequence(o,s[o],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,p,m,_,x){if(m.length!==0){const b=[],v=[];wB(m,b,v,_),b.length!==0&&x.push(new d(p,b,v))}},s=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let x=0;x<p[_].morphTargets.length;x++)m[p[_].morphTargets[x]]=-1;for(const x in m){const b=[],v=[];for(let T=0;T!==p[_].morphTargets.length;++T){const A=p[_];b.push(A.time),v.push(A.morphTarget===x?1:0)}s.push(new rd(".morphTargetInfluence["+x+"]",b,v))}l=m.length*a}else{const m=".bones["+t[d].name+"]";n(od,m+".position",p,"pos",s),n(ad,m+".quaternion",p,"rot",s),n(od,m+".scale",p,"scl",s)}}return s.length===0?null:new this(r,l,s,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function PQ(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rd;case"vector":case"vector2":case"vector3":case"vector4":return od;case"color":return RB;case"quaternion":return ad;case"bool":case"boolean":return _d;case"string":return xd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function UQ(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=PQ(i.type);if(i.times===void 0){const t=[],n=[];wB(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const gu={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class BB{constructor(e,t,n){const s=this;let r=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){o++,r===!1&&s.onStart!==void 0&&s.onStart(f,a,o),r=!0},this.itemEnd=function(f){a++,s.onProgress!==void 0&&s.onProgress(f,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return u.push(f,d),this},this.removeHandler=function(f){const d=u.indexOf(f);return d!==-1&&u.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],_=u[d+1];if(m.global&&(m.lastIndex=0),m.test(f))return _}return null}}}const om=new BB;class ur{constructor(e){this.manager=e!==void 0?e:om,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ur.DEFAULT_MATERIAL_NAME="__DEFAULT";const nu={};class NQ extends Error{constructor(e,t){super(e),this.response=t}}class Ma extends ur{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=gu.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(nu[e]!==void 0){nu[e].push({onLoad:t,onProgress:n,onError:s});return}nu[e]=[],nu[e].push({onLoad:t,onProgress:n,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=nu[e],d=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,_=m!==0;let x=0;const b=new ReadableStream({start(v){T();function T(){d.read().then(({done:A,value:w})=>{if(A)v.close();else{x+=w.byteLength;const B=new ProgressEvent("progress",{lengthComputable:_,loaded:x,total:m});for(let I=0,P=f.length;I<P;I++){const F=f[I];F.onProgress&&F.onProgress(B)}v.enqueue(w),T()}},A=>{v.error(A)})}}});return new Response(b)}else throw new NQ(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,o));case"json":return u.json();default:if(o==="")return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(_=>m.decode(_))}}}).then(u=>{gu.add(e,u);const f=nu[e];delete nu[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const f=nu[e];if(f===void 0)throw this.manager.itemError(e),u;delete nu[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class FQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new Ma(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=rg.parse(e[n]);t.push(s)}return t}}class kQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=[],o=new OA,l=new Ma(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let u=0;function f(d){l.load(e[d],function(p){const m=r.parse(p,!0);a[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(o.minFilter=on),o.image=a,o.format=m.format,o.needsUpdate=!0,t&&t(o))},n,s)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else l.load(e,function(d){const p=r.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let _=0;_<m;_++){a[_]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)a[_].mipmaps.push(p.mipmaps[_*p.mipmapCount+x]),a[_].format=p.format,a[_].width=p.width,a[_].height=p.height}o.image=a}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=on),o.format=p.format,o.needsUpdate=!0,t&&t(o)},n,s);return o}}class Nv extends ur{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=gu.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const o=Bv("img");function l(){f(),gu.add(e,this),t&&t(this),r.manager.itemEnd(e)}function u(d){f(),s&&s(d),r.manager.itemError(e),r.manager.itemEnd(e)}function f(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}class HQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=new T_;r.colorSpace=Ci;const a=new Nv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(f){r.images[u]=f,o++,o===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let u=0;u<e.length;++u)l(u);return r}}class zQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new gl,o=new Ma(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(l){let u;try{u=r.parse(l)}catch(f){if(s!==void 0)s(f);else{console.error(f);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:va,a.wrapT=u.wrapT!==void 0?u.wrapT:va,a.magFilter=u.magFilter!==void 0?u.magFilter:on,a.minFilter=u.minFilter!==void 0?u.minFilter:on,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=no),u.mipmapCount===1&&(a.minFilter=on),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u)},n,s),a}}class y6 extends ur{constructor(e){super(e)}load(e,t,n,s){const r=new Zi,a=new Nv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class gh extends gi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $e(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class v6 extends gh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const MC=new vt,LP=new W,IP=new W;class LB{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Te(512,512),this.map=null,this.mapPass=null,this.matrix=new vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new E_,this._frameExtents=new Te(1,1),this._viewportCount=1,this._viewports=[new di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;LP.setFromMatrixPosition(e.matrixWorld),t.position.copy(LP),IP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(IP),t.updateMatrixWorld(),MC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(MC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class GQ extends LB{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=eg*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class IB extends gh{constructor(e,t,n=0,s=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.target=new gi,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new GQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const OP=new vt,ey=new W,wC=new W;class VQ extends LB{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Te(4,2),this._viewportCount=6,this._viewports=[new di(2,1,1,1),new di(0,1,1,1),new di(3,1,1,1),new di(1,1,1,1),new di(3,0,1,1),new di(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),ey.setFromMatrixPosition(e.matrixWorld),n.position.copy(ey),wC.copy(n.position),wC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(wC),n.updateMatrixWorld(),s.makeTranslation(-ey.x,-ey.y,-ey.z),OP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OP)}}class OB extends gh{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new VQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class so extends b_{constructor(e=-1,t=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,a=r+u*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class qQ extends LB{constructor(){super(new so(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PB extends gh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.target=new gi,this.shadow=new qQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _6 extends gh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class x6 extends gh{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class b6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*s),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*s)),t.addScaledVector(a[5],1.092548*(s*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(n*r)),t.addScaledVector(a[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*s),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*s),t.addScaledVector(a[5],2*.429043*s*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*n*r),t.addScaledVector(a[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class T6 extends gh{constructor(e=new b6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class JA extends ur{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,a=new Ma(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new $e().setHex(a.value);break;case"v2":s.uniforms[r].value=new Te().fromArray(a.value);break;case"v3":s.uniforms[r].value=new W().fromArray(a.value);break;case"v4":s.uniforms[r].value=new di().fromArray(a.value);break;case"m3":s.uniforms[r].value=new qt().fromArray(a.value);break;case"m4":s.uniforms[r].value=new vt().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Te().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Te().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return JA.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:r6,SpriteMaterial:mB,RawShaderMaterial:a6,ShaderMaterial:bn,PointsMaterial:IA,MeshPhysicalMaterial:ho,MeshStandardMaterial:D_,MeshPhongMaterial:o6,MeshToonMaterial:l6,MeshNormalMaterial:CB,MeshLambertMaterial:u6,MeshDepthMaterial:KA,MeshDistanceMaterial:MB,MeshBasicMaterial:_a,MeshMatcapMaterial:c6,LineDashedMaterial:h6,LineBasicMaterial:lr,Material:zn};return new t[e]}}class Zc{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class S6 extends Ht{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class A6 extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new Ma(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(m,_){if(t[_]!==void 0)return t[_];const b=m.interleavedBuffers[_],v=r(m,b.buffer),T=am(b.type,v),A=new S_(T,b.stride);return A.uuid=b.uuid,t[_]=A,A}function r(m,_){if(n[_]!==void 0)return n[_];const b=m.arrayBuffers[_],v=new Uint32Array(b).buffer;return n[_]=v,v}const a=e.isInstancedBufferGeometry?new S6:new Ht,o=e.data.index;if(o!==void 0){const m=am(o.type,o.array);a.setIndex(new li(m,1))}const l=e.data.attributes;for(const m in l){const _=l[m];let x;if(_.isInterleavedBufferAttribute){const b=s(e.data,_.data);x=new rh(b,_.itemSize,_.offset,_.normalized)}else{const b=am(_.type,_.array),v=_.isInstancedBufferAttribute?nd:li;x=new v(b,_.itemSize,_.normalized)}_.name!==void 0&&(x.name=_.name),_.usage!==void 0&&x.setUsage(_.usage),a.setAttribute(m,x)}const u=e.data.morphAttributes;if(u)for(const m in u){const _=u[m],x=[];for(let b=0,v=_.length;b<v;b++){const T=_[b];let A;if(T.isInterleavedBufferAttribute){const w=s(e.data,T.data);A=new rh(w,T.itemSize,T.offset,T.normalized)}else{const w=am(T.type,T.array);A=new li(w,T.itemSize,T.normalized)}T.name!==void 0&&(A.name=T.name),x.push(A)}a.morphAttributes[m]=x}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,_=d.length;m!==_;++m){const x=d[m];a.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new W;p.center!==void 0&&m.fromArray(p.center),a.boundingSphere=new Es(m,p.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class jQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=this.path===""?Zc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Ma(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){s!==void 0&&s(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(u,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?Zc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new Ma(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,l,o,n),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),this.bindLightTargets(u),t!==void 0){let d=!1;for(const p in a)if(a[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new Gf().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=new A_().fromJSON(e[r],s);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new A6;for(let r=0,a=e.length;r<a;r++){let o;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=s.parse(l);break;default:l.type in BP?o=BP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new JA;r.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=r.parse(l)),s[l.uuid]=n[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=rg.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function a(l){return n.manager.itemStart(l),r.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return a(f)}else return l.data?{data:am(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new BB(t);r=new Nv(l),r.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let _=0,x=p.length;_<x;_++){const b=p[_],v=o(b);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new gl(v.data,v.width,v.height)))}s[d.uuid]=new Vc(m)}else{const m=o(d.url);s[d.uuid]=new Vc(m)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await s.loadAsync(l)}else return a.data?{data:am(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new Nv(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],_=await r(m);_!==null&&(_ instanceof HTMLImageElement?f.push(_):f.push(new gl(_.data,_.width,_.height)))}n[l.uuid]=new Vc(f)}else{const f=await r(l.url);n[l.uuid]=new Vc(f)}}}return n}parseTextures(e,t){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=e[r];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let f;Array.isArray(u)?(f=new T_,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new gl:f=new Zi,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=o.uuid,o.name!==void 0&&(f.name=o.name),o.mapping!==void 0&&(f.mapping=n(o.mapping,XQ)),o.channel!==void 0&&(f.channel=o.channel),o.offset!==void 0&&f.offset.fromArray(o.offset),o.repeat!==void 0&&f.repeat.fromArray(o.repeat),o.center!==void 0&&f.center.fromArray(o.center),o.rotation!==void 0&&(f.rotation=o.rotation),o.wrap!==void 0&&(f.wrapS=n(o.wrap[0],PP),f.wrapT=n(o.wrap[1],PP)),o.format!==void 0&&(f.format=o.format),o.internalFormat!==void 0&&(f.internalFormat=o.internalFormat),o.type!==void 0&&(f.type=o.type),o.colorSpace!==void 0&&(f.colorSpace=o.colorSpace),o.minFilter!==void 0&&(f.minFilter=n(o.minFilter,UP)),o.magFilter!==void 0&&(f.magFilter=n(o.magFilter,UP)),o.anisotropy!==void 0&&(f.anisotropy=o.anisotropy),o.flipY!==void 0&&(f.flipY=o.flipY),o.generateMipmaps!==void 0&&(f.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(f.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(f.compareFunction=o.compareFunction),o.userData!==void 0&&(f.userData=o.userData),s[o.uuid]=f}return s}parseObject(e,t,n,s,r){let a;function o(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let _=0,x=p.length;_<x;_++){const b=p[_];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),m.push(n[b])}return m}return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),n[p]}}function u(p){return s[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),s[p]}let f,d;switch(e.type){case"Scene":a=new Lv,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new $e(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new BA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new RA(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new so(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new _6(e.color,e.intensity);break;case"DirectionalLight":a=new PB(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new OB(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new x6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new IB(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new v6(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new T6().fromJSON(e);break;case"SkinnedMesh":f=o(e.geometry),d=l(e.material),a=new gB(f,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":f=o(e.geometry),d=l(e.material),a=new _n(f,d);break;case"InstancedMesh":f=o(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,_=e.instanceColor;a=new yB(f,d,p),a.instanceMatrix=new nd(new Float32Array(m.array),16),_!==void 0&&(a.instanceColor=new nd(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":f=o(e.geometry),d=l(e.material),a=new XH(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),a.geometry=f,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(x=>{const b=new sr;b.min.fromArray(x.boxMin),b.max.fromArray(x.boxMax);const v=new Es;return v.radius=x.sphereRadius,v.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:b,sphereInitialized:x.sphereInitialized,sphere:v}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":a=new jH;break;case"Line":a=new wu(o(e.geometry),l(e.material));break;case"LineLoop":a=new vB(o(e.geometry),l(e.material));break;case"LineSegments":a=new Vo(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new _B(o(e.geometry),l(e.material));break;case"Sprite":a=new qH(l(e.material));break;case"Group":a=new mu;break;case"Bone":a=new LA;break;default:a=new gi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)a.add(this.parseObject(p[m],t,n,s,r))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const _=p[m];a.animations.push(r[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const _=p[m],x=a.getObjectByProperty("uuid",_.object);x!==void 0&&a.addLevel(x,_.distance,_.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new gi}})}}const XQ={UVMapping:_A,CubeReflectionMapping:Mu,CubeRefractionMapping:nh,EquirectangularReflectionMapping:Ev,EquirectangularRefractionMapping:Cv,CubeUVReflectionMapping:Rg},PP={RepeatWrapping:sh,ClampToEdgeWrapping:va,MirroredRepeatWrapping:Km},UP={NearestFilter:In,NearestMipmapNearestFilter:xA,NearestMipmapLinearFilter:Sf,LinearFilter:on,LinearMipmapNearestFilter:Cm,LinearMipmapLinearFilter:no};class E6 extends ur{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=gu.get(e);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(u=>{t&&t(u),r.manager.itemEnd(e)}).catch(u=>{s&&s(u)});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(u){return gu.add(e,u),t&&t(u),r.manager.itemEnd(e),u}).catch(function(u){s&&s(u),gu.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});gu.add(e,l),r.manager.itemStart(e)}}let iT;class UB{static getContext(){return iT===void 0&&(iT=new(window.AudioContext||window.webkitAudioContext)),iT}static setContext(e){iT=e}}class WQ extends ur{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new Ma(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const u=l.slice(0);UB.getContext().decodeAudioData(u,function(d){t(d)}).catch(o)}catch(u){o(u)}},n,s);function o(l){s?s(l):console.error(l),r.manager.itemError(e)}}}const NP=new vt,FP=new vt,ef=new vt;class YQ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ef.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,a=t.near*Math.tan(zf*t.fov*.5)/t.zoom;let o,l;FP.elements[12]=-s,NP.elements[12]=s,o=-a*t.aspect+r,l=a*t.aspect+r,ef.elements[0]=2*t.near/(l-o),ef.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(ef),o=-a*t.aspect-r,l=a*t.aspect-r,ef.elements[0]=2*t.near/(l-o),ef.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(ef)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(NP)}}class C6 extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class NB{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=kP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=kP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function kP(){return performance.now()}const tf=new W,HP=new as,KQ=new W,nf=new W;class JQ extends gi{constructor(){super(),this.type="AudioListener",this.context=UB.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new NB}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(tf,HP,KQ),nf.set(0,0,-1).applyQuaternion(HP),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(tf.x,s),t.positionY.linearRampToValueAtTime(tf.y,s),t.positionZ.linearRampToValueAtTime(tf.z,s),t.forwardX.linearRampToValueAtTime(nf.x,s),t.forwardY.linearRampToValueAtTime(nf.y,s),t.forwardZ.linearRampToValueAtTime(nf.z,s),t.upX.linearRampToValueAtTime(n.x,s),t.upY.linearRampToValueAtTime(n.y,s),t.upZ.linearRampToValueAtTime(n.z,s)}else t.setPosition(tf.x,tf.y,tf.z),t.setOrientation(nf.x,nf.y,nf.z,n.x,n.y,n.z)}}class M6 extends gi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const sf=new W,zP=new as,QQ=new W,rf=new W;class ZQ extends M6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(sf,zP,QQ),rf.set(0,0,1).applyQuaternion(zP);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(sf.x,n),t.positionY.linearRampToValueAtTime(sf.y,n),t.positionZ.linearRampToValueAtTime(sf.z,n),t.orientationX.linearRampToValueAtTime(rf.x,n),t.orientationY.linearRampToValueAtTime(rf.y,n),t.orientationZ.linearRampToValueAtTime(rf.z,n)}else t.setPosition(sf.x,sf.y,sf.z),t.setOrientation(rf.x,rf.y,rf.z)}}class $Q{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class w6{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,a;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==s;++o)n[r+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,r,0,o,s)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(n,s,l,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,a=s;r!==a;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,s){as.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const a=this._workIndex*r;as.multiplyQuaternionsFlat(e,a,e,t,e,n),as.slerpFlat(e,t,e,t,e,a,s)}_lerp(e,t,n,s,r){const a=1-s;for(let o=0;o!==r;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*s}}_lerpAdditive(e,t,n,s,r){for(let a=0;a!==r;++a){const o=t+a;e[o]=e[o]+e[n+a]*s}}}const FB="\\[\\]\\.:\\/",eZ=new RegExp("["+FB+"]","g"),kB="[^"+FB+"]",tZ="[^"+FB.replace("\\.","")+"]",iZ=/((?:WC+[\/:])*)/.source.replace("WC",kB),nZ=/(WCOD+)?/.source.replace("WCOD",tZ),sZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kB),rZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kB),aZ=new RegExp("^"+iZ+nZ+sZ+rZ+"$"),oZ=["material","materials","bones","map"];class lZ{constructor(e,t,n){const s=n||_i.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class _i{constructor(e,t,n){this.path=t,this.parsedPath=n||_i.parseTrackName(t),this.node=_i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new _i.Composite(e,t,n):new _i(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eZ,"")}static parseTrackName(e){const t=aZ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);oZ.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=_i.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[s];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_i.Composite=lZ;_i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_i.prototype.GetterByBindingType=[_i.prototype._getValue_direct,_i.prototype._getValue_array,_i.prototype._getValue_arrayElement,_i.prototype._getValue_toArray];_i.prototype.SetterByBindingTypeAndVersioning=[[_i.prototype._setValue_direct,_i.prototype._setValue_direct_setNeedsUpdate,_i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_array,_i.prototype._setValue_array_setNeedsUpdate,_i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_arrayElement,_i.prototype._setValue_arrayElement_setNeedsUpdate,_i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_fromArray,_i.prototype._setValue_fromArray_setNeedsUpdate,_i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uZ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Aa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let o,l=e.length,u=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],m=p.uuid;let _=t[m];if(_===void 0){_=l++,t[m]=_,e.push(p);for(let x=0,b=a;x!==b;++x)r[x].push(new _i(p,n[x],s[x]))}else if(_<u){o=e[_];const x=--u,b=e[x];t[b.uuid]=_,e[_]=b,t[m]=x,e[x]=p;for(let v=0,T=a;v!==T;++v){const A=r[v],w=A[x];let B=A[_];A[_]=w,B===void 0&&(B=new _i(p,n[v],s[v])),A[x]=B}}else e[_]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,f=t[u];if(f!==void 0&&f>=r){const d=r++,p=e[d];t[p.uuid]=f,e[f]=p,t[u]=d,e[d]=l;for(let m=0,_=s;m!==_;++m){const x=n[m],b=x[d],v=x[f];x[f]=b,x[d]=v}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],f=u.uuid,d=t[f];if(d!==void 0)if(delete t[f],d<r){const p=--r,m=e[p],_=--a,x=e[_];t[m.uuid]=d,e[d]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let b=0,v=s;b!==v;++b){const T=n[b],A=T[p],w=T[_];T[d]=A,T[p]=w,T.pop()}}else{const p=--a,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let _=0,x=s;_!==x;++_){const b=n[_];b[d]=b[p],b.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,d=new Array(u);s=r.length,n[e]=s,a.push(e),o.push(t),r.push(d);for(let p=f,m=l.length;p!==m;++p){const _=l[p];d[p]=new _i(_,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];t[u]=n,a[n]=l,a.pop(),r[n]=r[o],r.pop(),s[n]=s[o],s.pop()}}}class D6{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,a=r.length,o=new Array(a),l={endingStart:Af,endingEnd:Af};for(let u=0;u!==a;++u){const f=r[u].createInterpolant(null);o[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=EH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,a=r/s,o=s/r;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=s._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=r,l[1]=r+n,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case oB:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(a),u[f].accumulateAdditive(o);break;case MA:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(a),u[f].accumulate(s,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const a=n===CH;if(e===0)return r===-1?s:a&&(r&1)===1?t-s:s;if(n===AH){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=t||s<0){const o=Math.floor(s/t);s-=t*o,r+=Math.abs(o);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(a&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=Ef,s.endingEnd=Ef):(e?s.endingStart=this.zeroSlopeAtStart?Ef:Af:s.endingStart=Mv,t?s.endingEnd=this.zeroSlopeAtEnd?Ef:Af:s.endingEnd=Mv)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,l[0]=t,o[1]=r+e,l[1]=n,this}}const cZ=new Float32Array(1);class hZ extends Ra{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let d=0;d!==r;++d){const p=s[d],m=p.name;let _=f[m];if(_!==void 0)++_.referenceCount,a[d]=_;else{if(_=a[d],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,m));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;_=new w6(_i.create(n,m,x),p.ValueTypeName,p.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,m),a[d]=_}o[d].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],l=o.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[t];a===void 0&&(a={},s[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[s],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[r],Object.keys(o).length===0&&delete a[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new DB(new Float32Array(2),new Float32Array(2),1,cZ),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let a=typeof e=="string"?rg.findByName(s,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=MA),l!==void 0){const d=l.actionByRoot[r];if(d!==void 0&&d.blendMode===n)return d;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const f=new D6(this,a,t,n);return this._bindAction(f,u),this._addInactiveAction(f,o,r),f}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?rg.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(s,e,r,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const f=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const a in r){const o=r[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class fZ extends wA{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new DA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class dZ extends wA{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new x_(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class mi{constructor(e){this.value=e}clone(){return new mi(this.value.clone===void 0?this.value:this.value.clone())}}let pZ=0;class mZ extends Ra{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:pZ++}),this.name="",this.usage=Dv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class gZ extends S_{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class yZ{constructor(e,t,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const GP=new vt;class R6{constructor(e,t,n=0,s=1/0){this.ray=new gd(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new ig,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return GP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(GP),this}intersectObject(e,t=!0,n=[]){return Gw(e,this,n,t),n.sort(VP),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)Gw(e[s],this,n,t);return n.sort(VP),n}}function VP(i,e){return i.distance-e.distance}function Gw(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,o=r.length;a<o;a++)Gw(r[a],e,t,!0)}}class v1{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=zt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(zt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class vZ{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class HB{constructor(e,t,n,s){HB.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}const qP=new Te;class _Z{constructor(e=new Te(1/0,1/0),t=new Te(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=qP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jP=new W,nT=new W;class xZ{constructor(e=new W,t=new W){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){jP.subVectors(e,this.start),nT.subVectors(this.end,this.start);const n=nT.dot(nT);let r=nT.dot(jP)/n;return t&&(r=zt(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const XP=new W;class bZ extends gi{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Ht,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,f=o/l*Math.PI*2;s.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}n.setAttribute("position",new bt(s,3));const r=new lr({fog:!1,toneMapped:!1});this.cone=new Vo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),XP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _c=new W,sT=new vt,DC=new vt;class TZ extends Vo{constructor(e){const t=B6(e),n=new Ht,s=[],r=[],a=new $e(0,0,1),o=new $e(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new bt(s,3)),n.setAttribute("color",new bt(r,3));const l=new lr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");DC.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const o=t[r];o.parent&&o.parent.isBone&&(sT.multiplyMatrices(DC,o.matrixWorld),_c.setFromMatrixPosition(sT),s.setXYZ(a,_c.x,_c.y,_c.z),sT.multiplyMatrices(DC,o.parent.matrixWorld),_c.setFromMatrixPosition(sT),s.setXYZ(a+1,_c.x,_c.y,_c.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function B6(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...B6(i.children[t]));return e}class SZ extends _n{constructor(e,t,n){const s=new w_(t,4,2),r=new _a({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const AZ=new W,WP=new $e,YP=new $e;class EZ extends gi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new M_(t);s.rotateY(Math.PI*.5),this.material=new _a({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new li(a,3)),this.add(new _n(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");WP.copy(this.light.color),YP.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?WP:YP;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(AZ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class CZ extends Vo{constructor(e=10,t=10,n=4473924,s=8947848){n=new $e(n),s=new $e(s);const r=t/2,a=e/t,o=e/2,l=[],u=[];for(let p=0,m=0,_=-o;p<=t;p++,_+=a){l.push(-o,0,_,o,0,_),l.push(_,0,-o,_,0,o);const x=p===r?n:s;x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3}const f=new Ht;f.setAttribute("position",new bt(l,3)),f.setAttribute("color",new bt(u,3));const d=new lr({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class MZ extends Vo{constructor(e=10,t=16,n=8,s=64,r=4473924,a=8947848){r=new $e(r),a=new $e(a);const o=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,_=Math.cos(p)*e;o.push(0,0,0),o.push(m,0,_);const x=d&1?r:a;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<n;d++){const p=d&1?r:a,m=e-e/n*d;for(let _=0;_<s;_++){let x=_/s*(Math.PI*2),b=Math.sin(x)*m,v=Math.cos(x)*m;o.push(b,0,v),l.push(p.r,p.g,p.b),x=(_+1)/s*(Math.PI*2),b=Math.sin(x)*m,v=Math.cos(x)*m,o.push(b,0,v),l.push(p.r,p.g,p.b)}}const u=new Ht;u.setAttribute("position",new bt(o,3)),u.setAttribute("color",new bt(l,3));const f=new lr({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KP=new W,rT=new W,JP=new W;class wZ extends gi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Ht;s.setAttribute("position",new bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new lr({fog:!1,toneMapped:!1});this.lightPlane=new wu(s,r),this.add(this.lightPlane),s=new Ht,s.setAttribute("position",new bt([0,0,0,0,0,1],3)),this.targetLine=new wu(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KP.setFromMatrixPosition(this.light.matrixWorld),rT.setFromMatrixPosition(this.light.target.matrixWorld),JP.subVectors(rT,KP),this.lightPlane.lookAt(rT),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rT),this.targetLine.scale.z=JP.length()}}const aT=new W,wn=new b_;class DZ extends Vo{constructor(e){const t=new Ht,n=new lr({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,x){l(_),l(x)}function l(_){s.push(0,0,0),r.push(0,0,0),a[_]===void 0&&(a[_]=[]),a[_].push(s.length/3-1)}t.setAttribute("position",new bt(s,3)),t.setAttribute("color",new bt(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new $e(16755200),f=new $e(16711680),d=new $e(43775),p=new $e(16777215),m=new $e(3355443);this.setColors(u,f,d,p,m)}setColors(e,t,n,s,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,s.r,s.g,s.b),o.setXYZ(39,s.r,s.g,s.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;wn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Po?-1:0;Un("c",t,e,wn,0,0,r),Un("t",t,e,wn,0,0,1),Un("n1",t,e,wn,-1,-1,r),Un("n2",t,e,wn,n,-1,r),Un("n3",t,e,wn,-1,s,r),Un("n4",t,e,wn,n,s,r),Un("f1",t,e,wn,-1,-1,1),Un("f2",t,e,wn,n,-1,1),Un("f3",t,e,wn,-1,s,1),Un("f4",t,e,wn,n,s,1),Un("u1",t,e,wn,n*.7,s*1.1,r),Un("u2",t,e,wn,-1*.7,s*1.1,r),Un("u3",t,e,wn,0,s*2,r),Un("cf1",t,e,wn,-1,0,1),Un("cf2",t,e,wn,n,0,1),Un("cf3",t,e,wn,0,-1,1),Un("cf4",t,e,wn,0,s,1),Un("cn1",t,e,wn,-1,0,r),Un("cn2",t,e,wn,n,0,r),Un("cn3",t,e,wn,0,-1,r),Un("cn4",t,e,wn,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Un(i,e,t,n,s,r,a){aT.set(s,r,a).unproject(n);const o=e[i];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,f=o.length;u<f;u++)l.setXYZ(o[u],aT.x,aT.y,aT.z)}}const oT=new sr;class RZ extends Vo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new Ht;r.setIndex(new li(n,1)),r.setAttribute("position",new li(s,3)),super(r,new lr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&oT.setFromObject(this.object),oT.isEmpty())return;const e=oT.min,t=oT.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BZ extends Vo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Ht;r.setIndex(new li(n,1)),r.setAttribute("position",new bt(s,3)),super(r,new lr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class LZ extends wu{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Ht;a.setAttribute("position",new bt(r,3)),a.computeBoundingSphere(),super(a,new lr({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ht;l.setAttribute("position",new bt(o,3)),l.computeBoundingSphere(),this.add(new _n(l,new _a({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QP=new W;let lT,RC;class IZ extends gi{constructor(e=new W(0,0,1),t=new W(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",lT===void 0&&(lT=new Ht,lT.setAttribute("position",new bt([0,0,0,0,1,0],3)),RC=new Bg(0,.5,1,5,1),RC.translate(0,-.5,0)),this.position.copy(t),this.line=new wu(lT,new lr({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _n(RC,new _a({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QP,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class OZ extends Vo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Ht;s.setAttribute("position",new bt(t,3)),s.setAttribute("color",new bt(n,3));const r=new lr({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new $e,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PZ{constructor(){this.type="ShapePath",this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Iv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,a){return this.currentPath.bezierCurveTo(e,t,n,s,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const T=[];for(let A=0,w=v.length;A<w;A++){const B=v[A],I=new Gf;I.curves=B.curves,T.push(I)}return T}function n(v,T){const A=T.length;let w=!1;for(let B=A-1,I=0;I<A;B=I++){let P=T[B],F=T[I],N=F.x-P.x,U=F.y-P.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(P=T[I],N=-N,F=T[B],U=-U),v.y<P.y||v.y>F.y)continue;if(v.y===P.y){if(v.x===P.x)return!0}else{const H=U*(v.x-P.x)-N*(v.y-P.y);if(H===0)return!0;if(H<0)continue;w=!w}}else{if(v.y!==P.y)continue;if(F.x<=v.x&&v.x<=P.x||P.x<=v.x&&v.x<=F.x)return!0}}return w}const s=yl.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,o,l;const u=[];if(r.length===1)return o=r[0],l=new Gf,l.curves=o.curves,u.push(l),u;let f=!s(r[0].getPoints());f=e?!f:f;const d=[],p=[];let m=[],_=0,x;p[_]=void 0,m[_]=[];for(let v=0,T=r.length;v<T;v++)o=r[v],x=o.getPoints(),a=s(x),a=e?!a:a,a?(!f&&p[_]&&_++,p[_]={s:new Gf,p:x},p[_].s.curves=o.curves,f&&_++,m[_]=[]):m[_].push({h:o,p:x[0]});if(!p[0])return t(r);if(p.length>1){let v=!1,T=0;for(let A=0,w=p.length;A<w;A++)d[A]=[];for(let A=0,w=p.length;A<w;A++){const B=m[A];for(let I=0;I<B.length;I++){const P=B[I];let F=!0;for(let N=0;N<p.length;N++)n(P.p,p[N].p)&&(A!==N&&T++,F?(F=!1,d[N].push(P)):v=!0);F&&d[A].push(P)}}T>0&&v===!1&&(m=d)}let b;for(let v=0,T=p.length;v<T;v++){l=p[v].s,u.push(l),b=m[v];for(let A=0,w=b.length;A<w;A++)l.holes.push(b[A].h)}return u}}class UZ extends Ra{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function NZ(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function FZ(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function kZ(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Vw(i,e,t,n){const s=HZ(n);switch(t){case tB:return i*e;case nB:return i*e;case sB:return i*e*2;case AA:return i*e/s.components*s.byteLength;case __:return i*e/s.components*s.byteLength;case rB:return i*e*2/s.components*s.byteLength;case EA:return i*e*2/s.components*s.byteLength;case iB:return i*e*3/s.components*s.byteLength;case er:return i*e*4/s.components*s.byteLength;case CA:return i*e*4/s.components*s.byteLength;case Vy:case qy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case jy:case Xy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case VS:case jS:return Math.max(i,16)*Math.max(e,8)/4;case GS:case qS:return Math.max(i,8)*Math.max(e,8)/2;case XS:case WS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case YS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case KS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case JS:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case QS:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case ZS:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case $S:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case e1:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case t1:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case i1:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case n1:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case s1:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case r1:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case a1:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case o1:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case l1:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Wy:case u1:case c1:return Math.ceil(i/4)*Math.ceil(e/4)*16;case aB:case h1:return Math.ceil(i/4)*Math.ceil(e/4)*8;case f1:case d1:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function HZ(i){switch(i){case Cs:case ZR:return{byteLength:1,components:1};case Jm:case $R:case md:return{byteLength:2,components:1};case TA:case SA:return{byteLength:2,components:4};case Sl:case bA:case Rr:return{byteLength:4,components:1};case eB:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class zZ{static contain(e,t){return NZ(e,t)}static cover(e,t){return FZ(e,t)}static fill(e){return kZ(e)}static getByteLength(e,t,n,s){return Vw(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fh);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function L6(){let i=null,e=!1,t=null,n=null;function s(r,a){t(r,a),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function GZ(i){const e=new WeakMap;function t(o,l){const u=o.array,f=o.usage,d=u.byteLength,p=i.createBuffer();i.bindBuffer(l,p),i.bufferData(l,u,f),o.onUploadCallback();let m;if(u instanceof Float32Array)m=i.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?m=i.HALF_FLOAT:m=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=i.SHORT;else if(u instanceof Uint32Array)m=i.UNSIGNED_INT;else if(u instanceof Int32Array)m=i.INT;else if(u instanceof Int8Array)m=i.BYTE;else if(u instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function n(o,l,u){const f=l.array,d=l.updateRanges;if(i.bindBuffer(u,o),d.length===0)i.bufferSubData(u,0,f);else{d.sort((m,_)=>m.start-_.start);let p=0;for(let m=1;m<d.length;m++){const _=d[p],x=d[m];x.start<=_.start+_.count+1?_.count=Math.max(_.count,x.start+x.count-_.start):(++p,d[p]=x)}d.length=p+1;for(let m=0,_=d.length;m<_;m++){const x=d[m];i.bufferSubData(u,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const f=e.get(o);(!f||f.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,l),u.version=o.version}}return{get:s,remove:r,update:a}}var VZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,qZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,XZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,YZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,JZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,QZ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ZZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,$Z=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,e$=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,t$=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,i$=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,n$=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,s$=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,r$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,a$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,o$=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,l$=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,u$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,c$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,h$=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,f$=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,d$=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,p$=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,m$=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,g$=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,y$=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,v$=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_$="gl_FragColor = linearToOutputTexel( gl_FragColor );",x$=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,b$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,T$=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,S$=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,A$=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,E$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,C$=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,M$=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,w$=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,D$=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,R$=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,B$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,L$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,I$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,O$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,P$=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,U$=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,N$=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,F$=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,k$=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,H$=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,z$=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,G$=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V$=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,q$=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,j$=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,X$=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,W$=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Y$=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,K$=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,J$=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Q$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Z$=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$$=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,eee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,iee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,see=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ree=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,aee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,oee=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,lee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,hee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,dee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,pee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,mee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,gee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,yee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,vee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_ee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Tee=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,See=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Aee=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Eee=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Cee=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Mee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wee=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Dee=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ree=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Bee=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Lee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Iee=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Oee=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Pee=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Uee=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Nee=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Fee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Hee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,zee=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Gee=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Vee=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jee=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wee=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yee=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Kee=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Jee=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Qee=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Zee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,$ee=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ete=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tte=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ite=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ste=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ate=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ote=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ute=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vte=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_te=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qt={alphahash_fragment:VZ,alphahash_pars_fragment:qZ,alphamap_fragment:jZ,alphamap_pars_fragment:XZ,alphatest_fragment:WZ,alphatest_pars_fragment:YZ,aomap_fragment:KZ,aomap_pars_fragment:JZ,batching_pars_vertex:QZ,batching_vertex:ZZ,begin_vertex:$Z,beginnormal_vertex:e$,bsdfs:t$,iridescence_fragment:i$,bumpmap_pars_fragment:n$,clipping_planes_fragment:s$,clipping_planes_pars_fragment:r$,clipping_planes_pars_vertex:a$,clipping_planes_vertex:o$,color_fragment:l$,color_pars_fragment:u$,color_pars_vertex:c$,color_vertex:h$,common:f$,cube_uv_reflection_fragment:d$,defaultnormal_vertex:p$,displacementmap_pars_vertex:m$,displacementmap_vertex:g$,emissivemap_fragment:y$,emissivemap_pars_fragment:v$,colorspace_fragment:_$,colorspace_pars_fragment:x$,envmap_fragment:b$,envmap_common_pars_fragment:T$,envmap_pars_fragment:S$,envmap_pars_vertex:A$,envmap_physical_pars_fragment:P$,envmap_vertex:E$,fog_vertex:C$,fog_pars_vertex:M$,fog_fragment:w$,fog_pars_fragment:D$,gradientmap_pars_fragment:R$,lightmap_pars_fragment:B$,lights_lambert_fragment:L$,lights_lambert_pars_fragment:I$,lights_pars_begin:O$,lights_toon_fragment:U$,lights_toon_pars_fragment:N$,lights_phong_fragment:F$,lights_phong_pars_fragment:k$,lights_physical_fragment:H$,lights_physical_pars_fragment:z$,lights_fragment_begin:G$,lights_fragment_maps:V$,lights_fragment_end:q$,logdepthbuf_fragment:j$,logdepthbuf_pars_fragment:X$,logdepthbuf_pars_vertex:W$,logdepthbuf_vertex:Y$,map_fragment:K$,map_pars_fragment:J$,map_particle_fragment:Q$,map_particle_pars_fragment:Z$,metalnessmap_fragment:$$,metalnessmap_pars_fragment:eee,morphinstance_vertex:tee,morphcolor_vertex:iee,morphnormal_vertex:nee,morphtarget_pars_vertex:see,morphtarget_vertex:ree,normal_fragment_begin:aee,normal_fragment_maps:oee,normal_pars_fragment:lee,normal_pars_vertex:uee,normal_vertex:cee,normalmap_pars_fragment:hee,clearcoat_normal_fragment_begin:fee,clearcoat_normal_fragment_maps:dee,clearcoat_pars_fragment:pee,iridescence_pars_fragment:mee,opaque_fragment:gee,packing:yee,premultiplied_alpha_fragment:vee,project_vertex:_ee,dithering_fragment:xee,dithering_pars_fragment:bee,roughnessmap_fragment:Tee,roughnessmap_pars_fragment:See,shadowmap_pars_fragment:Aee,shadowmap_pars_vertex:Eee,shadowmap_vertex:Cee,shadowmask_pars_fragment:Mee,skinbase_vertex:wee,skinning_pars_vertex:Dee,skinning_vertex:Ree,skinnormal_vertex:Bee,specularmap_fragment:Lee,specularmap_pars_fragment:Iee,tonemapping_fragment:Oee,tonemapping_pars_fragment:Pee,transmission_fragment:Uee,transmission_pars_fragment:Nee,uv_pars_fragment:Fee,uv_pars_vertex:kee,uv_vertex:Hee,worldpos_vertex:zee,background_vert:Gee,background_frag:Vee,backgroundCube_vert:qee,backgroundCube_frag:jee,cube_vert:Xee,cube_frag:Wee,depth_vert:Yee,depth_frag:Kee,distanceRGBA_vert:Jee,distanceRGBA_frag:Qee,equirect_vert:Zee,equirect_frag:$ee,linedashed_vert:ete,linedashed_frag:tte,meshbasic_vert:ite,meshbasic_frag:nte,meshlambert_vert:ste,meshlambert_frag:rte,meshmatcap_vert:ate,meshmatcap_frag:ote,meshnormal_vert:lte,meshnormal_frag:ute,meshphong_vert:cte,meshphong_frag:hte,meshphysical_vert:fte,meshphysical_frag:dte,meshtoon_vert:pte,meshtoon_frag:mte,points_vert:gte,points_frag:yte,shadow_vert:vte,shadow_frag:_te,sprite_vert:xte,sprite_frag:bte},ot={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new qt},alphaMap:{value:null},alphaMapTransform:{value:new qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new qt}},envmap:{envMap:{value:null},envMapRotation:{value:new qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new qt},normalScale:{value:new Te(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new qt},alphaTest:{value:0},uvTransform:{value:new qt}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Te(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new qt},alphaMap:{value:null},alphaMapTransform:{value:new qt},alphaTest:{value:0}}},Io={basic:{uniforms:Tr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Qt.meshbasic_vert,fragmentShader:Qt.meshbasic_frag},lambert:{uniforms:Tr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new $e(0)}}]),vertexShader:Qt.meshlambert_vert,fragmentShader:Qt.meshlambert_frag},phong:{uniforms:Tr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Qt.meshphong_vert,fragmentShader:Qt.meshphong_frag},standard:{uniforms:Tr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},toon:{uniforms:Tr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new $e(0)}}]),vertexShader:Qt.meshtoon_vert,fragmentShader:Qt.meshtoon_frag},matcap:{uniforms:Tr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Qt.meshmatcap_vert,fragmentShader:Qt.meshmatcap_frag},points:{uniforms:Tr([ot.points,ot.fog]),vertexShader:Qt.points_vert,fragmentShader:Qt.points_frag},dashed:{uniforms:Tr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qt.linedashed_vert,fragmentShader:Qt.linedashed_frag},depth:{uniforms:Tr([ot.common,ot.displacementmap]),vertexShader:Qt.depth_vert,fragmentShader:Qt.depth_frag},normal:{uniforms:Tr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Qt.meshnormal_vert,fragmentShader:Qt.meshnormal_frag},sprite:{uniforms:Tr([ot.sprite,ot.fog]),vertexShader:Qt.sprite_vert,fragmentShader:Qt.sprite_frag},background:{uniforms:{uvTransform:{value:new qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qt.background_vert,fragmentShader:Qt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new qt}},vertexShader:Qt.backgroundCube_vert,fragmentShader:Qt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qt.cube_vert,fragmentShader:Qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qt.equirect_vert,fragmentShader:Qt.equirect_frag},distanceRGBA:{uniforms:Tr([ot.common,ot.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qt.distanceRGBA_vert,fragmentShader:Qt.distanceRGBA_frag},shadow:{uniforms:Tr([ot.lights,ot.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Qt.shadow_vert,fragmentShader:Qt.shadow_frag}};Io.physical={uniforms:Tr([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new qt},clearcoatNormalScale:{value:new Te(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new qt},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new qt},transmissionSamplerSize:{value:new Te},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new qt},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new qt},anisotropyVector:{value:new Te},anisotropyMap:{value:null},anisotropyMapTransform:{value:new qt}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag};const uT={r:0,b:0,g:0},af=new Ca,Tte=new vt;function Ste(i,e,t,n,s,r,a){const o=new $e(0);let l=r===!0?0:1,u,f,d=null,p=0,m=null;function _(A){let w=A.isScene===!0?A.background:null;return w&&w.isTexture&&(w=(A.backgroundBlurriness>0?t:e).get(w)),w}function x(A){let w=!1;const B=_(A);B===null?v(o,l):B&&B.isColor&&(v(B,1),w=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||w)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function b(A,w){const B=_(w);B&&(B.isCubeTexture||B.mapping===Rg)?(f===void 0&&(f=new _n(new yd(1,1,1),new bn({name:"BackgroundCubeMaterial",uniforms:ng(Io.backgroundCube.uniforms),vertexShader:Io.backgroundCube.vertexShader,fragmentShader:Io.backgroundCube.fragmentShader,side:rs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(I,P,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(f)),af.copy(w.backgroundRotation),af.x*=-1,af.y*=-1,af.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(af.y*=-1,af.z*=-1),f.material.uniforms.envMap.value=B,f.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Tte.makeRotationFromEuler(af)),f.material.toneMapped=pi.getTransfer(B.colorSpace)!==Ui,(d!==B||p!==B.version||m!==i.toneMapping)&&(f.material.needsUpdate=!0,d=B,p=B.version,m=i.toneMapping),f.layers.enableAll(),A.unshift(f,f.geometry,f.material,0,0,null)):B&&B.isTexture&&(u===void 0&&(u=new _n(new vd(2,2),new bn({name:"BackgroundMaterial",uniforms:ng(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:Ho,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=B,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=pi.getTransfer(B.colorSpace)!==Ui,B.matrixAutoUpdate===!0&&B.updateMatrix(),u.material.uniforms.uvTransform.value.copy(B.matrix),(d!==B||p!==B.version||m!==i.toneMapping)&&(u.material.needsUpdate=!0,d=B,p=B.version,m=i.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null))}function v(A,w){A.getRGB(uT,zH(i)),n.buffers.color.setClear(uT.r,uT.g,uT.b,w,a)}function T(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(A,w=1){o.set(A),l=w,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,v(o,l)},render:x,addToRenderList:b,dispose:T}}function Ate(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=p(null);let r=s,a=!1;function o(U,H,re,J,ae){let ce=!1;const j=d(J,re,H);r!==j&&(r=j,u(r.object)),ce=m(U,J,re,ae),ce&&_(U,J,re,ae),ae!==null&&e.update(ae,i.ELEMENT_ARRAY_BUFFER),(ce||a)&&(a=!1,w(U,H,re,J),ae!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function l(){return i.createVertexArray()}function u(U){return i.bindVertexArray(U)}function f(U){return i.deleteVertexArray(U)}function d(U,H,re){const J=re.wireframe===!0;let ae=n[U.id];ae===void 0&&(ae={},n[U.id]=ae);let ce=ae[H.id];ce===void 0&&(ce={},ae[H.id]=ce);let j=ce[J];return j===void 0&&(j=p(l()),ce[J]=j),j}function p(U){const H=[],re=[],J=[];for(let ae=0;ae<t;ae++)H[ae]=0,re[ae]=0,J[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:re,attributeDivisors:J,object:U,attributes:{},index:null}}function m(U,H,re,J){const ae=r.attributes,ce=H.attributes;let j=0;const Q=re.getAttributes();for(const $ in Q)if(Q[$].location>=0){const Se=ae[$];let Le=ce[$];if(Le===void 0&&($==="instanceMatrix"&&U.instanceMatrix&&(Le=U.instanceMatrix),$==="instanceColor"&&U.instanceColor&&(Le=U.instanceColor)),Se===void 0||Se.attribute!==Le||Le&&Se.data!==Le.data)return!0;j++}return r.attributesNum!==j||r.index!==J}function _(U,H,re,J){const ae={},ce=H.attributes;let j=0;const Q=re.getAttributes();for(const $ in Q)if(Q[$].location>=0){let Se=ce[$];Se===void 0&&($==="instanceMatrix"&&U.instanceMatrix&&(Se=U.instanceMatrix),$==="instanceColor"&&U.instanceColor&&(Se=U.instanceColor));const Le={};Le.attribute=Se,Se&&Se.data&&(Le.data=Se.data),ae[$]=Le,j++}r.attributes=ae,r.attributesNum=j,r.index=J}function x(){const U=r.newAttributes;for(let H=0,re=U.length;H<re;H++)U[H]=0}function b(U){v(U,0)}function v(U,H){const re=r.newAttributes,J=r.enabledAttributes,ae=r.attributeDivisors;re[U]=1,J[U]===0&&(i.enableVertexAttribArray(U),J[U]=1),ae[U]!==H&&(i.vertexAttribDivisor(U,H),ae[U]=H)}function T(){const U=r.newAttributes,H=r.enabledAttributes;for(let re=0,J=H.length;re<J;re++)H[re]!==U[re]&&(i.disableVertexAttribArray(re),H[re]=0)}function A(U,H,re,J,ae,ce,j){j===!0?i.vertexAttribIPointer(U,H,re,ae,ce):i.vertexAttribPointer(U,H,re,J,ae,ce)}function w(U,H,re,J){x();const ae=J.attributes,ce=re.getAttributes(),j=H.defaultAttributeValues;for(const Q in ce){const $=ce[Q];if($.location>=0){let pe=ae[Q];if(pe===void 0&&(Q==="instanceMatrix"&&U.instanceMatrix&&(pe=U.instanceMatrix),Q==="instanceColor"&&U.instanceColor&&(pe=U.instanceColor)),pe!==void 0){const Se=pe.normalized,Le=pe.itemSize,qe=e.get(pe);if(qe===void 0)continue;const ht=qe.buffer,me=qe.type,Fe=qe.bytesPerElement,nt=me===i.INT||me===i.UNSIGNED_INT||pe.gpuType===bA;if(pe.isInterleavedBufferAttribute){const Qe=pe.data,gt=Qe.stride,Gt=pe.offset;if(Qe.isInstancedInterleavedBuffer){for(let dt=0;dt<$.locationSize;dt++)v($.location+dt,Qe.meshPerAttribute);U.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let dt=0;dt<$.locationSize;dt++)b($.location+dt);i.bindBuffer(i.ARRAY_BUFFER,ht);for(let dt=0;dt<$.locationSize;dt++)A($.location+dt,Le/$.locationSize,me,Se,gt*Fe,(Gt+Le/$.locationSize*dt)*Fe,nt)}else{if(pe.isInstancedBufferAttribute){for(let Qe=0;Qe<$.locationSize;Qe++)v($.location+Qe,pe.meshPerAttribute);U.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Qe=0;Qe<$.locationSize;Qe++)b($.location+Qe);i.bindBuffer(i.ARRAY_BUFFER,ht);for(let Qe=0;Qe<$.locationSize;Qe++)A($.location+Qe,Le/$.locationSize,me,Se,Le*Fe,Le/$.locationSize*Qe*Fe,nt)}}else if(j!==void 0){const Se=j[Q];if(Se!==void 0)switch(Se.length){case 2:i.vertexAttrib2fv($.location,Se);break;case 3:i.vertexAttrib3fv($.location,Se);break;case 4:i.vertexAttrib4fv($.location,Se);break;default:i.vertexAttrib1fv($.location,Se)}}}}T()}function B(){F();for(const U in n){const H=n[U];for(const re in H){const J=H[re];for(const ae in J)f(J[ae].object),delete J[ae];delete H[re]}delete n[U]}}function I(U){if(n[U.id]===void 0)return;const H=n[U.id];for(const re in H){const J=H[re];for(const ae in J)f(J[ae].object),delete J[ae];delete H[re]}delete n[U.id]}function P(U){for(const H in n){const re=n[H];if(re[U.id]===void 0)continue;const J=re[U.id];for(const ae in J)f(J[ae].object),delete J[ae];delete re[U.id]}}function F(){N(),a=!0,r!==s&&(r=s,u(r.object))}function N(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:F,resetDefaultState:N,dispose:B,releaseStatesOfGeometry:I,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:b,disableUnusedAttributes:T}}function Ete(i,e,t){let n;function s(u){n=u}function r(u,f){i.drawArrays(n,u,f),t.update(f,n,1)}function a(u,f,d){d!==0&&(i.drawArraysInstanced(n,u,f,d),t.update(f,n,d))}function o(u,f,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,f,0,d);let m=0;for(let _=0;_<d;_++)m+=f[_];t.update(m,n,1)}function l(u,f,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let _=0;_<u.length;_++)a(u[_],f[_],p[_]);else{m.multiDrawArraysInstancedWEBGL(n,u,0,f,0,p,0,d);let _=0;for(let x=0;x<d;x++)_+=f[x]*p[x];t.update(_,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Cte(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(P){return!(P!==er&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const F=P===md&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Cs&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Rr&&!F)}function l(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);const d=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_TEXTURE_SIZE),b=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),T=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),A=i.getParameter(i.MAX_VARYING_VECTORS),w=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),B=_>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:_,maxTextureSize:x,maxCubemapSize:b,maxAttributes:v,maxVertexUniforms:T,maxVaryings:A,maxFragmentUniforms:w,vertexTextures:B,maxSamples:I}}function Mte(i){const e=this;let t=null,n=0,s=!1,r=!1;const a=new ru,o=new qt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||n!==0||s;return s=p,n=d.length,m},this.beginShadows=function(){r=!0,f(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,p){t=f(d,p,0)},this.setState=function(d,p,m){const _=d.clippingPlanes,x=d.clipIntersection,b=d.clipShadows,v=i.get(d);if(!s||_===null||_.length===0||r&&!b)r?f(null):u();else{const T=r?0:n,A=T*4;let w=v.clippingState||null;l.value=w,w=f(_,p,A,m);for(let B=0;B!==A;++B)w[B]=t[B];v.clippingState=w,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(d,p,m,_){const x=d!==null?d.length:0;let b=null;if(x!==0){if(b=l.value,_!==!0||b===null){const v=m+x*4,T=p.matrixWorldInverse;o.getNormalMatrix(T),(b===null||b.length<v)&&(b=new Float32Array(v));for(let A=0,w=m;A!==x;++A,w+=4)a.copy(d[A]).applyMatrix4(T,o),a.normal.toArray(b,w),b[w+3]=a.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function wte(i){let e=new WeakMap;function t(a,o){return o===Ev?a.mapping=Mu:o===Cv&&(a.mapping=nh),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Ev||o===Cv)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new pB(l.height);return u.fromEquirectangularTexture(i,a),e.set(a,u),a.addEventListener("dispose",s),t(u.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const lm=4,ZP=[.125,.215,.35,.446,.526,.582],xf=20,BC=new so,$P=new $e;let LC=null,IC=0,OC=0,PC=!1;const yf=(1+Math.sqrt(5))/2,Ip=1/yf,eU=[new W(-yf,Ip,0),new W(yf,Ip,0),new W(-Ip,0,yf),new W(Ip,0,yf),new W(0,yf,-Ip),new W(0,yf,Ip),new W(-1,1,-1),new W(1,1,-1),new W(-1,1,1),new W(1,1,1)],Dte=new W;class qw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:a=256,position:o=Dte}=r;LC=this._renderer.getRenderTarget(),IC=this._renderer.getActiveCubeFace(),OC=this._renderer.getActiveMipmapLevel(),PC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,s,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=iU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(LC,IC,OC),this._renderer.xr.enabled=PC,e.scissorTest=!1,cT(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Mu||e.mapping===nh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),LC=this._renderer.getRenderTarget(),IC=this._renderer.getActiveCubeFace(),OC=this._renderer.getActiveMipmapLevel(),PC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:on,minFilter:on,generateMipmaps:!1,type:md,format:er,colorSpace:Al,depthBuffer:!1},s=tU(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=tU(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Rte(r)),this._blurMaterial=Bte(r,e,t)}return s}_compileMaterial(e){const t=new _n(this._lodPlanes[0],e);this._renderer.compile(t,BC)}_sceneToCubeUV(e,t,n,s,r){const l=new rn(90,1,t,n),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor($P),d.toneMapping=No,d.autoClear=!1;const _=new _a({name:"PMREM.Background",side:rs,depthWrite:!1,depthTest:!1}),x=new _n(new yd,_);let b=!1;const v=e.background;v?v.isColor&&(_.color.copy(v),e.background=null,b=!0):(_.color.copy($P),b=!0);for(let T=0;T<6;T++){const A=T%3;A===0?(l.up.set(0,u[T],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x+f[T],r.y,r.z)):A===1?(l.up.set(0,0,u[T]),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y+f[T],r.z)):(l.up.set(0,u[T],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y,r.z+f[T]));const w=this._cubeSize;cT(s,A*w,T>2?w:0,w,w),d.setRenderTarget(s),b&&d.render(x,l),d.render(e,l)}x.geometry.dispose(),x.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Mu||e.mapping===nh;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=nU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=iU());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new _n(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;cT(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,BC)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=eU[(s-r-1)%eU.length];this._blur(e,r-1,r,a,o)}t.autoClear=n}_blur(e,t,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,s,"latitudinal",r),this._halfBlur(a,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new _n(this._lodPlanes[s],u),p=u.uniforms,m=this._sizeLods[n]-1,_=isFinite(r)?Math.PI/(2*m):2*Math.PI/(2*xf-1),x=r/_,b=isFinite(r)?1+Math.floor(f*x):xf;b>xf&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${xf}`);const v=[];let T=0;for(let P=0;P<xf;++P){const F=P/x,N=Math.exp(-F*F/2);v.push(N),P===0?T+=N:P<b&&(T+=2*N)}for(let P=0;P<v.length;P++)v[P]=v[P]/T;p.envMap.value=e.texture,p.samples.value=b,p.weights.value=v,p.latitudinal.value=a==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:A}=this;p.dTheta.value=_,p.mipInt.value=A-n;const w=this._sizeLods[s],B=3*w*(s>A-lm?s-A+lm:0),I=4*(this._cubeSize-w);cT(t,B,I,3*w,2*w),l.setRenderTarget(t),l.render(d,BC)}}function Rte(i){const e=[],t=[],n=[];let s=i;const r=i-lm+1+ZP.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);t.push(o);let l=1/o;a>i-lm?l=ZP[a-i+lm-1]:a===0&&(l=0),n.push(l);const u=1/(o-2),f=-u,d=1+u,p=[f,f,d,f,d,d,f,f,d,d,f,d],m=6,_=6,x=3,b=2,v=1,T=new Float32Array(x*_*m),A=new Float32Array(b*_*m),w=new Float32Array(v*_*m);for(let I=0;I<m;I++){const P=I%3*2/3-1,F=I>2?0:-1,N=[P,F,0,P+2/3,F,0,P+2/3,F+1,0,P,F,0,P+2/3,F+1,0,P,F+1,0];T.set(N,x*_*I),A.set(p,b*_*I);const U=[I,I,I,I,I,I];w.set(U,v*_*I)}const B=new Ht;B.setAttribute("position",new li(T,x)),B.setAttribute("uv",new li(A,b)),B.setAttribute("faceIndex",new li(w,v)),e.push(B),s>lm&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function tU(i,e,t){const n=new On(i,e,t);return n.texture.mapping=Rg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function cT(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function Bte(i,e,t){const n=new Float32Array(xf),s=new W(0,1,0);return new bn({name:"SphericalGaussianBlur",defines:{n:xf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:zB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:nr,depthTest:!1,depthWrite:!1})}function iU(){return new bn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:nr,depthTest:!1,depthWrite:!1})}function nU(){return new bn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:nr,depthTest:!1,depthWrite:!1})}function zB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Lte(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,u=l===Ev||l===Cv,f=l===Mu||l===nh;if(u||f){let d=e.get(o);const p=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==p)return t===null&&(t=new qw(i)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const m=o.image;return u&&m&&m.height>0||f&&m&&s(m)?(t===null&&(t=new qw(i)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",r),d.texture):null}}}return o}function s(o){let l=0;const u=6;for(let f=0;f<u;f++)o[f]!==void 0&&l++;return l===u}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function Ite(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&GT("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function Ote(i,e,t,n){const s={},r=new WeakMap;function a(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",a),delete s[p.id];const m=r.get(p);m&&(e.remove(m),r.delete(p)),n.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function o(d,p){return s[p.id]===!0||(p.addEventListener("dispose",a),s[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const m in p)e.update(p[m],i.ARRAY_BUFFER)}function u(d){const p=[],m=d.index,_=d.attributes.position;let x=0;if(m!==null){const T=m.array;x=m.version;for(let A=0,w=T.length;A<w;A+=3){const B=T[A+0],I=T[A+1],P=T[A+2];p.push(B,I,I,P,P,B)}}else if(_!==void 0){const T=_.array;x=_.version;for(let A=0,w=T.length/3-1;A<w;A+=3){const B=A+0,I=A+1,P=A+2;p.push(B,I,I,P,P,B)}}else return;const b=new(NH(p)?fB:hB)(p,1);b.version=x;const v=r.get(d);v&&e.remove(v),r.set(d,b)}function f(d){const p=r.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:f}}function Pte(i,e,t){let n;function s(p){n=p}let r,a;function o(p){r=p.type,a=p.bytesPerElement}function l(p,m){i.drawElements(n,m,r,p*a),t.update(m,n,1)}function u(p,m,_){_!==0&&(i.drawElementsInstanced(n,m,r,p*a,_),t.update(m,n,_))}function f(p,m,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,m,0,r,p,0,_);let b=0;for(let v=0;v<_;v++)b+=m[v];t.update(b,n,1)}function d(p,m,_,x){if(_===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let v=0;v<p.length;v++)u(p[v]/a,m[v],x[v]);else{b.multiDrawElementsInstancedWEBGL(n,m,0,r,p,0,x,0,_);let v=0;for(let T=0;T<_;T++)v+=m[T]*x[T];t.update(v,n,1)}}this.setMode=s,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function Ute(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(r/3);break;case i.LINES:t.lines+=o*(r/2);break;case i.LINE_STRIP:t.lines+=o*(r-1);break;case i.LINE_LOOP:t.lines+=o*r;break;case i.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function Nte(i,e,t){const n=new WeakMap,s=new di;function r(a,o,l){const u=a.morphTargetInfluences,f=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=f!==void 0?f.length:0;let p=n.get(o);if(p===void 0||p.count!==d){let U=function(){F.dispose(),n.delete(o),o.removeEventListener("dispose",U)};var m=U;p!==void 0&&p.texture.dispose();const _=o.morphAttributes.position!==void 0,x=o.morphAttributes.normal!==void 0,b=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],T=o.morphAttributes.normal||[],A=o.morphAttributes.color||[];let w=0;_===!0&&(w=1),x===!0&&(w=2),b===!0&&(w=3);let B=o.attributes.position.count*w,I=1;B>e.maxTextureSize&&(I=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const P=new Float32Array(B*I*4*d),F=new x_(P,B,I,d);F.type=Rr,F.needsUpdate=!0;const N=w*4;for(let H=0;H<d;H++){const re=v[H],J=T[H],ae=A[H],ce=B*I*4*H;for(let j=0;j<re.count;j++){const Q=j*N;_===!0&&(s.fromBufferAttribute(re,j),P[ce+Q+0]=s.x,P[ce+Q+1]=s.y,P[ce+Q+2]=s.z,P[ce+Q+3]=0),x===!0&&(s.fromBufferAttribute(J,j),P[ce+Q+4]=s.x,P[ce+Q+5]=s.y,P[ce+Q+6]=s.z,P[ce+Q+7]=0),b===!0&&(s.fromBufferAttribute(ae,j),P[ce+Q+8]=s.x,P[ce+Q+9]=s.y,P[ce+Q+10]=s.z,P[ce+Q+11]=ae.itemSize===4?s.w:1)}}p={count:d,texture:F,size:new Te(B,I)},n.set(o,p),o.addEventListener("dispose",U)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let _=0;for(let b=0;b<u.length;b++)_+=u[b];const x=o.morphTargetsRelative?1:1-_;l.getUniforms().setValue(i,"morphTargetBaseInfluence",x),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",p.size)}return{update:r}}function Fte(i,e,t,n){let s=new WeakMap;function r(l){const u=n.render.frame,f=l.geometry,d=e.get(l,f);if(s.get(d)!==u&&(e.update(d),s.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),s.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;s.get(p)!==u&&(p.update(),s.set(p,u))}return d}function a(){s=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:r,dispose:a}}const I6=new Zi,sU=new PA(1,1),O6=new x_,P6=new DA,U6=new T_,rU=[],aU=[],oU=new Float32Array(16),lU=new Float32Array(9),uU=new Float32Array(4);function Ig(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=rU[s];if(r===void 0&&(r=new Float32Array(s),rU[s]=r),e!==0){n.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(r,o)}return r}function ls(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function us(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function QA(i,e){let t=aU[e];t===void 0&&(t=new Int32Array(e),aU[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function kte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Hte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ls(t,e))return;i.uniform2fv(this.addr,e),us(t,e)}}function zte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ls(t,e))return;i.uniform3fv(this.addr,e),us(t,e)}}function Gte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ls(t,e))return;i.uniform4fv(this.addr,e),us(t,e)}}function Vte(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ls(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),us(t,e)}else{if(ls(t,n))return;uU.set(n),i.uniformMatrix2fv(this.addr,!1,uU),us(t,n)}}function qte(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ls(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),us(t,e)}else{if(ls(t,n))return;lU.set(n),i.uniformMatrix3fv(this.addr,!1,lU),us(t,n)}}function jte(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ls(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),us(t,e)}else{if(ls(t,n))return;oU.set(n),i.uniformMatrix4fv(this.addr,!1,oU),us(t,n)}}function Xte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Wte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ls(t,e))return;i.uniform2iv(this.addr,e),us(t,e)}}function Yte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ls(t,e))return;i.uniform3iv(this.addr,e),us(t,e)}}function Kte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ls(t,e))return;i.uniform4iv(this.addr,e),us(t,e)}}function Jte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Qte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ls(t,e))return;i.uniform2uiv(this.addr,e),us(t,e)}}function Zte(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ls(t,e))return;i.uniform3uiv(this.addr,e),us(t,e)}}function $te(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ls(t,e))return;i.uniform4uiv(this.addr,e),us(t,e)}}function eie(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(sU.compareFunction=uB,r=sU):r=I6,t.setTexture2D(e||r,s)}function tie(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||P6,s)}function iie(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||U6,s)}function nie(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||O6,s)}function sie(i){switch(i){case 5126:return kte;case 35664:return Hte;case 35665:return zte;case 35666:return Gte;case 35674:return Vte;case 35675:return qte;case 35676:return jte;case 5124:case 35670:return Xte;case 35667:case 35671:return Wte;case 35668:case 35672:return Yte;case 35669:case 35673:return Kte;case 5125:return Jte;case 36294:return Qte;case 36295:return Zte;case 36296:return $te;case 35678:case 36198:case 36298:case 36306:case 35682:return eie;case 35679:case 36299:case 36307:return tie;case 35680:case 36300:case 36308:case 36293:return iie;case 36289:case 36303:case 36311:case 36292:return nie}}function rie(i,e){i.uniform1fv(this.addr,e)}function aie(i,e){const t=Ig(e,this.size,2);i.uniform2fv(this.addr,t)}function oie(i,e){const t=Ig(e,this.size,3);i.uniform3fv(this.addr,t)}function lie(i,e){const t=Ig(e,this.size,4);i.uniform4fv(this.addr,t)}function uie(i,e){const t=Ig(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function cie(i,e){const t=Ig(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function hie(i,e){const t=Ig(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function fie(i,e){i.uniform1iv(this.addr,e)}function die(i,e){i.uniform2iv(this.addr,e)}function pie(i,e){i.uniform3iv(this.addr,e)}function mie(i,e){i.uniform4iv(this.addr,e)}function gie(i,e){i.uniform1uiv(this.addr,e)}function yie(i,e){i.uniform2uiv(this.addr,e)}function vie(i,e){i.uniform3uiv(this.addr,e)}function _ie(i,e){i.uniform4uiv(this.addr,e)}function xie(i,e,t){const n=this.cache,s=e.length,r=QA(t,s);ls(n,r)||(i.uniform1iv(this.addr,r),us(n,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||I6,r[a])}function bie(i,e,t){const n=this.cache,s=e.length,r=QA(t,s);ls(n,r)||(i.uniform1iv(this.addr,r),us(n,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||P6,r[a])}function Tie(i,e,t){const n=this.cache,s=e.length,r=QA(t,s);ls(n,r)||(i.uniform1iv(this.addr,r),us(n,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||U6,r[a])}function Sie(i,e,t){const n=this.cache,s=e.length,r=QA(t,s);ls(n,r)||(i.uniform1iv(this.addr,r),us(n,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||O6,r[a])}function Aie(i){switch(i){case 5126:return rie;case 35664:return aie;case 35665:return oie;case 35666:return lie;case 35674:return uie;case 35675:return cie;case 35676:return hie;case 5124:case 35670:return fie;case 35667:case 35671:return die;case 35668:case 35672:return pie;case 35669:case 35673:return mie;case 5125:return gie;case 36294:return yie;case 36295:return vie;case 36296:return _ie;case 35678:case 36198:case 36298:case 36306:case 35682:return xie;case 35679:case 36299:case 36307:return bie;case 35680:case 36300:case 36308:case 36293:return Tie;case 36289:case 36303:case 36311:case 36292:return Sie}}class Eie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=sie(t.type)}}class Cie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Aie(t.type)}}class Mie{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,t[o.id],n)}}}const UC=/(\w+)(\])?(\[|\.)?/g;function cU(i,e){i.seq.push(e),i.map[e.id]=e}function wie(i,e,t){const n=i.name,s=n.length;for(UC.lastIndex=0;;){const r=UC.exec(n),a=UC.lastIndex;let o=r[1];const l=r[2]==="]",u=r[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===s){cU(t,u===void 0?new Eie(o,i,e):new Cie(o,i,e));break}else{let d=t.map[o];d===void 0&&(d=new Mie(o),cU(t,d)),t=d}}}class qT{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);wie(r,a,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,a=t.length;r!==a;++r){const o=t[r],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&n.push(a)}return n}}function hU(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Die=37297;let Rie=0;function Bie(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const fU=new qt;function Lie(i){pi._getMatrix(fU,pi.workingColorSpace,i);const e=`mat3( ${fU.elements.map(t=>t.toFixed(4))} )`;switch(pi.getTransfer(i)){case wv:return[e,"LinearTransferOETF"];case Ui:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function dU(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+Bie(i.getShaderSource(e),a)}else return s}function Iie(i,e){const t=Lie(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Oie(i,e){let t;switch(e){case yH:t="Linear";break;case vH:t="Reinhard";break;case _H:t="Cineon";break;case QR:t="ACESFilmic";break;case bH:t="AgX";break;case TH:t="Neutral";break;case xH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const hT=new W;function Pie(){pi.getLuminanceCoefficients(hT);const i=hT.x.toFixed(4),e=hT.y.toFixed(4),t=hT.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Uie(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vy).join(`
`)}function Nie(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Fie(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),a=r.name;let o=1;r.type===i.FLOAT_MAT2&&(o=2),r.type===i.FLOAT_MAT3&&(o=3),r.type===i.FLOAT_MAT4&&(o=4),t[a]={type:r.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function vy(i){return i!==""}function pU(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function mU(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kie=/^[ \t]*#include +<([\w\d./]+)>/gm;function jw(i){return i.replace(kie,zie)}const Hie=new Map;function zie(i,e){let t=Qt[e];if(t===void 0){const n=Hie.get(e);if(n!==void 0)t=Qt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return jw(t)}const Gie=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gU(i){return i.replace(Gie,Vie)}function Vie(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function yU(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function qie(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===vA?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Gy?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Bo&&(e="SHADOWMAP_TYPE_VSM"),e}function jie(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Mu:case nh:e="ENVMAP_TYPE_CUBE";break;case Rg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Xie(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case nh:e="ENVMAP_MODE_REFRACTION";break}return e}function Wie(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case v_:e="ENVMAP_BLENDING_MULTIPLY";break;case mH:e="ENVMAP_BLENDING_MIX";break;case gH:e="ENVMAP_BLENDING_ADD";break}return e}function Yie(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Kie(i,e,t,n){const s=i.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=qie(t),u=jie(t),f=Xie(t),d=Wie(t),p=Yie(t),m=Uie(t),_=Nie(r),x=s.createProgram();let b,v,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(vy).join(`
`),b.length>0&&(b+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(vy).join(`
`),v.length>0&&(v+=`
`)):(b=[yU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vy).join(`
`),v=[yU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==No?"#define TONE_MAPPING":"",t.toneMapping!==No?Qt.tonemapping_pars_fragment:"",t.toneMapping!==No?Oie("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Qt.colorspace_pars_fragment,Iie("linearToOutputTexel",t.outputColorSpace),Pie(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(vy).join(`
`)),a=jw(a),a=pU(a,t),a=mU(a,t),o=jw(o),o=pU(o,t),o=mU(o,t),a=gU(a),o=gU(o),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,b=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,v=["#define varying in",t.glslVersion===Nw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Nw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const A=T+b+a,w=T+v+o,B=hU(s,s.VERTEX_SHADER,A),I=hU(s,s.FRAGMENT_SHADER,w);s.attachShader(x,B),s.attachShader(x,I),t.index0AttributeName!==void 0?s.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);function P(H){if(i.debug.checkShaderErrors){const re=s.getProgramInfoLog(x).trim(),J=s.getShaderInfoLog(B).trim(),ae=s.getShaderInfoLog(I).trim();let ce=!0,j=!0;if(s.getProgramParameter(x,s.LINK_STATUS)===!1)if(ce=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,x,B,I);else{const Q=dU(s,B,"vertex"),$=dU(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,s.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+re+`
`+Q+`
`+$)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(J===""||ae==="")&&(j=!1);j&&(H.diagnostics={runnable:ce,programLog:re,vertexShader:{log:J,prefix:b},fragmentShader:{log:ae,prefix:v}})}s.deleteShader(B),s.deleteShader(I),F=new qT(s,x),N=Fie(s,x)}let F;this.getUniforms=function(){return F===void 0&&P(this),F};let N;this.getAttributes=function(){return N===void 0&&P(this),N};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=s.getProgramParameter(x,Die)),U},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Rie++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=B,this.fragmentShader=I,this}let Jie=0;class Qie{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Zie(e),t.set(e,n)),n}}class Zie{constructor(e){this.id=Jie++,this.code=e,this.usedTimes=0}}function $ie(i,e,t,n,s,r,a){const o=new ig,l=new Qie,u=new Set,f=[],d=s.logarithmicDepthBuffer,p=s.vertexTextures;let m=s.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(N){return u.add(N),N===0?"uv":`uv${N}`}function b(N,U,H,re,J){const ae=re.fog,ce=J.geometry,j=N.isMeshStandardMaterial?re.environment:null,Q=(N.isMeshStandardMaterial?t:e).get(N.envMap||j),$=Q&&Q.mapping===Rg?Q.image.height:null,pe=_[N.type];N.precision!==null&&(m=s.getMaxPrecision(N.precision),m!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",m,"instead."));const Se=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Le=Se!==void 0?Se.length:0;let qe=0;ce.morphAttributes.position!==void 0&&(qe=1),ce.morphAttributes.normal!==void 0&&(qe=2),ce.morphAttributes.color!==void 0&&(qe=3);let ht,me,Fe,nt;if(pe){const Xt=Io[pe];ht=Xt.vertexShader,me=Xt.fragmentShader}else ht=N.vertexShader,me=N.fragmentShader,l.update(N),Fe=l.getVertexShaderID(N),nt=l.getFragmentShaderID(N);const Qe=i.getRenderTarget(),gt=i.state.buffers.depth.getReversed(),Gt=J.isInstancedMesh===!0,dt=J.isBatchedMesh===!0,yt=!!N.map,Ut=!!N.matcap,Ct=!!Q,te=!!N.aoMap,ui=!!N.lightMap,Pe=!!N.bumpMap,Ie=!!N.normalMap,Me=!!N.displacementMap,We=!!N.emissiveMap,ge=!!N.metalnessMap,X=!!N.roughnessMap,k=N.anisotropy>0,ue=N.clearcoat>0,Ae=N.dispersion>0,Re=N.iridescence>0,we=N.sheen>0,et=N.transmission>0,Ke=k&&!!N.anisotropyMap,lt=ue&&!!N.clearcoatMap,Vt=ue&&!!N.clearcoatNormalMap,ze=ue&&!!N.clearcoatRoughnessMap,Ve=Re&&!!N.iridescenceMap,xt=Re&&!!N.iridescenceThicknessMap,_t=we&&!!N.sheenColorMap,rt=we&&!!N.sheenRoughnessMap,se=!!N.specularMap,Be=!!N.specularColorMap,tt=!!N.specularIntensityMap,ne=et&&!!N.transmissionMap,je=et&&!!N.thicknessMap,Ee=!!N.gradientMap,Ue=!!N.alphaMap,at=N.alphaTest>0,st=!!N.alphaHash,Mt=!!N.extensions;let Zt=No;N.toneMapped&&(Qe===null||Qe.isXRRenderTarget===!0)&&(Zt=i.toneMapping);const Di={shaderID:pe,shaderType:N.type,shaderName:N.name,vertexShader:ht,fragmentShader:me,defines:N.defines,customVertexShaderID:Fe,customFragmentShaderID:nt,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:m,batching:dt,batchingColor:dt&&J._colorsTexture!==null,instancing:Gt,instancingColor:Gt&&J.instanceColor!==null,instancingMorph:Gt&&J.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Qe===null?i.outputColorSpace:Qe.isXRRenderTarget===!0?Qe.texture.colorSpace:Al,alphaToCoverage:!!N.alphaToCoverage,map:yt,matcap:Ut,envMap:Ct,envMapMode:Ct&&Q.mapping,envMapCubeUVHeight:$,aoMap:te,lightMap:ui,bumpMap:Pe,normalMap:Ie,displacementMap:p&&Me,emissiveMap:We,normalMapObjectSpace:Ie&&N.normalMapType===DH,normalMapTangentSpace:Ie&&N.normalMapType===ph,metalnessMap:ge,roughnessMap:X,anisotropy:k,anisotropyMap:Ke,clearcoat:ue,clearcoatMap:lt,clearcoatNormalMap:Vt,clearcoatRoughnessMap:ze,dispersion:Ae,iridescence:Re,iridescenceMap:Ve,iridescenceThicknessMap:xt,sheen:we,sheenColorMap:_t,sheenRoughnessMap:rt,specularMap:se,specularColorMap:Be,specularIntensityMap:tt,transmission:et,transmissionMap:ne,thicknessMap:je,gradientMap:Ee,opaque:N.transparent===!1&&N.blending===Hf&&N.alphaToCoverage===!1,alphaMap:Ue,alphaTest:at,alphaHash:st,combine:N.combine,mapUv:yt&&x(N.map.channel),aoMapUv:te&&x(N.aoMap.channel),lightMapUv:ui&&x(N.lightMap.channel),bumpMapUv:Pe&&x(N.bumpMap.channel),normalMapUv:Ie&&x(N.normalMap.channel),displacementMapUv:Me&&x(N.displacementMap.channel),emissiveMapUv:We&&x(N.emissiveMap.channel),metalnessMapUv:ge&&x(N.metalnessMap.channel),roughnessMapUv:X&&x(N.roughnessMap.channel),anisotropyMapUv:Ke&&x(N.anisotropyMap.channel),clearcoatMapUv:lt&&x(N.clearcoatMap.channel),clearcoatNormalMapUv:Vt&&x(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ze&&x(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Ve&&x(N.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&x(N.iridescenceThicknessMap.channel),sheenColorMapUv:_t&&x(N.sheenColorMap.channel),sheenRoughnessMapUv:rt&&x(N.sheenRoughnessMap.channel),specularMapUv:se&&x(N.specularMap.channel),specularColorMapUv:Be&&x(N.specularColorMap.channel),specularIntensityMapUv:tt&&x(N.specularIntensityMap.channel),transmissionMapUv:ne&&x(N.transmissionMap.channel),thicknessMapUv:je&&x(N.thicknessMap.channel),alphaMapUv:Ue&&x(N.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&(Ie||k),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:J.isPoints===!0&&!!ce.attributes.uv&&(yt||Ue),fog:!!ae,useFog:N.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:gt,skinning:J.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:Le,morphTextureStride:qe,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:Zt,decodeVideoTexture:yt&&N.map.isVideoTexture===!0&&pi.getTransfer(N.map.colorSpace)===Ui,decodeVideoTextureEmissive:We&&N.emissiveMap.isVideoTexture===!0&&pi.getTransfer(N.emissiveMap.colorSpace)===Ui,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Qs,flipSided:N.side===rs,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:Mt&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Mt&&N.extensions.multiDraw===!0||dt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Di.vertexUv1s=u.has(1),Di.vertexUv2s=u.has(2),Di.vertexUv3s=u.has(3),u.clear(),Di}function v(N){const U=[];if(N.shaderID?U.push(N.shaderID):(U.push(N.customVertexShaderID),U.push(N.customFragmentShaderID)),N.defines!==void 0)for(const H in N.defines)U.push(H),U.push(N.defines[H]);return N.isRawShaderMaterial===!1&&(T(U,N),A(U,N),U.push(i.outputColorSpace)),U.push(N.customProgramCacheKey),U.join()}function T(N,U){N.push(U.precision),N.push(U.outputColorSpace),N.push(U.envMapMode),N.push(U.envMapCubeUVHeight),N.push(U.mapUv),N.push(U.alphaMapUv),N.push(U.lightMapUv),N.push(U.aoMapUv),N.push(U.bumpMapUv),N.push(U.normalMapUv),N.push(U.displacementMapUv),N.push(U.emissiveMapUv),N.push(U.metalnessMapUv),N.push(U.roughnessMapUv),N.push(U.anisotropyMapUv),N.push(U.clearcoatMapUv),N.push(U.clearcoatNormalMapUv),N.push(U.clearcoatRoughnessMapUv),N.push(U.iridescenceMapUv),N.push(U.iridescenceThicknessMapUv),N.push(U.sheenColorMapUv),N.push(U.sheenRoughnessMapUv),N.push(U.specularMapUv),N.push(U.specularColorMapUv),N.push(U.specularIntensityMapUv),N.push(U.transmissionMapUv),N.push(U.thicknessMapUv),N.push(U.combine),N.push(U.fogExp2),N.push(U.sizeAttenuation),N.push(U.morphTargetsCount),N.push(U.morphAttributeCount),N.push(U.numDirLights),N.push(U.numPointLights),N.push(U.numSpotLights),N.push(U.numSpotLightMaps),N.push(U.numHemiLights),N.push(U.numRectAreaLights),N.push(U.numDirLightShadows),N.push(U.numPointLightShadows),N.push(U.numSpotLightShadows),N.push(U.numSpotLightShadowsWithMaps),N.push(U.numLightProbes),N.push(U.shadowMapType),N.push(U.toneMapping),N.push(U.numClippingPlanes),N.push(U.numClipIntersection),N.push(U.depthPacking)}function A(N,U){o.disableAll(),U.supportsVertexTextures&&o.enable(0),U.instancing&&o.enable(1),U.instancingColor&&o.enable(2),U.instancingMorph&&o.enable(3),U.matcap&&o.enable(4),U.envMap&&o.enable(5),U.normalMapObjectSpace&&o.enable(6),U.normalMapTangentSpace&&o.enable(7),U.clearcoat&&o.enable(8),U.iridescence&&o.enable(9),U.alphaTest&&o.enable(10),U.vertexColors&&o.enable(11),U.vertexAlphas&&o.enable(12),U.vertexUv1s&&o.enable(13),U.vertexUv2s&&o.enable(14),U.vertexUv3s&&o.enable(15),U.vertexTangents&&o.enable(16),U.anisotropy&&o.enable(17),U.alphaHash&&o.enable(18),U.batching&&o.enable(19),U.dispersion&&o.enable(20),U.batchingColor&&o.enable(21),N.push(o.mask),o.disableAll(),U.fog&&o.enable(0),U.useFog&&o.enable(1),U.flatShading&&o.enable(2),U.logarithmicDepthBuffer&&o.enable(3),U.reverseDepthBuffer&&o.enable(4),U.skinning&&o.enable(5),U.morphTargets&&o.enable(6),U.morphNormals&&o.enable(7),U.morphColors&&o.enable(8),U.premultipliedAlpha&&o.enable(9),U.shadowMapEnabled&&o.enable(10),U.doubleSided&&o.enable(11),U.flipSided&&o.enable(12),U.useDepthPacking&&o.enable(13),U.dithering&&o.enable(14),U.transmission&&o.enable(15),U.sheen&&o.enable(16),U.opaque&&o.enable(17),U.pointsUvs&&o.enable(18),U.decodeVideoTexture&&o.enable(19),U.decodeVideoTextureEmissive&&o.enable(20),U.alphaToCoverage&&o.enable(21),N.push(o.mask)}function w(N){const U=_[N.type];let H;if(U){const re=Io[U];H=GH.clone(re.uniforms)}else H=N.uniforms;return H}function B(N,U){let H;for(let re=0,J=f.length;re<J;re++){const ae=f[re];if(ae.cacheKey===U){H=ae,++H.usedTimes;break}}return H===void 0&&(H=new Kie(i,U,N,r),f.push(H)),H}function I(N){if(--N.usedTimes===0){const U=f.indexOf(N);f[U]=f[f.length-1],f.pop(),N.destroy()}}function P(N){l.remove(N)}function F(){l.dispose()}return{getParameters:b,getProgramCacheKey:v,getUniforms:w,acquireProgram:B,releaseProgram:I,releaseShaderCache:P,programs:f,dispose:F}}function ene(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function s(a,o,l){i.get(a)[o]=l}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function tne(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function vU(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function _U(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function a(d,p,m,_,x,b){let v=i[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:_,renderOrder:d.renderOrder,z:x,group:b},i[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=_,v.renderOrder=d.renderOrder,v.z=x,v.group=b),e++,v}function o(d,p,m,_,x,b){const v=a(d,p,m,_,x,b);m.transmission>0?n.push(v):m.transparent===!0?s.push(v):t.push(v)}function l(d,p,m,_,x,b){const v=a(d,p,m,_,x,b);m.transmission>0?n.unshift(v):m.transparent===!0?s.unshift(v):t.unshift(v)}function u(d,p){t.length>1&&t.sort(d||tne),n.length>1&&n.sort(p||vU),s.length>1&&s.sort(p||vU)}function f(){for(let d=e,p=i.length;d<p;d++){const m=i[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:o,unshift:l,finish:f,sort:u}}function ine(){let i=new WeakMap;function e(n,s){const r=i.get(n);let a;return r===void 0?(a=new _U,i.set(n,[a])):s>=r.length?(a=new _U,r.push(a)):a=r[s],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function nne(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new W,color:new $e};break;case"SpotLight":t={position:new W,direction:new W,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new W,color:new $e,distance:0,decay:0};break;case"HemisphereLight":t={direction:new W,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":t={color:new $e,position:new W,halfWidth:new W,halfHeight:new W};break}return i[e.id]=t,t}}}function sne(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let rne=0;function ane(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function one(i){const e=new nne,t=sne(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new W);const s=new W,r=new vt,a=new vt;function o(u){let f=0,d=0,p=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let m=0,_=0,x=0,b=0,v=0,T=0,A=0,w=0,B=0,I=0,P=0;u.sort(ane);for(let N=0,U=u.length;N<U;N++){const H=u[N],re=H.color,J=H.intensity,ae=H.distance,ce=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)f+=re.r*J,d+=re.g*J,p+=re.b*J;else if(H.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(H.sh.coefficients[j],J);P++}else if(H.isDirectionalLight){const j=e.get(H);if(j.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const Q=H.shadow,$=t.get(H);$.shadowIntensity=Q.intensity,$.shadowBias=Q.bias,$.shadowNormalBias=Q.normalBias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize,n.directionalShadow[m]=$,n.directionalShadowMap[m]=ce,n.directionalShadowMatrix[m]=H.shadow.matrix,T++}n.directional[m]=j,m++}else if(H.isSpotLight){const j=e.get(H);j.position.setFromMatrixPosition(H.matrixWorld),j.color.copy(re).multiplyScalar(J),j.distance=ae,j.coneCos=Math.cos(H.angle),j.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),j.decay=H.decay,n.spot[x]=j;const Q=H.shadow;if(H.map&&(n.spotLightMap[B]=H.map,B++,Q.updateMatrices(H),H.castShadow&&I++),n.spotLightMatrix[x]=Q.matrix,H.castShadow){const $=t.get(H);$.shadowIntensity=Q.intensity,$.shadowBias=Q.bias,$.shadowNormalBias=Q.normalBias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize,n.spotShadow[x]=$,n.spotShadowMap[x]=ce,w++}x++}else if(H.isRectAreaLight){const j=e.get(H);j.color.copy(re).multiplyScalar(J),j.halfWidth.set(H.width*.5,0,0),j.halfHeight.set(0,H.height*.5,0),n.rectArea[b]=j,b++}else if(H.isPointLight){const j=e.get(H);if(j.color.copy(H.color).multiplyScalar(H.intensity),j.distance=H.distance,j.decay=H.decay,H.castShadow){const Q=H.shadow,$=t.get(H);$.shadowIntensity=Q.intensity,$.shadowBias=Q.bias,$.shadowNormalBias=Q.normalBias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize,$.shadowCameraNear=Q.camera.near,$.shadowCameraFar=Q.camera.far,n.pointShadow[_]=$,n.pointShadowMap[_]=ce,n.pointShadowMatrix[_]=H.shadow.matrix,A++}n.point[_]=j,_++}else if(H.isHemisphereLight){const j=e.get(H);j.skyColor.copy(H.color).multiplyScalar(J),j.groundColor.copy(H.groundColor).multiplyScalar(J),n.hemi[v]=j,v++}}b>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ot.LTC_FLOAT_1,n.rectAreaLTC2=ot.LTC_FLOAT_2):(n.rectAreaLTC1=ot.LTC_HALF_1,n.rectAreaLTC2=ot.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=d,n.ambient[2]=p;const F=n.hash;(F.directionalLength!==m||F.pointLength!==_||F.spotLength!==x||F.rectAreaLength!==b||F.hemiLength!==v||F.numDirectionalShadows!==T||F.numPointShadows!==A||F.numSpotShadows!==w||F.numSpotMaps!==B||F.numLightProbes!==P)&&(n.directional.length=m,n.spot.length=x,n.rectArea.length=b,n.point.length=_,n.hemi.length=v,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=A,n.pointShadowMap.length=A,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=A,n.spotLightMatrix.length=w+B-I,n.spotLightMap.length=B,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=P,F.directionalLength=m,F.pointLength=_,F.spotLength=x,F.rectAreaLength=b,F.hemiLength=v,F.numDirectionalShadows=T,F.numPointShadows=A,F.numSpotShadows=w,F.numSpotMaps=B,F.numLightProbes=P,n.version=rne++)}function l(u,f){let d=0,p=0,m=0,_=0,x=0;const b=f.matrixWorldInverse;for(let v=0,T=u.length;v<T;v++){const A=u[v];if(A.isDirectionalLight){const w=n.directional[d];w.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(b),d++}else if(A.isSpotLight){const w=n.spot[m];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),w.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(b),m++}else if(A.isRectAreaLight){const w=n.rectArea[_];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),a.identity(),r.copy(A.matrixWorld),r.premultiply(b),a.extractRotation(r),w.halfWidth.set(A.width*.5,0,0),w.halfHeight.set(0,A.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),_++}else if(A.isPointLight){const w=n.point[p];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(b),p++}else if(A.isHemisphereLight){const w=n.hemi[x];w.direction.setFromMatrixPosition(A.matrixWorld),w.direction.transformDirection(b),x++}}}return{setup:o,setupView:l,state:n}}function xU(i){const e=new one(i),t=[],n=[];function s(f){u.camera=f,t.length=0,n.length=0}function r(f){t.push(f)}function a(f){n.push(f)}function o(){e.setup(t)}function l(f){e.setupView(t,f)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:a}}function lne(i){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new xU(i),e.set(s,[o])):r>=a.length?(o=new xU(i),a.push(o)):o=a[r],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const une=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cne=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hne(i,e,t){let n=new E_;const s=new Te,r=new Te,a=new di,o=new KA({depthPacking:wH}),l=new MB,u={},f=t.maxTextureSize,d={[Ho]:rs,[rs]:Ho,[Qs]:Qs},p=new bn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Te},radius:{value:4}},vertexShader:une,fragmentShader:cne}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const _=new Ht;_.setAttribute("position",new li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new _n(_,p),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vA;let v=this.type;this.render=function(I,P,F){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||I.length===0)return;const N=i.getRenderTarget(),U=i.getActiveCubeFace(),H=i.getActiveMipmapLevel(),re=i.state;re.setBlending(nr),re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const J=v!==Bo&&this.type===Bo,ae=v===Bo&&this.type!==Bo;for(let ce=0,j=I.length;ce<j;ce++){const Q=I[ce],$=Q.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const pe=$.getFrameExtents();if(s.multiply(pe),r.copy($.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(r.x=Math.floor(f/pe.x),s.x=r.x*pe.x,$.mapSize.x=r.x),s.y>f&&(r.y=Math.floor(f/pe.y),s.y=r.y*pe.y,$.mapSize.y=r.y)),$.map===null||J===!0||ae===!0){const Le=this.type!==Bo?{minFilter:In,magFilter:In}:{};$.map!==null&&$.map.dispose(),$.map=new On(s.x,s.y,Le),$.map.texture.name=Q.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const Se=$.getViewportCount();for(let Le=0;Le<Se;Le++){const qe=$.getViewport(Le);a.set(r.x*qe.x,r.y*qe.y,r.x*qe.z,r.y*qe.w),re.viewport(a),$.updateMatrices(Q,Le),n=$.getFrustum(),w(P,F,$.camera,Q,this.type)}$.isPointLightShadow!==!0&&this.type===Bo&&T($,F),$.needsUpdate=!1}v=this.type,b.needsUpdate=!1,i.setRenderTarget(N,U,H)};function T(I,P){const F=e.update(x);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,m.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new On(s.x,s.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(P,null,F,p,x,null),m.uniforms.shadow_pass.value=I.mapPass.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(P,null,F,m,x,null)}function A(I,P,F,N){let U=null;const H=F.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(H!==void 0)U=H;else if(U=F.isPointLight===!0?l:o,i.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const re=U.uuid,J=P.uuid;let ae=u[re];ae===void 0&&(ae={},u[re]=ae);let ce=ae[J];ce===void 0&&(ce=U.clone(),ae[J]=ce,P.addEventListener("dispose",B)),U=ce}if(U.visible=P.visible,U.wireframe=P.wireframe,N===Bo?U.side=P.shadowSide!==null?P.shadowSide:P.side:U.side=P.shadowSide!==null?P.shadowSide:d[P.side],U.alphaMap=P.alphaMap,U.alphaTest=P.alphaTest,U.map=P.map,U.clipShadows=P.clipShadows,U.clippingPlanes=P.clippingPlanes,U.clipIntersection=P.clipIntersection,U.displacementMap=P.displacementMap,U.displacementScale=P.displacementScale,U.displacementBias=P.displacementBias,U.wireframeLinewidth=P.wireframeLinewidth,U.linewidth=P.linewidth,F.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const re=i.properties.get(U);re.light=F}return U}function w(I,P,F,N,U){if(I.visible===!1)return;if(I.layers.test(P.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&U===Bo)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,I.matrixWorld);const J=e.update(I),ae=I.material;if(Array.isArray(ae)){const ce=J.groups;for(let j=0,Q=ce.length;j<Q;j++){const $=ce[j],pe=ae[$.materialIndex];if(pe&&pe.visible){const Se=A(I,pe,N,U);I.onBeforeShadow(i,I,P,F,J,Se,$),i.renderBufferDirect(F,null,J,Se,I,$),I.onAfterShadow(i,I,P,F,J,Se,$)}}}else if(ae.visible){const ce=A(I,ae,N,U);I.onBeforeShadow(i,I,P,F,J,ce,null),i.renderBufferDirect(F,null,J,ce,I,null),I.onAfterShadow(i,I,P,F,J,ce,null)}}const re=I.children;for(let J=0,ae=re.length;J<ae;J++)w(re[J],P,F,N,U)}function B(I){I.target.removeEventListener("dispose",B);for(const F in u){const N=u[F],U=I.target.uuid;U in N&&(N[U].dispose(),delete N[U])}}}const fne={[PS]:US,[NS]:HS,[FS]:zS,[ed]:kS,[US]:PS,[HS]:NS,[zS]:FS,[kS]:ed};function dne(i,e){function t(){let ne=!1;const je=new di;let Ee=null;const Ue=new di(0,0,0,0);return{setMask:function(at){Ee!==at&&!ne&&(i.colorMask(at,at,at,at),Ee=at)},setLocked:function(at){ne=at},setClear:function(at,st,Mt,Zt,Di){Di===!0&&(at*=Zt,st*=Zt,Mt*=Zt),je.set(at,st,Mt,Zt),Ue.equals(je)===!1&&(i.clearColor(at,st,Mt,Zt),Ue.copy(je))},reset:function(){ne=!1,Ee=null,Ue.set(-1,0,0,0)}}}function n(){let ne=!1,je=!1,Ee=null,Ue=null,at=null;return{setReversed:function(st){if(je!==st){const Mt=e.get("EXT_clip_control");st?Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.ZERO_TO_ONE_EXT):Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.NEGATIVE_ONE_TO_ONE_EXT),je=st;const Zt=at;at=null,this.setClear(Zt)}},getReversed:function(){return je},setTest:function(st){st?Qe(i.DEPTH_TEST):gt(i.DEPTH_TEST)},setMask:function(st){Ee!==st&&!ne&&(i.depthMask(st),Ee=st)},setFunc:function(st){if(je&&(st=fne[st]),Ue!==st){switch(st){case PS:i.depthFunc(i.NEVER);break;case US:i.depthFunc(i.ALWAYS);break;case NS:i.depthFunc(i.LESS);break;case ed:i.depthFunc(i.LEQUAL);break;case FS:i.depthFunc(i.EQUAL);break;case kS:i.depthFunc(i.GEQUAL);break;case HS:i.depthFunc(i.GREATER);break;case zS:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ue=st}},setLocked:function(st){ne=st},setClear:function(st){at!==st&&(je&&(st=1-st),i.clearDepth(st),at=st)},reset:function(){ne=!1,Ee=null,Ue=null,at=null,je=!1}}}function s(){let ne=!1,je=null,Ee=null,Ue=null,at=null,st=null,Mt=null,Zt=null,Di=null;return{setTest:function(Xt){ne||(Xt?Qe(i.STENCIL_TEST):gt(i.STENCIL_TEST))},setMask:function(Xt){je!==Xt&&!ne&&(i.stencilMask(Xt),je=Xt)},setFunc:function(Xt,Sn,Jn){(Ee!==Xt||Ue!==Sn||at!==Jn)&&(i.stencilFunc(Xt,Sn,Jn),Ee=Xt,Ue=Sn,at=Jn)},setOp:function(Xt,Sn,Jn){(st!==Xt||Mt!==Sn||Zt!==Jn)&&(i.stencilOp(Xt,Sn,Jn),st=Xt,Mt=Sn,Zt=Jn)},setLocked:function(Xt){ne=Xt},setClear:function(Xt){Di!==Xt&&(i.clearStencil(Xt),Di=Xt)},reset:function(){ne=!1,je=null,Ee=null,Ue=null,at=null,st=null,Mt=null,Zt=null,Di=null}}}const r=new t,a=new n,o=new s,l=new WeakMap,u=new WeakMap;let f={},d={},p=new WeakMap,m=[],_=null,x=!1,b=null,v=null,T=null,A=null,w=null,B=null,I=null,P=new $e(0,0,0),F=0,N=!1,U=null,H=null,re=null,J=null,ae=null;const ce=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,Q=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec($)[1]),j=Q>=1):$.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),j=Q>=2);let pe=null,Se={};const Le=i.getParameter(i.SCISSOR_BOX),qe=i.getParameter(i.VIEWPORT),ht=new di().fromArray(Le),me=new di().fromArray(qe);function Fe(ne,je,Ee,Ue){const at=new Uint8Array(4),st=i.createTexture();i.bindTexture(ne,st),i.texParameteri(ne,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ne,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Mt=0;Mt<Ee;Mt++)ne===i.TEXTURE_3D||ne===i.TEXTURE_2D_ARRAY?i.texImage3D(je,0,i.RGBA,1,1,Ue,0,i.RGBA,i.UNSIGNED_BYTE,at):i.texImage2D(je+Mt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,at);return st}const nt={};nt[i.TEXTURE_2D]=Fe(i.TEXTURE_2D,i.TEXTURE_2D,1),nt[i.TEXTURE_CUBE_MAP]=Fe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),nt[i.TEXTURE_2D_ARRAY]=Fe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),nt[i.TEXTURE_3D]=Fe(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Qe(i.DEPTH_TEST),a.setFunc(ed),Pe(!1),Ie(Lw),Qe(i.CULL_FACE),te(nr);function Qe(ne){f[ne]!==!0&&(i.enable(ne),f[ne]=!0)}function gt(ne){f[ne]!==!1&&(i.disable(ne),f[ne]=!1)}function Gt(ne,je){return d[ne]!==je?(i.bindFramebuffer(ne,je),d[ne]=je,ne===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=je),ne===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=je),!0):!1}function dt(ne,je){let Ee=m,Ue=!1;if(ne){Ee=p.get(je),Ee===void 0&&(Ee=[],p.set(je,Ee));const at=ne.textures;if(Ee.length!==at.length||Ee[0]!==i.COLOR_ATTACHMENT0){for(let st=0,Mt=at.length;st<Mt;st++)Ee[st]=i.COLOR_ATTACHMENT0+st;Ee.length=at.length,Ue=!0}}else Ee[0]!==i.BACK&&(Ee[0]=i.BACK,Ue=!0);Ue&&i.drawBuffers(Ee)}function yt(ne){return _!==ne?(i.useProgram(ne),_=ne,!0):!1}const Ut={[Nc]:i.FUNC_ADD,[Zk]:i.FUNC_SUBTRACT,[$k]:i.FUNC_REVERSE_SUBTRACT};Ut[eH]=i.MIN,Ut[tH]=i.MAX;const Ct={[iH]:i.ZERO,[nH]:i.ONE,[sH]:i.SRC_COLOR,[IS]:i.SRC_ALPHA,[cH]:i.SRC_ALPHA_SATURATE,[lH]:i.DST_COLOR,[aH]:i.DST_ALPHA,[rH]:i.ONE_MINUS_SRC_COLOR,[OS]:i.ONE_MINUS_SRC_ALPHA,[uH]:i.ONE_MINUS_DST_COLOR,[oH]:i.ONE_MINUS_DST_ALPHA,[hH]:i.CONSTANT_COLOR,[fH]:i.ONE_MINUS_CONSTANT_COLOR,[dH]:i.CONSTANT_ALPHA,[pH]:i.ONE_MINUS_CONSTANT_ALPHA};function te(ne,je,Ee,Ue,at,st,Mt,Zt,Di,Xt){if(ne===nr){x===!0&&(gt(i.BLEND),x=!1);return}if(x===!1&&(Qe(i.BLEND),x=!0),ne!==Qk){if(ne!==b||Xt!==N){if((v!==Nc||w!==Nc)&&(i.blendEquation(i.FUNC_ADD),v=Nc,w=Nc),Xt)switch(ne){case Hf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case LS:i.blendFunc(i.ONE,i.ONE);break;case Iw:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Ow:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case Hf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case LS:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Iw:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Ow:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}T=null,A=null,B=null,I=null,P.set(0,0,0),F=0,b=ne,N=Xt}return}at=at||je,st=st||Ee,Mt=Mt||Ue,(je!==v||at!==w)&&(i.blendEquationSeparate(Ut[je],Ut[at]),v=je,w=at),(Ee!==T||Ue!==A||st!==B||Mt!==I)&&(i.blendFuncSeparate(Ct[Ee],Ct[Ue],Ct[st],Ct[Mt]),T=Ee,A=Ue,B=st,I=Mt),(Zt.equals(P)===!1||Di!==F)&&(i.blendColor(Zt.r,Zt.g,Zt.b,Di),P.copy(Zt),F=Di),b=ne,N=!1}function ui(ne,je){ne.side===Qs?gt(i.CULL_FACE):Qe(i.CULL_FACE);let Ee=ne.side===rs;je&&(Ee=!Ee),Pe(Ee),ne.blending===Hf&&ne.transparent===!1?te(nr):te(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.blendColor,ne.blendAlpha,ne.premultipliedAlpha),a.setFunc(ne.depthFunc),a.setTest(ne.depthTest),a.setMask(ne.depthWrite),r.setMask(ne.colorWrite);const Ue=ne.stencilWrite;o.setTest(Ue),Ue&&(o.setMask(ne.stencilWriteMask),o.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),o.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),We(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?Qe(i.SAMPLE_ALPHA_TO_COVERAGE):gt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(ne){U!==ne&&(ne?i.frontFace(i.CW):i.frontFace(i.CCW),U=ne)}function Ie(ne){ne!==Yk?(Qe(i.CULL_FACE),ne!==H&&(ne===Lw?i.cullFace(i.BACK):ne===Kk?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):gt(i.CULL_FACE),H=ne}function Me(ne){ne!==re&&(j&&i.lineWidth(ne),re=ne)}function We(ne,je,Ee){ne?(Qe(i.POLYGON_OFFSET_FILL),(J!==je||ae!==Ee)&&(i.polygonOffset(je,Ee),J=je,ae=Ee)):gt(i.POLYGON_OFFSET_FILL)}function ge(ne){ne?Qe(i.SCISSOR_TEST):gt(i.SCISSOR_TEST)}function X(ne){ne===void 0&&(ne=i.TEXTURE0+ce-1),pe!==ne&&(i.activeTexture(ne),pe=ne)}function k(ne,je,Ee){Ee===void 0&&(pe===null?Ee=i.TEXTURE0+ce-1:Ee=pe);let Ue=Se[Ee];Ue===void 0&&(Ue={type:void 0,texture:void 0},Se[Ee]=Ue),(Ue.type!==ne||Ue.texture!==je)&&(pe!==Ee&&(i.activeTexture(Ee),pe=Ee),i.bindTexture(ne,je||nt[ne]),Ue.type=ne,Ue.texture=je)}function ue(){const ne=Se[pe];ne!==void 0&&ne.type!==void 0&&(i.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function Ae(){try{i.compressedTexImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Re(){try{i.compressedTexImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function we(){try{i.texSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function et(){try{i.texSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ke(){try{i.compressedTexSubImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function lt(){try{i.compressedTexSubImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Vt(){try{i.texStorage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ze(){try{i.texStorage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ve(){try{i.texImage2D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function xt(){try{i.texImage3D(...arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function _t(ne){ht.equals(ne)===!1&&(i.scissor(ne.x,ne.y,ne.z,ne.w),ht.copy(ne))}function rt(ne){me.equals(ne)===!1&&(i.viewport(ne.x,ne.y,ne.z,ne.w),me.copy(ne))}function se(ne,je){let Ee=u.get(je);Ee===void 0&&(Ee=new WeakMap,u.set(je,Ee));let Ue=Ee.get(ne);Ue===void 0&&(Ue=i.getUniformBlockIndex(je,ne.name),Ee.set(ne,Ue))}function Be(ne,je){const Ue=u.get(je).get(ne);l.get(je)!==Ue&&(i.uniformBlockBinding(je,Ue,ne.__bindingPointIndex),l.set(je,Ue))}function tt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},pe=null,Se={},d={},p=new WeakMap,m=[],_=null,x=!1,b=null,v=null,T=null,A=null,w=null,B=null,I=null,P=new $e(0,0,0),F=0,N=!1,U=null,H=null,re=null,J=null,ae=null,ht.set(0,0,i.canvas.width,i.canvas.height),me.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:Qe,disable:gt,bindFramebuffer:Gt,drawBuffers:dt,useProgram:yt,setBlending:te,setMaterial:ui,setFlipSided:Pe,setCullFace:Ie,setLineWidth:Me,setPolygonOffset:We,setScissorTest:ge,activeTexture:X,bindTexture:k,unbindTexture:ue,compressedTexImage2D:Ae,compressedTexImage3D:Re,texImage2D:Ve,texImage3D:xt,updateUBOMapping:se,uniformBlockBinding:Be,texStorage2D:Vt,texStorage3D:ze,texSubImage2D:we,texSubImage3D:et,compressedTexSubImage2D:Ke,compressedTexSubImage3D:lt,scissor:_t,viewport:rt,reset:tt}}function pne(i,e,t,n,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Te,f=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(X,k){return m?new OffscreenCanvas(X,k):Bv("canvas")}function x(X,k,ue){let Ae=1;const Re=ge(X);if((Re.width>ue||Re.height>ue)&&(Ae=ue/Math.max(Re.width,Re.height)),Ae<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const we=Math.floor(Ae*Re.width),et=Math.floor(Ae*Re.height);d===void 0&&(d=_(we,et));const Ke=k?_(we,et):d;return Ke.width=we,Ke.height=et,Ke.getContext("2d").drawImage(X,0,0,we,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+we+"x"+et+")."),Ke}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),X;return X}function b(X){return X.generateMipmaps}function v(X){i.generateMipmap(X)}function T(X){return X.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?i.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function A(X,k,ue,Ae,Re=!1){if(X!==null){if(i[X]!==void 0)return i[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let we=k;if(k===i.RED&&(ue===i.FLOAT&&(we=i.R32F),ue===i.HALF_FLOAT&&(we=i.R16F),ue===i.UNSIGNED_BYTE&&(we=i.R8)),k===i.RED_INTEGER&&(ue===i.UNSIGNED_BYTE&&(we=i.R8UI),ue===i.UNSIGNED_SHORT&&(we=i.R16UI),ue===i.UNSIGNED_INT&&(we=i.R32UI),ue===i.BYTE&&(we=i.R8I),ue===i.SHORT&&(we=i.R16I),ue===i.INT&&(we=i.R32I)),k===i.RG&&(ue===i.FLOAT&&(we=i.RG32F),ue===i.HALF_FLOAT&&(we=i.RG16F),ue===i.UNSIGNED_BYTE&&(we=i.RG8)),k===i.RG_INTEGER&&(ue===i.UNSIGNED_BYTE&&(we=i.RG8UI),ue===i.UNSIGNED_SHORT&&(we=i.RG16UI),ue===i.UNSIGNED_INT&&(we=i.RG32UI),ue===i.BYTE&&(we=i.RG8I),ue===i.SHORT&&(we=i.RG16I),ue===i.INT&&(we=i.RG32I)),k===i.RGB_INTEGER&&(ue===i.UNSIGNED_BYTE&&(we=i.RGB8UI),ue===i.UNSIGNED_SHORT&&(we=i.RGB16UI),ue===i.UNSIGNED_INT&&(we=i.RGB32UI),ue===i.BYTE&&(we=i.RGB8I),ue===i.SHORT&&(we=i.RGB16I),ue===i.INT&&(we=i.RGB32I)),k===i.RGBA_INTEGER&&(ue===i.UNSIGNED_BYTE&&(we=i.RGBA8UI),ue===i.UNSIGNED_SHORT&&(we=i.RGBA16UI),ue===i.UNSIGNED_INT&&(we=i.RGBA32UI),ue===i.BYTE&&(we=i.RGBA8I),ue===i.SHORT&&(we=i.RGBA16I),ue===i.INT&&(we=i.RGBA32I)),k===i.RGB&&ue===i.UNSIGNED_INT_5_9_9_9_REV&&(we=i.RGB9_E5),k===i.RGBA){const et=Re?wv:pi.getTransfer(Ae);ue===i.FLOAT&&(we=i.RGBA32F),ue===i.HALF_FLOAT&&(we=i.RGBA16F),ue===i.UNSIGNED_BYTE&&(we=et===Ui?i.SRGB8_ALPHA8:i.RGBA8),ue===i.UNSIGNED_SHORT_4_4_4_4&&(we=i.RGBA4),ue===i.UNSIGNED_SHORT_5_5_5_1&&(we=i.RGB5_A1)}return(we===i.R16F||we===i.R32F||we===i.RG16F||we===i.RG32F||we===i.RGBA16F||we===i.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function w(X,k){let ue;return X?k===null||k===Sl||k===td?ue=i.DEPTH24_STENCIL8:k===Rr?ue=i.DEPTH32F_STENCIL8:k===Jm&&(ue=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Sl||k===td?ue=i.DEPTH_COMPONENT24:k===Rr?ue=i.DEPTH_COMPONENT32F:k===Jm&&(ue=i.DEPTH_COMPONENT16),ue}function B(X,k){return b(X)===!0||X.isFramebufferTexture&&X.minFilter!==In&&X.minFilter!==on?Math.log2(Math.max(k.width,k.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?k.mipmaps.length:1}function I(X){const k=X.target;k.removeEventListener("dispose",I),F(k),k.isVideoTexture&&f.delete(k)}function P(X){const k=X.target;k.removeEventListener("dispose",P),U(k)}function F(X){const k=n.get(X);if(k.__webglInit===void 0)return;const ue=X.source,Ae=p.get(ue);if(Ae){const Re=Ae[k.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&N(X),Object.keys(Ae).length===0&&p.delete(ue)}n.remove(X)}function N(X){const k=n.get(X);i.deleteTexture(k.__webglTexture);const ue=X.source,Ae=p.get(ue);delete Ae[k.__cacheKey],a.memory.textures--}function U(X){const k=n.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),n.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(k.__webglFramebuffer[Ae]))for(let Re=0;Re<k.__webglFramebuffer[Ae].length;Re++)i.deleteFramebuffer(k.__webglFramebuffer[Ae][Re]);else i.deleteFramebuffer(k.__webglFramebuffer[Ae]);k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer[Ae])}else{if(Array.isArray(k.__webglFramebuffer))for(let Ae=0;Ae<k.__webglFramebuffer.length;Ae++)i.deleteFramebuffer(k.__webglFramebuffer[Ae]);else i.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&i.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Ae=0;Ae<k.__webglColorRenderbuffer.length;Ae++)k.__webglColorRenderbuffer[Ae]&&i.deleteRenderbuffer(k.__webglColorRenderbuffer[Ae]);k.__webglDepthRenderbuffer&&i.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const ue=X.textures;for(let Ae=0,Re=ue.length;Ae<Re;Ae++){const we=n.get(ue[Ae]);we.__webglTexture&&(i.deleteTexture(we.__webglTexture),a.memory.textures--),n.remove(ue[Ae])}n.remove(X)}let H=0;function re(){H=0}function J(){const X=H;return X>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+s.maxTextures),H+=1,X}function ae(X){const k=[];return k.push(X.wrapS),k.push(X.wrapT),k.push(X.wrapR||0),k.push(X.magFilter),k.push(X.minFilter),k.push(X.anisotropy),k.push(X.internalFormat),k.push(X.format),k.push(X.type),k.push(X.generateMipmaps),k.push(X.premultiplyAlpha),k.push(X.flipY),k.push(X.unpackAlignment),k.push(X.colorSpace),k.join()}function ce(X,k){const ue=n.get(X);if(X.isVideoTexture&&Me(X),X.isRenderTargetTexture===!1&&X.version>0&&ue.__version!==X.version){const Ae=X.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(ue,X,k);return}}t.bindTexture(i.TEXTURE_2D,ue.__webglTexture,i.TEXTURE0+k)}function j(X,k){const ue=n.get(X);if(X.version>0&&ue.__version!==X.version){me(ue,X,k);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ue.__webglTexture,i.TEXTURE0+k)}function Q(X,k){const ue=n.get(X);if(X.version>0&&ue.__version!==X.version){me(ue,X,k);return}t.bindTexture(i.TEXTURE_3D,ue.__webglTexture,i.TEXTURE0+k)}function $(X,k){const ue=n.get(X);if(X.version>0&&ue.__version!==X.version){Fe(ue,X,k);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ue.__webglTexture,i.TEXTURE0+k)}const pe={[sh]:i.REPEAT,[va]:i.CLAMP_TO_EDGE,[Km]:i.MIRRORED_REPEAT},Se={[In]:i.NEAREST,[xA]:i.NEAREST_MIPMAP_NEAREST,[Sf]:i.NEAREST_MIPMAP_LINEAR,[on]:i.LINEAR,[Cm]:i.LINEAR_MIPMAP_NEAREST,[no]:i.LINEAR_MIPMAP_LINEAR},Le={[RH]:i.NEVER,[UH]:i.ALWAYS,[BH]:i.LESS,[uB]:i.LEQUAL,[LH]:i.EQUAL,[PH]:i.GEQUAL,[IH]:i.GREATER,[OH]:i.NOTEQUAL};function qe(X,k){if(k.type===Rr&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===on||k.magFilter===Cm||k.magFilter===Sf||k.magFilter===no||k.minFilter===on||k.minFilter===Cm||k.minFilter===Sf||k.minFilter===no)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(X,i.TEXTURE_WRAP_S,pe[k.wrapS]),i.texParameteri(X,i.TEXTURE_WRAP_T,pe[k.wrapT]),(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)&&i.texParameteri(X,i.TEXTURE_WRAP_R,pe[k.wrapR]),i.texParameteri(X,i.TEXTURE_MAG_FILTER,Se[k.magFilter]),i.texParameteri(X,i.TEXTURE_MIN_FILTER,Se[k.minFilter]),k.compareFunction&&(i.texParameteri(X,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(X,i.TEXTURE_COMPARE_FUNC,Le[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===In||k.minFilter!==Sf&&k.minFilter!==no||k.type===Rr&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");i.texParameterf(X,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,s.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function ht(X,k){let ue=!1;X.__webglInit===void 0&&(X.__webglInit=!0,k.addEventListener("dispose",I));const Ae=k.source;let Re=p.get(Ae);Re===void 0&&(Re={},p.set(Ae,Re));const we=ae(k);if(we!==X.__cacheKey){Re[we]===void 0&&(Re[we]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,ue=!0),Re[we].usedTimes++;const et=Re[X.__cacheKey];et!==void 0&&(Re[X.__cacheKey].usedTimes--,et.usedTimes===0&&N(k)),X.__cacheKey=we,X.__webglTexture=Re[we].texture}return ue}function me(X,k,ue){let Ae=i.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ae=i.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Ae=i.TEXTURE_3D);const Re=ht(X,k),we=k.source;t.bindTexture(Ae,X.__webglTexture,i.TEXTURE0+ue);const et=n.get(we);if(we.version!==et.__version||Re===!0){t.activeTexture(i.TEXTURE0+ue);const Ke=pi.getPrimaries(pi.workingColorSpace),lt=k.colorSpace===Oo?null:pi.getPrimaries(k.colorSpace),Vt=k.colorSpace===Oo||Ke===lt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Vt);let ze=x(k.image,!1,s.maxTextureSize);ze=We(k,ze);const Ve=r.convert(k.format,k.colorSpace),xt=r.convert(k.type);let _t=A(k.internalFormat,Ve,xt,k.colorSpace,k.isVideoTexture);qe(Ae,k);let rt;const se=k.mipmaps,Be=k.isVideoTexture!==!0,tt=et.__version===void 0||Re===!0,ne=we.dataReady,je=B(k,ze);if(k.isDepthTexture)_t=w(k.format===id,k.type),tt&&(Be?t.texStorage2D(i.TEXTURE_2D,1,_t,ze.width,ze.height):t.texImage2D(i.TEXTURE_2D,0,_t,ze.width,ze.height,0,Ve,xt,null));else if(k.isDataTexture)if(se.length>0){Be&&tt&&t.texStorage2D(i.TEXTURE_2D,je,_t,se[0].width,se[0].height);for(let Ee=0,Ue=se.length;Ee<Ue;Ee++)rt=se[Ee],Be?ne&&t.texSubImage2D(i.TEXTURE_2D,Ee,0,0,rt.width,rt.height,Ve,xt,rt.data):t.texImage2D(i.TEXTURE_2D,Ee,_t,rt.width,rt.height,0,Ve,xt,rt.data);k.generateMipmaps=!1}else Be?(tt&&t.texStorage2D(i.TEXTURE_2D,je,_t,ze.width,ze.height),ne&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ze.width,ze.height,Ve,xt,ze.data)):t.texImage2D(i.TEXTURE_2D,0,_t,ze.width,ze.height,0,Ve,xt,ze.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Be&&tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,je,_t,se[0].width,se[0].height,ze.depth);for(let Ee=0,Ue=se.length;Ee<Ue;Ee++)if(rt=se[Ee],k.format!==er)if(Ve!==null)if(Be){if(ne)if(k.layerUpdates.size>0){const at=Vw(rt.width,rt.height,k.format,k.type);for(const st of k.layerUpdates){const Mt=rt.data.subarray(st*at/rt.data.BYTES_PER_ELEMENT,(st+1)*at/rt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ee,0,0,st,rt.width,rt.height,1,Ve,Mt)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ee,0,0,0,rt.width,rt.height,ze.depth,Ve,rt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ee,_t,rt.width,rt.height,ze.depth,0,rt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Be?ne&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Ee,0,0,0,rt.width,rt.height,ze.depth,Ve,xt,rt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Ee,_t,rt.width,rt.height,ze.depth,0,Ve,xt,rt.data)}else{Be&&tt&&t.texStorage2D(i.TEXTURE_2D,je,_t,se[0].width,se[0].height);for(let Ee=0,Ue=se.length;Ee<Ue;Ee++)rt=se[Ee],k.format!==er?Ve!==null?Be?ne&&t.compressedTexSubImage2D(i.TEXTURE_2D,Ee,0,0,rt.width,rt.height,Ve,rt.data):t.compressedTexImage2D(i.TEXTURE_2D,Ee,_t,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Be?ne&&t.texSubImage2D(i.TEXTURE_2D,Ee,0,0,rt.width,rt.height,Ve,xt,rt.data):t.texImage2D(i.TEXTURE_2D,Ee,_t,rt.width,rt.height,0,Ve,xt,rt.data)}else if(k.isDataArrayTexture)if(Be){if(tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,je,_t,ze.width,ze.height,ze.depth),ne)if(k.layerUpdates.size>0){const Ee=Vw(ze.width,ze.height,k.format,k.type);for(const Ue of k.layerUpdates){const at=ze.data.subarray(Ue*Ee/ze.data.BYTES_PER_ELEMENT,(Ue+1)*Ee/ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ue,ze.width,ze.height,1,Ve,xt,at)}k.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ze.width,ze.height,ze.depth,Ve,xt,ze.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,_t,ze.width,ze.height,ze.depth,0,Ve,xt,ze.data);else if(k.isData3DTexture)Be?(tt&&t.texStorage3D(i.TEXTURE_3D,je,_t,ze.width,ze.height,ze.depth),ne&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ze.width,ze.height,ze.depth,Ve,xt,ze.data)):t.texImage3D(i.TEXTURE_3D,0,_t,ze.width,ze.height,ze.depth,0,Ve,xt,ze.data);else if(k.isFramebufferTexture){if(tt)if(Be)t.texStorage2D(i.TEXTURE_2D,je,_t,ze.width,ze.height);else{let Ee=ze.width,Ue=ze.height;for(let at=0;at<je;at++)t.texImage2D(i.TEXTURE_2D,at,_t,Ee,Ue,0,Ve,xt,null),Ee>>=1,Ue>>=1}}else if(se.length>0){if(Be&&tt){const Ee=ge(se[0]);t.texStorage2D(i.TEXTURE_2D,je,_t,Ee.width,Ee.height)}for(let Ee=0,Ue=se.length;Ee<Ue;Ee++)rt=se[Ee],Be?ne&&t.texSubImage2D(i.TEXTURE_2D,Ee,0,0,Ve,xt,rt):t.texImage2D(i.TEXTURE_2D,Ee,_t,Ve,xt,rt);k.generateMipmaps=!1}else if(Be){if(tt){const Ee=ge(ze);t.texStorage2D(i.TEXTURE_2D,je,_t,Ee.width,Ee.height)}ne&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ve,xt,ze)}else t.texImage2D(i.TEXTURE_2D,0,_t,Ve,xt,ze);b(k)&&v(Ae),et.__version=we.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function Fe(X,k,ue){if(k.image.length!==6)return;const Ae=ht(X,k),Re=k.source;t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+ue);const we=n.get(Re);if(Re.version!==we.__version||Ae===!0){t.activeTexture(i.TEXTURE0+ue);const et=pi.getPrimaries(pi.workingColorSpace),Ke=k.colorSpace===Oo?null:pi.getPrimaries(k.colorSpace),lt=k.colorSpace===Oo||et===Ke?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const Vt=k.isCompressedTexture||k.image[0].isCompressedTexture,ze=k.image[0]&&k.image[0].isDataTexture,Ve=[];for(let Ue=0;Ue<6;Ue++)!Vt&&!ze?Ve[Ue]=x(k.image[Ue],!0,s.maxCubemapSize):Ve[Ue]=ze?k.image[Ue].image:k.image[Ue],Ve[Ue]=We(k,Ve[Ue]);const xt=Ve[0],_t=r.convert(k.format,k.colorSpace),rt=r.convert(k.type),se=A(k.internalFormat,_t,rt,k.colorSpace),Be=k.isVideoTexture!==!0,tt=we.__version===void 0||Ae===!0,ne=Re.dataReady;let je=B(k,xt);qe(i.TEXTURE_CUBE_MAP,k);let Ee;if(Vt){Be&&tt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,je,se,xt.width,xt.height);for(let Ue=0;Ue<6;Ue++){Ee=Ve[Ue].mipmaps;for(let at=0;at<Ee.length;at++){const st=Ee[at];k.format!==er?_t!==null?Be?ne&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at,0,0,st.width,st.height,_t,st.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at,se,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Be?ne&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at,0,0,st.width,st.height,_t,rt,st.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at,se,st.width,st.height,0,_t,rt,st.data)}}}else{if(Ee=k.mipmaps,Be&&tt){Ee.length>0&&je++;const Ue=ge(Ve[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,je,se,Ue.width,Ue.height)}for(let Ue=0;Ue<6;Ue++)if(ze){Be?ne&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,Ve[Ue].width,Ve[Ue].height,_t,rt,Ve[Ue].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,se,Ve[Ue].width,Ve[Ue].height,0,_t,rt,Ve[Ue].data);for(let at=0;at<Ee.length;at++){const Mt=Ee[at].image[Ue].image;Be?ne&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at+1,0,0,Mt.width,Mt.height,_t,rt,Mt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at+1,se,Mt.width,Mt.height,0,_t,rt,Mt.data)}}else{Be?ne&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,_t,rt,Ve[Ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,se,_t,rt,Ve[Ue]);for(let at=0;at<Ee.length;at++){const st=Ee[at];Be?ne&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at+1,0,0,_t,rt,st.image[Ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,at+1,se,_t,rt,st.image[Ue])}}}b(k)&&v(i.TEXTURE_CUBE_MAP),we.__version=Re.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function nt(X,k,ue,Ae,Re,we){const et=r.convert(ue.format,ue.colorSpace),Ke=r.convert(ue.type),lt=A(ue.internalFormat,et,Ke,ue.colorSpace),Vt=n.get(k),ze=n.get(ue);if(ze.__renderTarget=k,!Vt.__hasExternalTextures){const Ve=Math.max(1,k.width>>we),xt=Math.max(1,k.height>>we);Re===i.TEXTURE_3D||Re===i.TEXTURE_2D_ARRAY?t.texImage3D(Re,we,lt,Ve,xt,k.depth,0,et,Ke,null):t.texImage2D(Re,we,lt,Ve,xt,0,et,Ke,null)}t.bindFramebuffer(i.FRAMEBUFFER,X),Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ae,Re,ze.__webglTexture,0,Pe(k)):(Re===i.TEXTURE_2D||Re>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ae,Re,ze.__webglTexture,we),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Qe(X,k,ue){if(i.bindRenderbuffer(i.RENDERBUFFER,X),k.depthBuffer){const Ae=k.depthTexture,Re=Ae&&Ae.isDepthTexture?Ae.type:null,we=w(k.stencilBuffer,Re),et=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ke=Pe(k);Ie(k)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ke,we,k.width,k.height):ue?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ke,we,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,we,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,et,i.RENDERBUFFER,X)}else{const Ae=k.textures;for(let Re=0;Re<Ae.length;Re++){const we=Ae[Re],et=r.convert(we.format,we.colorSpace),Ke=r.convert(we.type),lt=A(we.internalFormat,et,Ke,we.colorSpace),Vt=Pe(k);ue&&Ie(k)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Vt,lt,k.width,k.height):Ie(k)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Vt,lt,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,lt,k.width,k.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function gt(X,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,X),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ae=n.get(k.depthTexture);Ae.__renderTarget=k,(!Ae.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),ce(k.depthTexture,0);const Re=Ae.__webglTexture,we=Pe(k);if(k.depthTexture.format===Qm)Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Re,0,we):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Re,0);else if(k.depthTexture.format===id)Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Re,0,we):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Gt(X){const k=n.get(X),ue=X.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==X.depthTexture){const Ae=X.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Ae){const Re=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Ae.removeEventListener("dispose",Re)};Ae.addEventListener("dispose",Re),k.__depthDisposeCallback=Re}k.__boundDepthTexture=Ae}if(X.depthTexture&&!k.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");gt(k.__webglFramebuffer,X)}else if(ue){k.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)if(t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[Ae]),k.__webglDepthbuffer[Ae]===void 0)k.__webglDepthbuffer[Ae]=i.createRenderbuffer(),Qe(k.__webglDepthbuffer[Ae],X,!1);else{const Re=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,we=k.__webglDepthbuffer[Ae];i.bindRenderbuffer(i.RENDERBUFFER,we),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,we)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=i.createRenderbuffer(),Qe(k.__webglDepthbuffer,X,!1);else{const Ae=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Re=k.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Re),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ae,i.RENDERBUFFER,Re)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function dt(X,k,ue){const Ae=n.get(X);k!==void 0&&nt(Ae.__webglFramebuffer,X,X.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ue!==void 0&&Gt(X)}function yt(X){const k=X.texture,ue=n.get(X),Ae=n.get(k);X.addEventListener("dispose",P);const Re=X.textures,we=X.isWebGLCubeRenderTarget===!0,et=Re.length>1;if(et||(Ae.__webglTexture===void 0&&(Ae.__webglTexture=i.createTexture()),Ae.__version=k.version,a.memory.textures++),we){ue.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(k.mipmaps&&k.mipmaps.length>0){ue.__webglFramebuffer[Ke]=[];for(let lt=0;lt<k.mipmaps.length;lt++)ue.__webglFramebuffer[Ke][lt]=i.createFramebuffer()}else ue.__webglFramebuffer[Ke]=i.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Ke=0;Ke<k.mipmaps.length;Ke++)ue.__webglFramebuffer[Ke]=i.createFramebuffer()}else ue.__webglFramebuffer=i.createFramebuffer();if(et)for(let Ke=0,lt=Re.length;Ke<lt;Ke++){const Vt=n.get(Re[Ke]);Vt.__webglTexture===void 0&&(Vt.__webglTexture=i.createTexture(),a.memory.textures++)}if(X.samples>0&&Ie(X)===!1){ue.__webglMultisampledFramebuffer=i.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ke=0;Ke<Re.length;Ke++){const lt=Re[Ke];ue.__webglColorRenderbuffer[Ke]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ue.__webglColorRenderbuffer[Ke]);const Vt=r.convert(lt.format,lt.colorSpace),ze=r.convert(lt.type),Ve=A(lt.internalFormat,Vt,ze,lt.colorSpace,X.isXRRenderTarget===!0),xt=Pe(X);i.renderbufferStorageMultisample(i.RENDERBUFFER,xt,Ve,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ke,i.RENDERBUFFER,ue.__webglColorRenderbuffer[Ke])}i.bindRenderbuffer(i.RENDERBUFFER,null),X.depthBuffer&&(ue.__webglDepthRenderbuffer=i.createRenderbuffer(),Qe(ue.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(we){t.bindTexture(i.TEXTURE_CUBE_MAP,Ae.__webglTexture),qe(i.TEXTURE_CUBE_MAP,k);for(let Ke=0;Ke<6;Ke++)if(k.mipmaps&&k.mipmaps.length>0)for(let lt=0;lt<k.mipmaps.length;lt++)nt(ue.__webglFramebuffer[Ke][lt],X,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,lt);else nt(ue.__webglFramebuffer[Ke],X,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);b(k)&&v(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let Ke=0,lt=Re.length;Ke<lt;Ke++){const Vt=Re[Ke],ze=n.get(Vt);t.bindTexture(i.TEXTURE_2D,ze.__webglTexture),qe(i.TEXTURE_2D,Vt),nt(ue.__webglFramebuffer,X,Vt,i.COLOR_ATTACHMENT0+Ke,i.TEXTURE_2D,0),b(Vt)&&v(i.TEXTURE_2D)}t.unbindTexture()}else{let Ke=i.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Ke=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Ke,Ae.__webglTexture),qe(Ke,k),k.mipmaps&&k.mipmaps.length>0)for(let lt=0;lt<k.mipmaps.length;lt++)nt(ue.__webglFramebuffer[lt],X,k,i.COLOR_ATTACHMENT0,Ke,lt);else nt(ue.__webglFramebuffer,X,k,i.COLOR_ATTACHMENT0,Ke,0);b(k)&&v(Ke),t.unbindTexture()}X.depthBuffer&&Gt(X)}function Ut(X){const k=X.textures;for(let ue=0,Ae=k.length;ue<Ae;ue++){const Re=k[ue];if(b(Re)){const we=T(X),et=n.get(Re).__webglTexture;t.bindTexture(we,et),v(we),t.unbindTexture()}}}const Ct=[],te=[];function ui(X){if(X.samples>0){if(Ie(X)===!1){const k=X.textures,ue=X.width,Ae=X.height;let Re=i.COLOR_BUFFER_BIT;const we=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=n.get(X),Ke=k.length>1;if(Ke)for(let lt=0;lt<k.length;lt++)t.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let lt=0;lt<k.length;lt++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Re|=i.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Re|=i.STENCIL_BUFFER_BIT)),Ke){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,et.__webglColorRenderbuffer[lt]);const Vt=n.get(k[lt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Vt,0)}i.blitFramebuffer(0,0,ue,Ae,0,0,ue,Ae,Re,i.NEAREST),l===!0&&(Ct.length=0,te.length=0,Ct.push(i.COLOR_ATTACHMENT0+lt),X.depthBuffer&&X.resolveDepthBuffer===!1&&(Ct.push(we),te.push(we),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,te)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ct))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ke)for(let lt=0;lt<k.length;lt++){t.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,et.__webglColorRenderbuffer[lt]);const Vt=n.get(k[lt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,Vt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const k=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[k])}}}function Pe(X){return Math.min(s.maxSamples,X.samples)}function Ie(X){const k=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Me(X){const k=a.render.frame;f.get(X)!==k&&(f.set(X,k),X.update())}function We(X,k){const ue=X.colorSpace,Ae=X.format,Re=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||ue!==Al&&ue!==Oo&&(pi.getTransfer(ue)===Ui?(Ae!==er||Re!==Cs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),k}function ge(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(u.width=X.naturalWidth||X.width,u.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(u.width=X.displayWidth,u.height=X.displayHeight):(u.width=X.width,u.height=X.height),u}this.allocateTextureUnit=J,this.resetTextureUnits=re,this.setTexture2D=ce,this.setTexture2DArray=j,this.setTexture3D=Q,this.setTextureCube=$,this.rebindTextures=dt,this.setupRenderTarget=yt,this.updateRenderTargetMipmap=Ut,this.updateMultisampleRenderTarget=ui,this.setupDepthRenderbuffer=Gt,this.setupFrameBufferTexture=nt,this.useMultisampledRTT=Ie}function N6(i,e){function t(n,s=Oo){let r;const a=pi.getTransfer(s);if(n===Cs)return i.UNSIGNED_BYTE;if(n===TA)return i.UNSIGNED_SHORT_4_4_4_4;if(n===SA)return i.UNSIGNED_SHORT_5_5_5_1;if(n===eB)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===ZR)return i.BYTE;if(n===$R)return i.SHORT;if(n===Jm)return i.UNSIGNED_SHORT;if(n===bA)return i.INT;if(n===Sl)return i.UNSIGNED_INT;if(n===Rr)return i.FLOAT;if(n===md)return i.HALF_FLOAT;if(n===tB)return i.ALPHA;if(n===iB)return i.RGB;if(n===er)return i.RGBA;if(n===nB)return i.LUMINANCE;if(n===sB)return i.LUMINANCE_ALPHA;if(n===Qm)return i.DEPTH_COMPONENT;if(n===id)return i.DEPTH_STENCIL;if(n===AA)return i.RED;if(n===__)return i.RED_INTEGER;if(n===rB)return i.RG;if(n===EA)return i.RG_INTEGER;if(n===CA)return i.RGBA_INTEGER;if(n===Vy||n===qy||n===jy||n===Xy)if(a===Ui)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Vy)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===qy)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===jy)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Xy)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Vy)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qy)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===jy)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xy)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===GS||n===VS||n===qS||n===jS)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===GS)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===VS)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===qS)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===jS)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===XS||n===WS||n===YS)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===XS||n===WS)return a===Ui?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===YS)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===KS||n===JS||n===QS||n===ZS||n===$S||n===e1||n===t1||n===i1||n===n1||n===s1||n===r1||n===a1||n===o1||n===l1)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===KS)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===JS)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===QS)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ZS)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===$S)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===e1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===t1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===i1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===n1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===s1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===r1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===a1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===o1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===l1)return a===Ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Wy||n===u1||n===c1)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Wy)return a===Ui?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===u1)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===c1)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===aB||n===h1||n===f1||n===d1)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Wy)return r.COMPRESSED_RED_RGTC1_EXT;if(n===h1)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===f1)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===d1)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===td?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const mne=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gne=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class yne{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Zi,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new bn({vertexShader:mne,fragmentShader:gne,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _n(new vd(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class vne extends Ra{constructor(e,t){super();const n=this;let s=null,r=1,a=null,o="local-floor",l=1,u=null,f=null,d=null,p=null,m=null,_=null;const x=new yne,b=t.getContextAttributes();let v=null,T=null;const A=[],w=[],B=new Te;let I=null;const P=new rn;P.viewport=new di;const F=new rn;F.viewport=new di;const N=[P,F],U=new C6;let H=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Fe=A[me];return Fe===void 0&&(Fe=new VT,A[me]=Fe),Fe.getTargetRaySpace()},this.getControllerGrip=function(me){let Fe=A[me];return Fe===void 0&&(Fe=new VT,A[me]=Fe),Fe.getGripSpace()},this.getHand=function(me){let Fe=A[me];return Fe===void 0&&(Fe=new VT,A[me]=Fe),Fe.getHandSpace()};function J(me){const Fe=w.indexOf(me.inputSource);if(Fe===-1)return;const nt=A[Fe];nt!==void 0&&(nt.update(me.inputSource,me.frame,u||a),nt.dispatchEvent({type:me.type,data:me.inputSource}))}function ae(){s.removeEventListener("select",J),s.removeEventListener("selectstart",J),s.removeEventListener("selectend",J),s.removeEventListener("squeeze",J),s.removeEventListener("squeezestart",J),s.removeEventListener("squeezeend",J),s.removeEventListener("end",ae),s.removeEventListener("inputsourceschange",ce);for(let me=0;me<A.length;me++){const Fe=w[me];Fe!==null&&(w[me]=null,A[me].disconnect(Fe))}H=null,re=null,x.reset(),e.setRenderTarget(v),m=null,p=null,d=null,s=null,T=null,ht.stop(),n.isPresenting=!1,e.setPixelRatio(I),e.setSize(B.width,B.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){r=me,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){o=me,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(me){u=me},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return _},this.getSession=function(){return s},this.setSession=async function(me){if(s=me,s!==null){if(v=e.getRenderTarget(),s.addEventListener("select",J),s.addEventListener("selectstart",J),s.addEventListener("selectend",J),s.addEventListener("squeeze",J),s.addEventListener("squeezestart",J),s.addEventListener("squeezeend",J),s.addEventListener("end",ae),s.addEventListener("inputsourceschange",ce),b.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(B),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let nt=null,Qe=null,gt=null;b.depth&&(gt=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,nt=b.stencil?id:Qm,Qe=b.stencil?td:Sl);const Gt={colorFormat:t.RGBA8,depthFormat:gt,scaleFactor:r};d=new XRWebGLBinding(s,t),p=d.createProjectionLayer(Gt),s.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new On(p.textureWidth,p.textureHeight,{format:er,type:Cs,depthTexture:new PA(p.textureWidth,p.textureHeight,Qe,void 0,void 0,void 0,void 0,void 0,void 0,nt),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const nt={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:r};m=new XRWebGLLayer(s,t,nt),s.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),T=new On(m.framebufferWidth,m.framebufferHeight,{format:er,type:Cs,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await s.requestReferenceSpace(o),ht.setContext(s),ht.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function ce(me){for(let Fe=0;Fe<me.removed.length;Fe++){const nt=me.removed[Fe],Qe=w.indexOf(nt);Qe>=0&&(w[Qe]=null,A[Qe].disconnect(nt))}for(let Fe=0;Fe<me.added.length;Fe++){const nt=me.added[Fe];let Qe=w.indexOf(nt);if(Qe===-1){for(let Gt=0;Gt<A.length;Gt++)if(Gt>=w.length){w.push(nt),Qe=Gt;break}else if(w[Gt]===null){w[Gt]=nt,Qe=Gt;break}if(Qe===-1)break}const gt=A[Qe];gt&&gt.connect(nt)}}const j=new W,Q=new W;function $(me,Fe,nt){j.setFromMatrixPosition(Fe.matrixWorld),Q.setFromMatrixPosition(nt.matrixWorld);const Qe=j.distanceTo(Q),gt=Fe.projectionMatrix.elements,Gt=nt.projectionMatrix.elements,dt=gt[14]/(gt[10]-1),yt=gt[14]/(gt[10]+1),Ut=(gt[9]+1)/gt[5],Ct=(gt[9]-1)/gt[5],te=(gt[8]-1)/gt[0],ui=(Gt[8]+1)/Gt[0],Pe=dt*te,Ie=dt*ui,Me=Qe/(-te+ui),We=Me*-te;if(Fe.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(We),me.translateZ(Me),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert(),gt[10]===-1)me.projectionMatrix.copy(Fe.projectionMatrix),me.projectionMatrixInverse.copy(Fe.projectionMatrixInverse);else{const ge=dt+Me,X=yt+Me,k=Pe-We,ue=Ie+(Qe-We),Ae=Ut*yt/X*ge,Re=Ct*yt/X*ge;me.projectionMatrix.makePerspective(k,ue,Ae,Re,ge,X),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}}function pe(me,Fe){Fe===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Fe.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(s===null)return;let Fe=me.near,nt=me.far;x.texture!==null&&(x.depthNear>0&&(Fe=x.depthNear),x.depthFar>0&&(nt=x.depthFar)),U.near=F.near=P.near=Fe,U.far=F.far=P.far=nt,(H!==U.near||re!==U.far)&&(s.updateRenderState({depthNear:U.near,depthFar:U.far}),H=U.near,re=U.far),P.layers.mask=me.layers.mask|2,F.layers.mask=me.layers.mask|4,U.layers.mask=P.layers.mask|F.layers.mask;const Qe=me.parent,gt=U.cameras;pe(U,Qe);for(let Gt=0;Gt<gt.length;Gt++)pe(gt[Gt],Qe);gt.length===2?$(U,P,F):U.projectionMatrix.copy(P.projectionMatrix),Se(me,U,Qe)};function Se(me,Fe,nt){nt===null?me.matrix.copy(Fe.matrixWorld):(me.matrix.copy(nt.matrixWorld),me.matrix.invert(),me.matrix.multiply(Fe.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Fe.projectionMatrix),me.projectionMatrixInverse.copy(Fe.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=eg*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(me){l=me,p!==null&&(p.fixedFoveation=me),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=me)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(U)};let Le=null;function qe(me,Fe){if(f=Fe.getViewerPose(u||a),_=Fe,f!==null){const nt=f.views;m!==null&&(e.setRenderTargetFramebuffer(T,m.framebuffer),e.setRenderTarget(T));let Qe=!1;nt.length!==U.cameras.length&&(U.cameras.length=0,Qe=!0);for(let dt=0;dt<nt.length;dt++){const yt=nt[dt];let Ut=null;if(m!==null)Ut=m.getViewport(yt);else{const te=d.getViewSubImage(p,yt);Ut=te.viewport,dt===0&&(e.setRenderTargetTextures(T,te.colorTexture,te.depthStencilTexture),e.setRenderTarget(T))}let Ct=N[dt];Ct===void 0&&(Ct=new rn,Ct.layers.enable(dt),Ct.viewport=new di,N[dt]=Ct),Ct.matrix.fromArray(yt.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale),Ct.projectionMatrix.fromArray(yt.projectionMatrix),Ct.projectionMatrixInverse.copy(Ct.projectionMatrix).invert(),Ct.viewport.set(Ut.x,Ut.y,Ut.width,Ut.height),dt===0&&(U.matrix.copy(Ct.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),Qe===!0&&U.cameras.push(Ct)}const gt=s.enabledFeatures;if(gt&&gt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&d){const dt=d.getDepthInformation(nt[0]);dt&&dt.isValid&&dt.texture&&x.init(e,dt,s.renderState)}}for(let nt=0;nt<A.length;nt++){const Qe=w[nt],gt=A[nt];Qe!==null&&gt!==void 0&&gt.update(Qe,Fe,u||a)}Le&&Le(me,Fe),Fe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Fe}),_=null}const ht=new L6;ht.setAnimationLoop(qe),this.setAnimationLoop=function(me){Le=me},this.dispose=function(){}}}const of=new Ca,_ne=new vt;function xne(i,e){function t(b,v){b.matrixAutoUpdate===!0&&b.updateMatrix(),v.value.copy(b.matrix)}function n(b,v){v.color.getRGB(b.fogColor.value,zH(i)),v.isFog?(b.fogNear.value=v.near,b.fogFar.value=v.far):v.isFogExp2&&(b.fogDensity.value=v.density)}function s(b,v,T,A,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(b,v):v.isMeshToonMaterial?(r(b,v),d(b,v)):v.isMeshPhongMaterial?(r(b,v),f(b,v)):v.isMeshStandardMaterial?(r(b,v),p(b,v),v.isMeshPhysicalMaterial&&m(b,v,w)):v.isMeshMatcapMaterial?(r(b,v),_(b,v)):v.isMeshDepthMaterial?r(b,v):v.isMeshDistanceMaterial?(r(b,v),x(b,v)):v.isMeshNormalMaterial?r(b,v):v.isLineBasicMaterial?(a(b,v),v.isLineDashedMaterial&&o(b,v)):v.isPointsMaterial?l(b,v,T,A):v.isSpriteMaterial?u(b,v):v.isShadowMaterial?(b.color.value.copy(v.color),b.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(b,v){b.opacity.value=v.opacity,v.color&&b.diffuse.value.copy(v.color),v.emissive&&b.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(b.map.value=v.map,t(v.map,b.mapTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,t(v.alphaMap,b.alphaMapTransform)),v.bumpMap&&(b.bumpMap.value=v.bumpMap,t(v.bumpMap,b.bumpMapTransform),b.bumpScale.value=v.bumpScale,v.side===rs&&(b.bumpScale.value*=-1)),v.normalMap&&(b.normalMap.value=v.normalMap,t(v.normalMap,b.normalMapTransform),b.normalScale.value.copy(v.normalScale),v.side===rs&&b.normalScale.value.negate()),v.displacementMap&&(b.displacementMap.value=v.displacementMap,t(v.displacementMap,b.displacementMapTransform),b.displacementScale.value=v.displacementScale,b.displacementBias.value=v.displacementBias),v.emissiveMap&&(b.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,b.emissiveMapTransform)),v.specularMap&&(b.specularMap.value=v.specularMap,t(v.specularMap,b.specularMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest);const T=e.get(v),A=T.envMap,w=T.envMapRotation;A&&(b.envMap.value=A,of.copy(w),of.x*=-1,of.y*=-1,of.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(of.y*=-1,of.z*=-1),b.envMapRotation.value.setFromMatrix4(_ne.makeRotationFromEuler(of)),b.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=v.reflectivity,b.ior.value=v.ior,b.refractionRatio.value=v.refractionRatio),v.lightMap&&(b.lightMap.value=v.lightMap,b.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,b.lightMapTransform)),v.aoMap&&(b.aoMap.value=v.aoMap,b.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,b.aoMapTransform))}function a(b,v){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,v.map&&(b.map.value=v.map,t(v.map,b.mapTransform))}function o(b,v){b.dashSize.value=v.dashSize,b.totalSize.value=v.dashSize+v.gapSize,b.scale.value=v.scale}function l(b,v,T,A){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,b.size.value=v.size*T,b.scale.value=A*.5,v.map&&(b.map.value=v.map,t(v.map,b.uvTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,t(v.alphaMap,b.alphaMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest)}function u(b,v){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,b.rotation.value=v.rotation,v.map&&(b.map.value=v.map,t(v.map,b.mapTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,t(v.alphaMap,b.alphaMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest)}function f(b,v){b.specular.value.copy(v.specular),b.shininess.value=Math.max(v.shininess,1e-4)}function d(b,v){v.gradientMap&&(b.gradientMap.value=v.gradientMap)}function p(b,v){b.metalness.value=v.metalness,v.metalnessMap&&(b.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,b.metalnessMapTransform)),b.roughness.value=v.roughness,v.roughnessMap&&(b.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,b.roughnessMapTransform)),v.envMap&&(b.envMapIntensity.value=v.envMapIntensity)}function m(b,v,T){b.ior.value=v.ior,v.sheen>0&&(b.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),b.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(b.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,b.sheenColorMapTransform)),v.sheenRoughnessMap&&(b.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,b.sheenRoughnessMapTransform))),v.clearcoat>0&&(b.clearcoat.value=v.clearcoat,b.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(b.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,b.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(b.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===rs&&b.clearcoatNormalScale.value.negate())),v.dispersion>0&&(b.dispersion.value=v.dispersion),v.iridescence>0&&(b.iridescence.value=v.iridescence,b.iridescenceIOR.value=v.iridescenceIOR,b.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(b.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,b.iridescenceMapTransform)),v.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),v.transmission>0&&(b.transmission.value=v.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),v.transmissionMap&&(b.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,b.transmissionMapTransform)),b.thickness.value=v.thickness,v.thicknessMap&&(b.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=v.attenuationDistance,b.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(b.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(b.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=v.specularIntensity,b.specularColor.value.copy(v.specularColor),v.specularColorMap&&(b.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,b.specularColorMapTransform)),v.specularIntensityMap&&(b.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,b.specularIntensityMapTransform))}function _(b,v){v.matcap&&(b.matcap.value=v.matcap)}function x(b,v){const T=e.get(v).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function bne(i,e,t,n){let s={},r={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,A){const w=A.program;n.uniformBlockBinding(T,w)}function u(T,A){let w=s[T.id];w===void 0&&(_(T),w=f(T),s[T.id]=w,T.addEventListener("dispose",b));const B=A.program;n.updateUBOMapping(T,B);const I=e.render.frame;r[T.id]!==I&&(p(T),r[T.id]=I)}function f(T){const A=d();T.__bindingPointIndex=A;const w=i.createBuffer(),B=T.__size,I=T.usage;return i.bindBuffer(i.UNIFORM_BUFFER,w),i.bufferData(i.UNIFORM_BUFFER,B,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,A,w),w}function d(){for(let T=0;T<o;T++)if(a.indexOf(T)===-1)return a.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(T){const A=s[T.id],w=T.uniforms,B=T.__cache;i.bindBuffer(i.UNIFORM_BUFFER,A);for(let I=0,P=w.length;I<P;I++){const F=Array.isArray(w[I])?w[I]:[w[I]];for(let N=0,U=F.length;N<U;N++){const H=F[N];if(m(H,I,N,B)===!0){const re=H.__offset,J=Array.isArray(H.value)?H.value:[H.value];let ae=0;for(let ce=0;ce<J.length;ce++){const j=J[ce],Q=x(j);typeof j=="number"||typeof j=="boolean"?(H.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,re+ae,H.__data)):j.isMatrix3?(H.__data[0]=j.elements[0],H.__data[1]=j.elements[1],H.__data[2]=j.elements[2],H.__data[3]=0,H.__data[4]=j.elements[3],H.__data[5]=j.elements[4],H.__data[6]=j.elements[5],H.__data[7]=0,H.__data[8]=j.elements[6],H.__data[9]=j.elements[7],H.__data[10]=j.elements[8],H.__data[11]=0):(j.toArray(H.__data,ae),ae+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,re,H.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function m(T,A,w,B){const I=T.value,P=A+"_"+w;if(B[P]===void 0)return typeof I=="number"||typeof I=="boolean"?B[P]=I:B[P]=I.clone(),!0;{const F=B[P];if(typeof I=="number"||typeof I=="boolean"){if(F!==I)return B[P]=I,!0}else if(F.equals(I)===!1)return F.copy(I),!0}return!1}function _(T){const A=T.uniforms;let w=0;const B=16;for(let P=0,F=A.length;P<F;P++){const N=Array.isArray(A[P])?A[P]:[A[P]];for(let U=0,H=N.length;U<H;U++){const re=N[U],J=Array.isArray(re.value)?re.value:[re.value];for(let ae=0,ce=J.length;ae<ce;ae++){const j=J[ae],Q=x(j),$=w%B,pe=$%Q.boundary,Se=$+pe;w+=pe,Se!==0&&B-Se<Q.storage&&(w+=B-Se),re.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=w,w+=Q.storage}}}const I=w%B;return I>0&&(w+=B-I),T.__size=w,T.__cache={},this}function x(T){const A={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(A.boundary=4,A.storage=4):T.isVector2?(A.boundary=8,A.storage=8):T.isVector3||T.isColor?(A.boundary=16,A.storage=12):T.isVector4?(A.boundary=16,A.storage=16):T.isMatrix3?(A.boundary=48,A.storage=48):T.isMatrix4?(A.boundary=64,A.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),A}function b(T){const A=T.target;A.removeEventListener("dispose",b);const w=a.indexOf(A.__bindingPointIndex);a.splice(w,1),i.deleteBuffer(s[A.id]),delete s[A.id],delete r[A.id]}function v(){for(const T in s)i.deleteBuffer(s[T]);a=[],s={},r={}}return{bind:l,update:u,dispose:v}}class F6{constructor(e={}){const{canvas:t=FH(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=n.getContextAttributes().alpha}else m=a;const _=new Uint32Array(4),x=new Int32Array(4);let b=null,v=null;const T=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=No,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const w=this;let B=!1;this._outputColorSpace=Ci;let I=0,P=0,F=null,N=-1,U=null;const H=new di,re=new di;let J=null;const ae=new $e(0);let ce=0,j=t.width,Q=t.height,$=1,pe=null,Se=null;const Le=new di(0,0,j,Q),qe=new di(0,0,j,Q);let ht=!1;const me=new E_;let Fe=!1,nt=!1;const Qe=new vt,gt=new vt,Gt=new W,dt=new di,yt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ut=!1;function Ct(){return F===null?$:1}let te=n;function ui(z,oe){return t.getContext(z,oe)}try{const z={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${fh}`),t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",at,!1),t.addEventListener("webglcontextcreationerror",st,!1),te===null){const oe="webgl2";if(te=ui(oe,z),te===null)throw ui(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let Pe,Ie,Me,We,ge,X,k,ue,Ae,Re,we,et,Ke,lt,Vt,ze,Ve,xt,_t,rt,se,Be,tt,ne;function je(){Pe=new Ite(te),Pe.init(),Be=new N6(te,Pe),Ie=new Cte(te,Pe,e,Be),Me=new dne(te,Pe),Ie.reverseDepthBuffer&&p&&Me.buffers.depth.setReversed(!0),We=new Ute(te),ge=new ene,X=new pne(te,Pe,Me,ge,Ie,Be,We),k=new wte(w),ue=new Lte(w),Ae=new GZ(te),tt=new Ate(te,Ae),Re=new Ote(te,Ae,We,tt),we=new Fte(te,Re,Ae,We),_t=new Nte(te,Ie,X),ze=new Mte(ge),et=new $ie(w,k,ue,Pe,Ie,tt,ze),Ke=new xne(w,ge),lt=new ine,Vt=new lne(Pe),xt=new Ste(w,k,ue,Me,we,m,l),Ve=new hne(w,we,Ie),ne=new bne(te,We,Ie,Me),rt=new Ete(te,Pe,We),se=new Pte(te,Pe,We),We.programs=et.programs,w.capabilities=Ie,w.extensions=Pe,w.properties=ge,w.renderLists=lt,w.shadowMap=Ve,w.state=Me,w.info=We}je();const Ee=new vne(w,te);this.xr=Ee,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const z=Pe.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Pe.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(z){z!==void 0&&($=z,this.setSize(j,Q,!1))},this.getSize=function(z){return z.set(j,Q)},this.setSize=function(z,oe,xe=!0){if(Ee.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=z,Q=oe,t.width=Math.floor(z*$),t.height=Math.floor(oe*$),xe===!0&&(t.style.width=z+"px",t.style.height=oe+"px"),this.setViewport(0,0,z,oe)},this.getDrawingBufferSize=function(z){return z.set(j*$,Q*$).floor()},this.setDrawingBufferSize=function(z,oe,xe){j=z,Q=oe,$=xe,t.width=Math.floor(z*xe),t.height=Math.floor(oe*xe),this.setViewport(0,0,z,oe)},this.getCurrentViewport=function(z){return z.copy(H)},this.getViewport=function(z){return z.copy(Le)},this.setViewport=function(z,oe,xe,be){z.isVector4?Le.set(z.x,z.y,z.z,z.w):Le.set(z,oe,xe,be),Me.viewport(H.copy(Le).multiplyScalar($).round())},this.getScissor=function(z){return z.copy(qe)},this.setScissor=function(z,oe,xe,be){z.isVector4?qe.set(z.x,z.y,z.z,z.w):qe.set(z,oe,xe,be),Me.scissor(re.copy(qe).multiplyScalar($).round())},this.getScissorTest=function(){return ht},this.setScissorTest=function(z){Me.setScissorTest(ht=z)},this.setOpaqueSort=function(z){pe=z},this.setTransparentSort=function(z){Se=z},this.getClearColor=function(z){return z.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor(...arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha(...arguments)},this.clear=function(z=!0,oe=!0,xe=!0){let be=0;if(z){let he=!1;if(F!==null){const He=F.texture.format;he=He===CA||He===EA||He===__}if(he){const He=F.texture.type,it=He===Cs||He===Sl||He===Jm||He===td||He===TA||He===SA,ut=xt.getClearColor(),pt=xt.getClearAlpha(),It=ut.r,Lt=ut.g,Tt=ut.b;it?(_[0]=It,_[1]=Lt,_[2]=Tt,_[3]=pt,te.clearBufferuiv(te.COLOR,0,_)):(x[0]=It,x[1]=Lt,x[2]=Tt,x[3]=pt,te.clearBufferiv(te.COLOR,0,x))}else be|=te.COLOR_BUFFER_BIT}oe&&(be|=te.DEPTH_BUFFER_BIT),xe&&(be|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",at,!1),t.removeEventListener("webglcontextcreationerror",st,!1),xt.dispose(),lt.dispose(),Vt.dispose(),ge.dispose(),k.dispose(),ue.dispose(),we.dispose(),tt.dispose(),ne.dispose(),et.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",Th),Ee.removeEventListener("sessionend",Rl),hr.stop()};function Ue(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function at(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const z=We.autoReset,oe=Ve.enabled,xe=Ve.autoUpdate,be=Ve.needsUpdate,he=Ve.type;je(),We.autoReset=z,Ve.enabled=oe,Ve.autoUpdate=xe,Ve.needsUpdate=be,Ve.type=he}function st(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function Mt(z){const oe=z.target;oe.removeEventListener("dispose",Mt),Zt(oe)}function Zt(z){Di(z),ge.remove(z)}function Di(z){const oe=ge.get(z).programs;oe!==void 0&&(oe.forEach(function(xe){et.releaseProgram(xe)}),z.isShaderMaterial&&et.releaseShaderCache(z))}this.renderBufferDirect=function(z,oe,xe,be,he,He){oe===null&&(oe=yt);const it=he.isMesh&&he.matrixWorld.determinant()<0,ut=Sd(z,oe,xe,be,he);Me.setMaterial(be,it);let pt=xe.index,It=1;if(be.wireframe===!0){if(pt=Re.getWireframeAttribute(xe),pt===void 0)return;It=2}const Lt=xe.drawRange,Tt=xe.attributes.position;let Kt=Lt.start*It,hi=(Lt.start+Lt.count)*It;He!==null&&(Kt=Math.max(Kt,He.start*It),hi=Math.min(hi,(He.start+He.count)*It)),pt!==null?(Kt=Math.max(Kt,0),hi=Math.min(hi,pt.count)):Tt!=null&&(Kt=Math.max(Kt,0),hi=Math.min(hi,Tt.count));const Li=hi-Kt;if(Li<0||Li===1/0)return;tt.setup(he,be,ut,xe,pt);let bi,Jt=rt;if(pt!==null&&(bi=Ae.get(pt),Jt=se,Jt.setIndex(bi)),he.isMesh)be.wireframe===!0?(Me.setLineWidth(be.wireframeLinewidth*Ct()),Jt.setMode(te.LINES)):Jt.setMode(te.TRIANGLES);else if(he.isLine){let At=be.linewidth;At===void 0&&(At=1),Me.setLineWidth(At*Ct()),he.isLineSegments?Jt.setMode(te.LINES):he.isLineLoop?Jt.setMode(te.LINE_LOOP):Jt.setMode(te.LINE_STRIP)}else he.isPoints?Jt.setMode(te.POINTS):he.isSprite&&Jt.setMode(te.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)GT("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Jt.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Jt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const At=he._multiDrawStarts,An=he._multiDrawCounts,fi=he._multiDrawCount,ks=pt?Ae.get(pt).bytesPerElement:1,La=ge.get(be).currentProgram.getUniforms();for(let en=0;en<fi;en++)La.setValue(te,"_gl_DrawID",en),Jt.render(At[en]/ks,An[en])}else if(he.isInstancedMesh)Jt.renderInstances(Kt,Li,he.count);else if(xe.isInstancedBufferGeometry){const At=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,An=Math.min(xe.instanceCount,At);Jt.renderInstances(Kt,Li,An)}else Jt.render(Kt,Li)};function Xt(z,oe,xe){z.transparent===!0&&z.side===Qs&&z.forceSinglePass===!1?(z.side=rs,z.needsUpdate=!0,ci(z,oe,xe),z.side=Ho,z.needsUpdate=!0,ci(z,oe,xe),z.side=Qs):ci(z,oe,xe)}this.compile=function(z,oe,xe=null){xe===null&&(xe=z),v=Vt.get(xe),v.init(oe),A.push(v),xe.traverseVisible(function(he){he.isLight&&he.layers.test(oe.layers)&&(v.pushLight(he),he.castShadow&&v.pushShadow(he))}),z!==xe&&z.traverseVisible(function(he){he.isLight&&he.layers.test(oe.layers)&&(v.pushLight(he),he.castShadow&&v.pushShadow(he))}),v.setupLights();const be=new Set;return z.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const He=he.material;if(He)if(Array.isArray(He))for(let it=0;it<He.length;it++){const ut=He[it];Xt(ut,xe,he),be.add(ut)}else Xt(He,xe,he),be.add(He)}),v=A.pop(),be},this.compileAsync=function(z,oe,xe=null){const be=this.compile(z,oe,xe);return new Promise(he=>{function He(){if(be.forEach(function(it){ge.get(it).currentProgram.isReady()&&be.delete(it)}),be.size===0){he(z);return}setTimeout(He,10)}Pe.get("KHR_parallel_shader_compile")!==null?He():setTimeout(He,10)})};let Sn=null;function Jn(z){Sn&&Sn(z)}function Th(){hr.stop()}function Rl(){hr.start()}const hr=new L6;hr.setAnimationLoop(Jn),typeof self<"u"&&hr.setContext(self),this.setAnimationLoop=function(z){Sn=z,Ee.setAnimationLoop(z),z===null?hr.stop():hr.start()},Ee.addEventListener("sessionstart",Th),Ee.addEventListener("sessionend",Rl),this.render=function(z,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Ee.enabled===!0&&Ee.isPresenting===!0&&(Ee.cameraAutoUpdate===!0&&Ee.updateCamera(oe),oe=Ee.getCamera()),z.isScene===!0&&z.onBeforeRender(w,z,oe,F),v=Vt.get(z,A.length),v.init(oe),A.push(v),gt.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),me.setFromProjectionMatrix(gt),nt=this.localClippingEnabled,Fe=ze.init(this.clippingPlanes,nt),b=lt.get(z,T.length),b.init(),T.push(b),Ee.enabled===!0&&Ee.isPresenting===!0){const He=w.xr.getDepthSensingMesh();He!==null&&ws(He,oe,-1/0,w.sortObjects)}ws(z,oe,0,w.sortObjects),b.finish(),w.sortObjects===!0&&b.sort(pe,Se),Ut=Ee.enabled===!1||Ee.isPresenting===!1||Ee.hasDepthSensing()===!1,Ut&&xt.addToRenderList(b,z),this.info.render.frame++,Fe===!0&&ze.beginShadows();const xe=v.state.shadowsArray;Ve.render(xe,z,oe),Fe===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const be=b.opaque,he=b.transmissive;if(v.setupLights(),oe.isArrayCamera){const He=oe.cameras;if(he.length>0)for(let it=0,ut=He.length;it<ut;it++){const pt=He[it];ea(be,he,z,pt)}Ut&&xt.render(z);for(let it=0,ut=He.length;it<ut;it++){const pt=He[it];Gn(b,z,pt,pt.viewport)}}else he.length>0&&ea(be,he,z,oe),Ut&&xt.render(z),Gn(b,z,oe);F!==null&&P===0&&(X.updateMultisampleRenderTarget(F),X.updateRenderTargetMipmap(F)),z.isScene===!0&&z.onAfterRender(w,z,oe),tt.resetDefaultState(),N=-1,U=null,A.pop(),A.length>0?(v=A[A.length-1],Fe===!0&&ze.setGlobalState(w.clippingPlanes,v.state.camera)):v=null,T.pop(),T.length>0?b=T[T.length-1]:b=null};function ws(z,oe,xe,be){if(z.visible===!1)return;if(z.layers.test(oe.layers)){if(z.isGroup)xe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(oe);else if(z.isLight)v.pushLight(z),z.castShadow&&v.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||me.intersectsSprite(z)){be&&dt.setFromMatrixPosition(z.matrixWorld).applyMatrix4(gt);const it=we.update(z),ut=z.material;ut.visible&&b.push(z,it,ut,xe,dt.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||me.intersectsObject(z))){const it=we.update(z),ut=z.material;if(be&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),dt.copy(z.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),dt.copy(it.boundingSphere.center)),dt.applyMatrix4(z.matrixWorld).applyMatrix4(gt)),Array.isArray(ut)){const pt=it.groups;for(let It=0,Lt=pt.length;It<Lt;It++){const Tt=pt[It],Kt=ut[Tt.materialIndex];Kt&&Kt.visible&&b.push(z,it,Kt,xe,dt.z,Tt)}}else ut.visible&&b.push(z,it,ut,xe,dt.z,null)}}const He=z.children;for(let it=0,ut=He.length;it<ut;it++)ws(He[it],oe,xe,be)}function Gn(z,oe,xe,be){const he=z.opaque,He=z.transmissive,it=z.transparent;v.setupLightsView(xe),Fe===!0&&ze.setGlobalState(w.clippingPlanes,xe),be&&Me.viewport(H.copy(be)),he.length>0&&Fs(he,oe,xe),He.length>0&&Fs(He,oe,xe),it.length>0&&Fs(it,oe,xe),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function ea(z,oe,xe,be){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[be.id]===void 0&&(v.state.transmissionRenderTarget[be.id]=new On(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?md:Cs,minFilter:no,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pi.workingColorSpace}));const He=v.state.transmissionRenderTarget[be.id],it=be.viewport||H;He.setSize(it.z*w.transmissionResolutionScale,it.w*w.transmissionResolutionScale);const ut=w.getRenderTarget();w.setRenderTarget(He),w.getClearColor(ae),ce=w.getClearAlpha(),ce<1&&w.setClearColor(16777215,.5),w.clear(),Ut&&xt.render(xe);const pt=w.toneMapping;w.toneMapping=No;const It=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),v.setupLightsView(be),Fe===!0&&ze.setGlobalState(w.clippingPlanes,be),Fs(z,xe,be),X.updateMultisampleRenderTarget(He),X.updateRenderTargetMipmap(He),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let Tt=0,Kt=oe.length;Tt<Kt;Tt++){const hi=oe[Tt],Li=hi.object,bi=hi.geometry,Jt=hi.material,At=hi.group;if(Jt.side===Qs&&Li.layers.test(be.layers)){const An=Jt.side;Jt.side=rs,Jt.needsUpdate=!0,Ba(Li,xe,be,bi,Jt,At),Jt.side=An,Jt.needsUpdate=!0,Lt=!0}}Lt===!0&&(X.updateMultisampleRenderTarget(He),X.updateRenderTargetMipmap(He))}w.setRenderTarget(ut),w.setClearColor(ae,ce),It!==void 0&&(be.viewport=It),w.toneMapping=pt}function Fs(z,oe,xe){const be=oe.isScene===!0?oe.overrideMaterial:null;for(let he=0,He=z.length;he<He;he++){const it=z[he],ut=it.object,pt=it.geometry,It=it.group;let Lt=it.material;Lt.allowOverride===!0&&be!==null&&(Lt=be),ut.layers.test(xe.layers)&&Ba(ut,oe,xe,pt,Lt,It)}}function Ba(z,oe,xe,be,he,He){z.onBeforeRender(w,oe,xe,be,he,He),z.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),he.onBeforeRender(w,oe,xe,be,z,He),he.transparent===!0&&he.side===Qs&&he.forceSinglePass===!1?(he.side=rs,he.needsUpdate=!0,w.renderBufferDirect(xe,oe,be,he,z,He),he.side=Ho,he.needsUpdate=!0,w.renderBufferDirect(xe,oe,be,he,z,He),he.side=Qs):w.renderBufferDirect(xe,oe,be,he,z,He),z.onAfterRender(w,oe,xe,be,he,He)}function ci(z,oe,xe){oe.isScene!==!0&&(oe=yt);const be=ge.get(z),he=v.state.lights,He=v.state.shadowsArray,it=he.state.version,ut=et.getParameters(z,he.state,He,oe,xe),pt=et.getProgramCacheKey(ut);let It=be.programs;be.environment=z.isMeshStandardMaterial?oe.environment:null,be.fog=oe.fog,be.envMap=(z.isMeshStandardMaterial?ue:k).get(z.envMap||be.environment),be.envMapRotation=be.environment!==null&&z.envMap===null?oe.environmentRotation:z.envMapRotation,It===void 0&&(z.addEventListener("dispose",Mt),It=new Map,be.programs=It);let Lt=It.get(pt);if(Lt!==void 0){if(be.currentProgram===Lt&&be.lightsStateVersion===it)return yi(z,ut),Lt}else ut.uniforms=et.getUniforms(z),z.onBeforeCompile(ut,w),Lt=et.acquireProgram(ut,pt),It.set(pt,Lt),be.uniforms=ut.uniforms;const Tt=be.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(Tt.clippingPlanes=ze.uniform),yi(z,ut),be.needsLights=Fu(z),be.lightsStateVersion=it,be.needsLights&&(Tt.ambientLightColor.value=he.state.ambient,Tt.lightProbe.value=he.state.probe,Tt.directionalLights.value=he.state.directional,Tt.directionalLightShadows.value=he.state.directionalShadow,Tt.spotLights.value=he.state.spot,Tt.spotLightShadows.value=he.state.spotShadow,Tt.rectAreaLights.value=he.state.rectArea,Tt.ltc_1.value=he.state.rectAreaLTC1,Tt.ltc_2.value=he.state.rectAreaLTC2,Tt.pointLights.value=he.state.point,Tt.pointLightShadows.value=he.state.pointShadow,Tt.hemisphereLights.value=he.state.hemi,Tt.directionalShadowMap.value=he.state.directionalShadowMap,Tt.directionalShadowMatrix.value=he.state.directionalShadowMatrix,Tt.spotShadowMap.value=he.state.spotShadowMap,Tt.spotLightMatrix.value=he.state.spotLightMatrix,Tt.spotLightMap.value=he.state.spotLightMap,Tt.pointShadowMap.value=he.state.pointShadowMap,Tt.pointShadowMatrix.value=he.state.pointShadowMatrix),be.currentProgram=Lt,be.uniformsList=null,Lt}function mo(z){if(z.uniformsList===null){const oe=z.currentProgram.getUniforms();z.uniformsList=qT.seqWithValue(oe.seq,z.uniforms)}return z.uniformsList}function yi(z,oe){const xe=ge.get(z);xe.outputColorSpace=oe.outputColorSpace,xe.batching=oe.batching,xe.batchingColor=oe.batchingColor,xe.instancing=oe.instancing,xe.instancingColor=oe.instancingColor,xe.instancingMorph=oe.instancingMorph,xe.skinning=oe.skinning,xe.morphTargets=oe.morphTargets,xe.morphNormals=oe.morphNormals,xe.morphColors=oe.morphColors,xe.morphTargetsCount=oe.morphTargetsCount,xe.numClippingPlanes=oe.numClippingPlanes,xe.numIntersection=oe.numClipIntersection,xe.vertexAlphas=oe.vertexAlphas,xe.vertexTangents=oe.vertexTangents,xe.toneMapping=oe.toneMapping}function Sd(z,oe,xe,be,he){oe.isScene!==!0&&(oe=yt),X.resetTextureUnits();const He=oe.fog,it=be.isMeshStandardMaterial?oe.environment:null,ut=F===null?w.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Al,pt=(be.isMeshStandardMaterial?ue:k).get(be.envMap||it),It=be.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,Lt=!!xe.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),Tt=!!xe.morphAttributes.position,Kt=!!xe.morphAttributes.normal,hi=!!xe.morphAttributes.color;let Li=No;be.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Li=w.toneMapping);const bi=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Jt=bi!==void 0?bi.length:0,At=ge.get(be),An=v.state.lights;if(Fe===!0&&(nt===!0||z!==U)){const Oi=z===U&&be.id===N;ze.setState(be,z,Oi)}let fi=!1;be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==An.state.version||At.outputColorSpace!==ut||he.isBatchedMesh&&At.batching===!1||!he.isBatchedMesh&&At.batching===!0||he.isBatchedMesh&&At.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&At.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&At.instancing===!1||!he.isInstancedMesh&&At.instancing===!0||he.isSkinnedMesh&&At.skinning===!1||!he.isSkinnedMesh&&At.skinning===!0||he.isInstancedMesh&&At.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&At.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&At.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&At.instancingMorph===!1&&he.morphTexture!==null||At.envMap!==pt||be.fog===!0&&At.fog!==He||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==ze.numPlanes||At.numIntersection!==ze.numIntersection)||At.vertexAlphas!==It||At.vertexTangents!==Lt||At.morphTargets!==Tt||At.morphNormals!==Kt||At.morphColors!==hi||At.toneMapping!==Li||At.morphTargetsCount!==Jt)&&(fi=!0):(fi=!0,At.__version=be.version);let ks=At.currentProgram;fi===!0&&(ks=ci(be,oe,he));let La=!1,en=!1,ia=!1;const Ii=ks.getUniforms(),Qn=At.uniforms;if(Me.useProgram(ks.program)&&(La=!0,en=!0,ia=!0),be.id!==N&&(N=be.id,en=!0),La||U!==z){Me.buffers.depth.getReversed()?(Qe.copy(z.projectionMatrix),fJ(Qe),dJ(Qe),Ii.setValue(te,"projectionMatrix",Qe)):Ii.setValue(te,"projectionMatrix",z.projectionMatrix),Ii.setValue(te,"viewMatrix",z.matrixWorldInverse);const $n=Ii.map.cameraPosition;$n!==void 0&&$n.setValue(te,Gt.setFromMatrixPosition(z.matrixWorld)),Ie.logarithmicDepthBuffer&&Ii.setValue(te,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Ii.setValue(te,"isOrthographic",z.isOrthographicCamera===!0),U!==z&&(U=z,en=!0,ia=!0)}if(he.isSkinnedMesh){Ii.setOptional(te,he,"bindMatrix"),Ii.setOptional(te,he,"bindMatrixInverse");const Oi=he.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),Ii.setValue(te,"boneTexture",Oi.boneTexture,X))}he.isBatchedMesh&&(Ii.setOptional(te,he,"batchingTexture"),Ii.setValue(te,"batchingTexture",he._matricesTexture,X),Ii.setOptional(te,he,"batchingIdTexture"),Ii.setValue(te,"batchingIdTexture",he._indirectTexture,X),Ii.setOptional(te,he,"batchingColorTexture"),he._colorsTexture!==null&&Ii.setValue(te,"batchingColorTexture",he._colorsTexture,X));const Zn=xe.morphAttributes;if((Zn.position!==void 0||Zn.normal!==void 0||Zn.color!==void 0)&&_t.update(he,xe,ks),(en||At.receiveShadow!==he.receiveShadow)&&(At.receiveShadow=he.receiveShadow,Ii.setValue(te,"receiveShadow",he.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Qn.envMap.value=pt,Qn.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&oe.environment!==null&&(Qn.envMapIntensity.value=oe.environmentIntensity),en&&(Ii.setValue(te,"toneMappingExposure",w.toneMappingExposure),At.needsLights&&Bl(Qn,ia),He&&be.fog===!0&&Ke.refreshFogUniforms(Qn,He),Ke.refreshMaterialUniforms(Qn,be,$,Q,v.state.transmissionRenderTarget[z.id]),qT.upload(te,mo(At),Qn,X)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(qT.upload(te,mo(At),Qn,X),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Ii.setValue(te,"center",he.center),Ii.setValue(te,"modelViewMatrix",he.modelViewMatrix),Ii.setValue(te,"normalMatrix",he.normalMatrix),Ii.setValue(te,"modelMatrix",he.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const Oi=be.uniformsGroups;for(let $n=0,fr=Oi.length;$n<fr;$n++){const Hs=Oi[$n];ne.update(Hs,ks),ne.bind(Hs,ks)}}return ks}function Bl(z,oe){z.ambientLightColor.needsUpdate=oe,z.lightProbe.needsUpdate=oe,z.directionalLights.needsUpdate=oe,z.directionalLightShadows.needsUpdate=oe,z.pointLights.needsUpdate=oe,z.pointLightShadows.needsUpdate=oe,z.spotLights.needsUpdate=oe,z.spotLightShadows.needsUpdate=oe,z.rectAreaLights.needsUpdate=oe,z.hemisphereLights.needsUpdate=oe}function Fu(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(z,oe,xe){const be=ge.get(z);be.__autoAllocateDepthBuffer=z.resolveDepthBuffer===!1,be.__autoAllocateDepthBuffer===!1&&(be.__useRenderToTexture=!1),ge.get(z.texture).__webglTexture=oe,ge.get(z.depthTexture).__webglTexture=be.__autoAllocateDepthBuffer?void 0:xe,be.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(z,oe){const xe=ge.get(z);xe.__webglFramebuffer=oe,xe.__useDefaultFramebuffer=oe===void 0};const Sh=te.createFramebuffer();this.setRenderTarget=function(z,oe=0,xe=0){F=z,I=oe,P=xe;let be=!0,he=null,He=!1,it=!1;if(z){const pt=ge.get(z);if(pt.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(te.FRAMEBUFFER,null),be=!1;else if(pt.__webglFramebuffer===void 0)X.setupRenderTarget(z);else if(pt.__hasExternalTextures)X.rebindTextures(z,ge.get(z.texture).__webglTexture,ge.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){const Tt=z.depthTexture;if(pt.__boundDepthTexture!==Tt){if(Tt!==null&&ge.has(Tt)&&(z.width!==Tt.image.width||z.height!==Tt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(z)}}const It=z.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(it=!0);const Lt=ge.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(Lt[oe])?he=Lt[oe][xe]:he=Lt[oe],He=!0):z.samples>0&&X.useMultisampledRTT(z)===!1?he=ge.get(z).__webglMultisampledFramebuffer:Array.isArray(Lt)?he=Lt[xe]:he=Lt,H.copy(z.viewport),re.copy(z.scissor),J=z.scissorTest}else H.copy(Le).multiplyScalar($).floor(),re.copy(qe).multiplyScalar($).floor(),J=ht;if(xe!==0&&(he=Sh),Me.bindFramebuffer(te.FRAMEBUFFER,he)&&be&&Me.drawBuffers(z,he),Me.viewport(H),Me.scissor(re),Me.setScissorTest(J),He){const pt=ge.get(z.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+oe,pt.__webglTexture,xe)}else if(it){const pt=ge.get(z.texture),It=oe;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,pt.__webglTexture,xe,It)}else if(z!==null&&xe!==0){const pt=ge.get(z.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,pt.__webglTexture,xe)}N=-1},this.readRenderTargetPixels=function(z,oe,xe,be,he,He,it){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=ge.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&it!==void 0&&(ut=ut[it]),ut){Me.bindFramebuffer(te.FRAMEBUFFER,ut);try{const pt=z.texture,It=pt.format,Lt=pt.type;if(!Ie.textureFormatReadable(It)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ie.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=z.width-be&&xe>=0&&xe<=z.height-he&&te.readPixels(oe,xe,be,he,Be.convert(It),Be.convert(Lt),He)}finally{const pt=F!==null?ge.get(F).__webglFramebuffer:null;Me.bindFramebuffer(te.FRAMEBUFFER,pt)}}},this.readRenderTargetPixelsAsync=async function(z,oe,xe,be,he,He,it){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ut=ge.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&it!==void 0&&(ut=ut[it]),ut)if(oe>=0&&oe<=z.width-be&&xe>=0&&xe<=z.height-he){Me.bindFramebuffer(te.FRAMEBUFFER,ut);const pt=z.texture,It=pt.format,Lt=pt.type;if(!Ie.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ie.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Tt=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Tt),te.bufferData(te.PIXEL_PACK_BUFFER,He.byteLength,te.STREAM_READ),te.readPixels(oe,xe,be,he,Be.convert(It),Be.convert(Lt),0);const Kt=F!==null?ge.get(F).__webglFramebuffer:null;Me.bindFramebuffer(te.FRAMEBUFFER,Kt);const hi=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await hJ(te,hi,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Tt),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,He),te.deleteBuffer(Tt),te.deleteSync(hi),He}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(z,oe=null,xe=0){const be=Math.pow(2,-xe),he=Math.floor(z.image.width*be),He=Math.floor(z.image.height*be),it=oe!==null?oe.x:0,ut=oe!==null?oe.y:0;X.setTexture2D(z,0),te.copyTexSubImage2D(te.TEXTURE_2D,xe,0,0,it,ut,he,He),Me.unbindTexture()};const ta=te.createFramebuffer(),Ri=te.createFramebuffer();this.copyTextureToTexture=function(z,oe,xe=null,be=null,he=0,He=null){He===null&&(he!==0?(GT("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),He=he,he=0):He=0);let it,ut,pt,It,Lt,Tt,Kt,hi,Li;const bi=z.isCompressedTexture?z.mipmaps[He]:z.image;if(xe!==null)it=xe.max.x-xe.min.x,ut=xe.max.y-xe.min.y,pt=xe.isBox3?xe.max.z-xe.min.z:1,It=xe.min.x,Lt=xe.min.y,Tt=xe.isBox3?xe.min.z:0;else{const Zn=Math.pow(2,-he);it=Math.floor(bi.width*Zn),ut=Math.floor(bi.height*Zn),z.isDataArrayTexture?pt=bi.depth:z.isData3DTexture?pt=Math.floor(bi.depth*Zn):pt=1,It=0,Lt=0,Tt=0}be!==null?(Kt=be.x,hi=be.y,Li=be.z):(Kt=0,hi=0,Li=0);const Jt=Be.convert(oe.format),At=Be.convert(oe.type);let An;oe.isData3DTexture?(X.setTexture3D(oe,0),An=te.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(X.setTexture2DArray(oe,0),An=te.TEXTURE_2D_ARRAY):(X.setTexture2D(oe,0),An=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,oe.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,oe.unpackAlignment);const fi=te.getParameter(te.UNPACK_ROW_LENGTH),ks=te.getParameter(te.UNPACK_IMAGE_HEIGHT),La=te.getParameter(te.UNPACK_SKIP_PIXELS),en=te.getParameter(te.UNPACK_SKIP_ROWS),ia=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,bi.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,bi.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,It),te.pixelStorei(te.UNPACK_SKIP_ROWS,Lt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Tt);const Ii=z.isDataArrayTexture||z.isData3DTexture,Qn=oe.isDataArrayTexture||oe.isData3DTexture;if(z.isDepthTexture){const Zn=ge.get(z),Oi=ge.get(oe),$n=ge.get(Zn.__renderTarget),fr=ge.get(Oi.__renderTarget);Me.bindFramebuffer(te.READ_FRAMEBUFFER,$n.__webglFramebuffer),Me.bindFramebuffer(te.DRAW_FRAMEBUFFER,fr.__webglFramebuffer);for(let Hs=0;Hs<pt;Hs++)Ii&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,ge.get(z).__webglTexture,he,Tt+Hs),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,ge.get(oe).__webglTexture,He,Li+Hs)),te.blitFramebuffer(It,Lt,it,ut,Kt,hi,it,ut,te.DEPTH_BUFFER_BIT,te.NEAREST);Me.bindFramebuffer(te.READ_FRAMEBUFFER,null),Me.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(he!==0||z.isRenderTargetTexture||ge.has(z)){const Zn=ge.get(z),Oi=ge.get(oe);Me.bindFramebuffer(te.READ_FRAMEBUFFER,ta),Me.bindFramebuffer(te.DRAW_FRAMEBUFFER,Ri);for(let $n=0;$n<pt;$n++)Ii?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Zn.__webglTexture,he,Tt+$n):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Zn.__webglTexture,he),Qn?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Oi.__webglTexture,He,Li+$n):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Oi.__webglTexture,He),he!==0?te.blitFramebuffer(It,Lt,it,ut,Kt,hi,it,ut,te.COLOR_BUFFER_BIT,te.NEAREST):Qn?te.copyTexSubImage3D(An,He,Kt,hi,Li+$n,It,Lt,it,ut):te.copyTexSubImage2D(An,He,Kt,hi,It,Lt,it,ut);Me.bindFramebuffer(te.READ_FRAMEBUFFER,null),Me.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else Qn?z.isDataTexture||z.isData3DTexture?te.texSubImage3D(An,He,Kt,hi,Li,it,ut,pt,Jt,At,bi.data):oe.isCompressedArrayTexture?te.compressedTexSubImage3D(An,He,Kt,hi,Li,it,ut,pt,Jt,bi.data):te.texSubImage3D(An,He,Kt,hi,Li,it,ut,pt,Jt,At,bi):z.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,He,Kt,hi,it,ut,Jt,At,bi.data):z.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,He,Kt,hi,bi.width,bi.height,Jt,bi.data):te.texSubImage2D(te.TEXTURE_2D,He,Kt,hi,it,ut,Jt,At,bi);te.pixelStorei(te.UNPACK_ROW_LENGTH,fi),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,ks),te.pixelStorei(te.UNPACK_SKIP_PIXELS,La),te.pixelStorei(te.UNPACK_SKIP_ROWS,en),te.pixelStorei(te.UNPACK_SKIP_IMAGES,ia),He===0&&oe.generateMipmaps&&te.generateMipmap(An),Me.unbindTexture()},this.copyTextureToTexture3D=function(z,oe,xe=null,be=null,he=0){return GT('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,oe,xe,be,he)},this.initRenderTarget=function(z){ge.get(z).__webglFramebuffer===void 0&&X.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?X.setTextureCube(z,0):z.isData3DTexture?X.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?X.setTexture2DArray(z,0):X.setTexture2D(z,0),Me.unbindTexture()},this.resetState=function(){I=0,P=0,F=null,Me.reset(),tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Po}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=pi._getDrawingBufferColorSpace(e),t.unpackColorSpace=pi._getUnpackColorSpace()}}const Tne=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:QR,AddEquation:Nc,AddOperation:gH,AdditiveAnimationBlendMode:oB,AdditiveBlending:LS,AgXToneMapping:bH,AlphaFormat:tB,AlwaysCompare:UH,AlwaysDepth:US,AlwaysStencilFunc:Uw,AmbientLight:_6,AnimationAction:D6,AnimationClip:rg,AnimationLoader:FQ,AnimationMixer:hZ,AnimationObjectGroup:uZ,AnimationUtils:OQ,ArcCurve:YH,ArrayCamera:C6,ArrowHelper:IZ,AttachedBindMode:Pw,Audio:M6,AudioAnalyser:$Q,AudioContext:UB,AudioListener:JQ,AudioLoader:WQ,AxesHelper:OZ,BackSide:rs,BasicDepthPacking:dh,BasicShadowMap:Jk,BatchedMesh:XH,Bone:LA,BooleanKeyframeTrack:_d,Box2:_Z,Box3:sr,Box3Helper:BZ,BoxGeometry:yd,BoxHelper:RZ,BufferAttribute:li,BufferGeometry:Ht,BufferGeometryLoader:A6,ByteType:ZR,Cache:gu,Camera:b_,CameraHelper:DZ,CanvasTexture:nQ,CapsuleGeometry:NA,CatmullRomCurve3:KH,CineonToneMapping:_H,CircleGeometry:FA,ClampToEdgeWrapping:va,Clock:NB,Color:$e,ColorKeyframeTrack:RB,ColorManagement:pi,CompressedArrayTexture:tQ,CompressedCubeTexture:iQ,CompressedTexture:OA,CompressedTextureLoader:kQ,ConeGeometry:kA,ConstantAlphaFactor:dH,ConstantColorFactor:hH,Controls:UZ,CubeCamera:dB,CubeReflectionMapping:Mu,CubeRefractionMapping:nh,CubeTexture:T_,CubeTextureLoader:HQ,CubeUVReflectionMapping:Rg,CubicBezierCurve:bB,CubicBezierCurve3:JH,CubicInterpolant:p6,CullFaceBack:Lw,CullFaceFront:Kk,CullFaceFrontBack:gK,CullFaceNone:Yk,Curve:qo,CurvePath:ZH,CustomBlending:Qk,CustomToneMapping:xH,CylinderGeometry:Bg,Cylindrical:vZ,Data3DTexture:DA,DataArrayTexture:x_,DataTexture:gl,DataTextureLoader:zQ,DataUtils:wJ,DecrementStencilOp:MK,DecrementWrapStencilOp:DK,DefaultLoadingManager:om,DepthFormat:Qm,DepthStencilFormat:id,DepthTexture:PA,DetachedBindMode:SH,DirectionalLight:PB,DirectionalLightHelper:wZ,DiscreteInterpolant:m6,DodecahedronGeometry:HA,DoubleSide:Qs,DstAlphaFactor:aH,DstColorFactor:lH,DynamicCopyUsage:qK,DynamicDrawUsage:FK,DynamicReadUsage:zK,EdgesGeometry:$H,EllipseCurve:UA,EqualCompare:LH,EqualDepth:FS,EqualStencilFunc:IK,EquirectangularReflectionMapping:Ev,EquirectangularRefractionMapping:Cv,Euler:Ca,EventDispatcher:Ra,ExtrudeGeometry:zA,FileLoader:Ma,Float16BufferAttribute:PJ,Float32BufferAttribute:bt,FloatType:Rr,Fog:BA,FogExp2:RA,FramebufferTexture:eQ,FrontSide:Ho,Frustum:E_,GLBufferAttribute:yZ,GLSL1:XK,GLSL3:Nw,GreaterCompare:IH,GreaterDepth:HS,GreaterEqualCompare:PH,GreaterEqualDepth:kS,GreaterEqualStencilFunc:NK,GreaterStencilFunc:PK,GridHelper:CZ,Group:mu,HalfFloatType:md,HemisphereLight:v6,HemisphereLightHelper:EZ,IcosahedronGeometry:GA,ImageBitmapLoader:E6,ImageLoader:Nv,ImageUtils:kH,IncrementStencilOp:CK,IncrementWrapStencilOp:wK,InstancedBufferAttribute:nd,InstancedBufferGeometry:S6,InstancedInterleavedBuffer:gZ,InstancedMesh:yB,Int16BufferAttribute:IJ,Int32BufferAttribute:OJ,Int8BufferAttribute:RJ,IntType:bA,InterleavedBuffer:S_,InterleavedBufferAttribute:rh,Interpolant:Lg,InterpolateDiscrete:Zm,InterpolateLinear:$m,InterpolateSmooth:zT,InvertStencilOp:RK,KeepStencilOp:gf,KeyframeTrack:fo,LOD:jH,LatheGeometry:C_,Layers:ig,LessCompare:BH,LessDepth:NS,LessEqualCompare:uB,LessEqualDepth:ed,LessEqualStencilFunc:OK,LessStencilFunc:LK,Light:gh,LightProbe:T6,Line:wu,Line3:xZ,LineBasicMaterial:lr,LineCurve:TB,LineCurve3:QH,LineDashedMaterial:h6,LineLoop:vB,LineSegments:Vo,LinearFilter:on,LinearInterpolant:DB,LinearMipMapLinearFilter:xK,LinearMipMapNearestFilter:_K,LinearMipmapLinearFilter:no,LinearMipmapNearestFilter:Cm,LinearSRGBColorSpace:Al,LinearToneMapping:yH,LinearTransfer:wv,Loader:ur,LoaderUtils:Zc,LoadingManager:BB,LoopOnce:AH,LoopPingPong:CH,LoopRepeat:EH,LuminanceAlphaFormat:sB,LuminanceFormat:nB,MOUSE:pf,Material:zn,MaterialLoader:JA,MathUtils:tg,Matrix2:HB,Matrix3:qt,Matrix4:vt,MaxEquation:tH,Mesh:_n,MeshBasicMaterial:_a,MeshDepthMaterial:KA,MeshDistanceMaterial:MB,MeshLambertMaterial:u6,MeshMatcapMaterial:c6,MeshNormalMaterial:CB,MeshPhongMaterial:o6,MeshPhysicalMaterial:ho,MeshStandardMaterial:D_,MeshToonMaterial:l6,MinEquation:eH,MirroredRepeatWrapping:Km,MixOperation:mH,MultiplyBlending:Ow,MultiplyOperation:v_,NearestFilter:In,NearestMipMapLinearFilter:vK,NearestMipMapNearestFilter:yK,NearestMipmapLinearFilter:Sf,NearestMipmapNearestFilter:xA,NeutralToneMapping:TH,NeverCompare:RH,NeverDepth:PS,NeverStencilFunc:BK,NoBlending:nr,NoColorSpace:Oo,NoToneMapping:No,NormalAnimationBlendMode:MA,NormalBlending:Hf,NotEqualCompare:OH,NotEqualDepth:zS,NotEqualStencilFunc:UK,NumberKeyframeTrack:rd,Object3D:gi,ObjectLoader:jQ,ObjectSpaceNormalMap:DH,OctahedronGeometry:M_,OneFactor:nH,OneMinusConstantAlphaFactor:pH,OneMinusConstantColorFactor:fH,OneMinusDstAlphaFactor:oH,OneMinusDstColorFactor:uH,OneMinusSrcAlphaFactor:OS,OneMinusSrcColorFactor:rH,OrthographicCamera:so,PCFShadowMap:vA,PCFSoftShadowMap:Gy,PMREMGenerator:qw,Path:Iv,PerspectiveCamera:rn,Plane:ru,PlaneGeometry:vd,PlaneHelper:LZ,PointLight:OB,PointLightHelper:SZ,Points:_B,PointsMaterial:IA,PolarGridHelper:MZ,PolyhedronGeometry:mh,PositionalAudio:ZQ,PropertyBinding:_i,PropertyMixer:w6,QuadraticBezierCurve:SB,QuadraticBezierCurve3:AB,Quaternion:as,QuaternionKeyframeTrack:ad,QuaternionLinearInterpolant:g6,RED_GREEN_RGTC2_Format:f1,RED_RGTC1_Format:aB,REVISION:fh,RGBADepthPacking:wH,RGBAFormat:er,RGBAIntegerFormat:CA,RGBA_ASTC_10x10_Format:a1,RGBA_ASTC_10x5_Format:n1,RGBA_ASTC_10x6_Format:s1,RGBA_ASTC_10x8_Format:r1,RGBA_ASTC_12x10_Format:o1,RGBA_ASTC_12x12_Format:l1,RGBA_ASTC_4x4_Format:KS,RGBA_ASTC_5x4_Format:JS,RGBA_ASTC_5x5_Format:QS,RGBA_ASTC_6x5_Format:ZS,RGBA_ASTC_6x6_Format:$S,RGBA_ASTC_8x5_Format:e1,RGBA_ASTC_8x6_Format:t1,RGBA_ASTC_8x8_Format:i1,RGBA_BPTC_Format:Wy,RGBA_ETC2_EAC_Format:YS,RGBA_PVRTC_2BPPV1_Format:jS,RGBA_PVRTC_4BPPV1_Format:qS,RGBA_S3TC_DXT1_Format:qy,RGBA_S3TC_DXT3_Format:jy,RGBA_S3TC_DXT5_Format:Xy,RGBDepthPacking:TK,RGBFormat:iB,RGBIntegerFormat:bK,RGB_BPTC_SIGNED_Format:u1,RGB_BPTC_UNSIGNED_Format:c1,RGB_ETC1_Format:XS,RGB_ETC2_Format:WS,RGB_PVRTC_2BPPV1_Format:VS,RGB_PVRTC_4BPPV1_Format:GS,RGB_S3TC_DXT1_Format:Vy,RGDepthPacking:SK,RGFormat:rB,RGIntegerFormat:EA,RawShaderMaterial:a6,Ray:gd,Raycaster:R6,RectAreaLight:x6,RedFormat:AA,RedIntegerFormat:__,ReinhardToneMapping:vH,RenderTarget:wA,RenderTarget3D:fZ,RenderTargetArray:dZ,RepeatWrapping:sh,ReplaceStencilOp:EK,ReverseSubtractEquation:$k,RingGeometry:VA,SIGNED_RED_GREEN_RGTC2_Format:d1,SIGNED_RED_RGTC1_Format:h1,SRGBColorSpace:Ci,SRGBTransfer:Ui,Scene:Lv,ShaderChunk:Qt,ShaderLib:Io,ShaderMaterial:bn,ShadowMaterial:r6,Shape:Gf,ShapeGeometry:qA,ShapePath:PZ,ShapeUtils:yl,ShortType:$R,Skeleton:A_,SkeletonHelper:TZ,SkinnedMesh:gB,Source:Vc,Sphere:Es,SphereGeometry:w_,Spherical:v1,SphericalHarmonics3:b6,SplineCurve:EB,SpotLight:IB,SpotLightHelper:bZ,Sprite:qH,SpriteMaterial:mB,SrcAlphaFactor:IS,SrcAlphaSaturateFactor:cH,SrcColorFactor:sH,StaticCopyUsage:VK,StaticDrawUsage:Dv,StaticReadUsage:HK,StereoCamera:YQ,StreamCopyUsage:jK,StreamDrawUsage:kK,StreamReadUsage:GK,StringKeyframeTrack:xd,SubtractEquation:Zk,SubtractiveBlending:Iw,TOUCH:mf,TangentSpaceNormalMap:ph,TetrahedronGeometry:jA,Texture:Zi,TextureLoader:y6,TextureUtils:zZ,TimestampQuery:WK,TorusGeometry:XA,TorusKnotGeometry:WA,Triangle:jr,TriangleFanDrawMode:p1,TriangleStripDrawMode:lB,TrianglesDrawMode:MH,TubeGeometry:YA,UVMapping:_A,Uint16BufferAttribute:hB,Uint32BufferAttribute:fB,Uint8BufferAttribute:BJ,Uint8ClampedBufferAttribute:LJ,Uniform:mi,UniformsGroup:mZ,UniformsLib:ot,UniformsUtils:GH,UnsignedByteType:Cs,UnsignedInt248Type:td,UnsignedInt5999Type:eB,UnsignedIntType:Sl,UnsignedShort4444Type:TA,UnsignedShort5551Type:SA,UnsignedShortType:Jm,VSMShadowMap:Bo,Vector2:Te,Vector3:W,Vector4:di,VectorKeyframeTrack:od,VideoFrameTexture:$J,VideoTexture:WH,WebGL3DRenderTarget:vJ,WebGLArrayRenderTarget:yJ,WebGLCoordinateSystem:Po,WebGLCubeRenderTarget:pB,WebGLRenderTarget:On,WebGLRenderer:F6,WebGLUtils:N6,WebGPUCoordinateSystem:Rv,WebXRController:VT,WireframeGeometry:s6,WrapAroundEnding:Mv,ZeroCurvatureEnding:Af,ZeroFactor:iH,ZeroSlopeEnding:Ef,ZeroStencilOp:AK,createCanvasElement:FH},Symbol.toStringTag,{value:"Module"}));var k6={exports:{}},yh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */yh.ConcurrentRoot=1;yh.ContinuousEventPriority=8;yh.DefaultEventPriority=32;yh.DiscreteEventPriority=2;yh.IdleEventPriority=268435456;yh.LegacyRoot=0;yh.NoEventPriority=0;k6.exports=yh;var jT=k6.exports,H6={exports:{}},z6={},G6={exports:{}},V6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag=ee;function Sne(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Ane=typeof Object.is=="function"?Object.is:Sne,Ene=ag.useState,Cne=ag.useEffect,Mne=ag.useLayoutEffect,wne=ag.useDebugValue;function Dne(i,e){var t=e(),n=Ene({inst:{value:t,getSnapshot:e}}),s=n[0].inst,r=n[1];return Mne(function(){s.value=t,s.getSnapshot=e,NC(s)&&r({inst:s})},[i,t,e]),Cne(function(){return NC(s)&&r({inst:s}),i(function(){NC(s)&&r({inst:s})})},[i]),wne(t),t}function NC(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Ane(i,t)}catch{return!0}}function Rne(i,e){return e()}var Bne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rne:Dne;V6.useSyncExternalStore=ag.useSyncExternalStore!==void 0?ag.useSyncExternalStore:Bne;G6.exports=V6;var Lne=G6.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA=ee,Ine=Lne;function One(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Pne=typeof Object.is=="function"?Object.is:One,Une=Ine.useSyncExternalStore,Nne=ZA.useRef,Fne=ZA.useEffect,kne=ZA.useMemo,Hne=ZA.useDebugValue;z6.useSyncExternalStoreWithSelector=function(i,e,t,n,s){var r=Nne(null);if(r.current===null){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=kne(function(){function l(m){if(!u){if(u=!0,f=m,m=n(m),s!==void 0&&a.hasValue){var _=a.value;if(s(_,m))return d=_}return d=m}if(_=d,Pne(f,m))return _;var x=n(m);return s!==void 0&&s(_,x)?(f=m,_):(f=m,d=x)}var u=!1,f,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,n,s]);var o=Une(i,r[0],r[1]);return Fne(function(){a.hasValue=!0,a.value=o},[o]),Hne(o),o};H6.exports=z6;var zne=H6.exports;const Gne=Pu(zne),bU=i=>{let e;const t=new Set,n=(u,f)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const p=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},s=()=>e,o={setState:n,getState:s,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=i(n,s,o);return o},q6=i=>i?bU(i):bU,{useSyncExternalStoreWithSelector:Vne}=Gne,qne=i=>i;function jne(i,e=qne,t){const n=Vne(i.subscribe,i.getState,i.getInitialState,e,t);return Kf.useDebugValue(n),n}const TU=(i,e)=>{const t=q6(i),n=(s,r=e)=>jne(t,s,r);return Object.assign(n,t),n},Xne=(i,e)=>i?TU(i,e):TU;var j6={exports:{}},X6={exports:{}},W6={exports:{}},Y6={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(j,Q){var $=j.length;j.push(Q);e:for(;0<$;){var pe=$-1>>>1,Se=j[pe];if(0<s(Se,Q))j[pe]=Q,j[$]=Se,$=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var Q=j[0],$=j.pop();if($!==Q){j[0]=$;e:for(var pe=0,Se=j.length,Le=Se>>>1;pe<Le;){var qe=2*(pe+1)-1,ht=j[qe],me=qe+1,Fe=j[me];if(0>s(ht,$))me<Se&&0>s(Fe,ht)?(j[pe]=Fe,j[me]=$,pe=me):(j[pe]=ht,j[qe]=$,pe=qe);else if(me<Se&&0>s(Fe,$))j[pe]=Fe,j[me]=$,pe=me;else break e}}return Q}function s(j,Q){var $=j.sortIndex-Q.sortIndex;return $!==0?$:j.id-Q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,p=3,m=!1,_=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(j){for(var Q=t(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=j)n(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function w(j){if(x=!1,A(j),!_)if(t(l)!==null)_=!0,ae();else{var Q=t(u);Q!==null&&ce(w,Q.startTime-j)}}var B=!1,I=-1,P=5,F=-1;function N(){return!(i.unstable_now()-F<P)}function U(){if(B){var j=i.unstable_now();F=j;var Q=!0;try{e:{_=!1,x&&(x=!1,v(I),I=-1),m=!0;var $=p;try{t:{for(A(j),d=t(l);d!==null&&!(d.expirationTime>j&&N());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,p=d.priorityLevel;var Se=pe(d.expirationTime<=j);if(j=i.unstable_now(),typeof Se=="function"){d.callback=Se,A(j),Q=!0;break t}d===t(l)&&n(l),A(j)}else n(l);d=t(l)}if(d!==null)Q=!0;else{var Le=t(u);Le!==null&&ce(w,Le.startTime-j),Q=!1}}break e}finally{d=null,p=$,m=!1}Q=void 0}}finally{Q?H():B=!1}}}var H;if(typeof T=="function")H=function(){T(U)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,J=re.port2;re.port1.onmessage=U,H=function(){J.postMessage(null)}}else H=function(){b(U,0)};function ae(){B||(B=!0,H())}function ce(j,Q){I=b(function(){j(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){_||m||(_=!0,ae())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(j){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var $=p;p=Q;try{return j()}finally{p=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=p;p=j;try{return Q()}finally{p=$}},i.unstable_scheduleCallback=function(j,Q,$){var pe=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?pe+$:pe):$=pe,j){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=$+Se,j={id:f++,callback:Q,priorityLevel:j,startTime:$,expirationTime:Se,sortIndex:-1},$>pe?(j.sortIndex=$,e(u,j),t(l)===null&&j===t(u)&&(x?(v(I),I=-1):x=!0,ce(w,$-pe))):(j.sortIndex=Se,e(l,j),_||m||(_=!0,ae())),j},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(j){var Q=p;return function(){var $=p;p=Q;try{return j.apply(this,arguments)}finally{p=$}}}})(Y6);W6.exports=Y6;var Xw=W6.exports;/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){i.exports=function(e){function t(c,h,g,S){return new kE(c,h,g,S)}function n(){}function s(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return c===null||typeof c!="object"?null:(c=IL&&c[IL]||c["@@iterator"],typeof c=="function"?c:null)}function a(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Dq?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case nn:return"Fragment";case Dt:return"Portal";case Pa:return"Profiler";case Vs:return"StrictMode";case ic:return"Suspense";case Pi:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case Pr:return(c.displayName||"Context")+".Provider";case tc:return(c._context.displayName||"Context")+".Consumer";case Hl:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case zl:return h=c.displayName||null,h!==null?h:a(c.type)||"Memo";case Vn:h=c._payload,c=c._init;try{return a(c(h))}catch{}}return null}function o(c){if(HE===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);HE=h&&h[1]||"",OL=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+HE+c+OL}function l(c,h){if(!c||zE)return"";zE=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Wt){var mt=Wt}Reflect.construct(c,[],ct)}else{try{ct.call()}catch(Wt){mt=Wt}c.call(ct.prototype)}}else{try{throw Error()}catch(Wt){mt=Wt}(ct=c())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Wt){if(Wt&&mt&&typeof Wt.stack=="string")return[Wt.stack,mt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=S.DetermineComponentFrameRoot(),V=L[0],ie=L[1];if(V&&ie){var de=V.split(`
`),Ne=ie.split(`
`);for(D=S=0;S<de.length&&!de[S].includes("DetermineComponentFrameRoot");)S++;for(;D<Ne.length&&!Ne[D].includes("DetermineComponentFrameRoot");)D++;if(S===de.length||D===Ne.length)for(S=de.length-1,D=Ne.length-1;1<=S&&0<=D&&de[S]!==Ne[D];)D--;for(;1<=S&&0<=D;S--,D--)if(de[S]!==Ne[D]){if(S!==1||D!==1)do if(S--,D--,0>D||de[S]!==Ne[D]){var Je=`
`+de[S].replace(" at new "," at ");return c.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",c.displayName)),Je}while(1<=S&&0<=D);break}}}finally{zE=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?o(g):""}function u(c){switch(c.tag){case 26:case 27:case 5:return o(c.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return c=l(c.type,!1),c;case 11:return c=l(c.type.render,!1),c;case 1:return c=l(c.type,!0),c;default:return""}}function f(c){try{var h="";do h+=u(c),c=c.return;while(c);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function d(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function p(c){if(d(c)!==c)throw Error(s(188))}function m(c){var h=c.alternate;if(!h){if(h=d(c),h===null)throw Error(s(188));return h!==c?null:c}for(var g=c,S=h;;){var D=g.return;if(D===null)break;var L=D.alternate;if(L===null){if(S=D.return,S!==null){g=S;continue}break}if(D.child===L.child){for(L=D.child;L;){if(L===g)return p(D),c;if(L===S)return p(D),h;L=L.sibling}throw Error(s(188))}if(g.return!==S.return)g=D,S=L;else{for(var V=!1,ie=D.child;ie;){if(ie===g){V=!0,g=D,S=L;break}if(ie===S){V=!0,S=D,g=L;break}ie=ie.sibling}if(!V){for(ie=L.child;ie;){if(ie===g){V=!0,g=L,S=D;break}if(ie===S){V=!0,S=L,g=D;break}ie=ie.sibling}if(!V)throw Error(s(189))}}if(g.alternate!==S)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?c:h}function _(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=_(c),h!==null)return h;c=c.sibling}return null}function x(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(h=x(c),h!==null))return h;c=c.sibling}return null}function b(c){return{current:c}}function v(c){0>Qd||(c.current=WE[Qd],WE[Qd]=null,Qd--)}function T(c,h){Qd++,WE[Qd]=c.current,c.current=h}function A(c){return c>>>=0,c===0?32:31-(qj(c)/jj|0)|0}function w(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function B(c,h){var g=c.pendingLanes;if(g===0)return 0;var S=0,D=c.suspendedLanes,L=c.pingedLanes,V=c.warmLanes;c=c.finishedLanes!==0;var ie=g&134217727;return ie!==0?(g=ie&~D,g!==0?S=w(g):(L&=ie,L!==0?S=w(L):c||(V=ie&~V,V!==0&&(S=w(V))))):(ie=g&~D,ie!==0?S=w(ie):L!==0?S=w(L):c||(V=g&~V,V!==0&&(S=w(V)))),S===0?0:h!==0&&h!==S&&!(h&D)&&(D=S&-S,V=h&-h,D>=V||D===32&&(V&4194176)!==0)?h:S}function I(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function P(c,h){switch(c){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var c=Hx;return Hx<<=1,!(Hx&4194176)&&(Hx=128),c}function N(){var c=zx;return zx<<=1,!(zx&62914560)&&(zx=4194304),c}function U(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function H(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function re(c,h,g,S,D,L){var V=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var ie=c.entanglements,de=c.expirationTimes,Ne=c.hiddenUpdates;for(g=V&~g;0<g;){var Je=31-sa(g),ct=1<<Je;ie[Je]=0,de[Je]=-1;var mt=Ne[Je];if(mt!==null)for(Ne[Je]=null,Je=0;Je<mt.length;Je++){var Wt=mt[Je];Wt!==null&&(Wt.lane&=-536870913)}g&=~ct}S!==0&&J(c,S,0),L!==0&&D===0&&c.tag!==0&&(c.suspendedLanes|=L&~(V&~h))}function J(c,h,g){c.pendingLanes|=h,c.suspendedLanes&=~h;var S=31-sa(h);c.entangledLanes|=h,c.entanglements[S]=c.entanglements[S]|1073741824|g&4194218}function ae(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var S=31-sa(g),D=1<<S;D&h|c[S]&h&&(c[S]|=h),g&=~D}}function ce(c){return c&=-c,2<c?8<c?c&134217727?32:268435456:8:2}function j(c){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(S0,c,void 0,(c.current.flags&128)===128)}catch{}}function Q(c){if(typeof Jj=="function"&&Qj(c),ra&&typeof ra.setStrictMode=="function")try{ra.setStrictMode(S0,c)}catch{}}function $(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}function pe(c,h){if(typeof c=="object"&&c!==null){var g=aI.get(c);return g!==void 0?g:(h={value:c,source:h,stack:f(h)},aI.set(c,h),h)}return{value:c,source:h,stack:f(h)}}function Se(c,h){$d[ep++]=qx,$d[ep++]=Vx,Vx=c,qx=h}function Le(c,h,g){Fa[ka++]=Vl,Fa[ka++]=ql,Fa[ka++]=Nh,Nh=c;var S=Vl;c=ql;var D=32-sa(S)-1;S&=~(1<<D),g+=1;var L=32-sa(h)+D;if(30<L){var V=D-D%5;L=(S&(1<<V)-1).toString(32),S>>=V,D-=V,Vl=1<<32-sa(h)+D|g<<D|S,ql=L+c}else Vl=1<<L|g<<D|S,ql=c}function qe(c){c.return!==null&&(Se(c,1),Le(c,1,0))}function ht(c){for(;c===Vx;)Vx=$d[--ep],$d[ep]=null,qx=$d[--ep],$d[ep]=null;for(;c===Nh;)Nh=Fa[--ka],Fa[ka]=null,ql=Fa[--ka],Fa[ka]=null,Vl=Fa[--ka],Fa[ka]=null}function me(c,h){T(sc,h),T(A0,c),T(Ls,null),c=Lq(h),v(Ls),T(Ls,c)}function Fe(){v(Ls),v(A0),v(sc)}function nt(c){c.memoizedState!==null&&T(jx,c);var h=Ls.current,g=Iq(h,c.type);h!==g&&(T(A0,c),T(Ls,g))}function Qe(c){A0.current===c&&(v(Ls),v(A0)),jx.current===c&&(v(jx),Gl?Uh._currentValue=Jd:Uh._currentValue2=Jd)}function gt(c){var h=Error(s(418,""));throw Ct(pe(h,c)),JE}function Gt(c,h){if(!Ua)throw Error(s(175));Cj(c.stateNode,c.type,c.memoizedProps,h,c)||gt(c)}function dt(c){for(vr=c.return;vr;)switch(vr.tag){case 3:case 27:Zo=!0;return;case 5:case 13:Zo=!1;return;default:vr=vr.return}}function yt(c){if(!Ua||c!==vr)return!1;if(!Ti)return dt(c),Ti=!0,!1;var h=!1;if(js?c.tag!==3&&c.tag!==27&&(c.tag!==5||KL(c.type)&&!kx(c.type,c.memoizedProps))&&(h=!0):c.tag!==3&&(c.tag!==5||KL(c.type)&&!kx(c.type,c.memoizedProps))&&(h=!0),h&&Xs&&gt(c),dt(c),c.tag===13){if(!Ua)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));Xs=Dj(c)}else Xs=vr?WL(c.stateNode):null;return!0}function Ut(){Ua&&(Xs=vr=null,Ti=!1)}function Ct(c){Eo===null?Eo=[c]:Eo.push(c)}function te(){for(var c=tp,h=QE=tp=0;h<c;){var g=Ha[h];Ha[h++]=null;var S=Ha[h];Ha[h++]=null;var D=Ha[h];Ha[h++]=null;var L=Ha[h];if(Ha[h++]=null,S!==null&&D!==null){var V=S.pending;V===null?D.next=D:(D.next=V.next,V.next=D),S.pending=D}L!==0&&Me(g,D,L)}}function ui(c,h,g,S){Ha[tp++]=c,Ha[tp++]=h,Ha[tp++]=g,Ha[tp++]=S,QE|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function Pe(c,h,g,S){return ui(c,h,g,S),We(c)}function Ie(c,h){return ui(c,null,null,h),We(c)}function Me(c,h,g){c.lanes|=g;var S=c.alternate;S!==null&&(S.lanes|=g);for(var D=!1,L=c.return;L!==null;)L.childLanes|=g,S=L.alternate,S!==null&&(S.childLanes|=g),L.tag===22&&(c=L.stateNode,c===null||c._visibility&1||(D=!0)),c=L,L=L.return;D&&h!==null&&c.tag===3&&(L=c.stateNode,D=31-sa(g),L=L.hiddenUpdates,c=L[D],c===null?L[D]=[h]:c.push(h),h.lane=g|536870912)}function We(c){if(50<I0)throw I0=0,d2=null,Error(s(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}function ge(c){c!==ip&&c.next===null&&(ip===null?Xx=ip=c:ip=ip.next=c),Wx=!0,ZE||(ZE=!0,we(k))}function X(c,h){if(!$E&&Wx){$E=!0;do for(var g=!1,S=Xx;S!==null;){if(!h)if(c!==0){var D=S.pendingLanes;if(D===0)var L=0;else{var V=S.suspendedLanes,ie=S.pingedLanes;L=(1<<31-sa(42|c)+1)-1,L&=D&~(V&~ie),L=L&201326677?L&201326677|1:L?L|2:0}L!==0&&(g=!0,Re(S,L))}else L=vi,L=B(S,S===Xi?L:0),!(L&3)||I(S,L)||(g=!0,Re(S,L));S=S.next}while(g);$E=!1}}function k(){Wx=ZE=!1;var c=0;np!==0&&(zq()&&(c=np),np=0);for(var h=Ao(),g=null,S=Xx;S!==null;){var D=S.next,L=ue(S,h);L===0?(S.next=null,g===null?Xx=D:g.next=D,D===null&&(ip=g)):(g=S,(c!==0||L&3)&&(Wx=!0)),S=D}X(c,!1)}function ue(c,h){for(var g=c.suspendedLanes,S=c.pingedLanes,D=c.expirationTimes,L=c.pendingLanes&-62914561;0<L;){var V=31-sa(L),ie=1<<V,de=D[V];de===-1?(!(ie&g)||ie&S)&&(D[V]=P(ie,h)):de<=h&&(c.expiredLanes|=ie),L&=~ie}if(h=Xi,g=vi,g=B(c,c===h?g:0),S=c.callbackNode,g===0||c===h&&Wi===2||c.cancelPendingCommit!==null)return S!==null&&S!==null&&YE(S),c.callbackNode=null,c.callbackPriority=0;if(!(g&3)||I(c,g)){if(h=g&-g,h===c.callbackPriority)return h;switch(S!==null&&YE(S),ce(g)){case 2:case 8:g=Yj;break;case 32:g=KE;break;case 268435456:g=Kj;break;default:g=KE}return S=Ae.bind(null,c),g=Gx(g,S),c.callbackPriority=h,c.callbackNode=g,h}return S!==null&&S!==null&&YE(S),c.callbackPriority=2,c.callbackNode=null,2}function Ae(c,h){var g=c.callbackNode;if(Jo()&&c.callbackNode!==g)return null;var S=vi;return S=B(c,c===Xi?S:0),S===0?null:(Ex(c,S,h),ue(c,Ao()),c.callbackNode!=null&&c.callbackNode===g?Ae.bind(null,c):null)}function Re(c,h){if(Jo())return null;Ex(c,h,!0)}function we(c){Wq?Yq(function(){zi&6?Gx(rI,c):c()}):Gx(rI,c)}function et(){return np===0&&(np=F()),np}function Ke(c,h){if(E0===null){var g=E0=[];e2=0,sp=et(),rp={status:"pending",value:void 0,then:function(S){g.push(S)}}}return e2++,h.then(lt,lt),h}function lt(){if(--e2===0&&E0!==null){rp!==null&&(rp.status="fulfilled");var c=E0;E0=null,sp=0,rp=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function Vt(c,h){var g=[],S={status:"pending",value:null,reason:null,then:function(D){g.push(D)}};return c.then(function(){S.status="fulfilled",S.value=h;for(var D=0;D<g.length;D++)(0,g[D])(h)},function(D){for(S.status="rejected",S.reason=D,D=0;D<g.length;D++)(0,g[D])(void 0)}),S}function ze(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function xt(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function _t(c,h,g){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,zi&2){var D=S.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),S.pending=h,h=We(c),Me(c,null,g),h}return ui(c,S,h,g),We(c)}function rt(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194176)!==0)){var S=h.lanes;S&=c.pendingLanes,g|=S,h.lanes=g,ae(c,g)}}function se(c,h){var g=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var D=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var V={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};L===null?D=L=V:L=L.next=V,g=g.next}while(g!==null);L===null?D=L=h:L=L.next=h}else D=L=h;g={baseState:S.baseState,firstBaseUpdate:D,lastBaseUpdate:L,shared:S.shared,callbacks:S.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function Be(){if(t2){var c=rp;if(c!==null)throw c}}function tt(c,h,g,S){t2=!1;var D=c.updateQueue;rc=!1;var L=D.firstBaseUpdate,V=D.lastBaseUpdate,ie=D.shared.pending;if(ie!==null){D.shared.pending=null;var de=ie,Ne=de.next;de.next=null,V===null?L=Ne:V.next=Ne,V=de;var Je=c.alternate;Je!==null&&(Je=Je.updateQueue,ie=Je.lastBaseUpdate,ie!==V&&(ie===null?Je.firstBaseUpdate=Ne:ie.next=Ne,Je.lastBaseUpdate=de))}if(L!==null){var ct=D.baseState;V=0,Je=Ne=de=null,ie=L;do{var mt=ie.lane&-536870913,Wt=mt!==ie.lane;if(Wt?(vi&mt)===mt:(S&mt)===mt){mt!==0&&mt===sp&&(t2=!0),Je!==null&&(Je=Je.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Va=c,O0=ie;mt=h;var Xh=g;switch(O0.tag){case 1:if(Va=O0.payload,typeof Va=="function"){ct=Va.call(Xh,ct,mt);break e}ct=Va;break e;case 3:Va.flags=Va.flags&-65537|128;case 0:if(Va=O0.payload,mt=typeof Va=="function"?Va.call(Xh,ct,mt):Va,mt==null)break e;ct=Ze({},ct,mt);break e;case 2:rc=!0}}mt=ie.callback,mt!==null&&(c.flags|=64,Wt&&(c.flags|=8192),Wt=D.callbacks,Wt===null?D.callbacks=[mt]:Wt.push(mt))}else Wt={lane:mt,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Je===null?(Ne=Je=Wt,de=ct):Je=Je.next=Wt,V|=mt;if(ie=ie.next,ie===null){if(ie=D.shared.pending,ie===null)break;Wt=ie,ie=Wt.next,Wt.next=null,D.lastBaseUpdate=Wt,D.shared.pending=null}}while(1);Je===null&&(de=ct),D.baseState=de,D.firstBaseUpdate=Ne,D.lastBaseUpdate=Je,L===null&&(D.shared.lanes=0),lc|=V,c.lanes=V,c.memoizedState=ct}}function ne(c,h){if(typeof c!="function")throw Error(s(191,c));c.call(h)}function je(c,h){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)ne(g[c],h)}function Ee(c,h){if(aa(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var D=g[S];if(!Zj.call(h,D)||!aa(c[D],h[D]))return!1}return!0}function Ue(c){return c=c.status,c==="fulfilled"||c==="rejected"}function at(){}function st(c,h,g){switch(g=c[g],g===void 0?c.push(h):g!==h&&(h.then(at,at),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===C0?Error(s(483)):c;default:if(typeof h.status=="string")h.then(at,at);else{if(c=Xi,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=h,c.status="pending",c.then(function(S){if(h.status==="pending"){var D=h;D.status="fulfilled",D.value=S}},function(S){if(h.status==="pending"){var D=h;D.status="rejected",D.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===C0?Error(s(483)):c}throw ap=h,C0}}function Mt(){if(ap===null)throw Error(s(459));var c=ap;return ap=null,c}function Zt(c){var h=M0;return M0+=1,op===null&&(op=[]),st(op,c,h)}function Di(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function Xt(c,h){throw h.$$typeof===Oe?Error(s(525)):(c=Object.prototype.toString.call(h),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function Sn(c){var h=c._init;return h(c._payload)}function Jn(c){function h(_e,fe){if(c){var Ce=_e.deletions;Ce===null?(_e.deletions=[fe],_e.flags|=16):Ce.push(fe)}}function g(_e,fe){if(!c)return null;for(;fe!==null;)h(_e,fe),fe=fe.sibling;return null}function S(_e){for(var fe=new Map;_e!==null;)_e.key!==null?fe.set(_e.key,_e):fe.set(_e.index,_e),_e=_e.sibling;return fe}function D(_e,fe){return _e=Qo(_e,fe),_e.index=0,_e.sibling=null,_e}function L(_e,fe,Ce){return _e.index=Ce,c?(Ce=_e.alternate,Ce!==null?(Ce=Ce.index,Ce<fe?(_e.flags|=33554434,fe):Ce):(_e.flags|=33554434,fe)):(_e.flags|=1048576,fe)}function V(_e){return c&&_e.alternate===null&&(_e.flags|=33554434),_e}function ie(_e,fe,Ce,Ye){return fe===null||fe.tag!==6?(fe=y(Ce,_e.mode,Ye),fe.return=_e,fe):(fe=D(fe,Ce),fe.return=_e,fe)}function de(_e,fe,Ce,Ye){var wt=Ce.type;return wt===nn?Je(_e,fe,Ce.props.children,Ye,Ce.key):fe!==null&&(fe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Vn&&Sn(wt)===fe.type)?(fe=D(fe,Ce.props),Di(fe,Ce),fe.return=_e,fe):(fe=Kd(Ce.type,Ce.key,Ce.props,null,_e.mode,Ye),Di(fe,Ce),fe.return=_e,fe)}function Ne(_e,fe,Ce,Ye){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ce.containerInfo||fe.stateNode.implementation!==Ce.implementation?(fe=E(Ce,_e.mode,Ye),fe.return=_e,fe):(fe=D(fe,Ce.children||[]),fe.return=_e,fe)}function Je(_e,fe,Ce,Ye,wt){return fe===null||fe.tag!==7?(fe=kl(Ce,_e.mode,Ye,wt),fe.return=_e,fe):(fe=D(fe,Ce),fe.return=_e,fe)}function ct(_e,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=y(""+fe,_e.mode,Ce),fe.return=_e,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case St:return Ce=Kd(fe.type,fe.key,fe.props,null,_e.mode,Ce),Di(Ce,fe),Ce.return=_e,Ce;case Dt:return fe=E(fe,_e.mode,Ce),fe.return=_e,fe;case Vn:var Ye=fe._init;return fe=Ye(fe._payload),ct(_e,fe,Ce)}if(Fx(fe)||r(fe))return fe=kl(fe,_e.mode,Ce,null),fe.return=_e,fe;if(typeof fe.then=="function")return ct(_e,Zt(fe),Ce);if(fe.$$typeof===Pr)return ct(_e,Rd(_e,fe),Ce);Xt(_e,fe)}return null}function mt(_e,fe,Ce,Ye){var wt=fe!==null?fe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return wt!==null?null:ie(_e,fe,""+Ce,Ye);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case St:return Ce.key===wt?de(_e,fe,Ce,Ye):null;case Dt:return Ce.key===wt?Ne(_e,fe,Ce,Ye):null;case Vn:return wt=Ce._init,Ce=wt(Ce._payload),mt(_e,fe,Ce,Ye)}if(Fx(Ce)||r(Ce))return wt!==null?null:Je(_e,fe,Ce,Ye,null);if(typeof Ce.then=="function")return mt(_e,fe,Zt(Ce),Ye);if(Ce.$$typeof===Pr)return mt(_e,fe,Rd(_e,Ce),Ye);Xt(_e,Ce)}return null}function Wt(_e,fe,Ce,Ye,wt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return _e=_e.get(Ce)||null,ie(fe,_e,""+Ye,wt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case St:return _e=_e.get(Ye.key===null?Ce:Ye.key)||null,de(fe,_e,Ye,wt);case Dt:return _e=_e.get(Ye.key===null?Ce:Ye.key)||null,Ne(fe,_e,Ye,wt);case Vn:var sn=Ye._init;return Ye=sn(Ye._payload),Wt(_e,fe,Ce,Ye,wt)}if(Fx(Ye)||r(Ye))return _e=_e.get(Ce)||null,Je(fe,_e,Ye,wt,null);if(typeof Ye.then=="function")return Wt(_e,fe,Ce,Zt(Ye),wt);if(Ye.$$typeof===Pr)return Wt(_e,fe,Ce,Rd(fe,Ye),wt);Xt(fe,Ye)}return null}function Va(_e,fe,Ce,Ye){for(var wt=null,sn=null,Ft=fe,Si=fe=0,gs=null;Ft!==null&&Si<Ce.length;Si++){Ft.index>Si?(gs=Ft,Ft=null):gs=Ft.sibling;var Ai=mt(_e,Ft,Ce[Si],Ye);if(Ai===null){Ft===null&&(Ft=gs);break}c&&Ft&&Ai.alternate===null&&h(_e,Ft),fe=L(Ai,fe,Si),sn===null?wt=Ai:sn.sibling=Ai,sn=Ai,Ft=gs}if(Si===Ce.length)return g(_e,Ft),Ti&&Se(_e,Si),wt;if(Ft===null){for(;Si<Ce.length;Si++)Ft=ct(_e,Ce[Si],Ye),Ft!==null&&(fe=L(Ft,fe,Si),sn===null?wt=Ft:sn.sibling=Ft,sn=Ft);return Ti&&Se(_e,Si),wt}for(Ft=S(Ft);Si<Ce.length;Si++)gs=Wt(Ft,_e,Si,Ce[Si],Ye),gs!==null&&(c&&gs.alternate!==null&&Ft.delete(gs.key===null?Si:gs.key),fe=L(gs,fe,Si),sn===null?wt=gs:sn.sibling=gs,sn=gs);return c&&Ft.forEach(function(cc){return h(_e,cc)}),Ti&&Se(_e,Si),wt}function O0(_e,fe,Ce,Ye){if(Ce==null)throw Error(s(151));for(var wt=null,sn=null,Ft=fe,Si=fe=0,gs=null,Ai=Ce.next();Ft!==null&&!Ai.done;Si++,Ai=Ce.next()){Ft.index>Si?(gs=Ft,Ft=null):gs=Ft.sibling;var cc=mt(_e,Ft,Ai.value,Ye);if(cc===null){Ft===null&&(Ft=gs);break}c&&Ft&&cc.alternate===null&&h(_e,Ft),fe=L(cc,fe,Si),sn===null?wt=cc:sn.sibling=cc,sn=cc,Ft=gs}if(Ai.done)return g(_e,Ft),Ti&&Se(_e,Si),wt;if(Ft===null){for(;!Ai.done;Si++,Ai=Ce.next())Ai=ct(_e,Ai.value,Ye),Ai!==null&&(fe=L(Ai,fe,Si),sn===null?wt=Ai:sn.sibling=Ai,sn=Ai);return Ti&&Se(_e,Si),wt}for(Ft=S(Ft);!Ai.done;Si++,Ai=Ce.next())Ai=Wt(Ft,_e,Si,Ai.value,Ye),Ai!==null&&(c&&Ai.alternate!==null&&Ft.delete(Ai.key===null?Si:Ai.key),fe=L(Ai,fe,Si),sn===null?wt=Ai:sn.sibling=Ai,sn=Ai);return c&&Ft.forEach(function(rX){return h(_e,rX)}),Ti&&Se(_e,Si),wt}function Xh(_e,fe,Ce,Ye){if(typeof Ce=="object"&&Ce!==null&&Ce.type===nn&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case St:e:{for(var wt=Ce.key;fe!==null;){if(fe.key===wt){if(wt=Ce.type,wt===nn){if(fe.tag===7){g(_e,fe.sibling),Ye=D(fe,Ce.props.children),Ye.return=_e,_e=Ye;break e}}else if(fe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Vn&&Sn(wt)===fe.type){g(_e,fe.sibling),Ye=D(fe,Ce.props),Di(Ye,Ce),Ye.return=_e,_e=Ye;break e}g(_e,fe);break}else h(_e,fe);fe=fe.sibling}Ce.type===nn?(Ye=kl(Ce.props.children,_e.mode,Ye,Ce.key),Ye.return=_e,_e=Ye):(Ye=Kd(Ce.type,Ce.key,Ce.props,null,_e.mode,Ye),Di(Ye,Ce),Ye.return=_e,_e=Ye)}return V(_e);case Dt:e:{for(wt=Ce.key;fe!==null;){if(fe.key===wt)if(fe.tag===4&&fe.stateNode.containerInfo===Ce.containerInfo&&fe.stateNode.implementation===Ce.implementation){g(_e,fe.sibling),Ye=D(fe,Ce.children||[]),Ye.return=_e,_e=Ye;break e}else{g(_e,fe);break}else h(_e,fe);fe=fe.sibling}Ye=E(Ce,_e.mode,Ye),Ye.return=_e,_e=Ye}return V(_e);case Vn:return wt=Ce._init,Ce=wt(Ce._payload),Xh(_e,fe,Ce,Ye)}if(Fx(Ce))return Va(_e,fe,Ce,Ye);if(r(Ce)){if(wt=r(Ce),typeof wt!="function")throw Error(s(150));return Ce=wt.call(Ce),O0(_e,fe,Ce,Ye)}if(typeof Ce.then=="function")return Xh(_e,fe,Zt(Ce),Ye);if(Ce.$$typeof===Pr)return Xh(_e,fe,Rd(_e,Ce),Ye);Xt(_e,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,fe!==null&&fe.tag===6?(g(_e,fe.sibling),Ye=D(fe,Ce),Ye.return=_e,_e=Ye):(g(_e,fe),Ye=y(Ce,_e.mode,Ye),Ye.return=_e,_e=Ye),V(_e)):g(_e,fe)}return function(_e,fe,Ce,Ye){try{M0=0;var wt=Xh(_e,fe,Ce,Ye);return op=null,wt}catch(Ft){if(Ft===C0)throw Ft;var sn=t(29,Ft,null,_e.mode);return sn.lanes=Ye,sn.return=_e,sn}finally{}}}function Th(c,h){c=Yl,T(Kx,c),T(lp,h),Yl=c|h.baseLanes}function Rl(){T(Kx,Yl),T(lp,lp.current)}function hr(){Yl=Kx.current,v(lp),v(Kx)}function ws(c){var h=c.alternate;T(ts,ts.current&1),T(za,c),$o===null&&(h===null||lp.current!==null||h.memoizedState!==null)&&($o=c)}function Gn(c){if(c.tag===22){if(T(ts,ts.current),T(za,c),$o===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&($o=c)}}else ea()}function ea(){T(ts,ts.current),T(za,za.current)}function Fs(c){v(za),$o===c&&($o=null),v(ts)}function Ba(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||qE(g)||jE(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function ci(){throw Error(s(321))}function mo(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!aa(c[g],h[g]))return!1;return!0}function yi(c,h,g,S,D,L){return ac=L,ei=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,kt.H=c===null||c.memoizedState===null?Hh:oc,kh=!1,L=g(S,D),kh=!1,up&&(L=Bl(h,g,S,D)),Sd(c),L}function Sd(c){kt.H=el;var h=Hi!==null&&Hi.next!==null;if(ac=0,qn=Hi=ei=null,Jx=!1,w0=0,cp=null,h)throw Error(s(300));c===null||ps||(c=c.dependencies,c!==null&&Dd(c)&&(ps=!0))}function Bl(c,h,g,S){ei=c;var D=0;do{if(up&&(cp=null),w0=0,up=!1,25<=D)throw Error(s(301));if(D+=1,qn=Hi=null,c.updateQueue!=null){var L=c.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}kt.H=zh,L=h(g,S)}while(up);return L}function Fu(){var c=kt.H,h=c.useState()[0];return h=typeof h.then=="function"?xe(h):h,c=c.useState()[0],(Hi!==null?Hi.memoizedState:null)!==c&&(ei.flags|=1024),h}function Sh(){var c=Qx!==0;return Qx=0,c}function ta(c,h,g){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~g}function Ri(c){if(Jx){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Jx=!1}ac=0,qn=Hi=ei=null,up=!1,w0=Qx=0,cp=null}function z(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?ei.memoizedState=qn=c:qn=qn.next=c,qn}function oe(){if(Hi===null){var c=ei.alternate;c=c!==null?c.memoizedState:null}else c=Hi.next;var h=qn===null?ei.memoizedState:qn.next;if(h!==null)qn=h,Hi=c;else{if(c===null)throw ei.alternate===null?Error(s(467)):Error(s(310));Hi=c,c={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},qn===null?ei.memoizedState=qn=c:qn=qn.next=c}return qn}function xe(c){var h=w0;return w0+=1,cp===null&&(cp=[]),c=st(cp,c,h),h=ei,(qn===null?h.memoizedState:qn.next)===null&&(h=h.alternate,kt.H=h===null||h.memoizedState===null?Hh:oc),c}function be(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return xe(c);if(c.$$typeof===Pr)return cs(c)}throw Error(s(438,String(c)))}function he(c){var h=null,g=ei.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=ei.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(D){return D.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=n2(),ei.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(c),S=0;S<c;S++)g[S]=wq;return h.index++,g}function He(c,h){return typeof h=="function"?h(c):h}function it(c){var h=oe();return ut(h,Hi,c)}function ut(c,h,g){var S=c.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=g;var D=c.baseQueue,L=S.pending;if(L!==null){if(D!==null){var V=D.next;D.next=L.next,L.next=V}h.baseQueue=D=L,S.pending=null}if(L=c.baseState,D===null)c.memoizedState=L;else{h=D.next;var ie=V=null,de=null,Ne=h,Je=!1;do{var ct=Ne.lane&-536870913;if(ct!==Ne.lane?(vi&ct)===ct:(ac&ct)===ct){var mt=Ne.revertLane;if(mt===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),ct===sp&&(Je=!0);else if((ac&mt)===mt){Ne=Ne.next,mt===sp&&(Je=!0);continue}else ct={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(ie=de=ct,V=L):de=de.next=ct,ei.lanes|=mt,lc|=mt;ct=Ne.action,kh&&g(L,ct),L=Ne.hasEagerState?Ne.eagerState:g(L,ct)}else mt={lane:ct,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(ie=de=mt,V=L):de=de.next=mt,ei.lanes|=ct,lc|=ct;Ne=Ne.next}while(Ne!==null&&Ne!==h);if(de===null?V=L:de.next=ie,!aa(L,c.memoizedState)&&(ps=!0,Je&&(g=rp,g!==null)))throw g;c.memoizedState=L,c.baseState=V,c.baseQueue=de,S.lastRenderedState=L}return D===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function pt(c){var h=oe(),g=h.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=c;var S=g.dispatch,D=g.pending,L=h.memoizedState;if(D!==null){g.pending=null;var V=D=D.next;do L=c(L,V.action),V=V.next;while(V!==D);aa(L,h.memoizedState)||(ps=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),g.lastRenderedState=L}return[L,S]}function It(c,h,g){var S=ei,D=oe(),L=Ti;if(L){if(g===void 0)throw Error(s(407));g=g()}else g=h();var V=!aa((Hi||D).memoizedState,g);if(V&&(D.memoizedState=g,ps=!0),D=D.queue,Ed(Kt.bind(null,S,D,c),[c]),D.getSnapshot!==h||V||qn!==null&&qn.memoizedState.tag&1){if(S.flags|=2048,fr(9,Tt.bind(null,S,D,g,h),{destroy:void 0},null),Xi===null)throw Error(s(349));L||ac&60||Lt(S,h,g)}return g}function Lt(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=ei.updateQueue,h===null?(h=n2(),ei.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function Tt(c,h,g,S){h.value=g,h.getSnapshot=S,hi(h)&&Li(c)}function Kt(c,h,g){return g(function(){hi(h)&&Li(c)})}function hi(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!aa(c,g)}catch{return!0}}function Li(c){var h=Ie(c,2);h!==null&&Rs(h,c,2)}function bi(c){var h=z();if(typeof c=="function"){var g=c;if(c=g(),kh){Q(!0);try{g()}finally{Q(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:He,lastRenderedState:c},h}function Jt(c,h,g,S){return c.baseState=g,ut(c,Hi,typeof S=="function"?S:He)}function At(c,h,g,S,D){if(Ah(c))throw Error(s(485));if(c=h.action,c!==null){var L={payload:D,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){L.listeners.push(V)}};kt.T!==null?g(!0):L.isTransition=!1,S(L),g=h.pending,g===null?(L.next=h.pending=L,An(h,L)):(L.next=g.next,h.pending=g.next=L)}}function An(c,h){var g=h.action,S=h.payload,D=c.state;if(h.isTransition){var L=kt.T,V={};kt.T=V;try{var ie=g(D,S),de=kt.S;de!==null&&de(V,ie),fi(c,h,ie)}catch(Ne){La(c,h,Ne)}finally{kt.T=L}}else try{L=g(D,S),fi(c,h,L)}catch(Ne){La(c,h,Ne)}}function fi(c,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){ks(c,h,S)},function(S){return La(c,h,S)}):ks(c,h,g)}function ks(c,h,g){h.status="fulfilled",h.value=g,en(h),c.state=g,h=c.pending,h!==null&&(g=h.next,g===h?c.pending=null:(g=g.next,h.next=g,An(c,g)))}function La(c,h,g){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,en(h),h=h.next;while(h!==S)}c.action=null}function en(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function ia(c,h){return h}function Ii(c,h){if(Ti){var g=Xi.formState;if(g!==null){e:{var S=ei;if(Ti){if(Xs){var D=_j(Xs,Zo);if(D){Xs=WL(D),S=xj(D);break e}}gt(S)}S=!1}S&&(h=g[0])}}g=z(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:h},g.queue=S,g=Yg.bind(null,ei,S),S.dispatch=g,S=bi(!1);var L=Kg.bind(null,ei,!1,S.queue);return S=z(),D={state:h,dispatch:null,action:c,pending:null},S.queue=D,g=At.bind(null,ei,D,L,g),D.dispatch=g,S.memoizedState=c,[h,g,!1]}function Qn(c){var h=oe();return Zn(h,Hi,c)}function Zn(c,h,g){h=ut(c,h,ia)[0],c=it(He)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?xe(h):h;var S=oe(),D=S.queue,L=D.dispatch;return g!==S.memoizedState&&(ei.flags|=2048,fr(9,Oi.bind(null,D,g),{destroy:void 0},null)),[h,L,c]}function Oi(c,h){c.action=h}function $n(c){var h=oe(),g=Hi;if(g!==null)return Zn(h,g,c);oe(),h=h.memoizedState,g=oe();var S=g.queue.dispatch;return g.memoizedState=c,[h,S,!1]}function fr(c,h,g,S){return c={tag:c,create:h,inst:g,deps:S,next:null},h=ei.updateQueue,h===null&&(h=n2(),ei.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=c.next=c:(S=g.next,g.next=c,c.next=S,h.lastEffect=c),c}function Hs(){return oe().memoizedState}function Ll(c,h,g,S){var D=z();ei.flags|=c,D.memoizedState=fr(1|h,g,{destroy:void 0},S===void 0?null:S)}function go(c,h,g,S){var D=oe();S=S===void 0?null:S;var L=D.memoizedState.inst;Hi!==null&&S!==null&&mo(S,Hi.memoizedState.deps)?D.memoizedState=fr(h,g,L,S):(ei.flags|=c,D.memoizedState=fr(1|h,g,L,S))}function Ad(c,h){Ll(8390656,8,c,h)}function Ed(c,h){go(2048,8,c,h)}function Cd(c,h){return go(4,2,c,h)}function Y_(c,h){return go(4,4,c,h)}function K_(c,h){if(typeof h=="function"){c=c();var g=h(c);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function J_(c,h,g){g=g!=null?g.concat([c]):null,go(4,4,K_.bind(null,h,c),g)}function ku(){}function jg(c,h){var g=oe();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&mo(h,S[1])?S[0]:(g.memoizedState=[c,h],c)}function Q_(c,h){var g=oe();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&mo(h,S[1]))return S[0];if(S=c(),kh){Q(!0);try{c()}finally{Q(!1)}}return g.memoizedState=[S,h],S}function Md(c,h,g){return g===void 0||ac&1073741824?c.memoizedState=h:(c.memoizedState=g,c=Ax(),ei.lanes|=c,lc|=c,g)}function Z_(c,h,g,S){return aa(g,h)?g:lp.current!==null?(c=Md(c,g,S),aa(c,h)||(ps=!0),c):ac&42?(c=Ax(),ei.lanes|=c,lc|=c,h):(ps=!0,c.memoizedState=g)}function Xg(c,h,g,S,D){var L=Ph();Ur(L!==0&&8>L?L:8);var V=kt.T,ie={};kt.T=ie,Kg(c,!1,h,g);try{var de=D(),Ne=kt.S;if(Ne!==null&&Ne(ie,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Je=Vt(de,S);Gu(c,h,Je,gr(c))}else Gu(c,h,S,gr(c))}catch(ct){Gu(c,h,{then:function(){},status:"rejected",reason:ct},gr())}finally{Ur(L),kt.T=V}}function $_(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:Jd,baseState:Jd,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:He,lastRenderedState:Jd},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:He,lastRenderedState:g},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function Hu(){return cs(Uh)}function zu(){return oe().memoizedState}function Wg(){return oe().memoizedState}function BE(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var g=gr();c=xt(g);var S=_t(h,c,g);S!==null&&(Rs(S,h,g),rt(S,h,g)),h={cache:Wu()},c.payload=h;return}h=h.return}}function LE(c,h,g){var S=gr();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Ah(c)?ex(h,g):(g=Pe(c,h,g,S),g!==null&&(Rs(g,c,S),tx(g,h,S)))}function Yg(c,h,g){var S=gr();Gu(c,h,g,S)}function Gu(c,h,g,S){var D={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ah(c))ex(h,D);else{var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var V=h.lastRenderedState,ie=L(V,g);if(D.hasEagerState=!0,D.eagerState=ie,aa(ie,V))return ui(c,h,D,0),Xi===null&&te(),!1}catch{}finally{}if(g=Pe(c,h,D,S),g!==null)return Rs(g,c,S),tx(g,h,S),!0}return!1}function Kg(c,h,g,S){if(S={lane:2,revertLane:et(),action:S,hasEagerState:!1,eagerState:null,next:null},Ah(c)){if(h)throw Error(s(479))}else h=Pe(c,g,S,2),h!==null&&Rs(h,c,2)}function Ah(c){var h=c.alternate;return c===ei||h!==null&&h===ei}function ex(c,h){up=Jx=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function tx(c,h,g){if(g&4194176){var S=h.lanes;S&=c.pendingLanes,g|=S,h.lanes=g,ae(c,g)}}function Jg(c,h,g,S){h=c.memoizedState,g=g(S,h),g=g==null?h:Ze({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}function ix(c,h,g,S,D,L,V){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,L,V):h.prototype&&h.prototype.isPureReactComponent?!Ee(g,S)||!Ee(D,L):!0}function nx(c,h,g,S){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==c&&s2.enqueueReplaceState(h,h.state,null)}function Il(c,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(c=c.defaultProps){g===h&&(g=Ze({},g));for(var D in c)g[D]===void 0&&(g[D]=c[D])}return g}function Vu(c,h){try{var g=c.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function sx(c,h,g){try{var S=c.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function wd(c,h,g){return g=xt(g),g.tag=3,g.payload={element:null},g.callback=function(){Vu(c,h)},g}function Eh(c){return c=xt(c),c.tag=3,c}function rx(c,h,g,S){var D=g.type.getDerivedStateFromError;if(typeof D=="function"){var L=S.value;c.payload=function(){return D(L)},c.callback=function(){sx(h,g,S)}}var V=g.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(c.callback=function(){sx(h,g,S),typeof D!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var ie=S.stack;this.componentDidCatch(S.value,{componentStack:ie!==null?ie:""})})}function IE(c,h,g,S,D){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&Yo(h,g,D,!0),g=za.current,g!==null){switch(g.tag){case 13:return $o===null?qd():g.alternate===null&&Mn===0&&(Mn=3),g.flags&=-257,g.flags|=65536,g.lanes=D,S===Yx?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),So(c,S,D)),!1;case 22:return g.flags|=65536,S===Yx?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),So(c,S,D)),!1}throw Error(s(435,g.tag))}return So(c,S,D),qd(),!1}if(Ti)return h=za.current,h!==null?(!(h.flags&65536)&&(h.flags|=256),h.flags|=65536,h.lanes=D,S!==JE&&(c=Error(s(422),{cause:S}),Ct(pe(c,g)))):(S!==JE&&(h=Error(s(423),{cause:S}),Ct(pe(h,g))),c=c.current.alternate,c.flags|=65536,D&=-D,c.lanes|=D,S=pe(S,g),D=wd(c.stateNode,S,D),se(c,D),Mn!==4&&(Mn=2)),!1;var L=Error(s(520),{cause:S});if(L=pe(L,g),R0===null?R0=[L]:R0.push(L),Mn!==4&&(Mn=2),h===null)return!0;S=pe(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,c=D&-D,g.lanes|=c,c=wd(g.stateNode,S,c),se(g,c),!1;case 1:if(h=g.type,L=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(uc===null||!uc.has(L))))return g.flags|=65536,D&=-D,g.lanes|=D,D=Eh(D),rx(D,c,g,S),se(g,D),!1}g=g.return}while(g!==null);return!1}function es(c,h,g,S){h.child=c===null?oI(h,null,g,S):Fh(h,c.child,g,S)}function ax(c,h,g,S,D){g=g.render;var L=h.ref;if("ref"in S){var V={};for(var ie in S)ie!=="ref"&&(V[ie]=S[ie])}else V=S;return vo(h),S=yi(c,h,g,V,L,D),ie=Sh(),c!==null&&!ps?(ta(c,h,D),Ds(c,h,D)):(Ti&&ie&&qe(h),h.flags|=1,es(c,h,S,D),h.child)}function ox(c,h,g,S,D){if(c===null){var L=g.type;return typeof L=="function"&&!v0(L)&&L.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=L,Ch(c,h,L,S,D)):(c=Kd(g.type,null,S,h,h.mode,D),c.ref=h.ref,c.return=h,h.child=c)}if(L=c.child,!t0(c,D)){var V=L.memoizedProps;if(g=g.compare,g=g!==null?g:Ee,g(V,S)&&c.ref===h.ref)return Ds(c,h,D)}return h.flags|=1,c=Qo(L,S),c.ref=h.ref,c.return=h,h.child=c}function Ch(c,h,g,S,D){if(c!==null){var L=c.memoizedProps;if(Ee(L,S)&&c.ref===h.ref)if(ps=!1,h.pendingProps=S=L,t0(c,D))c.flags&131072&&(ps=!0);else return h.lanes=c.lanes,Ds(c,h,D)}return dr(c,h,g,S,D)}function qu(c,h,g){var S=h.pendingProps,D=S.children,L=(h.stateNode._pendingVisibility&2)!==0,V=c!==null?c.memoizedState:null;if(Xo(c,h),S.mode==="hidden"||L){if(h.flags&128){if(S=V!==null?V.baseLanes|g:g,c!==null){for(D=h.child=c.child,L=0;D!==null;)L=L|D.lanes|D.childLanes,D=D.sibling;h.childLanes=L&~S}else h.childLanes=0,h.child=null;return ju(c,h,S,g)}if(g&536870912)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Bd(h,V!==null?V.cachePool:null),V!==null?Th(h,V):Rl(),Gn(h);else return h.lanes=h.childLanes=536870912,ju(c,h,V!==null?V.baseLanes|g:g,g)}else V!==null?(Bd(h,V.cachePool),Th(h,V),ea(),h.memoizedState=null):(c!==null&&Bd(h,null),Rl(),ea());return es(c,h,D,g),h.child}function ju(c,h,g,S){var D=a0();return D=D===null?null:{parent:Gl?En._currentValue:En._currentValue2,pool:D},h.memoizedState={baseLanes:g,cachePool:D},c!==null&&Bd(h,null),Rl(),Gn(h),c!==null&&Yo(c,h,S,!0),null}function Xo(c,h){var g=h.ref;if(g===null)c!==null&&c.ref!==null&&(h.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(c===null||c.ref!==g)&&(h.flags|=2097664)}}function dr(c,h,g,S,D){return vo(h),g=yi(c,h,g,S,void 0,D),S=Sh(),c!==null&&!ps?(ta(c,h,D),Ds(c,h,D)):(Ti&&S&&qe(h),h.flags|=1,es(c,h,g,D),h.child)}function Ia(c,h,g,S,D,L){return vo(h),h.updateQueue=null,g=Bl(h,S,g,D),Sd(c),S=Sh(),c!==null&&!ps?(ta(c,h,L),Ds(c,h,L)):(Ti&&S&&qe(h),h.flags|=1,es(c,h,g,L),h.child)}function Mh(c,h,g,S,D){if(vo(h),h.stateNode===null){var L=Zd,V=g.contextType;typeof V=="object"&&V!==null&&(L=cs(V)),L=new g(S,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=s2,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=S,L.state=h.memoizedState,L.refs={},ze(h),V=g.contextType,L.context=typeof V=="object"&&V!==null?cs(V):Zd,L.state=h.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(Jg(h,g,V,S),L.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(V=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),V!==L.state&&s2.enqueueReplaceState(L,L.state,null),tt(h,S,L,D),Be(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(c===null){L=h.stateNode;var ie=h.memoizedProps,de=Il(g,ie);L.props=de;var Ne=L.context,Je=g.contextType;V=Zd,typeof Je=="object"&&Je!==null&&(V=cs(Je));var ct=g.getDerivedStateFromProps;Je=typeof ct=="function"||typeof L.getSnapshotBeforeUpdate=="function",ie=h.pendingProps!==ie,Je||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ie||Ne!==V)&&nx(h,L,S,V),rc=!1;var mt=h.memoizedState;L.state=mt,tt(h,S,L,D),Be(),Ne=h.memoizedState,ie||mt!==Ne||rc?(typeof ct=="function"&&(Jg(h,g,ct,S),Ne=h.memoizedState),(de=rc||ix(h,g,de,S,mt,Ne,V))?(Je||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Ne),L.props=S,L.state=Ne,L.context=V,S=de):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{L=h.stateNode,Ve(c,h),V=h.memoizedProps,Je=Il(g,V),L.props=Je,ct=h.pendingProps,mt=L.context,Ne=g.contextType,de=Zd,typeof Ne=="object"&&Ne!==null&&(de=cs(Ne)),ie=g.getDerivedStateFromProps,(Ne=typeof ie=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==ct||mt!==de)&&nx(h,L,S,de),rc=!1,mt=h.memoizedState,L.state=mt,tt(h,S,L,D),Be();var Wt=h.memoizedState;V!==ct||mt!==Wt||rc||c!==null&&c.dependencies!==null&&Dd(c.dependencies)?(typeof ie=="function"&&(Jg(h,g,ie,S),Wt=h.memoizedState),(Je=rc||ix(h,g,Je,S,mt,Wt,de)||c!==null&&c.dependencies!==null&&Dd(c.dependencies))?(Ne||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(S,Wt,de),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(S,Wt,de)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||V===c.memoizedProps&&mt===c.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&mt===c.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=Wt),L.props=S,L.state=Wt,L.context=de,S=Je):(typeof L.componentDidUpdate!="function"||V===c.memoizedProps&&mt===c.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&mt===c.memoizedState||(h.flags|=1024),S=!1)}return L=S,Xo(c,h),S=(h.flags&128)!==0,L||S?(L=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,c!==null&&S?(h.child=Fh(h,c.child,null,D),h.child=Fh(h,null,g,D)):es(c,h,g,D),h.memoizedState=L.state,c=h.child):c=Ds(c,h,D),c}function Qg(c,h,g,S){return Ut(),h.flags|=256,es(c,h,g,S),h.child}function Zg(c){return{baseLanes:c,cachePool:Ld()}}function $g(c,h,g){return c=c!==null?c.childLanes&~g:0,h&&(c|=Ga),c}function lx(c,h,g){var S=h.pendingProps,D=!1,L=(h.flags&128)!==0,V;if((V=L)||(V=c!==null&&c.memoizedState===null?!1:(ts.current&2)!==0),V&&(D=!0,h.flags&=-129),V=(h.flags&32)!==0,h.flags&=-33,c===null){if(Ti){if(D?ws(h):ea(),Ti){var ie=Xs,de;(de=ie)&&(ie=Ej(ie,Zo),ie!==null?(h.memoizedState={dehydrated:ie,treeContext:Nh!==null?{id:Vl,overflow:ql}:null,retryLane:536870912},de=t(18,null,null,0),de.stateNode=ie,de.return=h,h.child=de,vr=h,Xs=null,de=!0):de=!1),de||gt(h)}if(ie=h.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return jE(ie)?h.lanes=16:h.lanes=536870912,null;Fs(h)}return ie=S.children,S=S.fallback,D?(ea(),D=h.mode,ie=wh({mode:"hidden",children:ie},D),S=kl(S,D,g,null),ie.return=h,S.return=h,ie.sibling=S,h.child=ie,D=h.child,D.memoizedState=Zg(g),D.childLanes=$g(c,V,g),h.memoizedState=r2,S):(ws(h),e0(h,ie))}if(de=c.memoizedState,de!==null&&(ie=de.dehydrated,ie!==null)){if(L)h.flags&256?(ws(h),h.flags&=-257,h=Dh(c,h,g)):h.memoizedState!==null?(ea(),h.child=c.child,h.flags|=128,h=null):(ea(),D=S.fallback,ie=h.mode,S=wh({mode:"visible",children:S.children},ie),D=kl(D,ie,g,null),D.flags|=2,S.return=h,D.return=h,S.sibling=D,h.child=S,Fh(h,c.child,null,g),S=h.child,S.memoizedState=Zg(g),S.childLanes=$g(c,V,g),h.memoizedState=r2,h=D);else if(ws(h),jE(ie))V=yj(ie).digest,S=Error(s(419)),S.stack="",S.digest=V,Ct({value:S,source:null,stack:null}),h=Dh(c,h,g);else if(ps||Yo(c,h,g,!1),V=(g&c.childLanes)!==0,ps||V){if(V=Xi,V!==null){if(S=g&-g,S&42)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=S&(V.suspendedLanes|g)?0:S,S!==0&&S!==de.retryLane)throw de.retryLane=S,Ie(c,S),Rs(V,c,S),uI}qE(ie)||qd(),h=Dh(c,h,g)}else qE(ie)?(h.flags|=128,h.child=c.child,h=NE.bind(null,c),vj(ie,h),h=null):(c=de.treeContext,Ua&&(Xs=Tj(ie),vr=h,Ti=!0,Eo=null,Zo=!1,c!==null&&(Fa[ka++]=Vl,Fa[ka++]=ql,Fa[ka++]=Nh,Vl=c.id,ql=c.overflow,Nh=h)),h=e0(h,S.children),h.flags|=4096);return h}return D?(ea(),D=S.fallback,ie=h.mode,de=c.child,L=de.sibling,S=Qo(de,{mode:"hidden",children:S.children}),S.subtreeFlags=de.subtreeFlags&31457280,L!==null?D=Qo(L,D):(D=kl(D,ie,g,null),D.flags|=2),D.return=h,S.return=h,S.sibling=D,h.child=S,S=D,D=h.child,ie=c.child.memoizedState,ie===null?ie=Zg(g):(de=ie.cachePool,de!==null?(L=Gl?En._currentValue:En._currentValue2,de=de.parent!==L?{parent:L,pool:L}:de):de=Ld(),ie={baseLanes:ie.baseLanes|g,cachePool:de}),D.memoizedState=ie,D.childLanes=$g(c,V,g),h.memoizedState=r2,S):(ws(h),g=c.child,c=g.sibling,g=Qo(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,c!==null&&(V=h.deletions,V===null?(h.deletions=[c],h.flags|=16):V.push(c)),h.child=g,h.memoizedState=null,g)}function e0(c,h){return h=wh({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function wh(c,h){return _0(c,h,0,null)}function Dh(c,h,g){return Fh(h,c.child,null,g),c=e0(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Xu(c,h,g){c.lanes|=h;var S=c.alternate;S!==null&&(S.lanes|=h),n0(c.return,h,g)}function Wo(c,h,g,S,D){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:D}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=g,L.tailMode=D)}function Rh(c,h,g){var S=h.pendingProps,D=S.revealOrder,L=S.tail;if(es(c,h,S.children,g),S=ts.current,S&2)S=S&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Xu(c,g,h);else if(c.tag===19)Xu(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(T(ts,S),D){case"forwards":for(g=h.child,D=null;g!==null;)c=g.alternate,c!==null&&Ba(c)===null&&(D=g),g=g.sibling;g=D,g===null?(D=h.child,h.child=null):(D=g.sibling,g.sibling=null),Wo(h,!1,D,g,L);break;case"backwards":for(g=null,D=h.child,h.child=null;D!==null;){if(c=D.alternate,c!==null&&Ba(c)===null){h.child=D;break}c=D.sibling,D.sibling=g,g=D,D=c}Wo(h,!0,g,null,L);break;case"together":Wo(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Ds(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),lc|=h.lanes,!(g&h.childLanes))if(c!==null){if(Yo(c,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(s(153));if(h.child!==null){for(c=h.child,g=Qo(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Qo(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function t0(c,h){return c.lanes&h?!0:(c=c.dependencies,!!(c!==null&&Dd(c)))}function ux(c,h,g){switch(h.tag){case 3:me(h,h.stateNode.containerInfo),Oa(h,En,c.memoizedState.cache),Ut();break;case 27:case 5:nt(h);break;case 4:me(h,h.stateNode.containerInfo);break;case 10:Oa(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(ws(h),h.flags|=128,null):g&h.child.childLanes?lx(c,h,g):(ws(h),c=Ds(c,h,g),c!==null?c.sibling:null);ws(h);break;case 19:var D=(c.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(Yo(c,h,g,!1),S=(g&h.childLanes)!==0),D){if(S)return Rh(c,h,g);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),T(ts,ts.current),S)break;return null;case 22:case 23:return h.lanes=0,qu(c,h,g);case 24:Oa(h,En,c.memoizedState.cache)}return Ds(c,h,g)}function i0(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps)ps=!0;else{if(!t0(c,g)&&!(h.flags&128))return ps=!1,ux(c,h,g);ps=!!(c.flags&131072)}else ps=!1,Ti&&h.flags&1048576&&Le(h,qx,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var S=h.elementType,D=S._init;if(S=D(S._payload),h.type=S,typeof S=="function")v0(S)?(c=Il(S,c),h.tag=1,h=Mh(null,h,S,c,g)):(h.tag=0,h=dr(null,h,S,c,g));else{if(S!=null){if(D=S.$$typeof,D===Hl){h.tag=11,h=ax(null,h,S,c,g);break e}else if(D===zl){h.tag=14,h=ox(null,h,S,c,g);break e}}throw h=a(S)||S,Error(s(306,h,""))}}return h;case 0:return dr(c,h,h.type,h.pendingProps,g);case 1:return S=h.type,D=Il(S,h.pendingProps),Mh(c,h,S,D,g);case 3:e:{if(me(h,h.stateNode.containerInfo),c===null)throw Error(s(387));var L=h.pendingProps;D=h.memoizedState,S=D.element,Ve(c,h),tt(h,L,null,g);var V=h.memoizedState;if(L=V.cache,Oa(h,En,L),L!==D.cache&&s0(h,[En],g,!0),Be(),L=V.element,Ua&&D.isDehydrated)if(D={element:L,isDehydrated:!1,cache:V.cache},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){h=Qg(c,h,L,g);break e}else if(L!==S){S=pe(Error(s(424)),h),Ct(S),h=Qg(c,h,L,g);break e}else for(Ua&&(Xs=bj(h.stateNode.containerInfo),vr=h,Ti=!0,Eo=null,Zo=!0),g=oI(h,null,L,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ut(),L===S){h=Ds(c,h,g);break e}es(c,h,L,g)}h=h.child}return h;case 26:if(Na)return Xo(c,h),c===null?(g=QL(h.type,null,h.pendingProps,null))?h.memoizedState=g:Ti||(h.stateNode=Nj(h.type,h.pendingProps,sc.current,h)):h.memoizedState=QL(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:if(js)return nt(h),c===null&&js&&Ti&&(S=h.stateNode=nI(h.type,h.pendingProps,sc.current,Ls.current,!1),vr=h,Zo=!0,Xs=YL(S)),S=h.pendingProps.children,c!==null||Ti?es(c,h,S,g):h.child=Fh(h,null,S,g),Xo(c,h),h.child;case 5:return c===null&&Ti&&(Oj(h.type,h.pendingProps,Ls.current),(D=S=Xs)&&(S=Sj(S,h.type,h.pendingProps,Zo),S!==null?(h.stateNode=S,vr=h,Xs=YL(S),Zo=!1,D=!0):D=!1),D||gt(h)),nt(h),D=h.type,L=h.pendingProps,V=c!==null?c.memoizedProps:null,S=L.children,kx(D,L)?S=null:V!==null&&kx(D,V)&&(h.flags|=32),h.memoizedState!==null&&(D=yi(c,h,Fu,null,null,g),Gl?Uh._currentValue=D:Uh._currentValue2=D),Xo(c,h),es(c,h,S,g),h.child;case 6:return c===null&&Ti&&(Pj(h.pendingProps,Ls.current),(c=g=Xs)&&(g=Aj(g,h.pendingProps,Zo),g!==null?(h.stateNode=g,vr=h,Xs=null,c=!0):c=!1),c||gt(h)),null;case 13:return lx(c,h,g);case 4:return me(h,h.stateNode.containerInfo),S=h.pendingProps,c===null?h.child=Fh(h,null,S,g):es(c,h,S,g),h.child;case 11:return ax(c,h,h.type,h.pendingProps,g);case 7:return es(c,h,h.pendingProps,g),h.child;case 8:return es(c,h,h.pendingProps.children,g),h.child;case 12:return es(c,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,Oa(h,h.type,S.value),es(c,h,S.children,g),h.child;case 9:return D=h.type._context,S=h.pendingProps.children,vo(h),D=cs(D),S=S(D),h.flags|=1,es(c,h,S,g),h.child;case 14:return ox(c,h,h.type,h.pendingProps,g);case 15:return Ch(c,h,h.type,h.pendingProps,g);case 19:return Rh(c,h,g);case 22:return qu(c,h,g);case 24:return vo(h),S=cs(En),c===null?(D=a0(),D===null&&(D=Xi,L=Wu(),D.pooledCache=L,L.refCount++,L!==null&&(D.pooledCacheLanes|=g),D=L),h.memoizedState={parent:S,cache:D},ze(h),Oa(h,En,D)):(c.lanes&g&&(Ve(c,h),tt(h,null,null,g),Be()),D=c.memoizedState,L=h.memoizedState,D.parent!==S?(D={parent:S,cache:S},h.memoizedState=D,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=D),Oa(h,En,S)):(S=L.cache,Oa(h,En,S),S!==D.cache&&s0(h,[En],g,!0))),es(c,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function Oa(c,h,g){Gl?(T(Zx,h._currentValue),h._currentValue=g):(T(Zx,h._currentValue2),h._currentValue2=g)}function yo(c){var h=Zx.current;Gl?c._currentValue=h:c._currentValue2=h,v(Zx)}function n0(c,h,g){for(;c!==null;){var S=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),c===g)break;c=c.return}}function s0(c,h,g,S){var D=c.child;for(D!==null&&(D.return=c);D!==null;){var L=D.dependencies;if(L!==null){var V=D.child;L=L.firstContext;e:for(;L!==null;){var ie=L;L=D;for(var de=0;de<h.length;de++)if(ie.context===h[de]){L.lanes|=g,ie=L.alternate,ie!==null&&(ie.lanes|=g),n0(L.return,g,c),S||(V=null);break e}L=ie.next}}else if(D.tag===18){if(V=D.return,V===null)throw Error(s(341));V.lanes|=g,L=V.alternate,L!==null&&(L.lanes|=g),n0(V,g,c),V=null}else V=D.child;if(V!==null)V.return=D;else for(V=D;V!==null;){if(V===c){V=null;break}if(D=V.sibling,D!==null){D.return=V.return,V=D;break}V=V.return}D=V}}function Yo(c,h,g,S){c=null;for(var D=h,L=!1;D!==null;){if(!L){if(D.flags&524288)L=!0;else if(D.flags&262144)break}if(D.tag===10){var V=D.alternate;if(V===null)throw Error(s(387));if(V=V.memoizedProps,V!==null){var ie=D.type;aa(D.pendingProps.value,V.value)||(c!==null?c.push(ie):c=[ie])}}else if(D===jx.current){if(V=D.alternate,V===null)throw Error(s(387));V.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(c!==null?c.push(Uh):c=[Uh])}D=D.return}c!==null&&s0(h,c,g,S),h.flags|=262144}function Dd(c){for(c=c.firstContext;c!==null;){var h=c.context;if(!aa(Gl?h._currentValue:h._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function vo(c){Gh=c,jl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function cs(c){return r0(Gh,c)}function Rd(c,h){return Gh===null&&vo(c),r0(c,h)}function r0(c,h){var g=Gl?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:g,next:null},jl===null){if(c===null)throw Error(s(308));jl=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else jl=jl.next=h;return g}function Wu(){return{controller:new eX,data:new Map,refCount:0}}function Bh(c){c.refCount--,c.refCount===0&&tX(iX,function(){c.controller.abort()})}function a0(){var c=Vh.current;return c!==null?c:Xi.pooledCache}function Bd(c,h){h===null?T(Vh,Vh.current):T(Vh,h.pool)}function Ld(){var c=a0();return c===null?null:{parent:Gl?En._currentValue:En._currentValue2,pool:c}}function pr(c){c.flags|=4}function Id(c,h){if(c!==null&&c.child===h.child)return!1;if(h.flags&16)return!0;for(c=h.child;c!==null;){if(c.flags&13878||c.subtreeFlags&13878)return!0;c=c.sibling}return!1}function Od(c,h,g,S){if(qs)for(g=h.child;g!==null;){if(g.tag===5||g.tag===6)GE(c,g.stateNode);else if(!(g.tag===4||js&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(nc)for(var D=h.child;D!==null;){if(D.tag===5){var L=D.stateNode;g&&S&&(L=jL(L,D.type,D.memoizedProps)),GE(c,L)}else if(D.tag===6)L=D.stateNode,g&&S&&(L=XL(L,D.memoizedProps)),GE(c,L);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)L=D.child,L!==null&&(L.return=D),Od(c,D,!0,!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===h)break;for(;D.sibling===null;){if(D.return===null||D.return===h)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function cx(c,h,g,S){if(nc)for(var D=h.child;D!==null;){if(D.tag===5){var L=D.stateNode;g&&S&&(L=jL(L,D.type,D.memoizedProps)),VL(c,L)}else if(D.tag===6)L=D.stateNode,g&&S&&(L=XL(L,D.memoizedProps)),VL(c,L);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)L=D.child,L!==null&&(L.return=D),cx(c,D,!(D.memoizedProps!==null&&D.memoizedProps.mode==="manual"),!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===h)break;for(;D.sibling===null;){if(D.return===null||D.return===h)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function hx(c,h){if(nc&&Id(c,h)){c=h.stateNode;var g=c.containerInfo,S=GL();cx(S,h,!1,!1),c.pendingChildren=S,pr(h),gj(g,S)}}function o0(c,h,g,S){if(qs)c.memoizedProps!==S&&pr(h);else if(nc){var D=c.stateNode,L=c.memoizedProps;if((c=Id(c,h))||L!==S){var V=Ls.current;L=mj(D,g,L,S,!c,null),L===D?h.stateNode=D:(UL(L,g,S,V)&&pr(h),h.stateNode=L,c?Od(L,h,!1,!1):pr(h))}else h.stateNode=D}}function l0(c,h,g){if(Vq(h,g)){if(c.flags|=16777216,!kL(h,g))if(Dx())c.flags|=8192;else throw ap=Yx,i2}else c.flags&=-16777217}function u0(c,h){if(kj(h)){if(c.flags|=16777216,!iI(h))if(Dx())c.flags|=8192;else throw ap=Yx,i2}else c.flags&=-16777217}function Pd(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?N():536870912,c.lanes|=h,dp|=h)}function Yu(c,h){if(!Ti)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function tn(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,S=0;if(h)for(var D=c.child;D!==null;)g|=D.lanes|D.childLanes,S|=D.subtreeFlags&31457280,S|=D.flags&31457280,D.return=c,D=D.sibling;else for(D=c.child;D!==null;)g|=D.lanes|D.childLanes,S|=D.subtreeFlags,S|=D.flags,D.return=c,D=D.sibling;return c.subtreeFlags|=S,c.childLanes=g,h}function fx(c,h,g){var S=h.pendingProps;switch(ht(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(h),null;case 1:return tn(h),null;case 3:return g=h.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),yo(En),Fe(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(yt(h)?pr(h):c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Eo!==null&&(g0(Eo),Eo=null))),hx(c,h),tn(h),null;case 26:if(Na){g=h.type;var D=h.memoizedState;return c===null?(pr(h),D!==null?(tn(h),u0(h,D)):(tn(h),l0(h,g,S))):D?D!==c.memoizedState?(pr(h),tn(h),u0(h,D)):(tn(h),h.flags&=-16777217):(qs?c.memoizedProps!==S&&pr(h):o0(c,h,g,S),tn(h),l0(h,g,S)),null}case 27:if(js){if(Qe(h),g=sc.current,D=h.type,c!==null&&h.stateNode!=null)qs?c.memoizedProps!==S&&pr(h):o0(c,h,D,S);else{if(!S){if(h.stateNode===null)throw Error(s(166));return tn(h),null}c=Ls.current,yt(h)?Gt(h,c):(c=nI(D,S,g,c,!0),h.stateNode=c,pr(h))}return tn(h),null}case 5:if(Qe(h),g=h.type,c!==null&&h.stateNode!=null)o0(c,h,g,S);else{if(!S){if(h.stateNode===null)throw Error(s(166));return tn(h),null}c=Ls.current,yt(h)?Gt(h,c):(D=Uq(g,S,sc.current,c,h),Od(D,h,!1,!1),h.stateNode=D,UL(D,g,S,c)&&pr(h))}return tn(h),l0(h,h.type,h.pendingProps),null;case 6:if(c&&h.stateNode!=null)g=c.memoizedProps,qs?g!==S&&pr(h):nc&&(g!==S?(h.stateNode=NL(S,sc.current,Ls.current,h),pr(h)):h.stateNode=c.stateNode);else{if(typeof S!="string"&&h.stateNode===null)throw Error(s(166));if(c=sc.current,g=Ls.current,yt(h)){if(!Ua)throw Error(s(176));if(c=h.stateNode,g=h.memoizedProps,S=null,D=vr,D!==null)switch(D.tag){case 27:case 5:S=D.memoizedProps}Mj(c,g,h,S)||gt(h)}else h.stateNode=NL(S,c,g,h)}return tn(h),null;case 13:if(S=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(D=yt(h),S!==null&&S.dehydrated!==null){if(c===null){if(!D)throw Error(s(318));if(!Ua)throw Error(s(344));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(s(317));wj(D,h)}else Ut(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;tn(h),D=!1}else Eo!==null&&(g0(Eo),Eo=null),D=!0;if(!D)return h.flags&256?(Fs(h),h):(Fs(h),null)}if(Fs(h),h.flags&128)return h.lanes=g,h;if(g=S!==null,c=c!==null&&c.memoizedState!==null,g){S=h.child,D=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(D=S.alternate.memoizedState.cachePool.pool);var L=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(L=S.memoizedState.cachePool.pool),L!==D&&(S.flags|=2048)}return g!==c&&g&&(h.child.flags|=8192),Pd(h,h.updateQueue),tn(h),null;case 4:return Fe(),hx(c,h),c===null&&kq(h.stateNode.containerInfo),tn(h),null;case 10:return yo(h.type),tn(h),null;case 19:if(v(ts),D=h.memoizedState,D===null)return tn(h),null;if(S=(h.flags&128)!==0,L=D.rendering,L===null)if(S)Yu(D,!1);else{if(Mn!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(L=Ba(c),L!==null){for(h.flags|=128,Yu(D,!1),c=L.updateQueue,h.updateQueue=c,Pd(h,c),h.subtreeFlags=0,c=g,g=h.child;g!==null;)Nx(g,c),g=g.sibling;return T(ts,ts.current&1|2),h.child}c=c.sibling}D.tail!==null&&Ao()>B0&&(h.flags|=128,S=!0,Yu(D,!1),h.lanes=4194304)}else{if(!S)if(c=Ba(L),c!==null){if(h.flags|=128,S=!0,c=c.updateQueue,h.updateQueue=c,Pd(h,c),Yu(D,!0),D.tail===null&&D.tailMode==="hidden"&&!L.alternate&&!Ti)return tn(h),null}else 2*Ao()-D.renderingStartTime>B0&&g!==536870912&&(h.flags|=128,S=!0,Yu(D,!1),h.lanes=4194304);D.isBackwards?(L.sibling=h.child,h.child=L):(c=D.last,c!==null?c.sibling=L:h.child=L,D.last=L)}return D.tail!==null?(h=D.tail,D.rendering=h,D.tail=h.sibling,D.renderingStartTime=Ao(),h.sibling=null,c=ts.current,T(ts,S?c&1|2:c&1),h):(tn(h),null);case 22:case 23:return Fs(h),hr(),S=h.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?g&536870912&&!(h.flags&128)&&(tn(h),h.subtreeFlags&6&&(h.flags|=8192)):tn(h),g=h.updateQueue,g!==null&&Pd(h,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),c!==null&&v(Vh),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),yo(En),tn(h),null;case 25:return null}throw Error(s(156,h.tag))}function hs(c,h){switch(ht(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return yo(En),Fe(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Qe(h),null;case 13:if(Fs(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(s(340));Ut()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return v(ts),null;case 4:return Fe(),null;case 10:return yo(h.type),null;case 22:case 23:return Fs(h),hr(),c!==null&&v(Vh),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return yo(En),null;case 25:return null;default:return null}}function Ud(c,h){switch(ht(h),h.tag){case 3:yo(En),Fe();break;case 26:case 27:case 5:Qe(h);break;case 4:Fe();break;case 13:Fs(h);break;case 19:v(ts);break;case 10:yo(h.type);break;case 22:case 23:Fs(h),hr(),c!==null&&v(Vh);break;case 24:yo(En)}}function fs(c,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var D=S.next;g=D;do{if((g.tag&c)===c){S=void 0;var L=g.create,V=g.inst;S=L(),V.destroy=S}g=g.next}while(g!==D)}}catch(ie){Et(h,h.return,ie)}}function Ir(c,h,g){try{var S=h.updateQueue,D=S!==null?S.lastEffect:null;if(D!==null){var L=D.next;S=L;do{if((S.tag&c)===c){var V=S.inst,ie=V.destroy;if(ie!==void 0){V.destroy=void 0,D=h;var de=g;try{ie()}catch(Ne){Et(D,de,Ne)}}}S=S.next}while(S!==L)}}catch(Ne){Et(h,h.return,Ne)}}function dx(c){var h=c.updateQueue;if(h!==null){var g=c.stateNode;try{je(h,g)}catch(S){Et(c,c.return,S)}}}function px(c,h,g){g.props=Il(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(S){Et(c,h,S)}}function zs(c,h){try{var g=c.ref;if(g!==null){var S=c.stateNode;switch(c.tag){case 26:case 27:case 5:var D=x0(S);break;default:D=S}typeof g=="function"?c.refCleanup=g(D):g.current=D}}catch(L){Et(c,h,L)}}function Gs(c,h){var g=c.ref,S=c.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(D){Et(c,h,D)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(D){Et(c,h,D)}else g.current=null}function mx(c){var h=c.type,g=c.memoizedProps,S=c.stateNode;try{sj(S,h,g,c)}catch(D){Et(c,c.return,D)}}function gx(c,h,g){try{rj(c.stateNode,c.type,g,h,c)}catch(S){Et(c,c.return,S)}}function Lh(c){return c.tag===5||c.tag===3||(Na?c.tag===26:!1)||(js?c.tag===27:!1)||c.tag===4}function c0(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Lh(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!js||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function h0(c,h,g){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?oj(g,c,h):ij(g,c);else if(!(S===4||js&&S===27)&&(c=c.child,c!==null))for(h0(c,h,g),c=c.sibling;c!==null;)h0(c,h,g),c=c.sibling}function Nd(c,h,g){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?aj(g,c,h):tj(g,c);else if(!(S===4||js&&S===27)&&(c=c.child,c!==null))for(Nd(c,h,g),c=c.sibling;c!==null;)Nd(c,h,g),c=c.sibling}function yx(c,h,g){c=c.containerInfo;try{qL(c,g)}catch(S){Et(h,h.return,S)}}function vx(c,h){for(Oq(c.containerInfo),ms=h;ms!==null;)if(c=ms,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,ms=h;else for(;ms!==null;){c=ms;var g=c.alternate;switch(h=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if(h&1024&&g!==null){h=void 0;var S=c,D=g.memoizedProps;g=g.memoizedState;var L=S.stateNode;try{var V=Il(S.type,D,S.elementType===S.type);h=L.getSnapshotBeforeUpdate(V,g),L.__reactInternalSnapshotBeforeUpdate=h}catch(ie){Et(S,S.return,ie)}}break;case 3:h&1024&&qs&&pj(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(h&1024)throw Error(s(163))}if(h=c.sibling,h!==null){h.return=c.return,ms=h;break}ms=c.return}return V=fI,fI=!1,V}function _x(c,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:_o(c,g),S&4&&fs(5,g);break;case 1:if(_o(c,g),S&4)if(c=g.stateNode,h===null)try{c.componentDidMount()}catch(ie){Et(g,g.return,ie)}else{var D=Il(g.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(D,h,c.__reactInternalSnapshotBeforeUpdate)}catch(ie){Et(g,g.return,ie)}}S&64&&dx(g),S&512&&zs(g,g.return);break;case 3:if(_o(c,g),S&64&&(S=g.updateQueue,S!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=x0(g.child.stateNode);break;case 1:c=g.child.stateNode}try{je(S,c)}catch(ie){Et(g,g.return,ie)}}break;case 26:if(Na){_o(c,g),S&512&&zs(g,g.return);break}case 27:case 5:_o(c,g),h===null&&S&4&&mx(g),S&512&&zs(g,g.return);break;case 12:_o(c,g);break;case 13:_o(c,g),S&4&&Qu(c,g);break;case 22:if(D=g.memoizedState!==null||Xl,!D){h=h!==null&&h.memoizedState!==null||Cn;var L=Xl,V=Cn;Xl=D,(Cn=h)&&!V?xo(c,g,(g.subtreeFlags&8772)!==0):_o(c,g),Xl=L,Cn=V}S&512&&(g.memoizedProps.mode==="manual"?zs(g,g.return):Gs(g,g.return));break;default:_o(c,g)}}function Ku(c){var h=c.alternate;h!==null&&(c.alternate=null,Ku(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&Gq(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Or(c,h,g){for(g=g.child;g!==null;)Ju(c,h,g),g=g.sibling}function Ju(c,h,g){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(S0,g)}catch{}switch(g.tag){case 26:if(Na){Cn||Gs(g,h),Or(c,h,g),g.memoizedState?$L(g.memoizedState):g.stateNode&&tI(g.stateNode);break}case 27:if(js){Cn||Gs(g,h);var S=jn,D=oa;jn=g.stateNode,Or(c,h,g),Vj(g.stateNode),jn=S,oa=D;break}case 5:Cn||Gs(g,h);case 6:if(qs){if(S=jn,D=oa,jn=null,Or(c,h,g),jn=S,oa=D,jn!==null)if(oa)try{uj(jn,g.stateNode)}catch(L){Et(g,h,L)}else try{lj(jn,g.stateNode)}catch(L){Et(g,h,L)}}else Or(c,h,g);break;case 18:qs&&jn!==null&&(oa?Ij(jn,g.stateNode):Lj(jn,g.stateNode));break;case 4:qs?(S=jn,D=oa,jn=g.stateNode.containerInfo,oa=!0,Or(c,h,g),jn=S,oa=D):(nc&&yx(g.stateNode,g,GL()),Or(c,h,g));break;case 0:case 11:case 14:case 15:Cn||Ir(2,g,h),Cn||Ir(4,g,h),Or(c,h,g);break;case 1:Cn||(Gs(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&px(g,h,S)),Or(c,h,g);break;case 21:Or(c,h,g);break;case 22:Cn||Gs(g,h),Cn=(S=Cn)||g.memoizedState!==null,Or(c,h,g),Cn=S;break;default:Or(c,h,g)}}function Qu(c,h){if(Ua&&h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Bj(c)}catch(g){Et(h,h.return,g)}}function mn(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new hI),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new hI),h;default:throw Error(s(435,c.tag))}}function Ko(c,h){var g=mn(c);h.forEach(function(S){var D=Ux.bind(null,c,S);g.has(S)||(g.add(S),S.then(D,D))})}function ds(c,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var D=g[S],L=c,V=h;if(qs){var ie=V;e:for(;ie!==null;){switch(ie.tag){case 27:case 5:jn=ie.stateNode,oa=!1;break e;case 3:jn=ie.stateNode.containerInfo,oa=!0;break e;case 4:jn=ie.stateNode.containerInfo,oa=!0;break e}ie=ie.return}if(jn===null)throw Error(s(160));Ju(L,V,D),jn=null,oa=!1}else Ju(L,V,D);L=D.alternate,L!==null&&(L.return=null),D.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)xx(h,c),h=h.sibling}function xx(c,h){var g=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ds(h,c),mr(c),S&4&&(Ir(3,c,c.return),fs(3,c),Ir(5,c,c.return));break;case 1:ds(h,c),mr(c),S&512&&(Cn||g===null||Gs(g,g.return)),S&64&&Xl&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:if(Na){var D=Co;ds(h,c),mr(c),S&512&&(Cn||g===null||Gs(g,g.return)),S&4&&(S=g!==null?g.memoizedState:null,h=c.memoizedState,g===null?h===null?c.stateNode===null?c.stateNode=Uj(D,c.type,c.memoizedProps,c):eI(D,c.type,c.stateNode):c.stateNode=ZL(D,h,c.memoizedProps):S!==h?(S===null?g.stateNode!==null&&tI(g.stateNode):$L(S),h===null?eI(D,c.type,c.stateNode):ZL(D,h,c.memoizedProps)):h===null&&c.stateNode!==null&&gx(c,c.memoizedProps,g.memoizedProps));break}case 27:if(js&&S&4&&c.alternate===null){D=c.stateNode;var L=c.memoizedProps;try{zj(D),Gj(c.type,L,D,c)}catch(Je){Et(c,c.return,Je)}}case 5:if(ds(h,c),mr(c),S&512&&(Cn||g===null||Gs(g,g.return)),qs){if(c.flags&32){h=c.stateNode;try{zL(h)}catch(Je){Et(c,c.return,Je)}}S&4&&c.stateNode!=null&&(h=c.memoizedProps,gx(c,h,g!==null?g.memoizedProps:h)),S&1024&&(a2=!0)}break;case 6:if(ds(h,c),mr(c),S&4&&qs){if(c.stateNode===null)throw Error(s(162));S=c.memoizedProps,g=g!==null?g.memoizedProps:S,h=c.stateNode;try{nj(h,g,S)}catch(Je){Et(c,c.return,Je)}}break;case 3:if(Na?(Fj(),D=Co,Co=XE(h.containerInfo),ds(h,c),Co=D):ds(h,c),mr(c),S&4){if(qs&&Ua&&g!==null&&g.memoizedState.isDehydrated)try{Rj(h.containerInfo)}catch(Je){Et(c,c.return,Je)}if(nc){S=h.containerInfo,g=h.pendingChildren;try{qL(S,g)}catch(Je){Et(c,c.return,Je)}}}a2&&(a2=!1,bx(c));break;case 4:Na?(g=Co,Co=XE(c.stateNode.containerInfo),ds(h,c),mr(c),Co=g):(ds(h,c),mr(c)),S&4&&nc&&yx(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:ds(h,c),mr(c);break;case 13:ds(h,c),mr(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(c2=Ao()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,Ko(c,S)));break;case 22:S&512&&(Cn||g===null||Gs(g,g.return)),D=c.memoizedState!==null;var V=g!==null&&g.memoizedState!==null,ie=Xl,de=Cn;if(Xl=ie||D,Cn=de||V,ds(h,c),Cn=de,Xl=ie,mr(c),h=c.stateNode,h._current=c,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,S&8192&&(h._visibility=D?h._visibility&-2:h._visibility|1,D&&(h=Xl||Cn,g===null||V||h||Ol(c)),qs&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){e:if(g=null,qs)for(h=c;;){if(h.tag===5||Na&&h.tag===26||js&&h.tag===27){if(g===null){V=g=h;try{L=V.stateNode,D?cj(L):fj(V.stateNode,V.memoizedProps)}catch(Je){Et(V,V.return,Je)}}}else if(h.tag===6){if(g===null){V=h;try{var Ne=V.stateNode;D?hj(Ne):dj(Ne,V.memoizedProps)}catch(Je){Et(V,V.return,Je)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}}S&4&&(S=c.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Ko(c,g))));break;case 19:ds(h,c),mr(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,Ko(c,S)));break;case 21:break;default:ds(h,c),mr(c)}}function mr(c){var h=c.flags;if(h&2){try{if(qs&&(!js||c.tag!==27)){e:{for(var g=c.return;g!==null;){if(Lh(g)){var S=g;break e}g=g.return}throw Error(s(160))}switch(S.tag){case 27:if(js){var D=S.stateNode,L=c0(c);Nd(c,L,D);break}case 5:var V=S.stateNode;S.flags&32&&(zL(V),S.flags&=-33);var ie=c0(c);Nd(c,ie,V);break;case 3:case 4:var de=S.stateNode.containerInfo,Ne=c0(c);h0(c,Ne,de);break;default:throw Error(s(161))}}}catch(Je){Et(c,c.return,Je)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function bx(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;bx(h),h.tag===5&&h.flags&1024&&Xq(h.stateNode),c=c.sibling}}function _o(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)_x(c,h.alternate,h),h=h.sibling}function Ol(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Ir(4,h,h.return),Ol(h);break;case 1:Gs(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&px(h,h.return,g),Ol(h);break;case 26:case 27:case 5:Gs(h,h.return),Ol(h);break;case 22:Gs(h,h.return),h.memoizedState===null&&Ol(h);break;default:Ol(h)}c=c.sibling}}function xo(c,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,D=c,L=h,V=L.flags;switch(L.tag){case 0:case 11:case 15:xo(D,L,g),fs(4,L);break;case 1:if(xo(D,L,g),S=L,D=S.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Ne){Et(S,S.return,Ne)}if(S=L,D=S.updateQueue,D!==null){var ie=S.stateNode;try{var de=D.shared.hiddenCallbacks;if(de!==null)for(D.shared.hiddenCallbacks=null,D=0;D<de.length;D++)ne(de[D],ie)}catch(Ne){Et(S,S.return,Ne)}}g&&V&64&&dx(L),zs(L,L.return);break;case 26:case 27:case 5:xo(D,L,g),g&&S===null&&V&4&&mx(L),zs(L,L.return);break;case 12:xo(D,L,g);break;case 13:xo(D,L,g),g&&V&4&&Qu(D,L);break;case 22:L.memoizedState===null&&xo(D,L,g),zs(L,L.return);break;default:xo(D,L,g)}h=h.sibling}}function Fd(c,h){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&Bh(g))}function kd(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Bh(c))}function bo(c,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Hd(c,h,g,S),h=h.sibling}function Hd(c,h,g,S){var D=h.flags;switch(h.tag){case 0:case 11:case 15:bo(c,h,g,S),D&2048&&fs(9,h);break;case 3:bo(c,h,g,S),D&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Bh(c)));break;case 12:if(D&2048){bo(c,h,g,S),c=h.stateNode;try{var L=h.memoizedProps,V=L.id,ie=L.onPostCommit;typeof ie=="function"&&ie(V,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(de){Et(h,h.return,de)}}else bo(c,h,g,S);break;case 23:break;case 22:L=h.stateNode,h.memoizedState!==null?L._visibility&4?bo(c,h,g,S):Ul(c,h):L._visibility&4?bo(c,h,g,S):(L._visibility|=4,Pl(c,h,g,S,(h.subtreeFlags&10256)!==0)),D&2048&&Fd(h.alternate,h);break;case 24:bo(c,h,g,S),D&2048&&kd(h.alternate,h);break;default:bo(c,h,g,S)}}function Pl(c,h,g,S,D){for(D=D&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var L=c,V=h,ie=g,de=S,Ne=V.flags;switch(V.tag){case 0:case 11:case 15:Pl(L,V,ie,de,D),fs(8,V);break;case 23:break;case 22:var Je=V.stateNode;V.memoizedState!==null?Je._visibility&4?Pl(L,V,ie,de,D):Ul(L,V):(Je._visibility|=4,Pl(L,V,ie,de,D)),D&&Ne&2048&&Fd(V.alternate,V);break;case 24:Pl(L,V,ie,de,D),D&&Ne&2048&&kd(V.alternate,V);break;default:Pl(L,V,ie,de,D)}h=h.sibling}}function Ul(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=c,S=h,D=S.flags;switch(S.tag){case 22:Ul(g,S),D&2048&&Fd(S.alternate,S);break;case 24:Ul(g,S),D&2048&&kd(S.alternate,S);break;default:Ul(g,S)}h=h.sibling}}function Nl(c){if(c.subtreeFlags&hp)for(c=c.child;c!==null;)Zu(c),c=c.sibling}function Zu(c){switch(c.tag){case 26:Nl(c),c.flags&hp&&(c.memoizedState!==null?Hj(Co,c.memoizedState,c.memoizedProps):HL(c.type,c.memoizedProps));break;case 5:Nl(c),c.flags&hp&&HL(c.type,c.memoizedProps);break;case 3:case 4:if(Na){var h=Co;Co=XE(c.stateNode.containerInfo),Nl(c),Co=h}else Nl(c);break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=hp,hp=16777216,Nl(c),hp=h):Nl(c));break;default:Nl(c)}}function Tx(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function $u(c){var h=c.deletions;if(c.flags&16){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];ms=S,Sx(S,c)}Tx(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)f0(c),c=c.sibling}function f0(c){switch(c.tag){case 0:case 11:case 15:$u(c),c.flags&2048&&Ir(9,c,c.return);break;case 3:$u(c);break;case 12:$u(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&4&&(c.return===null||c.return.tag!==13)?(h._visibility&=-5,zd(c)):$u(c);break;default:$u(c)}}function zd(c){var h=c.deletions;if(c.flags&16){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];ms=S,Sx(S,c)}Tx(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Ir(8,h,h.return),zd(h);break;case 22:g=h.stateNode,g._visibility&4&&(g._visibility&=-5,zd(h));break;default:zd(h)}c=c.sibling}}function Sx(c,h){for(;ms!==null;){var g=ms;switch(g.tag){case 0:case 11:case 15:Ir(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Bh(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,ms=S;else e:for(g=c;ms!==null;){S=ms;var D=S.sibling,L=S.return;if(Ku(S),S===g){ms=null;break e}if(D!==null){D.return=L,ms=D;break e}ms=L}}}function Gd(c){var h=FL(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(c=Kq(c),c===null)throw Error(s(362));return c.stateNode.current}function d0(c,h){var g=c.tag;switch(h.$$typeof){case $x:if(c.type===h.value)return!0;break;case eb:e:{for(h=h.value,c=[c,0],g=0;g<c.length;){var S=c[g++],D=S.tag,L=c[g++],V=h[L];if(D!==5&&D!==26&&D!==27||!T0(S)){for(;V!=null&&d0(S,V);)L++,V=h[L];if(L===h.length){h=!0;break e}else for(S=S.child;S!==null;)c.push(S,L),S=S.sibling}}h=!1}return h;case tb:if((g===5||g===26||g===27)&&Zq(c.stateNode,h.value))return!0;break;case nb:if((g===5||g===6||g===26||g===27)&&(c=Qq(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case ib:if((g===5||g===26||g===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function p0(c){switch(c.$$typeof){case $x:return"<"+(a(c.value)||"Unknown")+">";case eb:return":has("+(p0(c)||"")+")";case tb:return'[role="'+c.value+'"]';case nb:return'"'+c.value+'"';case ib:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function Vd(c,h){var g=[];c=[c,0];for(var S=0;S<c.length;){var D=c[S++],L=D.tag,V=c[S++],ie=h[V];if(L!==5&&L!==26&&L!==27||!T0(D)){for(;ie!=null&&d0(D,ie);)V++,ie=h[V];if(V===h.length)g.push(D);else for(D=D.child;D!==null;)c.push(D,V),D=D.sibling}}return g}function m0(c,h){if(!b0)throw Error(s(363));c=Gd(c),c=Vd(c,h),h=[],c=Array.from(c);for(var g=0;g<c.length;){var S=c[g++],D=S.tag;if(D===5||D===26||D===27)T0(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)c.push(S),S=S.sibling}return h}function gr(){if(zi&2&&vi!==0)return vi&-vi;if(kt.T!==null){var c=sp;return c!==0?c:et()}return Hq()}function Ax(){Ga===0&&(Ga=!(vi&536870912)||Ti?F():536870912);var c=za.current;return c!==null&&(c.flags|=32),Ga}function Rs(c,h,g){(c===Xi&&Wi===2||c.cancelPendingCommit!==null)&&(yr(c,0),To(c,vi,Ga,!1)),H(c,g),(!(zi&2)||c!==Xi)&&(c===Xi&&(!(zi&2)&&(qh|=g),Mn===4&&To(c,vi,Ga,!1)),ge(c))}function Ex(c,h,g){if(zi&6)throw Error(s(327));var S=!g&&(h&60)===0&&(h&c.expiredLanes)===0||I(c,h),D=S?jd(c,h):Ih(c,h,!0),L=S;do{if(D===0){fp&&!S&&To(c,h,0,!1);break}else if(D===6)To(c,h,0,!Wl);else{if(g=c.current.alternate,L&&!OE(g)){D=Ih(c,h,!1),L=!1;continue}if(D===2){if(L=h,c.errorRecoveryDisabledLanes&L)var V=0;else V=c.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){h=V;e:{var ie=c;D=R0;var de=Ua&&ie.current.memoizedState.isDehydrated;if(de&&(yr(ie,V).flags|=256),V=Ih(ie,V,!1),V!==2){if(o2&&!de){ie.errorRecoveryDisabledLanes|=L,qh|=L,D=4;break e}L=tl,tl=D,L!==null&&g0(L)}D=V}if(L=!1,D!==2)continue}}if(D===1){yr(c,0),To(c,h,0,!0);break}e:{switch(S=c,D){case 0:case 1:throw Error(s(345));case 4:if((h&4194176)===h){To(S,h,Ga,!Wl);break e}break;case 2:tl=null;break;case 3:case 5:break;default:throw Error(s(329))}if(S.finishedWork=g,S.finishedLanes=h,(h&62914560)===h&&(L=c2+300-Ao(),10<L)){if(To(S,h,Ga,!Wl),B(S,0)!==0)break e;S.timeoutHandle=Nq(Cx.bind(null,S,g,tl,sb,u2,h,Ga,qh,dp,Wl,2,-0,0),L);break e}Cx(S,g,tl,sb,u2,h,Ga,qh,dp,Wl,0,-0,0)}}break}while(1);ge(c)}function g0(c){tl===null?tl=c:tl.push.apply(tl,c)}function Cx(c,h,g,S,D,L,V,ie,de,Ne,Je,ct,mt){var Wt=h.subtreeFlags;if((Wt&8192||(Wt&16785408)===16785408)&&(qq(),Zu(h),h=jq(),h!==null)){c.cancelPendingCommit=h(Yd.bind(null,c,g,S,D,V,ie,de,1,ct,mt)),To(c,L,V,!Ne);return}Yd(c,g,S,D,V,ie,de,Je,ct,mt)}function OE(c){for(var h=c;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var D=g[S],L=D.getSnapshot;D=D.value;try{if(!aa(L(),D))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function To(c,h,g,S){h&=~l2,h&=~qh,c.suspendedLanes|=h,c.pingedLanes&=~h,S&&(c.warmLanes|=h),S=c.expirationTimes;for(var D=h;0<D;){var L=31-sa(D),V=1<<L;S[L]=-1,D&=~V}g!==0&&J(c,g,h)}function Mx(){return zi&6?!0:(X(0,!1),!1)}function y0(){if(ni!==null){if(Wi===0)var c=ni.return;else c=ni,jl=Gh=null,Ri(c),op=null,M0=0,c=ni;for(;c!==null;)Ud(c.alternate,c),c=c.return;ni=null}}function yr(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;g!==VE&&(c.timeoutHandle=VE,Fq(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),y0(),Xi=c,ni=g=Qo(c.current,null),vi=h,Wi=0,la=null,Wl=!1,fp=I(c,h),o2=!1,dp=Ga=l2=qh=lc=Mn=0,tl=R0=null,u2=!1,h&8&&(h|=h&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=h;0<S;){var D=31-sa(S),L=1<<D;h|=c[D],S&=~L}return Yl=h,te(),g}function wx(c,h){ei=null,kt.H=el,h===C0?(h=Mt(),Wi=3):h===i2?(h=Mt(),Wi=4):Wi=h===uI?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,la=h,ni===null&&(Mn=1,Vu(c,pe(h,c.current)))}function Dx(){var c=za.current;return c===null?!0:(vi&4194176)===vi?$o===null:(vi&62914560)===vi||vi&536870912?c===$o:!1}function Rx(){var c=kt.H;return kt.H=el,c===null?el:c}function PE(){var c=kt.A;return kt.A=nX,c}function qd(){Mn=4,Wl||(vi&4194176)!==vi&&za.current!==null||(fp=!0),!(lc&134217727)&&!(qh&134217727)||Xi===null||To(Xi,vi,Ga,!1)}function Ih(c,h,g){var S=zi;zi|=2;var D=Rx(),L=PE();(Xi!==c||vi!==h)&&(sb=null,yr(c,h)),h=!1;var V=Mn;e:do try{if(Wi!==0&&ni!==null){var ie=ni,de=la;switch(Wi){case 8:y0(),V=6;break e;case 3:case 2:case 6:za.current===null&&(h=!0);var Ne=Wi;if(Wi=0,la=null,ec(c,ie,de,Ne),g&&fp){V=0;break e}break;default:Ne=Wi,Wi=0,la=null,ec(c,ie,de,Ne)}}Bx(),V=Mn;break}catch(Je){wx(c,Je)}while(1);return h&&c.shellSuspendCounter++,jl=Gh=null,zi=S,kt.H=D,kt.A=L,ni===null&&(Xi=null,vi=0,te()),V}function Bx(){for(;ni!==null;)Lx(ni)}function jd(c,h){var g=zi;zi|=2;var S=Rx(),D=PE();Xi!==c||vi!==h?(sb=null,B0=Ao()+500,yr(c,h)):fp=I(c,h);e:do try{if(Wi!==0&&ni!==null){h=ni;var L=la;t:switch(Wi){case 1:Wi=0,la=null,ec(c,h,L,1);break;case 2:if(Ue(L)){Wi=0,la=null,Ix(h);break}h=function(){Wi===2&&Xi===c&&(Wi=7),ge(c)},L.then(h,h);break e;case 3:Wi=7;break e;case 4:Wi=5;break e;case 7:Ue(L)?(Wi=0,la=null,Ix(h)):(Wi=0,la=null,ec(c,h,L,7));break;case 5:var V=null;switch(ni.tag){case 26:V=ni.memoizedState;case 5:case 27:var ie=ni,de=ie.type,Ne=ie.pendingProps;if(V?iI(V):kL(de,Ne)){Wi=0,la=null;var Je=ie.sibling;if(Je!==null)ni=Je;else{var ct=ie.return;ct!==null?(ni=ct,Wd(ct)):ni=null}break t}}Wi=0,la=null,ec(c,h,L,5);break;case 6:Wi=0,la=null,ec(c,h,L,6);break;case 8:y0(),Mn=6;break e;default:throw Error(s(462))}}Xd();break}catch(mt){wx(c,mt)}while(1);return jl=Gh=null,kt.H=S,kt.A=D,zi=g,ni!==null?0:(Xi=null,vi=0,te(),Mn)}function Xd(){for(;ni!==null&&!Xj();)Lx(ni)}function Lx(c){var h=i0(c.alternate,c,Yl);c.memoizedProps=c.pendingProps,h===null?Wd(c):ni=h}function Ix(c){var h=c,g=h.alternate;switch(h.tag){case 15:case 0:h=Ia(g,h,h.pendingProps,h.type,void 0,vi);break;case 11:h=Ia(g,h,h.pendingProps,h.type.render,h.ref,vi);break;case 5:Ri(h);default:Ud(g,h),h=ni=Nx(h,Yl),h=i0(g,h,Yl)}c.memoizedProps=c.pendingProps,h===null?Wd(c):ni=h}function ec(c,h,g,S){jl=Gh=null,Ri(h),op=null,M0=0;var D=h.return;try{if(IE(c,D,h,g,vi)){Mn=1,Vu(c,pe(g,c.current)),ni=null;return}}catch(L){if(D!==null)throw ni=D,L;Mn=1,Vu(c,pe(g,c.current)),ni=null;return}h.flags&32768?(Ti||S===1?c=!0:fp||vi&536870912?c=!1:(Wl=c=!0,(S===2||S===3||S===6)&&(S=za.current,S!==null&&S.tag===13&&(S.flags|=16384))),Ox(h,c)):Wd(h)}function Wd(c){var h=c;do{if(h.flags&32768){Ox(h,Wl);return}c=h.return;var g=fx(h.alternate,h,Yl);if(g!==null){ni=g;return}if(h=h.sibling,h!==null){ni=h;return}ni=h=c}while(h!==null);Mn===0&&(Mn=5)}function Ox(c,h){do{var g=hs(c.alternate,c);if(g!==null){g.flags&=32767,ni=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(c=c.sibling,c!==null)){ni=c;return}ni=c=g}while(c!==null);Mn=6,ni=null}function Yd(c,h,g,S,D,L,V,ie,de,Ne){var Je=kt.T,ct=Ph();try{Ur(2),kt.T=null,UE(c,h,g,S,ct,D,L,V,ie,de,Ne)}finally{kt.T=Je,Ur(ct)}}function UE(c,h,g,S,D,L,V,ie){do Jo();while(jh!==null);if(zi&6)throw Error(s(327));var de=c.finishedWork;if(S=c.finishedLanes,de===null)return null;if(c.finishedWork=null,c.finishedLanes=0,de===c.current)throw Error(s(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var Ne=de.lanes|de.childLanes;if(Ne|=QE,re(c,S,Ne,L,V,ie),c===Xi&&(ni=Xi=null,vi=0),!(de.subtreeFlags&10256)&&!(de.flags&10256)||rb||(rb=!0,h2=Ne,f2=g,FE(KE,function(){return Jo(),null})),g=(de.flags&15990)!==0,de.subtreeFlags&15990||g?(g=kt.T,kt.T=null,L=Ph(),Ur(2),V=zi,zi|=4,vx(c,de),xx(de,c),Pq(c.containerInfo),c.current=de,_x(c,de.alternate,de),Wj(),zi=V,Ur(L),kt.T=g):c.current=de,rb?(rb=!1,jh=c,L0=S):Px(c,Ne),Ne=c.pendingLanes,Ne===0&&(uc=null),j(de.stateNode),ge(c),h!==null)for(D=c.onRecoverableError,de=0;de<h.length;de++)Ne=h[de],D(Ne.value,{componentStack:Ne.stack});return L0&3&&Jo(),Ne=c.pendingLanes,S&4194218&&Ne&42?c===d2?I0++:(I0=0,d2=c):I0=0,X(0,!1),null}function Px(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Bh(h)))}function Jo(){if(jh!==null){var c=jh,h=h2;h2=0;var g=ce(L0),S=32>g?32:g;g=kt.T;var D=Ph();try{if(Ur(S),kt.T=null,jh===null)var L=!1;else{S=f2,f2=null;var V=jh,ie=L0;if(jh=null,L0=0,zi&6)throw Error(s(331));var de=zi;if(zi|=4,f0(V.current),Hd(V,V.current,ie,S),zi=de,X(0,!1),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(S0,V)}catch{}L=!0}return L}finally{Ur(D),kt.T=g,Px(c,h)}}return!1}function Fl(c,h,g){h=pe(g,h),h=wd(c.stateNode,h,2),c=_t(c,h,2),c!==null&&(H(c,2),ge(c))}function Et(c,h,g){if(c.tag===3)Fl(c,c,g);else for(;h!==null;){if(h.tag===3){Fl(h,c,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(uc===null||!uc.has(S))){c=pe(g,c),g=Eh(2),S=_t(h,g,2),S!==null&&(rx(g,S,h,c),H(S,2),ge(S));break}}h=h.return}}function So(c,h,g){var S=c.pingCache;if(S===null){S=c.pingCache=new sX;var D=new Set;S.set(h,D)}else D=S.get(h),D===void 0&&(D=new Set,S.set(h,D));D.has(g)||(o2=!0,D.add(g),c=Bs.bind(null,c,h,g),h.then(c,c))}function Bs(c,h,g){var S=c.pingCache;S!==null&&S.delete(h),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,Xi===c&&(vi&g)===g&&(Mn===4||Mn===3&&(vi&62914560)===vi&&300>Ao()-c2?!(zi&2)&&yr(c,0):l2|=g,dp===vi&&(dp=0)),ge(c)}function na(c,h){h===0&&(h=N()),c=Ie(c,h),c!==null&&(H(c,h),ge(c))}function NE(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),na(c,g)}function Ux(c,h){var g=0;switch(c.tag){case 13:var S=c.stateNode,D=c.memoizedState;D!==null&&(g=D.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(h),na(c,g)}function FE(c,h){return Gx(c,h)}function kE(c,h,g,S){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function v0(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Qo(c,h){var g=c.alternate;return g===null?(g=t(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&31457280,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function Nx(c,h){c.flags&=31457282;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,h=g.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function Kd(c,h,g,S,D,L){var V=0;if(S=c,typeof c=="function")v0(c)&&(V=1);else if(typeof c=="string")V=Na&&js?JL(c,g,Ls.current)?26:sI(c)?27:5:Na?JL(c,g,Ls.current)?26:5:js&&sI(c)?27:5;else e:switch(c){case nn:return kl(g.children,D,L,h);case Vs:V=8,D|=24;break;case Pa:return c=t(12,g,h,D|2),c.elementType=Pa,c.lanes=L,c;case ic:return c=t(13,g,h,D),c.elementType=ic,c.lanes=L,c;case Pi:return c=t(19,g,h,D),c.elementType=Pi,c.lanes=L,c;case LL:return _0(g,D,L,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Oh:case Pr:V=10;break e;case tc:V=9;break e;case Hl:V=11;break e;case zl:V=14;break e;case Vn:V=16,S=null;break e}V=29,g=Error(s(130,c===null?"null":typeof c,"")),S=null}return h=t(V,g,h,D),h.elementType=c,h.type=S,h.lanes=L,h}function kl(c,h,g,S){return c=t(7,c,S,h),c.lanes=g,c}function _0(c,h,g,S){c=t(22,c,S,h),c.elementType=LL,c.lanes=g;var D={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var L=D._current;if(L===null)throw Error(s(456));if(!(D._pendingVisibility&2)){var V=Ie(L,2);V!==null&&(D._pendingVisibility|=2,Rs(V,L,2))}},attach:function(){var L=D._current;if(L===null)throw Error(s(456));if(D._pendingVisibility&2){var V=Ie(L,2);V!==null&&(D._pendingVisibility&=-3,Rs(V,L,2))}}};return c.stateNode=D,c}function y(c,h,g){return c=t(6,c,null,h),c.lanes=g,c}function E(c,h,g){return h=t(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function C(c,h,g,S,D,L,V,ie){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=VE,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=S,this.onUncaughtError=D,this.onCaughtError=L,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function M(c,h,g,S,D,L,V,ie,de,Ne,Je,ct){return c=new C(c,h,g,V,ie,de,Ne,ct),h=1,L===!0&&(h|=24),L=t(3,null,null,h),c.current=L,L.stateNode=c,h=Wu(),h.refCount++,c.pooledCache=h,h.refCount++,L.memoizedState={element:S,isDehydrated:g,cache:h},ze(L),c}function R(c){return c?(c=Zd,c):Zd}function O(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=m(h),c=c!==null?_(c):null,c===null?null:x0(c.stateNode)}function G(c,h,g,S,D,L){D=R(D),S.context===null?S.context=D:S.pendingContext=D,S=xt(h),S.payload={element:g},L=L===void 0?null:L,L!==null&&(S.callback=L),g=_t(c,S,h),g!==null&&(Rs(g,c,h),rt(g,c,h))}function q(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function K(c,h){q(c,h),(c=c.alternate)&&q(c,h)}var Y={},le=ee,ve=Xw,Ze=Object.assign,Oe=Symbol.for("react.element"),St=Symbol.for("react.transitional.element"),Dt=Symbol.for("react.portal"),nn=Symbol.for("react.fragment"),Vs=Symbol.for("react.strict_mode"),Pa=Symbol.for("react.profiler"),Oh=Symbol.for("react.provider"),tc=Symbol.for("react.consumer"),Pr=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),ic=Symbol.for("react.suspense"),Pi=Symbol.for("react.suspense_list"),zl=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),LL=Symbol.for("react.offscreen"),wq=Symbol.for("react.memo_cache_sentinel"),IL=Symbol.iterator,Dq=Symbol.for("react.client.reference"),kt=le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,HE,OL,zE=!1,Fx=Array.isArray,Rq=e.rendererVersion,Bq=e.rendererPackageName,PL=e.extraDevToolsConfig,x0=e.getPublicInstance,Lq=e.getRootHostContext,Iq=e.getChildHostContext,Oq=e.prepareForCommit,Pq=e.resetAfterCommit,Uq=e.createInstance,GE=e.appendInitialChild,UL=e.finalizeInitialChildren,kx=e.shouldSetTextContent,NL=e.createTextInstance,Nq=e.scheduleTimeout,Fq=e.cancelTimeout,VE=e.noTimeout,Gl=e.isPrimaryRenderer;e.warnsIfNotActing;var qs=e.supportsMutation,nc=e.supportsPersistence,Ua=e.supportsHydration,FL=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var kq=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ur=e.setCurrentUpdatePriority,Ph=e.getCurrentUpdatePriority,Hq=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var zq=e.shouldAttemptEagerTransition,Gq=e.detachDeletedInstance;e.requestPostPaintCallback;var Vq=e.maySuspendCommit,kL=e.preloadInstance,qq=e.startSuspendingCommit,HL=e.suspendInstance,jq=e.waitForCommitToBeReady,Jd=e.NotPendingTransition,Uh=e.HostTransitionContext,Xq=e.resetFormInstance;e.bindToConsole;var Wq=e.supportsMicrotasks,Yq=e.scheduleMicrotask,b0=e.supportsTestSelectors,Kq=e.findFiberRoot,Jq=e.getBoundingRect,Qq=e.getTextContent,T0=e.isHiddenSubtree,Zq=e.matchAccessibilityRole,$q=e.setFocusIfFocusable,ej=e.setupIntersectionObserver,tj=e.appendChild,ij=e.appendChildToContainer,nj=e.commitTextUpdate,sj=e.commitMount,rj=e.commitUpdate,aj=e.insertBefore,oj=e.insertInContainerBefore,lj=e.removeChild,uj=e.removeChildFromContainer,zL=e.resetTextContent,cj=e.hideInstance,hj=e.hideTextInstance,fj=e.unhideInstance,dj=e.unhideTextInstance,pj=e.clearContainer,mj=e.cloneInstance,GL=e.createContainerChildSet,VL=e.appendChildToContainerChildSet,gj=e.finalizeContainerChildren,qL=e.replaceContainerChildren,jL=e.cloneHiddenInstance,XL=e.cloneHiddenTextInstance,qE=e.isSuspenseInstancePending,jE=e.isSuspenseInstanceFallback,yj=e.getSuspenseInstanceFallbackErrorDetails,vj=e.registerSuspenseInstanceRetry,_j=e.canHydrateFormStateMarker,xj=e.isFormStateMarkerMatching,WL=e.getNextHydratableSibling,YL=e.getFirstHydratableChild,bj=e.getFirstHydratableChildWithinContainer,Tj=e.getFirstHydratableChildWithinSuspenseInstance,Sj=e.canHydrateInstance,Aj=e.canHydrateTextInstance,Ej=e.canHydrateSuspenseInstance,Cj=e.hydrateInstance,Mj=e.hydrateTextInstance,wj=e.hydrateSuspenseInstance,Dj=e.getNextHydratableInstanceAfterSuspenseInstance,Rj=e.commitHydratedContainer,Bj=e.commitHydratedSuspenseInstance,Lj=e.clearSuspenseBoundary,Ij=e.clearSuspenseBoundaryFromContainer,KL=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Oj=e.validateHydratableInstance,Pj=e.validateHydratableTextInstance,Na=e.supportsResources,JL=e.isHostHoistableType,XE=e.getHoistableRoot,QL=e.getResource,ZL=e.acquireResource,$L=e.releaseResource,Uj=e.hydrateHoistable,eI=e.mountHoistable,tI=e.unmountHoistable,Nj=e.createHoistableInstance,Fj=e.prepareToCommitHoistables,kj=e.mayResourceSuspendCommit,iI=e.preloadResource,Hj=e.suspendResource,js=e.supportsSingletons,nI=e.resolveSingletonInstance,zj=e.clearSingleton,Gj=e.acquireSingletonInstance,Vj=e.releaseSingletonInstance,sI=e.isHostSingletonType,WE=[],Qd=-1,Zd={},sa=Math.clz32?Math.clz32:A,qj=Math.log,jj=Math.LN2,Hx=128,zx=4194304,Gx=ve.unstable_scheduleCallback,YE=ve.unstable_cancelCallback,Xj=ve.unstable_shouldYield,Wj=ve.unstable_requestPaint,Ao=ve.unstable_now,rI=ve.unstable_ImmediatePriority,Yj=ve.unstable_UserBlockingPriority,KE=ve.unstable_NormalPriority,Kj=ve.unstable_IdlePriority,Jj=ve.log,Qj=ve.unstable_setDisableYieldValue,S0=null,ra=null,aa=typeof Object.is=="function"?Object.is:$,aI=new WeakMap,$d=[],ep=0,Vx=null,qx=0,Fa=[],ka=0,Nh=null,Vl=1,ql="",Ls=b(null),A0=b(null),sc=b(null),jx=b(null),vr=null,Xs=null,Ti=!1,Eo=null,Zo=!1,JE=Error(s(519)),Ha=[],tp=0,QE=0,Xx=null,ip=null,ZE=!1,Wx=!1,$E=!1,np=0,E0=null,e2=0,sp=0,rp=null,rc=!1,t2=!1,Zj=Object.prototype.hasOwnProperty,C0=Error(s(460)),i2=Error(s(474)),Yx={then:function(){}},ap=null,op=null,M0=0,Fh=Jn(!0),oI=Jn(!1),lp=b(null),Kx=b(0),za=b(null),$o=null,ts=b(0),ac=0,ei=null,Hi=null,qn=null,Jx=!1,up=!1,kh=!1,Qx=0,w0=0,cp=null,$j=0,n2=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},el={readContext:cs,use:be,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useLayoutEffect:ci,useInsertionEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useSyncExternalStore:ci,useId:ci};el.useCacheRefresh=ci,el.useMemoCache=ci,el.useHostTransitionStatus=ci,el.useFormState=ci,el.useActionState=ci,el.useOptimistic=ci;var Hh={readContext:cs,use:be,useCallback:function(c,h){return z().memoizedState=[c,h===void 0?null:h],c},useContext:cs,useEffect:Ad,useImperativeHandle:function(c,h,g){g=g!=null?g.concat([c]):null,Ll(4194308,4,K_.bind(null,h,c),g)},useLayoutEffect:function(c,h){return Ll(4194308,4,c,h)},useInsertionEffect:function(c,h){Ll(4,2,c,h)},useMemo:function(c,h){var g=z();h=h===void 0?null:h;var S=c();if(kh){Q(!0);try{c()}finally{Q(!1)}}return g.memoizedState=[S,h],S},useReducer:function(c,h,g){var S=z();if(g!==void 0){var D=g(h);if(kh){Q(!0);try{g(h)}finally{Q(!1)}}}else D=h;return S.memoizedState=S.baseState=D,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:D},S.queue=c,c=c.dispatch=LE.bind(null,ei,c),[S.memoizedState,c]},useRef:function(c){var h=z();return c={current:c},h.memoizedState=c},useState:function(c){c=bi(c);var h=c.queue,g=Yg.bind(null,ei,h);return h.dispatch=g,[c.memoizedState,g]},useDebugValue:ku,useDeferredValue:function(c,h){var g=z();return Md(g,c,h)},useTransition:function(){var c=bi(!1);return c=Xg.bind(null,ei,c.queue,!0,!1),z().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,g){var S=ei,D=z();if(Ti){if(g===void 0)throw Error(s(407));g=g()}else{if(g=h(),Xi===null)throw Error(s(349));vi&60||Lt(S,h,g)}D.memoizedState=g;var L={value:g,getSnapshot:h};return D.queue=L,Ad(Kt.bind(null,S,L,c),[c]),S.flags|=2048,fr(9,Tt.bind(null,S,L,g,h),{destroy:void 0},null),g},useId:function(){var c=z(),h=Xi.identifierPrefix;if(Ti){var g=ql,S=Vl;g=(S&~(1<<32-sa(S)-1)).toString(32)+g,h=":"+h+"R"+g,g=Qx++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=$j++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},useCacheRefresh:function(){return z().memoizedState=BE.bind(null,ei)}};Hh.useMemoCache=he,Hh.useHostTransitionStatus=Hu,Hh.useFormState=Ii,Hh.useActionState=Ii,Hh.useOptimistic=function(c){var h=z();h.memoizedState=h.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=Kg.bind(null,ei,!0,g),g.dispatch=h,[c,h]};var oc={readContext:cs,use:be,useCallback:jg,useContext:cs,useEffect:Ed,useImperativeHandle:J_,useInsertionEffect:Cd,useLayoutEffect:Y_,useMemo:Q_,useReducer:it,useRef:Hs,useState:function(){return it(He)},useDebugValue:ku,useDeferredValue:function(c,h){var g=oe();return Z_(g,Hi.memoizedState,c,h)},useTransition:function(){var c=it(He)[0],h=oe().memoizedState;return[typeof c=="boolean"?c:xe(c),h]},useSyncExternalStore:It,useId:zu};oc.useCacheRefresh=Wg,oc.useMemoCache=he,oc.useHostTransitionStatus=Hu,oc.useFormState=Qn,oc.useActionState=Qn,oc.useOptimistic=function(c,h){var g=oe();return Jt(g,Hi,c,h)};var zh={readContext:cs,use:be,useCallback:jg,useContext:cs,useEffect:Ed,useImperativeHandle:J_,useInsertionEffect:Cd,useLayoutEffect:Y_,useMemo:Q_,useReducer:pt,useRef:Hs,useState:function(){return pt(He)},useDebugValue:ku,useDeferredValue:function(c,h){var g=oe();return Hi===null?Md(g,c,h):Z_(g,Hi.memoizedState,c,h)},useTransition:function(){var c=pt(He)[0],h=oe().memoizedState;return[typeof c=="boolean"?c:xe(c),h]},useSyncExternalStore:It,useId:zu};zh.useCacheRefresh=Wg,zh.useMemoCache=he,zh.useHostTransitionStatus=Hu,zh.useFormState=$n,zh.useActionState=$n,zh.useOptimistic=function(c,h){var g=oe();return Hi!==null?Jt(g,Hi,c,h):(g.baseState=c,[c,g.queue.dispatch])};var s2={isMounted:function(c){return(c=c._reactInternals)?d(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var S=gr(),D=xt(S);D.payload=h,g!=null&&(D.callback=g),h=_t(c,D,S),h!==null&&(Rs(h,c,S),rt(h,c,S))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var S=gr(),D=xt(S);D.tag=1,D.payload=h,g!=null&&(D.callback=g),h=_t(c,D,S),h!==null&&(Rs(h,c,S),rt(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=gr(),S=xt(g);S.tag=2,h!=null&&(S.callback=h),h=_t(c,S,g),h!==null&&(Rs(h,c,g),rt(h,c,g))}},lI=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},uI=Error(s(461)),ps=!1,r2={dehydrated:null,treeContext:null,retryLane:0},Zx=b(null),Gh=null,jl=null,eX=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(g,S){c.push(S)}};this.abort=function(){h.aborted=!0,c.forEach(function(g){return g()})}},tX=ve.unstable_scheduleCallback,iX=ve.unstable_NormalPriority,En={$$typeof:Pr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},cI=kt.S;kt.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ke(c,h),cI!==null&&cI(c,h)};var Vh=b(null),Xl=!1,Cn=!1,a2=!1,hI=typeof WeakSet=="function"?WeakSet:Set,ms=null,fI=!1,jn=null,oa=!1,Co=null,hp=8192,nX={getCacheForType:function(c){var h=cs(En),g=h.data.get(c);return g===void 0&&(g=c(),h.data.set(c,g)),g}},$x=0,eb=1,tb=2,ib=3,nb=4;if(typeof Symbol=="function"&&Symbol.for){var D0=Symbol.for;$x=D0("selector.component"),eb=D0("selector.has_pseudo_class"),tb=D0("selector.role"),ib=D0("selector.test_id"),nb=D0("selector.text")}var sX=typeof WeakMap=="function"?WeakMap:Map,zi=0,Xi=null,ni=null,vi=0,Wi=0,la=null,Wl=!1,fp=!1,o2=!1,Yl=0,Mn=0,lc=0,qh=0,l2=0,Ga=0,dp=0,R0=null,tl=null,u2=!1,c2=0,B0=1/0,sb=null,uc=null,rb=!1,jh=null,L0=0,h2=0,f2=null,I0=0,d2=null;return Y.attemptContinuousHydration=function(c){if(c.tag===13){var h=Ie(c,67108864);h!==null&&Rs(h,c,67108864),K(c,67108864)}},Y.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=gr(),g=Ie(c,h);g!==null&&Rs(g,c,h),K(c,h)}},Y.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=w(c.pendingLanes);if(h!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;h;){var g=1<<31-sa(h);c.entanglements[1]|=g,h&=~g}ge(c),!(zi&6)&&(B0=Ao()+500,X(0,!1))}}break;case 13:h=Ie(c,2),h!==null&&Rs(h,c,2),Mx(),K(c,2)}},Y.batchedUpdates=function(c,h){return c(h)},Y.createComponentSelector=function(c){return{$$typeof:$x,value:c}},Y.createContainer=function(c,h,g,S,D,L,V,ie,de,Ne){return M(c,h,!1,null,g,S,L,V,ie,de,Ne,null)},Y.createHasPseudoClassSelector=function(c){return{$$typeof:eb,value:c}},Y.createHydrationContainer=function(c,h,g,S,D,L,V,ie,de,Ne,Je,ct,mt){return c=M(g,S,!0,c,D,L,ie,de,Ne,Je,ct,mt),c.context=R(null),g=c.current,S=gr(),D=xt(S),D.callback=h??null,_t(g,D,S),c.current.lanes=S,H(c,S),ge(c),c},Y.createPortal=function(c,h,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dt,key:S==null?null:""+S,children:c,containerInfo:h,implementation:g}},Y.createRoleSelector=function(c){return{$$typeof:tb,value:c}},Y.createTestNameSelector=function(c){return{$$typeof:ib,value:c}},Y.createTextSelector=function(c){return{$$typeof:nb,value:c}},Y.defaultOnCaughtError=function(c){console.error(c)},Y.defaultOnRecoverableError=function(c){lI(c)},Y.defaultOnUncaughtError=function(c){lI(c)},Y.deferredUpdates=function(c){var h=kt.T,g=Ph();try{return Ur(32),kt.T=null,c()}finally{Ur(g),kt.T=h}},Y.discreteUpdates=function(c,h,g,S,D){var L=kt.T,V=Ph();try{return Ur(2),kt.T=null,c(h,g,S,D)}finally{Ur(V),kt.T=L,zi===0&&(B0=Ao()+500)}},Y.findAllNodes=m0,Y.findBoundingRects=function(c,h){if(!b0)throw Error(s(363));h=m0(c,h),c=[];for(var g=0;g<h.length;g++)c.push(Jq(h[g]));for(h=c.length-1;0<h;h--){g=c[h];for(var S=g.x,D=S+g.width,L=g.y,V=L+g.height,ie=h-1;0<=ie;ie--)if(h!==ie){var de=c[ie],Ne=de.x,Je=Ne+de.width,ct=de.y,mt=ct+de.height;if(S>=Ne&&L>=ct&&D<=Je&&V<=mt){c.splice(h,1);break}else if(S!==Ne||g.width!==de.width||mt<L||ct>V){if(!(L!==ct||g.height!==de.height||Je<S||Ne>D)){Ne>S&&(de.width+=Ne-S,de.x=S),Je<D&&(de.width=D-Ne),c.splice(h,1);break}}else{ct>L&&(de.height+=ct-L,de.y=L),mt<V&&(de.height=V-ct),c.splice(h,1);break}}}return c},Y.findHostInstance=O,Y.findHostInstanceWithNoPortals=function(c){return c=m(c),c=c!==null?x(c):null,c===null?null:x0(c.stateNode)},Y.findHostInstanceWithWarning=function(c){return O(c)},Y.flushPassiveEffects=Jo,Y.flushSyncFromReconciler=function(c){var h=zi;zi|=1;var g=kt.T,S=Ph();try{if(Ur(2),kt.T=null,c)return c()}finally{Ur(S),kt.T=g,zi=h,!(zi&6)&&X(0,!1)}},Y.flushSyncWork=Mx,Y.focusWithin=function(c,h){if(!b0)throw Error(s(363));for(c=Gd(c),h=Vd(c,h),h=Array.from(h),c=0;c<h.length;){var g=h[c++],S=g.tag;if(!T0(g)){if((S===5||S===26||S===27)&&$q(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},Y.getFindAllNodesFailureDescription=function(c,h){if(!b0)throw Error(s(363));var g=0,S=[];c=[Gd(c),0];for(var D=0;D<c.length;){var L=c[D++],V=L.tag,ie=c[D++],de=h[ie];if((V!==5&&V!==26&&V!==27||!T0(L))&&(d0(L,de)&&(S.push(p0(de)),ie++,ie>g&&(g=ie)),ie<h.length))for(L=L.child;L!==null;)c.push(L,ie),L=L.sibling}if(g<h.length){for(c=[];g<h.length;g++)c.push(p0(h[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},Y.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return x0(c.child.stateNode);default:return c.child.stateNode}},Y.injectIntoDevTools=function(){var c={bundleType:0,version:Rq,rendererPackageName:Bq,currentDispatcherRef:kt,findFiberByHostInstance:FL,reconcilerVersion:"19.0.0"};if(PL!==null&&(c.rendererConfig=PL),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{S0=h.inject(c),ra=h}catch{}c=!!h.checkDCE}}return c},Y.isAlreadyRendering=function(){return!1},Y.observeVisibleRects=function(c,h,g,S){if(!b0)throw Error(s(363));c=m0(c,h);var D=ej(c,g,S).disconnect;return{disconnect:function(){D()}}},Y.shouldError=function(){return null},Y.shouldSuspend=function(){return!1},Y.startHostTransition=function(c,h,g,S){if(c.tag!==5)throw Error(s(476));var D=$_(c).queue;Xg(c,D,h,Jd,g===null?n:function(){var L=$_(c).next.queue;return Gu(c,L,{},gr()),g(S)})},Y.updateContainer=function(c,h,g,S){var D=h.current,L=gr();return G(D,L,c,h,g,S),L},Y.updateContainerSync=function(c,h,g,S){return h.tag===0&&Jo(),G(h.current,2,c,h,g,S),2},Y},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(X6);var Wne=X6.exports;j6.exports=Wne;var Yne=j6.exports;const Kne=Pu(Yne),Jne=i=>typeof i=="object"&&typeof i.then=="function",Mf=[];function K6(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function J6(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Mf)if(K6(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=Mf.indexOf(s);r!==-1&&Mf.splice(r,1)},promise:(Jne(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Mf.push(s),!t)throw s.promise}const Qne=(i,e,t)=>J6(i,e,!1,t),Zne=(i,e,t)=>void J6(i,e,!0,t),$ne=i=>{if(i===void 0||i.length===0)Mf.splice(0,Mf.length);else{const e=Mf.find(t=>K6(i,t.keys,t.equal));e&&e.remove()}};function GB(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=GB(n,e,t);if(s)return s;n=e?null:n.sibling}}function Q6(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const VB=Q6(ee.createContext(null));class Z6 extends ee.Component{render(){return ee.createElement(VB.Provider,{value:this._reactInternals},this.props.children)}}function $6(){const i=ee.useContext(VB);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ee.useId();return ee.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=GB(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const ese=Symbol.for("react.context"),tse=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===ese;function ise(){const i=$6(),[e]=ee.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;tse(n)&&n!==VB&&!e.has(n)&&e.set(n,ee.use(Q6(n))),t=t.return}return e}function nse(){const i=ise();return ee.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ee.createElement(e,null,ee.createElement(t.Provider,{...n,value:i.get(t)})),e=>ee.createElement(Z6,{...e})),[i])}function ez(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const tz=i=>i&&i.isOrthographicCamera,sse=i=>i&&i.hasOwnProperty("current"),rse=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),R_=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ee.useLayoutEffect:ee.useEffect;function iz(i){const e=ee.useRef(i);return R_(()=>void(e.current=i),[i]),e}function ase(){const i=$6(),e=nse();return ee.useMemo(()=>({children:t})=>{const s=!!GB(i,!0,r=>r.type===ee.StrictMode)?ee.StrictMode:ee.Fragment;return Ge(s,{children:Ge(e,{children:t})})},[i,e])}function ose({set:i}){return R_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const lse=(i=>(i=class extends ee.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function nz(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Op(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const hn={obj:i=>i===Object(i)&&!hn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(hn.str(i)||hn.num(i)||hn.boo(i))return i===e;const r=hn.obj(i);if(r&&n==="reference")return i===e;const a=hn.arr(i);if(a&&t==="reference")return i===e;if((a||r)&&i===e)return!0;let o;for(o in i)if(!(o in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(o in s?e:i)if(!hn.equ(i[o],e[o],{strict:s,objects:"reference"}))return!1}else for(o in s?e:i)if(i[o]!==e[o])return!1;if(hn.und(o)){if(a&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function use(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function cse(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const sz=["children","key","ref"];function hse(i){const e={};for(const t in i)sz.includes(t)||(e[t]=i[t]);return e}function _1(i,e,t,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:hse(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function Fv(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const SU=/-\d+$/;function x1(i,e){if(hn.str(e.props.attach)){if(SU.test(e.props.attach)){const s=e.props.attach.replace(SU,""),{root:r,key:a}=Fv(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:t,key:n}=Fv(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else hn.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function b1(i,e){if(hn.str(e.props.attach)){const{root:t,key:n}=Fv(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const Ww=[...sz,"args","dispose","attach","object","onUpdate","dispose"],AU=new Map;function fse(i){let e=AU.get(i.constructor);try{e||(e=new i.constructor,AU.set(i.constructor,e))}catch{}return e}function dse(i,e){const t={};for(const n in e)if(!Ww.includes(n)&&!hn.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(Ww.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=Fv(i.object,n);if(s.constructor&&s.constructor.length===0){const a=fse(s);hn.und(a)||(t[r]=a[r])}else t[r]=0}return t}const pse=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],mse=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Fc(i,e){var t;const n=i.__r3f,s=n&&ez(n).getState(),r=n==null?void 0:n.eventCount;for(const o in e){let l=e[o];if(Ww.includes(o))continue;if(n&&mse.test(o)){typeof l=="function"?n.handlers[o]=l:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(l===void 0)continue;let{root:u,key:f,target:d}=Fv(i,o);if(d instanceof ig&&l instanceof ig)d.mask=l.mask;else if(d instanceof $e&&rse(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var a;u[f]=l,s&&!s.linear&&pse.includes(f)&&(a=u[f])!=null&&a.isTexture&&u[f].format===er&&u[f].type===Cs&&(u[f].colorSpace=Ci)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const o=n.object,l=s.internal.interaction.indexOf(o);l>-1&&s.internal.interaction.splice(l,1),n.eventCount&&o.raycast!==null&&s.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Og(n),i}function Og(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function gse(i,e){i.manual||(tz(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Sr=i=>i==null?void 0:i.isObject3D;function fT(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function rz(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function yse(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{rz(t.capturedMap,e,n,s)})}function vse(i){function e(l){const{internal:u}=i.getState(),f=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function n(l,u){const f=i.getState(),d=new Set,p=[],m=u?u(f.internal.interaction):f.internal.interaction;for(let v=0;v<m.length;v++){const T=Op(m[v]);T&&(T.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function _(v){const T=Op(v);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var A;T.events.compute==null||T.events.compute(l,T,(A=T.previousRoot)==null?void 0:A.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(v,!0):[]}let x=m.flatMap(_).sort((v,T)=>{const A=Op(v.object),w=Op(T.object);return!A||!w?v.distance-T.distance:w.events.priority-A.events.priority||v.distance-T.distance}).filter(v=>{const T=fT(v);return d.has(T)?!1:(d.add(T),!0)});f.events.filter&&(x=f.events.filter(x,f));for(const v of x){let T=v.object;for(;T;){var b;(b=T.__r3f)!=null&&b.eventCount&&p.push({...v,eventObject:T}),T=T.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let v of f.internal.capturedMap.get(l.pointerId).values())d.has(fT(v.intersection))||p.push(v.intersection);return p}function s(l,u,f,d){if(l.length){const p={stopped:!1};for(const m of l){let _=Op(m.object);if(_||m.object.traverseAncestors(x=>{const b=Op(x);if(b)return _=b,!1}),_){const{raycaster:x,pointer:b,camera:v,internal:T}=_,A=new W(b.x,b.y,0).unproject(v),w=N=>{var U,H;return(U=(H=T.capturedMap.get(N))==null?void 0:H.has(m.eventObject))!=null?U:!1},B=N=>{const U={intersection:m,target:u.target};T.capturedMap.has(N)?T.capturedMap.get(N).set(m.eventObject,U):T.capturedMap.set(N,new Map([[m.eventObject,U]])),u.target.setPointerCapture(N)},I=N=>{const U=T.capturedMap.get(N);U&&rz(T.capturedMap,m.eventObject,U,N)};let P={};for(let N in u){let U=u[N];typeof U!="function"&&(P[N]=U)}let F={...m,...P,pointer:b,intersections:l,stopped:p.stopped,delta:f,unprojectedPoint:A,ray:x.ray,camera:v,stopPropagation(){const N="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!N||N.has(m.eventObject))&&(F.stopped=p.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(U=>U.eventObject===m.eventObject))){const U=l.slice(0,l.indexOf(m));r([...U,m])}},target:{hasPointerCapture:w,setPointerCapture:B,releasePointerCapture:I},currentTarget:{hasPointerCapture:w,setPointerCapture:B,releasePointerCapture:I},nativeEvent:u};if(d(F),p.stopped===!0)break}}}return l}function r(l){const{internal:u}=i.getState();for(const f of u.hovered.values())if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f;if(u.hovered.delete(fT(f)),p!=null&&p.eventCount){const m=p.handlers,_={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(_),m.onPointerLeave==null||m.onPointerLeave(_)}}}function a(l,u){for(let f=0;f<u.length;f++){const d=u[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return u=>{const{internal:f}=i.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),r([]))})}}return function(f){const{onPointerMissed:d,internal:p}=i.getState();p.lastEvent.current=f;const m=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=n(f,m?t:void 0),v=_?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=b.map(A=>A.eventObject)),_&&!b.length&&v<=2&&(a(f,p.interaction),d&&d(f)),m&&r(b);function T(A){const w=A.eventObject,B=w.__r3f;if(!(B!=null&&B.eventCount))return;const I=B.handlers;if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const P=fT(A),F=p.hovered.get(P);F?F.stopped&&A.stopPropagation():(p.hovered.set(P,A),I.onPointerOver==null||I.onPointerOver(A),I.onPointerEnter==null||I.onPointerEnter(A))}I.onPointerMove==null||I.onPointerMove(A)}else{const P=I[l];P?(!_||p.initialHits.includes(w))&&(a(f,p.interaction.filter(F=>!p.initialHits.includes(F))),P(A)):_&&p.initialHits.includes(w)&&a(f,p.interaction.filter(F=>!p.initialHits.includes(F)))}}s(b,f,v,T)}}return{handlePointer:o}}const EU=i=>!!(i!=null&&i.render),az=ee.createContext(null),_se=(i,e)=>{const t=Xne((o,l)=>{const u=new W,f=new W,d=new W;function p(v=l().camera,T=f,A=l().size){const{width:w,height:B,top:I,left:P}=A,F=w/B;T.isVector3?d.copy(T):d.set(...T);const N=v.getWorldPosition(u).distanceTo(d);if(tz(v))return{width:w/v.zoom,height:B/v.zoom,top:I,left:P,factor:1,distance:N,aspect:F};{const U=v.fov*Math.PI/180,H=2*Math.tan(U/2)*N,re=H*(w/B);return{width:re,height:H,top:I,left:P,factor:w/re,distance:N,aspect:F}}}let m;const _=v=>o(T=>({performance:{...T.performance,current:v}})),x=new Te;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(v=1)=>i(l(),v),advance:(v,T)=>e(v,T,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new NB,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&_(v.performance.min),m=setTimeout(()=>_(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>o(T=>({...T,events:{...T.events,...v}})),setSize:(v,T,A=0,w=0)=>{const B=l().camera,I={width:v,height:T,top:A,left:w};o(P=>({size:I,viewport:{...P.viewport,...p(B,f,I)}}))},setDpr:v=>o(T=>{const A=nz(v);return{viewport:{...T.viewport,dpr:A,initialDpr:T.viewport.initialDpr||A}}}),setFrameloop:(v="always")=>{const T=l().clock;T.stop(),T.elapsedTime=0,v!=="never"&&(T.start(),T.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ee.createRef(),active:!1,frames:0,priority:0,subscribe:(v,T,A)=>{const w=l().internal;return w.priority=w.priority+(T>0?1:0),w.subscribers.push({ref:v,priority:T,store:A}),w.subscribers=w.subscribers.sort((B,I)=>B.priority-I.priority),()=>{const B=l().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(T>0?1:0),B.subscribers=B.subscribers.filter(I=>I.ref!==v))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:f,set:d}=t.getState();if(l.width!==s.width||l.height!==s.height||u.dpr!==r){s=l,r=u.dpr,gse(o,l),u.dpr>0&&f.setPixelRatio(u.dpr);const p=typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,p)}o!==a&&(a=o,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>i(o)),t};function oz(){const i=ee.useContext(az);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function is(i=t=>t,e){return oz()(i,e)}function vh(i,e=0){const t=oz(),n=t.getState().internal.subscribe,s=iz(i);return R_(()=>n(s,e,t),[e,n,t]),null}const CU=new WeakMap,xse=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function lz(i,e){return function(t,...n){let s;return xse(t)?(s=CU.get(t),s||(s=new t,CU.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((a,o)=>s.load(r,l=>{Sr(l==null?void 0:l.scene)&&Object.assign(l,use(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${r}: ${l==null?void 0:l.message}`))))))}}function B_(i,e,t,n){const s=Array.isArray(e)?e:[e],r=Qne(lz(t,n),[i,...s],{equal:hn.equ});return Array.isArray(e)?r:r[0]}B_.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return Zne(lz(t),[i,...n])};B_.clear=function(i,e){const t=Array.isArray(e)?e:[e];return $ne([i,...t])};function bse(i){const e=Kne(i);return e.injectIntoDevTools({bundleType:(typeof process<"u",0),rendererPackageName:"@react-three/fiber",version:ee.version}),e}const uz=0,og={},Tse=/^three(?=[A-Z])/,$A=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Sse=0;const Ase=i=>typeof i=="function";function qB(i){if(Ase(i)){const e=`${Sse++}`;return og[e]=i,e}else Object.assign(og,i)}function cz(i,e){const t=$A(i),n=og[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Ese(i,e,t){var n;return i=$A(i)in og?i:i.replace(Tse,""),cz(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,_1(e.object,t,i,e)}function Cse(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?b1(i.parent,i):Sr(i.object)&&(i.object.visible=!1),i.isHidden=!0,Og(i)}}function hz(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?x1(i.parent,i):Sr(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Og(i)}}function jB(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const a=og[$A(e.type)];e.object=(s=e.props.object)!=null?s:new a(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(Fc(e.object,e.props),e.props.attach)x1(i,e);else if(Sr(e.object)&&Sr(i.object)){const a=i.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const o=i.object.children.indexOf(e.object);if(o!==-1){i.object.children.splice(o,1);const l=o<a?a-1:a;i.object.children.splice(l,0,e.object)}else e.object.parent=i.object,i.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const a of e.children)jB(e,a);Og(e)}}function FC(i,e){e&&(e.parent=i,i.children.push(e),jB(i,e))}function MU(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),jB(i,e,t)}function fz(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():Xw.unstable_scheduleCallback(Xw.unstable_IdlePriority,e)}}function Yw(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?b1(i,e):Sr(e.object)&&Sr(i.object)&&(i.object.remove(e.object),yse(ez(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const a=e.children[r];Yw(e,a,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&fz(e.object),t===void 0&&Og(e)}function Mse(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const XT=[];function wse(){for(const[t]of XT){const n=t.parent;if(n){t.props.attach?b1(n,t):Sr(t.object)&&Sr(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?b1(t,s):Sr(s.object)&&Sr(t.object)&&t.object.remove(s.object)}t.isHidden&&hz(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&fz(t.object)}for(const[t,n,s]of XT){t.props=n;const r=t.parent;if(r){var i,e;const a=og[$A(t.type)];t.object=(i=t.props.object)!=null?i:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Mse(s,t.object),Fc(t.object,t.props),t.props.attach?x1(r,t):Sr(t.object)&&Sr(r.object)&&r.object.add(t.object);for(const o of t.children)o.props.attach?x1(t,o):Sr(o.object)&&Sr(t.object)&&t.object.add(o.object);Og(t)}}XT.length=0}const kC=()=>{},wU={};let dT=uz;const Dse=0,Rse=4,Kw=bse({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Ese,removeChild:Yw,appendChild:FC,appendInitialChild:FC,insertBefore:MU,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||FC(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||Yw(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||MU(n,e,t)},getRootHostContext:()=>wU,getChildHostContext:()=>wU,commitUpdate(i,e,t,n,s){var r,a,o;cz(e,n);let l=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=t.args)==null?void 0:a.length)||(o=n.args)!=null&&o.some((f,d)=>{var p;return f!==((p=t.args)==null?void 0:p[d])}))&&(l=!0),l)XT.push([i,{...n},s]);else{const f=dse(i,n);Object.keys(f).length&&(Object.assign(i.props,f),Fc(i.object,f))}(s.sibling===null||(s.flags&Rse)===Dse)&&wse()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>_1(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Cse,unhideInstance:hz,createTextInstance:kC,hideTextInstance:kC,unhideTextInstance:kC,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ee.createContext(null),setCurrentUpdatePriority(i){dT=i},getCurrentUpdatePriority(){return dT},resolveUpdatePriority(){var i;if(dT!==uz)return dT;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return jT.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return jT.ContinuousEventPriority;default:return jT.DefaultEventPriority}},resetFormInstance(){}}),ld=new Map,Pp={objects:"shallow",strict:!1};function Bse(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Lse(i){const e=ld.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||_se(Zw,RU),a=t||Kw.createContainer(r,jT.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||ld.set(i,{fiber:a,store:r});let o,l,u=!1,f=null;return{async configure(d={}){let p;f=new Promise(Le=>p=Le);let{gl:m,size:_,scene:x,events:b,onCreated:v,shadows:T=!1,linear:A=!1,flat:w=!1,legacy:B=!1,orthographic:I=!1,frameloop:P="always",dpr:F=[1,2],performance:N,raycaster:U,camera:H,onPointerMissed:re}=d,J=r.getState(),ae=J.gl;if(!J.gl){const Le={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},qe=typeof m=="function"?await m(Le):m;EU(qe)?ae=qe:ae=new F6({...Le,...m}),J.set({gl:ae})}let ce=J.raycaster;ce||J.set({raycaster:ce=new R6});const{params:j,...Q}=U||{};if(hn.equ(Q,ce,Pp)||Fc(ce,{...Q}),hn.equ(j,ce.params,Pp)||Fc(ce,{params:{...ce.params,...j}}),!J.camera||J.camera===l&&!hn.equ(l,H,Pp)){l=H;const Le=H==null?void 0:H.isCamera,qe=Le?H:I?new so(0,0,0,0,.1,1e3):new rn(75,0,.1,1e3);Le||(qe.position.z=5,H&&(Fc(qe,H),qe.manual||("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(qe.manual=!0,qe.updateProjectionMatrix())),!J.camera&&!(H!=null&&H.rotation)&&qe.lookAt(0,0,0)),J.set({camera:qe}),ce.camera=qe}if(!J.scene){let Le;x!=null&&x.isScene?(Le=x,_1(Le,r,"",{})):(Le=new Lv,_1(Le,r,"",{}),x&&Fc(Le,x)),J.set({scene:Le})}b&&!J.events.handlers&&J.set({events:b(r)});const $=Bse(i,_);if(hn.equ($,J.size,Pp)||J.setSize($.width,$.height,$.top,$.left),F&&J.viewport.dpr!==nz(F)&&J.setDpr(F),J.frameloop!==P&&J.setFrameloop(P),J.onPointerMissed||J.set({onPointerMissed:re}),N&&!hn.equ(N,J.performance,Pp)&&J.set(Le=>({performance:{...Le.performance,...N}})),!J.xr){var pe;const Le=(me,Fe)=>{const nt=r.getState();nt.frameloop!=="never"&&RU(me,!0,nt,Fe)},qe=()=>{const me=r.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?Le:null),me.gl.xr.isPresenting||Zw(me)},ht={connect(){const me=r.getState().gl;me.xr.addEventListener("sessionstart",qe),me.xr.addEventListener("sessionend",qe)},disconnect(){const me=r.getState().gl;me.xr.removeEventListener("sessionstart",qe),me.xr.removeEventListener("sessionend",qe)}};typeof((pe=ae.xr)==null?void 0:pe.addEventListener)=="function"&&ht.connect(),J.set({xr:ht})}if(ae.shadowMap){const Le=ae.shadowMap.enabled,qe=ae.shadowMap.type;if(ae.shadowMap.enabled=!!T,hn.boo(T))ae.shadowMap.type=Gy;else if(hn.str(T)){var Se;const ht={basic:Jk,percentage:vA,soft:Gy,variance:Bo};ae.shadowMap.type=(Se=ht[T])!=null?Se:Gy}else hn.obj(T)&&Object.assign(ae.shadowMap,T);(Le!==ae.shadowMap.enabled||qe!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return pi.enabled=!B,u||(ae.outputColorSpace=A?Al:Ci,ae.toneMapping=w?No:QR),J.legacy!==B&&J.set(()=>({legacy:B})),J.linear!==A&&J.set(()=>({linear:A})),J.flat!==w&&J.set(()=>({flat:w})),m&&!hn.fun(m)&&!EU(m)&&!hn.equ(m,ae,Pp)&&Fc(ae,m),o=v,u=!0,p(),this},render(d){return!u&&!f&&this.configure(),f.then(()=>{Kw.updateContainer(Ge(Ise,{store:r,children:d,onCreated:o,rootElement:i}),a,null,()=>{})}),r},unmount(){dz(i)}}}function Ise({store:i,children:e,onCreated:t,rootElement:n}){return R_(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),Ge(az.Provider,{value:i,children:e})}function dz(i,e){const t=ld.get(i),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),Kw.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,o,l;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(o=s.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),cse(s.scene),ld.delete(i),e&&e(i)}catch{}},500)})}}const Ose=new Set,Pse=new Set,Use=new Set;function HC(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Qy(i,e){switch(i){case"before":return HC(Ose,e);case"after":return HC(Pse,e);case"tail":return HC(Use,e)}}let zC,GC;function Jw(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),zC=e.internal.subscribers;for(let s=0;s<zC.length;s++)GC=zC[s],GC.ref.current(GC.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let T1=!1,Qw=!1,VC,DU,Up;function pz(i){DU=requestAnimationFrame(pz),T1=!0,VC=0,Qy("before",i),Qw=!0;for(const t of ld.values()){var e;Up=t.store.getState(),Up.internal.active&&(Up.frameloop==="always"||Up.internal.frames>0)&&!((e=Up.gl.xr)!=null&&e.isPresenting)&&(VC+=Jw(i,Up))}if(Qw=!1,Qy("after",i),VC===0)return Qy("tail",i),T1=!1,cancelAnimationFrame(DU)}function Zw(i,e=1){var t;if(!i)return ld.forEach(n=>Zw(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):Qw?i.internal.frames=2:i.internal.frames=1,T1||(T1=!0,requestAnimationFrame(pz)))}function RU(i,e=!0,t,n){if(e&&Qy("before",i),t)Jw(i,t,n);else for(const s of ld.values())Jw(i,s.store.getState());e&&Qy("after",i)}const qC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Nse(i){const{handlePointer:e}=vse(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(qC).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[o,l]=qC[r];t.addEventListener(o,a,{passive:l})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=qC[s];n.connected.removeEventListener(a,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function BU(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function Fse({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=ee.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=ee.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,f=ee.useRef(!1);ee.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,p,m]=ee.useMemo(()=>{const v=()=>{if(!o.current.element)return;const{left:T,top:A,width:w,height:B,bottom:I,right:P,x:F,y:N}=o.current.element.getBoundingClientRect(),U={left:T,top:A,width:w,height:B,bottom:I,right:P,x:F,y:N};o.current.element instanceof HTMLElement&&n&&(U.height=o.current.element.offsetHeight,U.width=o.current.element.offsetWidth),Object.freeze(U),f.current&&!Gse(o.current.lastBounds,U)&&a(o.current.lastBounds=U)};return[v,u?BU(v,u):v,l?BU(v,l):v]},[a,n,l,u]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function x(){o.current.element&&(o.current.resizeObserver=new s(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(v=>v.addEventListener("scroll",m,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=v=>{!v||v===o.current.element||(_(),o.current.element=v,o.current.scrollContainers=mz(v),x())};return Hse(m,!!e),kse(p),ee.useEffect(()=>{_(),x()},[e,m,p]),ee.useEffect(()=>_,[]),[b,r,d]}function kse(i){ee.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function Hse(i,e){ee.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function mz(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...mz(i.parentElement)]}const zse=["x","y","top","bottom","left","right","width","height"],Gse=(i,e)=>zse.every(t=>i[t]===e[t]);function Vse({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:a=Nse,eventSource:o,eventPrefix:l,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:_,dpr:x,performance:b,raycaster:v,camera:T,scene:A,onPointerMissed:w,onCreated:B,...I}){ee.useMemo(()=>qB(Tne),[]);const P=ase(),[F,N]=Fse({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=ee.useRef(null),H=ee.useRef(null);ee.useImperativeHandle(i,()=>U.current);const re=iz(w),[J,ae]=ee.useState(!1),[ce,j]=ee.useState(!1);if(J)throw J;if(ce)throw ce;const Q=ee.useRef(null);return R_(()=>{const pe=U.current;if(N.width>0&&N.height>0&&pe){Q.current||(Q.current=Lse(pe));async function Se(){await Q.current.configure({gl:r,scene:A,events:a,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:_,dpr:x,performance:b,raycaster:v,camera:T,size:N,onPointerMissed:(...Le)=>re.current==null?void 0:re.current(...Le),onCreated:Le=>{Le.events.connect==null||Le.events.connect(o?sse(o)?o.current:o:H.current),l&&Le.setEvents({compute:(qe,ht)=>{const me=qe[l+"X"],Fe=qe[l+"Y"];ht.pointer.set(me/ht.size.width*2-1,-(Fe/ht.size.height)*2+1),ht.raycaster.setFromCamera(ht.pointer,ht.camera)}}),B==null||B(Le)}}),Q.current.render(Ge(P,{children:Ge(lse,{set:j,children:Ge(ee.Suspense,{fallback:Ge(ose,{set:ae}),children:e??null})})}))}Se()}}),ee.useEffect(()=>{const pe=U.current;if(pe)return()=>dz(pe)},[]),Ge("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:o?"none":"auto",...s},...I,children:Ge("div",{ref:F,style:{width:"100%",height:"100%"},children:Ge("canvas",{ref:U,style:{display:"block"},children:t})})})}function qse(i){return Ge(Z6,{children:Ge(Vse,{...i})})}function Ki(){return Ki=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ki.apply(null,arguments)}const jse=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ki}},Symbol.toStringTag,{value:"Module"})),L_=new W,XB=new W,Xse=new W,LU=new Te;function Wse(i,e,t){const n=L_.setFromMatrixPosition(i.matrixWorld);n.project(e);const s=t.width/2,r=t.height/2;return[n.x*s+s,-(n.y*r)+r]}function Yse(i,e){const t=L_.setFromMatrixPosition(i.matrixWorld),n=XB.setFromMatrixPosition(e.matrixWorld),s=t.sub(n),r=e.getWorldDirection(Xse);return s.angleTo(r)>Math.PI/2}function Kse(i,e,t,n){const s=L_.setFromMatrixPosition(i.matrixWorld),r=s.clone();r.project(e),LU.set(r.x,r.y),t.setFromCamera(LU,e);const a=t.intersectObjects(n,!0);if(a.length){const o=a[0].distance;return s.distanceTo(t.ray.origin)<o}return!0}function Jse(i,e){if(e instanceof so)return e.zoom;if(e instanceof rn){const t=L_.setFromMatrixPosition(i.matrixWorld),n=XB.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,r=t.distanceTo(n);return 1/(2*Math.tan(s/2)*r)}else return 1}function Qse(i,e,t){if(e instanceof rn||e instanceof so){const n=L_.setFromMatrixPosition(i.matrixWorld),s=XB.setFromMatrixPosition(e.matrixWorld),r=n.distanceTo(s),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*r+o)}}const $w=i=>Math.abs(i)<1e-10?0:i;function gz(i,e,t=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=$w(e[s]*i.elements[s])+(s!==15?",":")");return t+n}const Zse=(i=>e=>gz(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),$se=(i=>(e,t)=>gz(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function ere(i){return i&&typeof i=="object"&&"current"in i}const WT=ee.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:s,center:r,fullscreen:a,portal:o,distanceFactor:l,sprite:u=!1,transform:f=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:_,material:x,geometry:b,zIndexRange:v=[16777271,0],calculatePosition:T=Wse,as:A="div",wrapperClass:w,pointerEvents:B="auto",...I},P)=>{const{gl:F,camera:N,scene:U,size:H,raycaster:re,events:J,viewport:ae}=is(),[ce]=ee.useState(()=>document.createElement(A)),j=ee.useRef(null),Q=ee.useRef(null),$=ee.useRef(0),pe=ee.useRef([0,0]),Se=ee.useRef(null),Le=ee.useRef(null),qe=(o==null?void 0:o.current)||J.connected||F.domElement.parentNode,ht=ee.useRef(null),me=ee.useRef(!1),Fe=ee.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&ere(d[0]),[d]);ee.useLayoutEffect(()=>{const dt=F.domElement;d&&d==="blending"?(dt.style.zIndex=`${Math.floor(v[0]/2)}`,dt.style.position="absolute",dt.style.pointerEvents="none"):(dt.style.zIndex=null,dt.style.position=null,dt.style.pointerEvents=null)},[d]),ee.useLayoutEffect(()=>{if(Q.current){const dt=j.current=Gk.createRoot(ce);if(U.updateMatrixWorld(),f)ce.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const yt=T(Q.current,N,H);ce.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${yt[0]}px,${yt[1]}px,0);transform-origin:0 0;`}return qe&&(s?qe.prepend(ce):qe.appendChild(ce)),()=>{qe&&qe.removeChild(ce),dt.unmount()}}},[qe,f]),ee.useLayoutEffect(()=>{w&&(ce.className=w)},[w]);const nt=ee.useMemo(()=>f?{position:"absolute",top:0,left:0,width:H.width,height:H.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...a&&{top:-H.height/2,left:-H.width/2,width:H.width,height:H.height},...t},[t,r,a,H,f]),Qe=ee.useMemo(()=>({position:"absolute",pointerEvents:B}),[B]);ee.useLayoutEffect(()=>{if(me.current=!1,f){var dt;(dt=j.current)==null||dt.render(ee.createElement("div",{ref:Se,style:nt},ee.createElement("div",{ref:Le,style:Qe},ee.createElement("div",{ref:P,className:n,style:t,children:i}))))}else{var yt;(yt=j.current)==null||yt.render(ee.createElement("div",{ref:P,style:nt,className:n,children:i}))}});const gt=ee.useRef(!0);vh(dt=>{if(Q.current){N.updateMatrixWorld(),Q.current.updateWorldMatrix(!0,!1);const yt=f?pe.current:T(Q.current,N,H);if(f||Math.abs($.current-N.zoom)>e||Math.abs(pe.current[0]-yt[0])>e||Math.abs(pe.current[1]-yt[1])>e){const Ut=Yse(Q.current,N);let Ct=!1;Fe&&(Array.isArray(d)?Ct=d.map(Ie=>Ie.current):d!=="blending"&&(Ct=[U]));const te=gt.current;if(Ct){const Ie=Kse(Q.current,N,re,Ct);gt.current=Ie&&!Ut}else gt.current=!Ut;te!==gt.current&&(p?p(!gt.current):ce.style.display=gt.current?"block":"none");const ui=Math.floor(v[0]/2),Pe=d?Fe?[v[0],ui]:[ui-1,0]:v;if(ce.style.zIndex=`${Qse(Q.current,N,Pe)}`,f){const[Ie,Me]=[H.width/2,H.height/2],We=N.projectionMatrix.elements[5]*Me,{isOrthographicCamera:ge,top:X,left:k,bottom:ue,right:Ae}=N,Re=Zse(N.matrixWorldInverse),we=ge?`scale(${We})translate(${$w(-(Ae+k)/2)}px,${$w((X+ue)/2)}px)`:`translateZ(${We}px)`;let et=Q.current.matrixWorld;u&&(et=N.matrixWorldInverse.clone().transpose().copyPosition(et).scale(Q.current.scale),et.elements[3]=et.elements[7]=et.elements[11]=0,et.elements[15]=1),ce.style.width=H.width+"px",ce.style.height=H.height+"px",ce.style.perspective=ge?"":`${We}px`,Se.current&&Le.current&&(Se.current.style.transform=`${we}${Re}translate(${Ie}px,${Me}px)`,Le.current.style.transform=$se(et,1/((l||10)/400)))}else{const Ie=l===void 0?1:Jse(Q.current,N)*l;ce.style.transform=`translate3d(${yt[0]}px,${yt[1]}px,0) scale(${Ie})`}pe.current=yt,$.current=N.zoom}}if(!Fe&&ht.current&&!me.current)if(f){if(Se.current){const yt=Se.current.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const{isOrthographicCamera:Ut}=N;if(Ut||b)I.scale&&(Array.isArray(I.scale)?I.scale instanceof W?ht.current.scale.copy(I.scale.clone().divideScalar(1)):ht.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):ht.current.scale.setScalar(1/I.scale));else{const Ct=(l||10)/400,te=yt.clientWidth*Ct,ui=yt.clientHeight*Ct;ht.current.scale.set(te,ui,1)}me.current=!0}}}else{const yt=ce.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const Ut=1/ae.factor,Ct=yt.clientWidth*Ut,te=yt.clientHeight*Ut;ht.current.scale.set(Ct,te,1),me.current=!0}ht.current.lookAt(dt.camera.position)}});const Gt=ee.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return ee.createElement("group",Ki({},I,{ref:Q}),d&&!Fe&&ee.createElement("mesh",{castShadow:m,receiveShadow:_,ref:ht},b||ee.createElement("planeGeometry",null),x||ee.createElement("shaderMaterial",{side:Qs,vertexShader:Gt.vertexShader,fragmentShader:Gt.fragmentShader})))});function tre(i,e="pointer",t="auto",n=document.body){ee.useEffect(()=>{if(i)return n.style.cursor=e,()=>void(n.style.cursor=t)},[i])}const ire=i=>i;function nre(i,e=ire){const t=Kf.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return Kf.useDebugValue(t),t}const IU=i=>{const e=q6(i),t=n=>nre(e,n);return Object.assign(t,e),t},sre=i=>i?IU(i):IU;let ty=0;const rre=sre(i=>(om.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-ty)/(n-ty)*100})},om.onLoad=()=>{i({active:!1})},om.onError=e=>i(t=>({errors:[...t.errors,e]})),om.onProgress=(e,t,n)=>{t===n&&(ty=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-ty)/(n-ty)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),are=(()=>parseInt(fh.replace(/\D+/g,"")))();function OU(i,e){if(e===MH)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===p1||e===lB){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(t)if(e===p1)for(let a=1;a<=n;a++)s.push(t.getX(0)),s.push(t.getX(a)),s.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(t.getX(a)),s.push(t.getX(a+1)),s.push(t.getX(a+2))):(s.push(t.getX(a+2)),s.push(t.getX(a+1)),s.push(t.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var ore=Object.defineProperty,lre=(i,e,t)=>e in i?ore(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ure=(i,e,t)=>(lre(i,typeof e!="symbol"?e+"":e,t),t);class cre{constructor(){ure(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}var hre=Object.defineProperty,fre=(i,e,t)=>e in i?hre(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Bt=(i,e,t)=>(fre(i,typeof e!="symbol"?e+"":e,t),t);const pT=new gd,PU=new ru,dre=Math.cos(70*(Math.PI/180)),UU=(i,e)=>(i%e+e)%e;let pre=class extends cre{constructor(e,t){super(),Bt(this,"object"),Bt(this,"domElement"),Bt(this,"enabled",!0),Bt(this,"target",new W),Bt(this,"minDistance",0),Bt(this,"maxDistance",1/0),Bt(this,"minZoom",0),Bt(this,"maxZoom",1/0),Bt(this,"minPolarAngle",0),Bt(this,"maxPolarAngle",Math.PI),Bt(this,"minAzimuthAngle",-1/0),Bt(this,"maxAzimuthAngle",1/0),Bt(this,"enableDamping",!1),Bt(this,"dampingFactor",.05),Bt(this,"enableZoom",!0),Bt(this,"zoomSpeed",1),Bt(this,"enableRotate",!0),Bt(this,"rotateSpeed",1),Bt(this,"enablePan",!0),Bt(this,"panSpeed",1),Bt(this,"screenSpacePanning",!0),Bt(this,"keyPanSpeed",7),Bt(this,"zoomToCursor",!1),Bt(this,"autoRotate",!1),Bt(this,"autoRotateSpeed",2),Bt(this,"reverseOrbit",!1),Bt(this,"reverseHorizontalOrbit",!1),Bt(this,"reverseVerticalOrbit",!1),Bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Bt(this,"mouseButtons",{LEFT:pf.ROTATE,MIDDLE:pf.DOLLY,RIGHT:pf.PAN}),Bt(this,"touches",{ONE:mf.ROTATE,TWO:mf.DOLLY_PAN}),Bt(this,"target0"),Bt(this,"position0"),Bt(this,"zoom0"),Bt(this,"_domElementKeyEvents",null),Bt(this,"getPolarAngle"),Bt(this,"getAzimuthalAngle"),Bt(this,"setPolarAngle"),Bt(this,"setAzimuthalAngle"),Bt(this,"getDistance"),Bt(this,"getZoomScale"),Bt(this,"listenToKeyEvents"),Bt(this,"stopListenToKeyEvents"),Bt(this,"saveState"),Bt(this,"reset"),Bt(this,"update"),Bt(this,"connect"),Bt(this,"dispose"),Bt(this,"dollyIn"),Bt(this,"dollyOut"),Bt(this,"getScale"),Bt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=se=>{let Be=UU(se,2*Math.PI),tt=f.phi;tt<0&&(tt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let ne=Math.abs(Be-tt);2*Math.PI-ne<ne&&(Be<tt?Be+=2*Math.PI:tt+=2*Math.PI),d.phi=Be-tt,n.update()},this.setAzimuthalAngle=se=>{let Be=UU(se,2*Math.PI),tt=f.theta;tt<0&&(tt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let ne=Math.abs(Be-tt);2*Math.PI-ne<ne&&(Be<tt?Be+=2*Math.PI:tt+=2*Math.PI),d.theta=Be-tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=se=>{se.addEventListener("keydown",Ke),this._domElementKeyEvents=se},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ke),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),l=o.NONE},this.update=(()=>{const se=new W,Be=new W(0,1,0),tt=new as().setFromUnitVectors(e.up,Be),ne=tt.clone().invert(),je=new W,Ee=new as,Ue=2*Math.PI;return function(){const st=n.object.position;tt.setFromUnitVectors(e.up,Be),ne.copy(tt).invert(),se.copy(st).sub(n.target),se.applyQuaternion(tt),f.setFromVector3(se),n.autoRotate&&l===o.NONE&&ae(re()),n.enableDamping?(f.theta+=d.theta*n.dampingFactor,f.phi+=d.phi*n.dampingFactor):(f.theta+=d.theta,f.phi+=d.phi);let Mt=n.minAzimuthAngle,Zt=n.maxAzimuthAngle;isFinite(Mt)&&isFinite(Zt)&&(Mt<-Math.PI?Mt+=Ue:Mt>Math.PI&&(Mt-=Ue),Zt<-Math.PI?Zt+=Ue:Zt>Math.PI&&(Zt-=Ue),Mt<=Zt?f.theta=Math.max(Mt,Math.min(Zt,f.theta)):f.theta=f.theta>(Mt+Zt)/2?Math.max(Mt,f.theta):Math.min(Zt,f.theta)),f.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,f.phi)),f.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(m,n.dampingFactor):n.target.add(m),n.zoomToCursor&&N||n.object.isOrthographicCamera?f.radius=ht(f.radius):f.radius=ht(f.radius*p),se.setFromSpherical(f),se.applyQuaternion(ne),st.copy(n.target).add(se),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Di=!1;if(n.zoomToCursor&&N){let Xt=null;if(n.object instanceof rn&&n.object.isPerspectiveCamera){const Sn=se.length();Xt=ht(Sn*p);const Jn=Sn-Xt;n.object.position.addScaledVector(P,Jn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Sn=new W(F.x,F.y,0);Sn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/p)),n.object.updateProjectionMatrix(),Di=!0;const Jn=new W(F.x,F.y,0);Jn.unproject(n.object),n.object.position.sub(Jn).add(Sn),n.object.updateMatrixWorld(),Xt=se.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Xt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Xt).add(n.object.position):(pT.origin.copy(n.object.position),pT.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(pT.direction))<dre?e.lookAt(n.target):(PU.setFromNormalAndCoplanarPoint(n.object.up,n.target),pT.intersectPlane(PU,n.target))))}else n.object instanceof so&&n.object.isOrthographicCamera&&(Di=p!==1,Di&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/p)),n.object.updateProjectionMatrix()));return p=1,N=!1,Di||je.distanceToSquared(n.object.position)>u||8*(1-Ee.dot(n.object.quaternion))>u?(n.dispatchEvent(s),je.copy(n.object.position),Ee.copy(n.object.quaternion),Di=!1,!0):!1}})(),this.connect=se=>{n.domElement=se,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ze),n.domElement.addEventListener("pointerdown",k),n.domElement.addEventListener("pointercancel",Ae),n.domElement.addEventListener("wheel",et)},this.dispose=()=>{var se,Be,tt,ne,je,Ee;n.domElement&&(n.domElement.style.touchAction="auto"),(se=n.domElement)==null||se.removeEventListener("contextmenu",ze),(Be=n.domElement)==null||Be.removeEventListener("pointerdown",k),(tt=n.domElement)==null||tt.removeEventListener("pointercancel",Ae),(ne=n.domElement)==null||ne.removeEventListener("wheel",et),(je=n.domElement)==null||je.ownerDocument.removeEventListener("pointermove",ue),(Ee=n.domElement)==null||Ee.ownerDocument.removeEventListener("pointerup",Ae),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ke)};const n=this,s={type:"change"},r={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,f=new v1,d=new v1;let p=1;const m=new W,_=new Te,x=new Te,b=new Te,v=new Te,T=new Te,A=new Te,w=new Te,B=new Te,I=new Te,P=new W,F=new Te;let N=!1;const U=[],H={};function re(){return 2*Math.PI/60/60*n.autoRotateSpeed}function J(){return Math.pow(.95,n.zoomSpeed)}function ae(se){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=se:d.theta-=se}function ce(se){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=se:d.phi-=se}const j=(()=>{const se=new W;return function(tt,ne){se.setFromMatrixColumn(ne,0),se.multiplyScalar(-tt),m.add(se)}})(),Q=(()=>{const se=new W;return function(tt,ne){n.screenSpacePanning===!0?se.setFromMatrixColumn(ne,1):(se.setFromMatrixColumn(ne,0),se.crossVectors(n.object.up,se)),se.multiplyScalar(tt),m.add(se)}})(),$=(()=>{const se=new W;return function(tt,ne){const je=n.domElement;if(je&&n.object instanceof rn&&n.object.isPerspectiveCamera){const Ee=n.object.position;se.copy(Ee).sub(n.target);let Ue=se.length();Ue*=Math.tan(n.object.fov/2*Math.PI/180),j(2*tt*Ue/je.clientHeight,n.object.matrix),Q(2*ne*Ue/je.clientHeight,n.object.matrix)}else je&&n.object instanceof so&&n.object.isOrthographicCamera?(j(tt*(n.object.right-n.object.left)/n.object.zoom/je.clientWidth,n.object.matrix),Q(ne*(n.object.top-n.object.bottom)/n.object.zoom/je.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function pe(se){n.object instanceof rn&&n.object.isPerspectiveCamera||n.object instanceof so&&n.object.isOrthographicCamera?p=se:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Se(se){pe(p/se)}function Le(se){pe(p*se)}function qe(se){if(!n.zoomToCursor||!n.domElement)return;N=!0;const Be=n.domElement.getBoundingClientRect(),tt=se.clientX-Be.left,ne=se.clientY-Be.top,je=Be.width,Ee=Be.height;F.x=tt/je*2-1,F.y=-(ne/Ee)*2+1,P.set(F.x,F.y,1).unproject(n.object).sub(n.object.position).normalize()}function ht(se){return Math.max(n.minDistance,Math.min(n.maxDistance,se))}function me(se){_.set(se.clientX,se.clientY)}function Fe(se){qe(se),w.set(se.clientX,se.clientY)}function nt(se){v.set(se.clientX,se.clientY)}function Qe(se){x.set(se.clientX,se.clientY),b.subVectors(x,_).multiplyScalar(n.rotateSpeed);const Be=n.domElement;Be&&(ae(2*Math.PI*b.x/Be.clientHeight),ce(2*Math.PI*b.y/Be.clientHeight)),_.copy(x),n.update()}function gt(se){B.set(se.clientX,se.clientY),I.subVectors(B,w),I.y>0?Se(J()):I.y<0&&Le(J()),w.copy(B),n.update()}function Gt(se){T.set(se.clientX,se.clientY),A.subVectors(T,v).multiplyScalar(n.panSpeed),$(A.x,A.y),v.copy(T),n.update()}function dt(se){qe(se),se.deltaY<0?Le(J()):se.deltaY>0&&Se(J()),n.update()}function yt(se){let Be=!1;switch(se.code){case n.keys.UP:$(0,n.keyPanSpeed),Be=!0;break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),Be=!0;break;case n.keys.LEFT:$(n.keyPanSpeed,0),Be=!0;break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),Be=!0;break}Be&&(se.preventDefault(),n.update())}function Ut(){if(U.length==1)_.set(U[0].pageX,U[0].pageY);else{const se=.5*(U[0].pageX+U[1].pageX),Be=.5*(U[0].pageY+U[1].pageY);_.set(se,Be)}}function Ct(){if(U.length==1)v.set(U[0].pageX,U[0].pageY);else{const se=.5*(U[0].pageX+U[1].pageX),Be=.5*(U[0].pageY+U[1].pageY);v.set(se,Be)}}function te(){const se=U[0].pageX-U[1].pageX,Be=U[0].pageY-U[1].pageY,tt=Math.sqrt(se*se+Be*Be);w.set(0,tt)}function ui(){n.enableZoom&&te(),n.enablePan&&Ct()}function Pe(){n.enableZoom&&te(),n.enableRotate&&Ut()}function Ie(se){if(U.length==1)x.set(se.pageX,se.pageY);else{const tt=rt(se),ne=.5*(se.pageX+tt.x),je=.5*(se.pageY+tt.y);x.set(ne,je)}b.subVectors(x,_).multiplyScalar(n.rotateSpeed);const Be=n.domElement;Be&&(ae(2*Math.PI*b.x/Be.clientHeight),ce(2*Math.PI*b.y/Be.clientHeight)),_.copy(x)}function Me(se){if(U.length==1)T.set(se.pageX,se.pageY);else{const Be=rt(se),tt=.5*(se.pageX+Be.x),ne=.5*(se.pageY+Be.y);T.set(tt,ne)}A.subVectors(T,v).multiplyScalar(n.panSpeed),$(A.x,A.y),v.copy(T)}function We(se){const Be=rt(se),tt=se.pageX-Be.x,ne=se.pageY-Be.y,je=Math.sqrt(tt*tt+ne*ne);B.set(0,je),I.set(0,Math.pow(B.y/w.y,n.zoomSpeed)),Se(I.y),w.copy(B)}function ge(se){n.enableZoom&&We(se),n.enablePan&&Me(se)}function X(se){n.enableZoom&&We(se),n.enableRotate&&Ie(se)}function k(se){var Be,tt;n.enabled!==!1&&(U.length===0&&((Be=n.domElement)==null||Be.ownerDocument.addEventListener("pointermove",ue),(tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointerup",Ae)),Ve(se),se.pointerType==="touch"?lt(se):Re(se))}function ue(se){n.enabled!==!1&&(se.pointerType==="touch"?Vt(se):we(se))}function Ae(se){var Be,tt,ne;xt(se),U.length===0&&((Be=n.domElement)==null||Be.releasePointerCapture(se.pointerId),(tt=n.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",ue),(ne=n.domElement)==null||ne.ownerDocument.removeEventListener("pointerup",Ae)),n.dispatchEvent(a),l=o.NONE}function Re(se){let Be;switch(se.button){case 0:Be=n.mouseButtons.LEFT;break;case 1:Be=n.mouseButtons.MIDDLE;break;case 2:Be=n.mouseButtons.RIGHT;break;default:Be=-1}switch(Be){case pf.DOLLY:if(n.enableZoom===!1)return;Fe(se),l=o.DOLLY;break;case pf.ROTATE:if(se.ctrlKey||se.metaKey||se.shiftKey){if(n.enablePan===!1)return;nt(se),l=o.PAN}else{if(n.enableRotate===!1)return;me(se),l=o.ROTATE}break;case pf.PAN:if(se.ctrlKey||se.metaKey||se.shiftKey){if(n.enableRotate===!1)return;me(se),l=o.ROTATE}else{if(n.enablePan===!1)return;nt(se),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(r)}function we(se){if(n.enabled!==!1)switch(l){case o.ROTATE:if(n.enableRotate===!1)return;Qe(se);break;case o.DOLLY:if(n.enableZoom===!1)return;gt(se);break;case o.PAN:if(n.enablePan===!1)return;Gt(se);break}}function et(se){n.enabled===!1||n.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(se.preventDefault(),n.dispatchEvent(r),dt(se),n.dispatchEvent(a))}function Ke(se){n.enabled===!1||n.enablePan===!1||yt(se)}function lt(se){switch(_t(se),U.length){case 1:switch(n.touches.ONE){case mf.ROTATE:if(n.enableRotate===!1)return;Ut(),l=o.TOUCH_ROTATE;break;case mf.PAN:if(n.enablePan===!1)return;Ct(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case mf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ui(),l=o.TOUCH_DOLLY_PAN;break;case mf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Pe(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(r)}function Vt(se){switch(_t(se),l){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ie(se),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Me(se),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ge(se),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;X(se),n.update();break;default:l=o.NONE}}function ze(se){n.enabled!==!1&&se.preventDefault()}function Ve(se){U.push(se)}function xt(se){delete H[se.pointerId];for(let Be=0;Be<U.length;Be++)if(U[Be].pointerId==se.pointerId){U.splice(Be,1);return}}function _t(se){let Be=H[se.pointerId];Be===void 0&&(Be=new Te,H[se.pointerId]=Be),Be.set(se.pageX,se.pageY)}function rt(se){const Be=se.pointerId===U[0].pointerId?U[1]:U[0];return H[Be.pointerId]}this.dollyIn=(se=J())=>{Le(se),n.update()},this.dollyOut=(se=J())=>{Se(se),n.update()},this.getScale=()=>p,this.setScale=se=>{pe(se),n.update()},this.getZoomScale=()=>J(),t!==void 0&&this.connect(t),this.update()}};function S1(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const wf="srgb",xu="srgb-linear",NU=3001,mre=3e3;class WB extends ur{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xre(t)}),this.register(function(t){return new bre(t)}),this.register(function(t){return new Rre(t)}),this.register(function(t){return new Bre(t)}),this.register(function(t){return new Lre(t)}),this.register(function(t){return new Sre(t)}),this.register(function(t){return new Are(t)}),this.register(function(t){return new Ere(t)}),this.register(function(t){return new Cre(t)}),this.register(function(t){return new _re(t)}),this.register(function(t){return new Mre(t)}),this.register(function(t){return new Tre(t)}),this.register(function(t){return new Dre(t)}),this.register(function(t){return new wre(t)}),this.register(function(t){return new yre(t)}),this.register(function(t){return new Ire(t)}),this.register(function(t){return new Ore(t)})}load(e,t,n,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const u=Zc.extractUrlBase(e);a=Zc.resolveURL(u,this.path)}else a=Zc.extractUrlBase(e);this.manager.itemStart(e);const o=function(u){s?s(u):console.error(u),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Ma(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{r.parse(u,a,function(f){t(f),r.manager.itemEnd(e)},o)}catch(f){o(f)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const a={},o={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(S1(new Uint8Array(e.slice(0,4)))===yz){try{a[oi.KHR_BINARY_GLTF]=new Pre(e)}catch(f){s&&s(f);return}r=JSON.parse(a[oi.KHR_BINARY_GLTF].content)}else r=JSON.parse(S1(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Yre(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[f.name]=f,a[f.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const f=r.extensionsUsed[u],d=r.extensionsRequired||[];switch(f){case oi.KHR_MATERIALS_UNLIT:a[f]=new vre;break;case oi.KHR_DRACO_MESH_COMPRESSION:a[f]=new Ure(r,this.dracoLoader);break;case oi.KHR_TEXTURE_TRANSFORM:a[f]=new Nre;break;case oi.KHR_MESH_QUANTIZATION:a[f]=new Fre;break;default:d.indexOf(f)>=0&&o[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function gre(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const oi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class yre{constructor(e){this.parser=e,this.name=oi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let u;const f=new $e(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],xu);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new PB(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new OB(f),u.distance=d;break;case"spot":u=new IB(f),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,su(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(u),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class vre{constructor(){this.name=oi.KHR_MATERIALS_UNLIT}getMaterialType(){return _a}extendParams(e,t,n){const s=[];e.color=new $e(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],xu),e.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture,wf))}return Promise.all(s)}}class _re{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class xre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Te(o,o)}return Promise.all(r)}}class bre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Tre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class Sre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new $e(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],xu)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,wf)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class Are{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class Ere{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new $e().setRGB(o[0],o[1],o[2],xu),Promise.all(r)}}class Cre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Mre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new $e().setRGB(o[0],o[1],o[2],xu),a.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,wf)),Promise.all(r)}}class wre{constructor(e){this.parser=e,this.name=oi.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}}class Dre{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ho}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class Rre{constructor(e){this.parser=e,this.name=oi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class Bre{constructor(e){this.parser=e,this.name=oi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let l=n.textureLoader;if(o.uri){const u=n.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Lre{constructor(e){this.parser=e,this.name=oi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let l=n.textureLoader;if(o.uri){const u=n.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ire{constructor(e){this.name=oi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(o){const l=s.byteOffset||0,u=s.byteLength||0,f=s.count,d=s.byteStride,p=new Uint8Array(o,l,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(f,d,p,s.mode,s.filter).then(function(m){return m.buffer}):a.ready.then(function(){const m=new ArrayBuffer(f*d);return a.decodeGltfBuffer(new Uint8Array(m),f,d,p,s.mode,s.filter),m})})}else return null}}class Ore{constructor(e){this.name=oi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const u of s.primitives)if(u.mode!==Ka.TRIANGLES&&u.mode!==Ka.TRIANGLE_STRIP&&u.mode!==Ka.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const u in a)o.push(this.parser.getDependency("accessor",a[u]).then(f=>(l[u]=f,l[u])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(u=>{const f=u.pop(),d=f.isGroup?f.children:[f],p=u[0].count,m=[];for(const _ of d){const x=new vt,b=new W,v=new as,T=new W(1,1,1),A=new yB(_.geometry,_.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,w),l.SCALE&&T.fromBufferAttribute(l.SCALE,w),A.setMatrixAt(w,x.compose(b,v,T));for(const w in l)if(w==="_COLOR_0"){const B=l[w];A.instanceColor=new nd(B.array,B.itemSize,B.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&_.geometry.setAttribute(w,l[w]);gi.prototype.copy.call(A,_),this.parser.assignFinalMaterial(A),m.push(A)}return f.isGroup?(f.clear(),f.add(...m),f):m[0]}))}}const yz="glTF",iy=12,FU={JSON:1313821514,BIN:5130562};class Pre{constructor(e){this.name=oi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,iy);if(this.header={magic:S1(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==yz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-iy,s=new DataView(e,iy);let r=0;for(;r<n;){const a=s.getUint32(r,!0);r+=4;const o=s.getUint32(r,!0);if(r+=4,o===FU.JSON){const l=new Uint8Array(e,iy+r,a);this.content=S1(l)}else if(o===FU.BIN){const l=iy+r;this.body=e.slice(l,l+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ure{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=oi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},u={};for(const f in a){const d=eD[f]||f.toLowerCase();o[d]=a[f]}for(const f in e.attributes){const d=eD[f]||f.toLowerCase();if(a[f]!==void 0){const p=n.accessors[e.attributes[f]],m=wm[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",r).then(function(f){return new Promise(function(d,p){s.decodeDracoFile(f,function(m){for(const _ in m.attributes){const x=m.attributes[_],b=l[_];b!==void 0&&(x.normalized=b)}d(m)},o,u,xu,p)})})}}class Nre{constructor(){this.name=oi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Fre{constructor(){this.name=oi.KHR_MESH_QUANTIZATION}}class vz extends Lg{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let a=0;a!==s;a++)t[a]=n[r+a];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,u=o*3,f=s-t,d=(n-t)/f,p=d*d,m=p*d,_=e*u,x=_-u,b=-2*m+3*p,v=m-p,T=1-b,A=v-p+d;for(let w=0;w!==o;w++){const B=a[x+w+o],I=a[x+w+l]*f,P=a[_+w+o],F=a[_+w]*f;r[w]=T*B+A*I+b*P+v*F}return r}}const kre=new as;class Hre extends vz{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return kre.fromArray(r).normalize().toArray(r),r}}const Ka={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},wm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kU={9728:In,9729:on,9984:xA,9985:Cm,9986:Sf,9987:no},HU={33071:va,33648:Km,10497:sh},jC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...are>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zre={CUBICSPLINE:void 0,LINEAR:$m,STEP:Zm},XC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Gre(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new D_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ho})),i.DefaultMaterial}function lf(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function su(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Vre(i,e,t){let n=!1,s=!1,r=!1;for(let u=0,f=e.length;u<f;u++){const d=e[u];if(d.POSITION!==void 0&&(n=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const a=[],o=[],l=[];for(let u=0,f=e.length;u<f;u++){const d=e[u];if(n){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):i.attributes.position;a.push(p)}if(s){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):i.attributes.normal;o.push(p)}if(r){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):i.attributes.color;l.push(p)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(u){const f=u[0],d=u[1],p=u[2];return n&&(i.morphAttributes.position=f),s&&(i.morphAttributes.normal=d),r&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}function qre(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jre(i){let e;const t=i.extensions&&i.extensions[oi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+WC(t.attributes):e=i.indices+":"+WC(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+WC(i.targets[n]);return e}function WC(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function tD(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Xre(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Wre=new vt;class Yre{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gre,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new y6(this.options.manager):this.textureLoader=new E6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ma(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return lf(r,o,s),su(o,s),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const a=t[s].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const a=e[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[u,f]of a.children.entries())r(f,o.children[u])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[oi.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){n.load(Zc.resolveURL(t.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const a=jC[s.type],o=wm[s.componentType],l=s.normalized===!0,u=new o(s.count*a);return Promise.resolve(new li(u,a,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const o=a[0],l=jC[s.type],u=wm[s.componentType],f=u.BYTES_PER_ELEMENT,d=f*l,p=s.byteOffset||0,m=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,_=s.normalized===!0;let x,b;if(m&&m!==d){const v=Math.floor(p/m),T="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+v+":"+s.count;let A=t.cache.get(T);A||(x=new u(o,v*m,s.count*m/f),A=new S_(x,m/f),t.cache.add(T,A)),b=new rh(A,l,p%m/f,_)}else o===null?x=new u(s.count*l):x=new u(o,p,s.count*l),b=new li(x,l,_);if(s.sparse!==void 0){const v=jC.SCALAR,T=wm[s.sparse.indices.componentType],A=s.sparse.indices.byteOffset||0,w=s.sparse.values.byteOffset||0,B=new T(a[1],A,s.sparse.count*v),I=new u(a[2],w,s.sparse.count*l);o!==null&&(b=new li(b.array.slice(),b.itemSize,b.normalized));for(let P=0,F=B.length;P<F;P++){const N=B[P];if(b.setX(N,I[P*l]),l>=2&&b.setY(N,I[P*l+1]),l>=3&&b.setZ(N,I[P*l+2]),l>=4&&b.setW(N,I[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,a=t.images[r];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const s=this,r=this.json,a=r.textures[e],o=r.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=a.name||o.name||"",f.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(f.name=o.uri);const p=(r.samplers||{})[a.sampler]||{};return f.magFilter=kU[p.magFilter]||on,f.minFilter=kU[p.minFilter]||no,f.wrapS=HU[p.wrapS]||sh,f.wrapT=HU[p.wrapT]||sh,s.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=s.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",u=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(p),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let _=p;t.isImageBitmapLoader===!0&&(_=function(x){const b=new Zi(x);b.needsUpdate=!0,p(b)}),t.load(Zc.resolveURL(d,r.path),_,void 0,m)})}).then(function(d){return u===!0&&o.revokeObjectURL(l),su(d,a),d.userData.mimeType=a.mimeType||Xre(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=f,f}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[oi.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[oi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=r.associations.get(a);a=r.extensions[oi.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,l)}}return s!==void 0&&(typeof s=="number"&&(s=s===NU?wf:xu),"colorSpace"in a?a.colorSpace=s:a.encoding=s===wf?NU:mre),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new IA,zn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new lr,zn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(s||r||a){let o="ClonedMaterial:"+n.uuid+":";s&&(o+="derivative-tangents:"),r&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),r&&(l.vertexColors=!0),a&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return D_}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let a;const o={},l=r.extensions||{},u=[];if(l[oi.KHR_MATERIALS_UNLIT]){const d=s[oi.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),u.push(d.extendParams(o,r,t))}else{const d=r.pbrMetallicRoughness||{};if(o.color=new $e(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;o.color.setRGB(p[0],p[1],p[2],xu),o.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",d.baseColorTexture,wf)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,o)})))}r.doubleSided===!0&&(o.side=Qs);const f=r.alphaMode||XC.OPAQUE;if(f===XC.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,f===XC.MASK&&(o.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==_a&&(u.push(t.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new Te(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;o.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&a!==_a&&(u.push(t.assignTexture(o,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==_a){const d=r.emissiveFactor;o.emissive=new $e().setRGB(d[0],d[1],d[2],xu)}return r.emissiveTexture!==void 0&&a!==_a&&u.push(t.assignTexture(o,"emissiveMap",r.emissiveTexture,wf)),Promise.all(u).then(function(){const d=new a(o);return r.name&&(d.name=r.name),su(d,r),t.associations.set(d,{materials:e}),r.extensions&&lf(s,d,r),d})}createUniqueName(e){const t=_i.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(o){return n[oi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return zU(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],f=jre(u),d=s[f];if(d)a.push(d.promise);else{let p;u.extensions&&u.extensions[oi.KHR_DRACO_MESH_COMPRESSION]?p=r(u):p=zU(new Ht,u,t),s[f]={primitive:u,promise:p},a.push(p)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],a=r.primitives,o=[];for(let l=0,u=a.length;l<u;l++){const f=a[l].material===void 0?Gre(this.cache):this.getDependency("material",a[l].material);o.push(f)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const u=l.slice(0,l.length-1),f=l[l.length-1],d=[];for(let m=0,_=f.length;m<_;m++){const x=f[m],b=a[m];let v;const T=u[m];if(b.mode===Ka.TRIANGLES||b.mode===Ka.TRIANGLE_STRIP||b.mode===Ka.TRIANGLE_FAN||b.mode===void 0)v=r.isSkinnedMesh===!0?new gB(x,T):new _n(x,T),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),b.mode===Ka.TRIANGLE_STRIP?v.geometry=OU(v.geometry,lB):b.mode===Ka.TRIANGLE_FAN&&(v.geometry=OU(v.geometry,p1));else if(b.mode===Ka.LINES)v=new Vo(x,T);else if(b.mode===Ka.LINE_STRIP)v=new wu(x,T);else if(b.mode===Ka.LINE_LOOP)v=new vB(x,T);else if(b.mode===Ka.POINTS)v=new _B(x,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(v.geometry.morphAttributes).length>0&&qre(v,r),v.name=t.createUniqueName(r.name||"mesh_"+e),su(v,r),b.extensions&&lf(s,v,b),t.assignFinalMaterial(v),d.push(v)}for(let m=0,_=d.length;m<_;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return r.extensions&&lf(s,d[0],r),d[0];const p=new mu;r.extensions&&lf(s,p,r),t.associations.set(p,{meshes:e});for(let m=0,_=d.length;m<_;m++)p.add(d[m]);return p})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new rn(tg.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new so(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),su(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),a=s,o=[],l=[];for(let u=0,f=a.length;u<f;u++){const d=a[u];if(d){o.push(d);const p=new vt;r!==null&&p.fromArray(r.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new A_(o,l)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,a=[],o=[],l=[],u=[],f=[];for(let d=0,p=s.channels.length;d<p;d++){const m=s.channels[d],_=s.samplers[m.sampler],x=m.target,b=x.node,v=s.parameters!==void 0?s.parameters[_.input]:_.input,T=s.parameters!==void 0?s.parameters[_.output]:_.output;x.node!==void 0&&(a.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",T)),u.push(_),f.push(x))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(d){const p=d[0],m=d[1],_=d[2],x=d[3],b=d[4],v=[];for(let T=0,A=p.length;T<A;T++){const w=p[T],B=m[T],I=_[T],P=x[T],F=b[T];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const N=n._createAnimationTracks(w,B,I,P,F);if(N)for(let U=0;U<N.length;U++)v.push(N[U])}return new rg(r,void 0,v)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,u=s.weights.length;l<u;l++)o.morphTargetInfluences[l]=s.weights[l]}),a})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],r=n._loadNodeShallow(e),a=[],o=s.children||[];for(let u=0,f=o.length;u<f;u++)a.push(n.getDependency("node",o[u]));const l=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),l]).then(function(u){const f=u[0],d=u[1],p=u[2];p!==null&&f.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Wre)});for(let m=0,_=d.length;m<_;m++)f.add(d[m]);return f})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],a=r.name?s.createUniqueName(r.name):"",o=[],l=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&o.push(l),r.camera!==void 0&&o.push(s.getDependency("camera",r.camera).then(function(u){return s._getNodeRef(s.cameraCache,r.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),this.nodeCache[e]=Promise.all(o).then(function(u){let f;if(r.isBone===!0?f=new LA:u.length>1?f=new mu:u.length===1?f=u[0]:f=new gi,f!==u[0])for(let d=0,p=u.length;d<p;d++)f.add(u[d]);if(r.name&&(f.userData.name=r.name,f.name=a),su(f,r),r.extensions&&lf(n,f,r),r.matrix!==void 0){const d=new vt;d.fromArray(r.matrix),f.applyMatrix4(d)}else r.translation!==void 0&&f.position.fromArray(r.translation),r.rotation!==void 0&&f.quaternion.fromArray(r.rotation),r.scale!==void 0&&f.scale.fromArray(r.scale);return s.associations.has(f)||s.associations.set(f,{}),s.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new mu;n.name&&(r.name=s.createUniqueName(n.name)),su(r,n),n.extensions&&lf(t,r,n);const a=n.nodes||[],o=[];for(let l=0,u=a.length;l<u;l++)o.push(s.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let f=0,d=l.length;f<d;f++)r.add(l[f]);const u=f=>{const d=new Map;for(const[p,m]of s.associations)(p instanceof zn||p instanceof Zi)&&d.set(p,m);return f.traverse(p=>{const m=s.associations.get(p);m!=null&&d.set(p,m)}),d};return s.associations=u(r),r})}_createAnimationTracks(e,t,n,s,r){const a=[],o=e.name?e.name:e.uuid,l=[];xc[r.path]===xc.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(o);let u;switch(xc[r.path]){case xc.weights:u=rd;break;case xc.rotation:u=ad;break;case xc.position:case xc.scale:u=od;break;default:switch(n.itemSize){case 1:u=rd;break;case 2:case 3:default:u=od;break}break}const f=s.interpolation!==void 0?zre[s.interpolation]:$m,d=this._getArrayFromAccessor(n);for(let p=0,m=l.length;p<m;p++){const _=new u(l[p]+"."+xc[r.path],t.array,d,f);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),a.push(_)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=tD(t.constructor),s=new Float32Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=t[r]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof ad?Hre:vz;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Kre(i,e,t){const n=e.attributes,s=new sr;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,u=o.max;if(l!==void 0&&u!==void 0){if(s.set(new W(l[0],l[1],l[2]),new W(u[0],u[1],u[2])),o.normalized){const f=tD(wm[o.componentType]);s.min.multiplyScalar(f),s.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const o=new W,l=new W;for(let u=0,f=r.length;u<f;u++){const d=r[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,_=p.max;if(m!==void 0&&_!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(_[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(_[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(_[2]))),p.normalized){const x=tD(wm[p.componentType]);l.multiplyScalar(x)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(o)}i.boundingBox=s;const a=new Es;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function zU(i,e,t){const n=e.attributes,s=[];function r(a,o){return t.getDependency("accessor",a).then(function(l){i.setAttribute(o,l)})}for(const a in n){const o=eD[a]||a.toLowerCase();o in i.attributes||s.push(r(n[a],o))}if(e.indices!==void 0&&!i.index){const a=t.getDependency("accessor",e.indices).then(function(o){i.setIndex(o)});s.push(a)}return su(i,e),Kre(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Vre(i,e.targets,t):i})}const Jre={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Qre={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},YC=new WeakMap;class Zre extends ur{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new Ma(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const n=JSON.stringify(t);if(YC.has(e)){const l=YC.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(r,a).then(l=>(s=l,new Promise((u,f)=>{s._callbacks[r]={resolve:u,reject:f},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),YC.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new Ht;e.index&&t.setIndex(new li(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,a=s.array,o=s.itemSize;t.setAttribute(r,new li(a,o))}return t}_loadLibrary(e,t){const n=new Ma(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=$re.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function $re(){let i,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":i=o.decoderConfig,e=new Promise(function(f){i.onModuleLoaded=function(d){f({draco:d})},DracoDecoderModule(i)});break;case"decode":const l=o.buffer,u=o.taskConfig;e.then(f=>{const d=f.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const _=t(d,p,m,u),x=_.attributes.map(b=>b.array.buffer);_.index&&x.push(_.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:_},x)}catch(_){console.error(_),self.postMessage({type:"error",id:o.id,error:_.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(a,o,l,u){const f=u.attributeIDs,d=u.attributeTypes;let p,m;const _=o.GetEncodedGeometryType(l);if(_===a.TRIANGULAR_MESH)p=new a.Mesh,m=o.DecodeBufferToMesh(l,p);else if(_===a.POINT_CLOUD)p=new a.PointCloud,m=o.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const b in f){const v=self[d[b]];let T,A;if(u.useUniqueIDs)A=f[b],T=o.GetAttributeByUniqueId(p,A);else{if(A=o.GetAttributeId(p,a[f[b]]),A===-1)continue;T=o.GetAttribute(p,A)}x.attributes.push(s(a,o,p,b,v,T))}return _===a.TRIANGULAR_MESH&&(x.index=n(a,o,p)),a.destroy(p),x}function n(a,o,l){const f=l.num_faces()*3,d=f*4,p=a._malloc(d);o.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(a.HEAPF32.buffer,p,f).slice();return a._free(p),{array:m,itemSize:1}}function s(a,o,l,u,f,d){const p=d.num_components(),_=l.num_points()*p,x=_*f.BYTES_PER_ELEMENT,b=r(a,f),v=a._malloc(x);o.GetAttributeDataArrayForAllPoints(l,d,b,x,v);const T=new f(a.HEAPF32.buffer,v,_).slice();return a._free(v),{name:u,array:T,itemSize:p}}function r(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let mT;const KC=()=>{if(mT)return mT;const i="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",e="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",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(t)&&(s=e);let r;const a=WebAssembly.instantiate(o(s),{}).then(d=>{r=d.instance,r.exports.__wasm_call_ctors()});function o(d){const p=new Uint8Array(d.length);for(let _=0;_<d.length;++_){const x=d.charCodeAt(_);p[_]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let _=0;_<d.length;++_)p[m++]=p[_]<60?n[p[_]]:(p[_]-60)*64+p[++_];return p.buffer.slice(0,m)}function l(d,p,m,_,x,b){const v=r.exports.sbrk,T=m+3&-4,A=v(T*_),w=v(x.length),B=new Uint8Array(r.exports.memory.buffer);B.set(x,w);const I=d(A,m,_,w,x.length);if(I===0&&b&&b(A,T,_),p.set(B.subarray(A,A+m*_)),v(A-v(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return mT={ready:a,supported:!0,decodeVertexBuffer(d,p,m,_,x){l(r.exports.meshopt_decodeVertexBuffer,d,p,m,_,r.exports[u[x]])},decodeIndexBuffer(d,p,m,_){l(r.exports.meshopt_decodeIndexBuffer,d,p,m,_)},decodeIndexSequence(d,p,m,_){l(r.exports.meshopt_decodeIndexSequence,d,p,m,_)},decodeGltfBuffer(d,p,m,_,x,b){l(r.exports[f[x]],d,p,m,_,r.exports[u[b]])}},mT},eae=()=>parseInt(fh.replace(/\D+/g,"")),_z=eae();let gT=null,xz="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function bz(i=!0,e=!0,t){return n=>{t&&t(n),i&&(gT||(gT=new Zre),gT.setDecoderPath(typeof i=="string"?i:xz),n.setDRACOLoader(gT)),e&&n.setMeshoptDecoder(typeof KC=="function"?KC():KC)}}const I_=(i,e,t,n)=>B_(WB,i,bz(e,t,n));I_.preload=(i,e,t,n)=>B_.preload(WB,i,bz(e,t,n));I_.clear=i=>B_.clear(WB,i);I_.setDecoderPath=i=>{xz=i};const tae=ee.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:a,onStart:o,onEnd:l,...u},f)=>{const d=is(I=>I.invalidate),p=is(I=>I.camera),m=is(I=>I.gl),_=is(I=>I.events),x=is(I=>I.setEvents),b=is(I=>I.set),v=is(I=>I.get),T=is(I=>I.performance),A=e||p,w=n||_.connected||m.domElement,B=ee.useMemo(()=>new pre(A),[A]);return vh(()=>{B.enabled&&B.update()},-1),ee.useEffect(()=>(r&&B.connect(r===!0?w:r),B.connect(w),()=>void B.dispose()),[r,w,t,B,d]),ee.useEffect(()=>{const I=N=>{d(),t&&T.regress(),a&&a(N)},P=N=>{o&&o(N)},F=N=>{l&&l(N)};return B.addEventListener("change",I),B.addEventListener("start",P),B.addEventListener("end",F),()=>{B.removeEventListener("start",P),B.removeEventListener("end",F),B.removeEventListener("change",I)}},[a,o,l,B,d,x]),ee.useEffect(()=>{if(i){const I=v().controls;return b({controls:B}),()=>b({controls:I})}},[i,B]),ee.createElement("primitive",Ki({ref:f,object:B,enableDamping:s},u))}),iae=ee.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:s=1,blur:r=1,near:a=0,far:o=10,resolution:l=512,smooth:u=!0,color:f="#000000",depthWrite:d=!1,renderOrder:p,...m},_)=>{const x=ee.useRef(null),b=is(ae=>ae.scene),v=is(ae=>ae.gl),T=ee.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),s=s*(Array.isArray(i)?i[1]:i||1);const[A,w,B,I,P,F,N]=ee.useMemo(()=>{const ae=new On(l,l),ce=new On(l,l);ce.texture.generateMipmaps=ae.texture.generateMipmaps=!1;const j=new vd(n,s).rotateX(Math.PI/2),Q=new _n(j),$=new KA;$.depthTest=$.depthWrite=!1,$.onBeforeCompile=Le=>{Le.uniforms={...Le.uniforms,ucolor:{value:new $e(f)}},Le.fragmentShader=Le.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Le.fragmentShader=Le.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const pe=new bn(Jre),Se=new bn(Qre);return Se.depthTest=pe.depthTest=!1,[ae,j,$,Q,pe,Se,ce]},[l,n,s,i,f]),U=ae=>{I.visible=!0,I.material=P,P.uniforms.tDiffuse.value=A.texture,P.uniforms.h.value=ae*1/256,v.setRenderTarget(N),v.render(I,T.current),I.material=F,F.uniforms.tDiffuse.value=N.texture,F.uniforms.v.value=ae*1/256,v.setRenderTarget(A),v.render(I,T.current),I.visible=!1};let H=0,re,J;return vh(()=>{T.current&&(e===1/0||H<e)&&(H++,re=b.background,J=b.overrideMaterial,x.current.visible=!1,b.background=null,b.overrideMaterial=B,v.setRenderTarget(A),v.render(b,T.current),U(r),u&&U(r*.4),v.setRenderTarget(null),x.current.visible=!0,b.overrideMaterial=J,b.background=re)}),ee.useImperativeHandle(_,()=>x.current,[]),ee.createElement("group",Ki({"rotation-x":Math.PI/2},m,{ref:x}),ee.createElement("mesh",{renderOrder:p,geometry:w,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},ee.createElement("meshBasicMaterial",{transparent:!0,map:A.texture,opacity:t,depthWrite:d})),ee.createElement("orthographicCamera",{ref:T,args:[-n/2,n/2,s/2,-s/2,a,o]}))});class nae extends bn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${_z>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const sae=i=>new W().setFromSpherical(new v1(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),JC=ee.forwardRef(({radius:i=100,depth:e=50,count:t=5e3,saturation:n=0,factor:s=4,fade:r=!1,speed:a=1},o)=>{const l=ee.useRef(null),[u,f,d]=ee.useMemo(()=>{const m=[],_=[],x=Array.from({length:t},()=>(.5+.5*Math.random())*s),b=new $e;let v=i+e;const T=e/t;for(let A=0;A<t;A++)v-=T*Math.random(),m.push(...sae(v).toArray()),b.setHSL(A/t,n,.9),_.push(b.r,b.g,b.b);return[new Float32Array(m),new Float32Array(_),new Float32Array(x)]},[t,e,s,i,n]);vh(m=>l.current&&(l.current.uniforms.time.value=m.clock.elapsedTime*a));const[p]=ee.useState(()=>new nae);return ee.createElement("points",{ref:o},ee.createElement("bufferGeometry",null,ee.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),ee.createElement("bufferAttribute",{attach:"attributes-color",args:[f,3]}),ee.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),ee.createElement("primitive",{ref:l,object:p,attach:"material",blending:LS,"uniforms-fade-value":r,depthWrite:!1,transparent:!0,vertexColors:!0}))});class rae extends bn{constructor(){super({uniforms:{time:{value:0},pixelRatio:{value:1}},vertexShader:`
        uniform float pixelRatio;
        uniform float time;
        attribute float size;  
        attribute float speed;  
        attribute float opacity;
        attribute vec3 noise;
        attribute vec3 color;
        varying vec3 vColor;
        varying float vOpacity;

        void main() {
          vec4 modelPosition = modelMatrix * vec4(position, 1.0);
          modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
          modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
          modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
          vec4 viewPosition = viewMatrix * modelPosition;
          vec4 projectionPostion = projectionMatrix * viewPosition;
          gl_Position = projectionPostion;
          gl_PointSize = size * 25. * pixelRatio;
          gl_PointSize *= (1.0 / - viewPosition.z);
          vColor = color;
          vOpacity = opacity;
        }
      `,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
          float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
          float strength = 0.05 / distanceToCenter - 0.1;
          gl_FragColor = vec4(vColor, strength * vOpacity);
          #include <tonemapping_fragment>
          #include <${_z>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}get pixelRatio(){return this.uniforms.pixelRatio.value}set pixelRatio(e){this.uniforms.pixelRatio.value=e}}const Tz=i=>i&&i.constructor===Float32Array,aae=i=>[i.r,i.g,i.b],Sz=i=>i instanceof Te||i instanceof W||i instanceof di,Az=i=>Array.isArray(i)?i:Sz(i)?i.toArray():[i,i,i];function ny(i,e,t){return ee.useMemo(()=>{if(e!==void 0){if(Tz(e))return e;if(e instanceof $e){const n=Array.from({length:i*3},()=>aae(e)).flat();return Float32Array.from(n)}else if(Sz(e)||Array.isArray(e)){const n=Array.from({length:i*3},()=>Az(e)).flat();return Float32Array.from(n)}return Float32Array.from({length:i},()=>e)}return Float32Array.from({length:i},t)},[e])}const oae=ee.forwardRef(({noise:i=1,count:e=100,speed:t=1,opacity:n=1,scale:s=1,size:r,color:a,children:o,...l},u)=>{ee.useMemo(()=>qB({SparklesImplMaterial:rae}),[]);const f=ee.useRef(null),d=is(A=>A.viewport.dpr),p=Az(s),m=ee.useMemo(()=>Float32Array.from(Array.from({length:e},()=>p.map(tg.randFloatSpread)).flat()),[e,...p]),_=ny(e,r,Math.random),x=ny(e,n),b=ny(e,t),v=ny(e*3,i),T=ny(a===void 0?e*3:e,Tz(a)?a:new $e(a),()=>1);return vh(A=>{f.current&&f.current.material&&(f.current.material.time=A.clock.elapsedTime)}),ee.useImperativeHandle(u,()=>f.current,[]),ee.createElement("points",Ki({key:`particle-${e}-${JSON.stringify(s)}`},l,{ref:f}),ee.createElement("bufferGeometry",null,ee.createElement("bufferAttribute",{attach:"attributes-position",args:[m,3]}),ee.createElement("bufferAttribute",{attach:"attributes-size",args:[_,1]}),ee.createElement("bufferAttribute",{attach:"attributes-opacity",args:[x,1]}),ee.createElement("bufferAttribute",{attach:"attributes-speed",args:[b,1]}),ee.createElement("bufferAttribute",{attach:"attributes-color",args:[T,3]}),ee.createElement("bufferAttribute",{attach:"attributes-noise",args:[v,3]})),o||ee.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:d,depthWrite:!1}))});function lae({all:i,scene:e,camera:t}){const n=is(({gl:a})=>a),s=is(({camera:a})=>a),r=is(({scene:a})=>a);return ee.useLayoutEffect(()=>{const a=[];i&&(e||r).traverse(u=>{u.visible===!1&&(a.push(u),u.visible=!0)}),n.compile(e||r,t||s);const o=new pB(128);new dB(.01,1e5,o).update(n,e||r),o.dispose(),a.forEach(u=>u.visible=!1)},[]),null}/**
 * postprocessing v6.37.2 build Fri Mar 28 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rüschen
 * @license Zlib
 */var QC=1/1e3,uae=1e3,cae=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*QC}get fixedDelta(){return this._fixedDelta*QC}set fixedDelta(i){this._fixedDelta=i*uae}get elapsed(){return this._elapsed*QC}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},hae=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new Ht;return t.setAttribute("position",new li(i,3)),t.setAttribute("uv",new li(e,2)),t})(),Qr=class iD{static get fullscreenGeometry(){return hae}constructor(e="Pass",t=new Lv,n=new b_){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new _n(iD.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Lv),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=dh){}render(e,t,n,s,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof On||t instanceof zn||t instanceof Zi||t instanceof iD)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},fae=class extends Qr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,e,t,n,s){const r=i.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},dae=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Ez="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Cz=class extends bn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new mi(null),opacity:new mi(1)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dae,vertexShader:Ez})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},pae=class extends Qr{constructor(i,e=!0){super("CopyPass"),this.fullscreenMaterial=new Cz,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new On(1,1,{minFilter:on,magFilter:on,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,e,t,n,s){this.fullscreenMaterial.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){this.autoResize&&this.renderTarget.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Cs?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Ci&&(this.renderTarget.texture.colorSpace=Ci))}},GU=new $e,Mz=class extends Qr{constructor(i=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,e,t){this.color=i,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,e,t,n,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,o=i.getClearAlpha(),l=r!==null,u=a>=0;l?(i.getClearColor(GU),i.setClearColor(r,u?a:o)):u&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:e),i.clear(this.color,this.depth,this.stencil),l?i.setClearColor(GU,o):u&&i.setClearAlpha(o)}},mae=class extends Qr{constructor(i,e){super("MaskPass",i,e),this.needsSwap=!1,this.clearPass=new Mz(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,e,t,n,s){const r=i.getContext(),a=i.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,f=this.inverted?0:1,d=1-f;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,f,4294967295),a.stencil.setClear(d),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(i,null):(u.render(i,e),u.render(i,t))),this.renderToScreen?(i.setRenderTarget(null),i.render(o,l)):(i.setRenderTarget(e),i.render(o,l),i.setRenderTarget(t),i.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},gae=class{constructor(i=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new pae,this.depthTexture=null,this.passes=[],this.timer=new cae,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const e=this.inputBuffer,t=this.multisampling;t>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const e=i.getSize(new Te),t=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Cs&&i.outputColorSpace===Ci&&(this.inputBuffer.texture.colorSpace=Ci,this.outputBuffer.texture.colorSpace=Ci,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(i,t,n)}}replaceRenderer(i,e=!0){const t=this.renderer,n=t.domElement.parentNode;return this.setRenderer(i),e&&n!==null&&(n.removeChild(t.domElement),n.appendChild(i.domElement)),t}createDepthTexture(){const i=this.depthTexture=new PA;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=id,i.type=td):i.type=Sl,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,e,t,n){const s=this.renderer,r=s===null?new Te:s.getDrawingBufferSize(new Te),a={minFilter:on,magFilter:on,stencilBuffer:e,depthBuffer:i,type:t},o=new On(r.width,r.height,a);return n>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=n),t===Cs&&s!==null&&s.outputColorSpace===Ci&&(o.texture.colorSpace=Ci),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(i){for(const e of this.passes)e.mainScene=i}setMainCamera(i){for(const e of this.passes)e.mainCamera=i}addPass(i,e){const t=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new Te),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,r,a),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,i):t.push(i),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(i of t)i.setDepthTexture(o)}else i.setDepthTexture(this.depthTexture)}removePass(i){const e=this.passes,t=e.indexOf(i);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(o,l)=>o||l.needsDepthTexture;e.reduce(r,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(i.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const e=this.renderer,t=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,r=!1,a,o,l;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(e,n,s,i,r),u.needsSwap&&(r&&(t.renderToScreen=u.renderToScreen,a=e.getContext(),o=e.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),t.render(e,n,s,i,r),o.setFunc(a.EQUAL,1,4294967295)),l=n,n=s,s=l),u instanceof mae?r=!0:u instanceof fae&&(r=!1))}setSize(i,e,t){const n=this.renderer,s=n.getSize(new Te);(i===void 0||e===void 0)&&(i=s.width,e=s.height),(s.width!==i||s.height!==e)&&n.setSize(i,e,t);const r=n.getDrawingBufferSize(new Te);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Qr.fullscreenGeometry.dispose()}},$c={NONE:0,DEPTH:1,CONVOLUTION:2},Ei={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},yae=class{constructor(){this.shaderParts=new Map([[Ei.FRAGMENT_HEAD,null],[Ei.FRAGMENT_MAIN_UV,null],[Ei.FRAGMENT_MAIN_IMAGE,null],[Ei.VERTEX_HEAD,null],[Ei.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=$c.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Al}},ZC=!1,VU=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Qs:t=this.materialsFlatShadedDoubleSide;break;case rs:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Qs:t=this.materialsDoubleSide;break;case rs:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof bn))return i.clone();const e=i.uniforms,t=new Map;for(const s in e){const r=e[s].value;r.isRenderTargetTexture&&(e[s].value=null,t.set(s,r))}const n=i.clone();for(const s of t)e[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const e=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const t of e)t.uniforms=Object.assign({},i.uniforms),t.side=Ho;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=rs,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=Qs,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=rs,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=Qs,n})}}render(i,e,t){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,ZC){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),i.render(e,t);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,i.render(e,t),e.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of i)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ZC}static set workaroundEnabled(i){ZC=i}},bc=-1,tr=class extends Ra{constructor(i,e=bc,t=bc,n=1){super(),this.resizable=i,this.baseSize=new Te(1,1),this.preferredSize=new Te(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Te,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==bc?t.width=e.width:e.height!==bc?t.width=Math.round(e.height*(i.width/Math.max(i.height,1))):t.width=Math.round(i.width*n),e.height!==bc?t.height=e.height:e.width!==bc?t.height=Math.round(e.width/Math.max(i.width/Math.max(i.height,1),1)):t.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(bc),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,e){(this.baseSize.width!==i||this.baseSize.height!==e)&&(this.baseSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,e){(this.preferredSize.width!==i||this.preferredSize.height!==e)&&(this.preferredSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return bc}},si={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",_ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Tae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Sae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Aae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Eae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Cae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Mae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Dae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Rae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Lae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Iae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Oae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Pae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Uae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Nae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Fae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Hae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",zae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Gae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",qae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",jae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Yae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Jae=new Map([[si.ADD,vae],[si.ALPHA,_ae],[si.AVERAGE,xae],[si.COLOR,bae],[si.COLOR_BURN,Tae],[si.COLOR_DODGE,Sae],[si.DARKEN,Aae],[si.DIFFERENCE,Eae],[si.DIVIDE,Cae],[si.DST,null],[si.EXCLUSION,Mae],[si.HARD_LIGHT,wae],[si.HARD_MIX,Dae],[si.HUE,Rae],[si.INVERT,Bae],[si.INVERT_RGB,Lae],[si.LIGHTEN,Iae],[si.LINEAR_BURN,Oae],[si.LINEAR_DODGE,Pae],[si.LINEAR_LIGHT,Uae],[si.LUMINOSITY,Nae],[si.MULTIPLY,Fae],[si.NEGATION,kae],[si.NORMAL,Hae],[si.OVERLAY,zae],[si.PIN_LIGHT,Gae],[si.REFLECT,Vae],[si.SATURATION,qae],[si.SCREEN,jae],[si.SOFT_LIGHT,Xae],[si.SRC,Wae],[si.SUBTRACT,Yae],[si.VIVID_LIGHT,Kae]]),Qae=class extends Ra{constructor(i,e=1){super(),this._blendFunction=i,this.opacity=new mi(e)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return Jae.get(this.blendFunction)}},kv=class extends Ra{constructor(i,e,{attributes:t=$c.NONE,blendFunction:n=si.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=i,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new Qae(n),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Al,this._outputColorSpace=Oo}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,e=dh){}update(i,e,t){}setSize(i,e){}initialize(i,e,t){}dispose(){for(const i of Object.keys(this)){const e=this[i];(e instanceof On||e instanceof zn||e instanceof Zi||e instanceof Qr)&&this[i].dispose()}}},YB={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Zae=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,$ae="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",eoe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],toe=class extends bn{constructor(i=new di){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new mi(null),texelSize:new mi(new di),scale:new mi(1),kernel:new mi(0)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zae,vertexShader:$ae}),this.setTexelSize(i.x,i.y),this.kernelSize=YB.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return eoe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e,i*.5,e*.5)}setSize(i,e){const t=1/i,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},ioe=class extends Qr{constructor({kernelSize:i=YB.MEDIUM,resolutionScale:e=.5,width:t=tr.AUTO_SIZE,height:n=tr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new On(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new tr(this,s,r,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new toe,this._blurMaterial.kernelSize=i,this.copyMaterial=new Cz}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const r=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,f=u.kernelSequence;let d=e;this.fullscreenMaterial=u;for(let p=0,m=f.length;p<m;++p){const _=p&1?l:o;u.kernel=f[p],u.inputBuffer=d.texture,i.setRenderTarget(_),i.render(r,a),d=_}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,i.setRenderTarget(this.renderToScreen?null:t),i.render(r,a)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,s=t.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Cs?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Ci&&(this.renderTargetA.texture.colorSpace=Ci,this.renderTargetB.texture.colorSpace=Ci))}static get AUTO_SIZE(){return tr.AUTO_SIZE}},noe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,soe=class extends bn{constructor(i=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:fh.replace(/\D+/g,"")},uniforms:{inputBuffer:new mi(null),threshold:new mi(0),smoothing:new mi(1),range:new mi(null)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:noe,vertexShader:Ez}),this.colorOutput=i,this.luminanceRange=e}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},roe=class extends Qr{constructor({renderTarget:i,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:s=tr.AUTO_SIZE,height:r=tr.AUTO_SIZE,resolutionX:a=s,resolutionY:o=r}={}){super("LuminancePass"),this.fullscreenMaterial=new soe(t,e),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new On(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new tr(this,a,o,n);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,e,t,n,s){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}initialize(i,e,t){t!==void 0&&t!==Cs&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},aoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,ooe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",loe=class extends bn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new mi(null),texelSize:new mi(new Te)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:aoe,vertexShader:ooe})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},uoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,coe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",hoe=class extends bn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new mi(null),supportBuffer:new mi(null),texelSize:new mi(new Te),radius:new mi(.85)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:uoe,vertexShader:coe})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},foe=class extends Qr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new On(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new loe,this.upsamplingMaterial=new hoe,this.resolution=new Te}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<i;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=i-1;t<n;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,e,t,n,s){const{scene:r,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:f}=this;let d=e;this.fullscreenMaterial=o;for(let p=0,m=u.length;p<m;++p){const _=u[p];o.setSize(d.width,d.height),o.inputBuffer=d.texture,i.setRenderTarget(_),i.render(r,a),d=_}this.fullscreenMaterial=l;for(let p=f.length-1;p>=0;--p){const m=f[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=u[p].texture,i.setRenderTarget(m),i.render(r,a),d=m}}setSize(i,e){const t=this.resolution;t.set(i,e);let n=t.width,s=t.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(n,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,s)}initialize(i,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=t;if(t!==Cs)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Ci)for(const s of n)s.texture.colorSpace=Ci}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},doe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,poe=class extends kv{constructor({blendFunction:i=si.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:o=YB.LARGE,resolutionScale:l=.5,width:u=tr.AUTO_SIZE,height:f=tr.AUTO_SIZE,resolutionX:d=u,resolutionY:p=f}={}){super("BloomEffect",doe,{blendFunction:i,uniforms:new Map([["map",new mi(null)],["intensity",new mi(s)]])}),this.renderTarget=new On(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ioe({kernelSize:o}),this.luminancePass=new roe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new foe,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new tr(this,d,p,l);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,e,t){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,e):this.blurPass.render(i,e,n)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(i,e),this.mipmapBlurPass.setSize(i,e)}initialize(i,e,t){this.blurPass.initialize(i,e,t),this.luminancePass.initialize(i,e,t),this.mipmapBlurPass.initialize(i,e,t),t!==void 0&&(this.renderTarget.texture.type=t,i!==null&&i.outputColorSpace===Ci&&(this.renderTarget.texture.colorSpace=Ci))}},moe=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,goe="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",yoe=class extends kv{constructor({offset:i=new Te(.001,5e-4),radialModulation:e=!1,modulationOffset:t=.15}={}){super("ChromaticAberrationEffect",moe,{vertexShader:goe,attributes:$c.CONVOLUTION,uniforms:new Map([["offset",new mi(i)],["modulationOffset",new mi(t)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(i){i?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(i){this.uniforms.get("modulationOffset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}},wz=class extends Qr{constructor(i,e,t=null){super("RenderPass",i,e),this.needsSwap=!1,this.clearPass=new Mz,this.overrideMaterialManager=t===null?null:new VU(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const e=this.overrideMaterialManager;i!==null?e!==null?e.setMaterial(i):this.overrideMaterialManager=new VU(i):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,e,t,n,s){const r=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=r.background,f=i.shadowMap.autoUpdate,d=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(i,e),i.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,r,a):i.render(r,a),a.layers.mask=l,r.background=u,i.shadowMap.autoUpdate=f}},voe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,_oe=class extends kv{constructor({blendFunction:i=si.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",voe,{blendFunction:i}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(i){this.premultiply!==i&&(i?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(i){this.premultiply=i}},xoe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,boe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Toe=class extends bn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new mi(null),normalBuffer:new mi(null),texelSize:new mi(new Te)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xoe,vertexShader:boe})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=dh){this.depthBuffer=i,this.depthPacking=e}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Soe=class extends Qr{constructor({normalBuffer:i=null,resolutionScale:e=.5,width:t=tr.AUTO_SIZE,height:n=tr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new Toe;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new On(1,1,{minFilter:In,magFilter:In,depthBuffer:!1,type:Rr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new tr(this,s,r,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,e=dh){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e}render(i,e,t,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Aoe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Eoe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Coe=class extends bn{constructor(i,e,t,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:fh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new mi(null),depthBuffer:new mi(null),resolution:new mi(new Te),texelSize:new mi(new Te),cameraNear:new mi(.3),cameraFar:new mi(1e3),aspect:new mi(1),time:new mi(0)},blending:nr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=dh){this.depthBuffer=i,this.depthPacking=e}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=Aoe.replace(Ei.FRAGMENT_HEAD,i.get(Ei.FRAGMENT_HEAD)||"").replace(Ei.FRAGMENT_MAIN_UV,i.get(Ei.FRAGMENT_MAIN_UV)||"").replace(Ei.FRAGMENT_MAIN_IMAGE,i.get(Ei.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Eoe.replace(Ei.VERTEX_HEAD,i.get(Ei.VERTEX_HEAD)||"").replace(Ei.VERTEX_MAIN_SUPPORT,i.get(Ei.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const e of i.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(i){for(const e of i.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(i){this.extensions={};for(const e of i)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof rn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,e){const t=this.uniforms;t.resolution.value.set(i,e),t.texelSize.value.set(1/i,1/e),t.aspect.value=i/e}static get Section(){return Ei}};function qU(i,e,t){for(const n of e){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(r,s))}}function Moe(i,e,t){let n=e.getFragmentShader(),s=e.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&t.attributes&$c.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let u=l.get(Ei.FRAGMENT_HEAD)||"",f=l.get(Ei.FRAGMENT_MAIN_UV)||"",d=l.get(Ei.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Ei.VERTEX_HEAD)||"",m=l.get(Ei.VERTEX_MAIN_SUPPORT)||"";const _=new Set,x=new Set;if(a&&(f+=`	${i}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const T=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);m+=`	${i}MainSupport(`,m+=T?`vUv);
`:`);
`;for(const A of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const w of A[1].split(/\s*,\s*/))t.varyings.add(w),_.add(w),x.add(w);for(const A of s.matchAll(o))x.add(A[1])}for(const T of n.matchAll(o))x.add(T[1]);for(const T of e.defines.keys())x.add(T.replace(/\([\w\s,]*\)/g,""));for(const T of e.uniforms.keys())x.add(T);x.delete("while"),x.delete("for"),x.delete("if"),e.uniforms.forEach((T,A)=>t.uniforms.set(i+A.charAt(0).toUpperCase()+A.slice(1),T)),e.defines.forEach((T,A)=>t.defines.set(i+A.charAt(0).toUpperCase()+A.slice(1),T));const b=new Map([["fragment",n],["vertex",s]]);qU(i,x,t.defines),qU(i,x,b),n=b.get("fragment"),s=b.get("vertex");const v=e.blendMode;if(t.blendModes.set(v.blendFunction,v),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===Ci?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Oo?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const T=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${i}MainImage(color0, UV, `,t.attributes&$c.DEPTH&&T.test(n)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const A=i+"BlendOpacity";t.uniforms.set(A,v.opacity),d+=`color0 = blend${v.blendFunction}(color0, color1, ${A});

	`,u+=`uniform float ${A};

`}if(u+=n+`
`,s!==null&&(p+=s+`
`),l.set(Ei.FRAGMENT_HEAD,u),l.set(Ei.FRAGMENT_MAIN_UV,f),l.set(Ei.FRAGMENT_MAIN_IMAGE,d),l.set(Ei.VERTEX_HEAD,p),l.set(Ei.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const T of e.extensions)t.extensions.add(T)}}var woe=class extends Qr{constructor(i,...e){super("EffectPass"),this.fullscreenMaterial=new Coe(null,null,null,i),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const e of this.effects)e.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const e of this.effects)e.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const e=this.fullscreenMaterial;e.dithering=i,e.needsUpdate=!0}setEffects(i){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=i.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const i=new yae;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===si.DST)i.attributes|=a.getAttributes()&$c.DEPTH;else{if(i.attributes&a.getAttributes()&$c.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);Moe("e"+e++,a,i)}let t=i.shaderParts.get(Ei.FRAGMENT_HEAD),n=i.shaderParts.get(Ei.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(Ei.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of i.blendModes.values())t+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;i.attributes&$c.DEPTH?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Ci&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(Ei.FRAGMENT_HEAD,t),i.shaderParts.set(Ei.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(Ei.FRAGMENT_MAIN_UV,s);for(const[a,o]of i.shaderParts)o!==null&&i.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,e=dh){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(i,e)}render(i,e,t,n,s){for(const r of this.effects)r.update(i,e,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}}setSize(i,e){this.fullscreenMaterial.setSize(i,e);for(const t of this.effects)t.setSize(i,e)}initialize(i,e,t){this.renderer=i;for(const n of this.effects)n.initialize(i,e,t);this.updateMaterial(),t!==void 0&&t!==Cs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},Doe=class extends Qr{constructor(i,e,{renderTarget:t,resolutionScale:n=1,width:s=tr.AUTO_SIZE,height:r=tr.AUTO_SIZE,resolutionX:a=s,resolutionY:o=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new wz(i,e,new CB);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new $e(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new On(1,1,{minFilter:In,magFilter:In}),this.renderTarget.texture.name="NormalPass.Target");const f=this.resolution=new tr(this,a,o,n);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,r,r)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}};function Zy(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}new Te;new Te;function Dz(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var ja=function i(e,t,n){var s=this;Dz(this,i),Zy(this,"dot2",function(r,a){return s.x*r+s.y*a}),Zy(this,"dot3",function(r,a,o){return s.x*r+s.y*a+s.z*o}),this.x=e,this.y=t,this.z=n},Roe=[new ja(1,1,0),new ja(-1,1,0),new ja(1,-1,0),new ja(-1,-1,0),new ja(1,0,1),new ja(-1,0,1),new ja(1,0,-1),new ja(-1,0,-1),new ja(0,1,1),new ja(0,-1,1),new ja(0,1,-1),new ja(0,-1,-1)],jU=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],XU=new Array(512),WU=new Array(512),Boe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=jU[t]^e&255:n=jU[t]^e>>8&255,XU[t]=XU[t+256]=n,WU[t]=WU[t+256]=Roe[n%12]}};Boe(0);function Loe(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function YU(i){var e=Loe(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Ioe=function i(e){var t=this;Dz(this,i),Zy(this,"seed",0),Zy(this,"init",function(n){t.seed=n,t.value=YU(n)}),Zy(this,"value",YU(this.seed)),this.init(e)};new Ioe(Math.random());const eE=new Ht;eE.setAttribute("position",new li(new Float32Array([-1,-1,3,-1,-1,3]),2));eE.setAttribute("uv",new li(new Float32Array([0,0,2,0,0,2]),2));eE.boundingSphere=new Es;eE.computeBoundingSphere=function(){};new so;new vt,new vt,new vt,new vt,new vt,new W,new Te,new Te;new vt,new vt,new vt,new vt,new W,new Te,new W(0,0,0);new vt,new vt,new vt,new vt,new W,new Te;new Te,new vt,new vt;var Rz="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";Uint8Array.from(atob(Rz),i=>i.charCodeAt(0));Uint8Array.from(atob(Rz),i=>i.charCodeAt(0));const Ooe=ee.createContext(null),KU=i=>(i.getAttributes()&2)===2,Poe=ee.memo(ee.forwardRef(({children:i,camera:e,scene:t,resolutionScale:n,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:u,multisampling:f=8,frameBufferType:d=md},p)=>{const{gl:m,scene:_,camera:x,size:b}=is(),v=t||_,T=e||x,[A,w,B]=ee.useMemo(()=>{const F=new gae(m,{depthBuffer:o,stencilBuffer:u,multisampling:f,frameBufferType:d});F.addPass(new wz(v,T));let N=null,U=null;return l&&(U=new Doe(v,T),U.enabled=!1,F.addPass(U),n!==void 0&&(N=new Soe({normalBuffer:U.texture,resolutionScale:n}),N.enabled=!1,F.addPass(N))),[F,U,N]},[T,m,o,u,f,d,v,l,n]);ee.useEffect(()=>A==null?void 0:A.setSize(b.width,b.height),[A,b]),vh((F,N)=>{if(s){const U=m.autoClear;m.autoClear=a,u&&!a&&m.clearStencil(),A.render(N),m.autoClear=U}},s?r:0);const I=ee.useRef(null);ee.useLayoutEffect(()=>{var U;const F=[],N=I.current.__r3f;if(N&&A){const H=N.children;for(let re=0;re<H.length;re++){const J=H[re].object;if(J instanceof kv){const ae=[J];if(!KU(J)){let j=null;for(;(j=(U=H[re+1])==null?void 0:U.object)instanceof kv&&!KU(j);)ae.push(j),re++}const ce=new woe(T,...ae);F.push(ce)}else J instanceof Qr&&F.push(J)}for(const re of F)A==null||A.addPass(re);w&&(w.enabled=!0),B&&(B.enabled=!0)}return()=>{for(const H of F)A==null||A.removePass(H);w&&(w.enabled=!1),B&&(B.enabled=!1)}},[A,i,T,w,B]),ee.useEffect(()=>{const F=m.toneMapping;return m.toneMapping=No,()=>{m.toneMapping=F}},[m]);const P=ee.useMemo(()=>({composer:A,normalPass:w,downSamplingPass:B,resolutionScale:n,camera:T,scene:v}),[A,w,B,n,T,v]);return ee.useImperativeHandle(p,()=>A,[A]),Ge(Ooe.Provider,{value:P,children:Ge("group",{ref:I,children:i})})}));let Uoe=0;const JU=new WeakMap,KB=(i,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:n=e==null?void 0:e.opacity,...s}){let r=JU.get(i);if(!r){const l=`@react-three/postprocessing/${i.name}-${Uoe++}`;qB({[l]:i}),JU.set(i,r=l)}const a=is(l=>l.camera),o=Kf.useMemo(()=>[...(e==null?void 0:e.args)??[],...s.args??[{...e,...s}]],[JSON.stringify(s)]);return Ge(r,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":n,...s,args:o})},Noe=KB(poe,{blendFunction:0}),Foe=KB(yoe),koe=KB(_oe,{blendFunction:5}),JB=ee.createContext({});function QB(i){const e=ee.useRef(null);return e.current===null&&(e.current=i()),e.current}const ZB=typeof window<"u",Bz=ZB?ee.useLayoutEffect:ee.useEffect,tE=ee.createContext(null),$B=ee.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class Hoe extends ee.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,s=n instanceof HTMLElement&&n.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function zoe({children:i,isPresent:e,anchorX:t}){const n=ee.useId(),s=ee.useRef(null),r=ee.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=ee.useContext($B);return ee.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:f,right:d}=r.current;if(e||!s.current||!o||!l)return;const p=t==="left"?`left: ${f}`:`right: ${d}`;s.current.dataset.motionPopId=n;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),Ge(Hoe,{isPresent:e,childRef:s,sizeRef:r,children:ee.cloneElement(i,{ref:s})})}const Goe=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:s,presenceAffectsLayout:r,mode:a,anchorX:o})=>{const l=QB(Voe),u=ee.useId();let f=!0,d=ee.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:t,custom:s,onExitComplete:p=>{l.set(p,!0);for(const m of l.values())if(!m)return;n&&n()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[t,l,n]);return r&&f&&(d={...d}),ee.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[t]),ee.useEffect(()=>{!t&&!l.size&&n&&n()},[t]),a==="popLayout"&&(i=Ge(zoe,{isPresent:t,anchorX:o,children:i})),Ge(tE.Provider,{value:d,children:i})};function Voe(){return new Map}function Lz(i=!0){const e=ee.useContext(tE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=ee.useId();ee.useEffect(()=>{if(i)return s(r)},[i]);const a=ee.useCallback(()=>i&&n&&n(r),[r,n,i]);return!t&&n?[!1,a]:[!0]}const yT=i=>i.key||"";function QU(i){const e=[];return ee.Children.forEach(i,t=>{ee.isValidElement(t)&&e.push(t)}),e}const $C=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,u]=Lz(a),f=ee.useMemo(()=>QU(i),[i]),d=a&&!l?[]:f.map(yT),p=ee.useRef(!0),m=ee.useRef(f),_=QB(()=>new Map),[x,b]=ee.useState(f),[v,T]=ee.useState(f);Bz(()=>{p.current=!1,m.current=f;for(let B=0;B<v.length;B++){const I=yT(v[B]);d.includes(I)?_.delete(I):_.get(I)!==!0&&_.set(I,!1)}},[v,d.length,d.join("-")]);const A=[];if(f!==x){let B=[...f];for(let I=0;I<v.length;I++){const P=v[I],F=yT(P);d.includes(F)||(B.splice(I,0,P),A.push(P))}return r==="wait"&&A.length&&(B=A),T(QU(B)),b(f),null}const{forceRender:w}=ee.useContext(JB);return Ge(WF,{children:v.map(B=>{const I=yT(B),P=a&&!l?!1:f===v||d.includes(I),F=()=>{if(_.has(I))_.set(I,!0);else return;let N=!0;_.forEach(U=>{U||(N=!1)}),N&&(w==null||w(),T(m.current),a&&(u==null||u()),n&&n())};return Ge(Goe,{isPresent:P,initial:!p.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,onExitComplete:P?void 0:F,anchorX:o,children:B},I)})})},vT=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ZU={value:null,addProjectionMetrics:null};function qoe(i,e){let t=new Set,n=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){a.has(d)&&(f.schedule(d),i()),l++,d(o)}const f={schedule:(d,p=!1,m=!1)=>{const x=m&&s?t:n;return p&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){r=!0;return}s=!0,[t,n]=[n,t],t.forEach(u),e&&ZU.value&&ZU.value.frameloop[e].push(l),l=0,t.clear(),s=!1,r&&(r=!1,f.process(d))}};return f}const Du={},joe=40;function Iz(i,e){let t=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=vT.reduce((A,w)=>(A[w]=qoe(r,e?w:void 0),A),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:f,update:d,preRender:p,render:m,postRender:_}=a,x=()=>{const A=Du.useManualTiming?s.timestamp:performance.now();t=!1,Du.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(A-s.timestamp,joe),1)),s.timestamp=A,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),f.process(s),d.process(s),p.process(s),m.process(s),_.process(s),s.isProcessing=!1,t&&e&&(n=!1,i(x))},b=()=>{t=!0,n=!0,s.isProcessing||i(x)};return{schedule:vT.reduce((A,w)=>{const B=a[w];return A[w]=(I,P=!1,F=!1)=>(t||b(),B.schedule(I,P,F)),A},{}),cancel:A=>{for(let w=0;w<vT.length;w++)a[vT[w]].cancel(A)},state:s,steps:a}}const ro=i=>i,{schedule:$i,cancel:ah,state:Is,steps:eM}=Iz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ro,!0),Oz=ee.createContext({strict:!1}),$U={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lg={};for(const i in $U)lg[i]={isEnabled:e=>$U[i].some(t=>!!e[t])};function Xoe(i){for(const e in i)lg[e]={...lg[e],...i[e]}}const Woe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function A1(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||Woe.has(i)}let Pz=i=>!A1(i);function Yoe(i){i&&(Pz=e=>e.startsWith("on")?!A1(e):i(e))}try{Yoe(require("@emotion/is-prop-valid").default)}catch{}function Koe(i,e,t){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(Pz(s)||t===!0&&A1(s)||!e&&!A1(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function Joe(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,s)=>s==="create"?i:(e.has(s)||e.set(s,i(s)),e.get(s))})}const iE=ee.createContext({});function nE(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Hv(i){return typeof i=="string"||Array.isArray(i)}const e3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t3=["initial",...e3];function sE(i){return nE(i.animate)||t3.some(e=>Hv(i[e]))}function Uz(i){return!!(sE(i)||i.variants)}function Qoe(i,e){if(sE(i)){const{initial:t,animate:n}=i;return{initial:t===!1||Hv(t)?t:void 0,animate:Hv(n)?n:void 0}}return i.inherit!==!1?e:{}}function Zoe(i){const{initial:e,animate:t}=Qoe(i,ee.useContext(iE));return ee.useMemo(()=>({initial:e,animate:t}),[eN(e),eN(t)])}function eN(i){return Array.isArray(i)?i.join(" "):i}const $oe=Symbol.for("motionComponentSymbol");function um(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function ele(i,e,t){return ee.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):um(t)&&(t.current=n))},[e])}const i3=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tle="framerAppearId",Nz="data-"+i3(tle),Fz=ee.createContext({}),{schedule:n3,cancel:Jve}=Iz(queueMicrotask,!1);function ile(i,e,t,n,s){var x,b;const{visualElement:r}=ee.useContext(iE),a=ee.useContext(Oz),o=ee.useContext(tE),l=ee.useContext($B).reducedMotion,u=ee.useRef(null);n=n||a.renderer,!u.current&&n&&(u.current=n(i,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=u.current,d=ee.useContext(Fz);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&nle(u.current,t,s,d);const p=ee.useRef(!1);ee.useInsertionEffect(()=>{f&&p.current&&f.update(t,o)});const m=t[Nz],_=ee.useRef(!!m&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return Bz(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),n3.render(f.render),_.current&&f.animationState&&f.animationState.animateChanges())}),ee.useEffect(()=>{f&&(!_.current&&f.animationState&&f.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,m)}),_.current=!1))}),f}function nle(i,e,t,n){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:f}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:kz(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&um(o),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:f,layoutScroll:l,layoutRoot:u})}function kz(i){if(i)return i.options.allowProjection!==!1?i.projection:kz(i.parent)}let s3=()=>{};function sle({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:s}){i&&Xoe(i);function r(o,l){let u;const f={...ee.useContext($B),...o,layoutId:rle(o)},{isStatic:d}=f,p=Zoe(o),m=n(o,d);if(!d&&ZB){ale();const _=ole(f);u=_.MeasureLayout,p.visualElement=ile(s,m,f,e,_.ProjectionNode)}return Yi(iE.Provider,{value:p,children:[u&&p.visualElement?Ge(u,{visualElement:p.visualElement,...f}):null,t(s,o,ele(m,p.visualElement,l),m,d,p.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=ee.forwardRef(r);return a[$oe]=s,a}function rle({layoutId:i}){const e=ee.useContext(JB).id;return e&&i!==void 0?e+"-"+i:i}function ale(i,e){ee.useContext(Oz).strict}function ole(i){const{drag:e,layout:t}=lg;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(i)||t!=null&&t.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Hz=i=>e=>typeof e=="string"&&e.startsWith(i),r3=Hz("--"),lle=Hz("var(--"),a3=i=>lle(i)?ule.test(i.split("/*")[0].trim()):!1,ule=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zv={};function cle(i){for(const e in i)zv[e]=i[e],r3(e)&&(zv[e].isCSSVariable=!0)}const Pg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bd=(()=>new Set(Pg))();function zz(i,{layout:e,layoutId:t}){return bd.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!zv[i]||i==="opacity")}const ir=i=>!!(i&&i.getVelocity),Gz=(i,e)=>e&&typeof i=="number"?e.transform(i):i,Ru=(i,e,t)=>t>e?e:t<i?i:t,Ug={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Gv={...Ug,transform:i=>Ru(0,1,i)},_T={...Ug,default:1},tN={...Ug,transform:Math.round},O_=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),wc=O_("deg"),vl=O_("%"),Ot=O_("px"),hle=O_("vh"),fle=O_("vw"),iN=(()=>({...vl,parse:i=>vl.parse(i)/100,transform:i=>vl.transform(i*100)}))(),dle={rotate:wc,rotateX:wc,rotateY:wc,rotateZ:wc,scale:_T,scaleX:_T,scaleY:_T,scaleZ:_T,skew:wc,skewX:wc,skewY:wc,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:Gv,originX:iN,originY:iN,originZ:Ot},o3={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot,...dle,zIndex:tN,size:Ot,fillOpacity:Gv,strokeOpacity:Gv,numOctaves:tN},ple={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mle=Pg.length;function gle(i,e,t){let n="",s=!0;for(let r=0;r<mle;r++){const a=Pg[r],o=i[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=Gz(o,o3[a]);if(!l){s=!1;const f=ple[a]||a;n+=`${f}(${u}) `}t&&(e[a]=u)}}return n=n.trim(),t?n=t(e,s?"":n):s&&(n="none"),n}function l3(i,e,t){const{style:n,vars:s,transformOrigin:r}=i;let a=!1,o=!1;for(const l in e){const u=e[l];if(bd.has(l)){a=!0;continue}else if(r3(l)){s[l]=u;continue}else{const f=Gz(u,o3[l]);l.startsWith("origin")?(o=!0,r[l]=f):n[l]=f}}if(e.transform||(a||t?n.transform=gle(e,i.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=r;n.transformOrigin=`${l} ${u} ${f}`}}const u3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Vz(i,e,t){for(const n in e)!ir(e[n])&&!zz(n,t)&&(i[n]=e[n])}function yle({transformTemplate:i},e){return ee.useMemo(()=>{const t=u3();return l3(t,e,i),Object.assign({},t.vars,t.style)},[e])}function vle(i,e){const t=i.style||{},n={};return Vz(n,t,i),Object.assign(n,yle(i,e)),n}function _le(i,e){const t={},n=vle(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const xle=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function c3(i){return typeof i!="string"||i.includes("-")?!1:!!(xle.indexOf(i)>-1||/[A-Z]/u.test(i))}const ble={offset:"stroke-dashoffset",array:"stroke-dasharray"},Tle={offset:"strokeDashoffset",array:"strokeDasharray"};function Sle(i,e,t=1,n=0,s=!0){i.pathLength=1;const r=s?ble:Tle;i[r.offset]=Ot.transform(-n);const a=Ot.transform(e),o=Ot.transform(t);i[r.array]=`${a} ${o}`}function nN(i,e,t){return typeof i=="string"?i:Ot.transform(e+t*i)}function Ale(i,e,t){const n=nN(e,i.x,i.width),s=nN(t,i.y,i.height);return`${n} ${s}`}function h3(i,{attrX:e,attrY:t,attrScale:n,originX:s,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(l3(i,u,d),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:p,style:m,dimensions:_}=i;p.transform&&(_&&(m.transform=p.transform),delete p.transform),_&&(s!==void 0||r!==void 0||m.transform)&&(m.transformOrigin=Ale(_,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),n!==void 0&&(p.scale=n),a!==void 0&&Sle(p,a,o,l,!1)}const qz=()=>({...u3(),attrs:{}}),f3=i=>typeof i=="string"&&i.toLowerCase()==="svg";function Ele(i,e,t,n){const s=ee.useMemo(()=>{const r=qz();return h3(r,e,f3(n),i.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(i.style){const r={};Vz(r,i.style,i),s.style={...r,...s.style}}return s}function Cle(i=!1){return(t,n,s,{latestValues:r},a)=>{const l=(c3(t)?Ele:_le)(n,r,a,t),u=Koe(n,typeof t=="string",i),f=t!==ee.Fragment?{...u,...l,ref:s}:{},{children:d}=n,p=ee.useMemo(()=>ir(d)?d.get():d,[d]);return ee.createElement(t,{...f,children:p})}}function sN(i){const e=[{},{}];return i==null||i.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function d3(i,e,t,n){if(typeof e=="function"){const[s,r]=sN(n);e=e(t!==void 0?t:i.custom,s,r)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[s,r]=sN(n);e=e(t!==void 0?t:i.custom,s,r)}return e}const nD=i=>Array.isArray(i),Mle=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),wle=i=>nD(i)?i[i.length-1]||0:i;function YT(i){const e=ir(i)?i.get():i;return Mle(e)?e.toValue():e}function Dle({scrapeMotionValuesFromProps:i,createRenderState:e,onUpdate:t},n,s,r){const a={latestValues:Rle(n,s,r,i),renderState:e()};return t&&(a.onMount=o=>t({props:n,current:o,...a}),a.onUpdate=o=>t(o)),a}const jz=i=>(e,t)=>{const n=ee.useContext(iE),s=ee.useContext(tE),r=()=>Dle(i,e,n,s);return t?r():QB(r)};function Rle(i,e,t,n){const s={},r=n(i,{});for(const p in r)s[p]=YT(r[p]);let{initial:a,animate:o}=i;const l=sE(i),u=Uz(i);e&&u&&!l&&i.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!nE(d)){const p=Array.isArray(d)?d:[d];for(let m=0;m<p.length;m++){const _=d3(i,p[m]);if(_){const{transitionEnd:x,transition:b,...v}=_;for(const T in v){let A=v[T];if(Array.isArray(A)){const w=f?A.length-1:0;A=A[w]}A!==null&&(s[T]=A)}for(const T in x)s[T]=x[T]}}}return s}function p3(i,e,t){var r;const{style:n}=i,s={};for(const a in n)(ir(n[a])||e.style&&ir(e.style[a])||zz(a,i)||((r=t==null?void 0:t.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=n[a]);return s}const Ble={useVisualState:jz({scrapeMotionValuesFromProps:p3,createRenderState:u3})};function Xz(i,e){try{e.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function Wz(i,{style:e,vars:t},n,s){Object.assign(i.style,e,s&&s.getProjectionStyles(n));for(const r in t)i.style.setProperty(r,t[r])}const Yz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Kz(i,e,t,n){Wz(i,e,void 0,n);for(const s in e.attrs)i.setAttribute(Yz.has(s)?s:i3(s),e.attrs[s])}function Jz(i,e,t){const n=p3(i,e,t);for(const s in i)if(ir(i[s])||ir(e[s])){const r=Pg.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}const rN=["x","y","width","height","cx","cy","r"],Lle={useVisualState:jz({scrapeMotionValuesFromProps:Jz,createRenderState:qz,onUpdate:({props:i,prevProps:e,current:t,renderState:n,latestValues:s})=>{if(!t)return;let r=!!i.drag;if(!r){for(const o in s)if(bd.has(o)){r=!0;break}}if(!r)return;let a=!e;if(e)for(let o=0;o<rN.length;o++){const l=rN[o];i[l]!==e[l]&&(a=!0)}a&&$i.read(()=>{Xz(t,n),$i.render(()=>{h3(n,s,f3(t.tagName),i.transformTemplate),Kz(t,n)})})}})};function Ile(i,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...c3(n)?Lle:Ble,preloadedFeatures:i,useRender:Cle(s),createVisualElement:e,Component:n};return sle(a)}}function Vv(i,e,t){const n=i.getProps();return d3(n,e,t!==void 0?t:n.custom,i)}let KT;function Ole(){KT=void 0}const Wr={now:()=>(KT===void 0&&Wr.set(Is.isProcessing||Du.useManualTiming?Is.timestamp:performance.now()),KT),set:i=>{KT=i,queueMicrotask(Ole)}};function m3(i,e){i.indexOf(e)===-1&&i.push(e)}function g3(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}class y3{constructor(){this.subscriptions=[]}add(e){return m3(this.subscriptions,e),()=>g3(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Qz(i,e){return e?i*(1e3/e):0}const aN=30,Ple=i=>!isNaN(parseFloat(i));class Ule{constructor(e,t={}){this.version="12.7.5",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const r=Wr.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Wr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ple(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new y3);const n=this.events[e].add(t);return e==="change"?()=>{n(),$i.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){e==="none"&&console.trace(),!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>aN)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,aN);return Qz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qv(i,e){return new Ule(i,e)}function Nle(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,qv(t))}function Fle(i,e){const t=Vv(i,e);let{transitionEnd:n={},transition:s={},...r}=t||{};r={...r,...n};for(const a in r){const o=wle(r[a]);Nle(i,a,o)}}function kle(i){return!!(ir(i)&&i.add)}function sD(i,e){const t=i.getValue("willChange");if(kle(t))return t.add(e);if(!t&&Du.WillChange){const n=new Du.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function Zz(i){return i.props[Nz]}const Hle=i=>i!==null;function zle(i,{repeat:e,repeatType:t="loop"},n){const s=i.filter(Hle),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return!r||n===void 0?s[r]:n}const Gle={type:"spring",stiffness:500,damping:25,restSpeed:10},Vle=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),qle={type:"keyframes",duration:.8},jle={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Xle=(i,{keyframes:e})=>e.length>2?qle:bd.has(i)?i.startsWith("scale")?Vle(e[1]):Gle:jle;function Wle({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}function v3(i,e){return(i==null?void 0:i[e])??(i==null?void 0:i.default)??i}const _l=i=>i*1e3,xl=i=>i/1e3,$y=i=>Math.round(i*1e5)/1e5,_3=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yle(i){return i==null}const Kle=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,x3=(i,e)=>t=>!!(typeof t=="string"&&Kle.test(t)&&t.startsWith(i)||e&&!Yle(t)&&Object.prototype.hasOwnProperty.call(t,e)),$z=(i,e,t)=>n=>{if(typeof n!="string")return n;const[s,r,a,o]=n.match(_3);return{[i]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Jle=i=>Ru(0,255,i),tM={...Ug,transform:i=>Math.round(Jle(i))},Df={test:x3("rgb","red"),parse:$z("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+tM.transform(i)+", "+tM.transform(e)+", "+tM.transform(t)+", "+$y(Gv.transform(n))+")"};function Qle(i){let e="",t="",n="",s="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),e+=e,t+=t,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const rD={test:x3("#"),parse:Qle,transform:Df.transform},cm={test:x3("hsl","hue"),parse:$z("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+vl.transform($y(e))+", "+vl.transform($y(t))+", "+$y(Gv.transform(n))+")"},Js={test:i=>Df.test(i)||rD.test(i)||cm.test(i),parse:i=>Df.test(i)?Df.parse(i):cm.test(i)?cm.parse(i):rD.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Df.transform(i):cm.transform(i)},Zle=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $le(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(_3))==null?void 0:e.length)||0)+(((t=i.match(Zle))==null?void 0:t.length)||0)>0}const e9="number",t9="color",eue="var",tue="var(",oN="${}",iue=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jv(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(iue,l=>(Js.test(l)?(n.color.push(r),s.push(t9),t.push(Js.parse(l))):l.startsWith(tue)?(n.var.push(r),s.push(eue),t.push(l)):(n.number.push(r),s.push(e9),t.push(parseFloat(l))),++r,oN)).split(oN);return{values:t,split:o,indexes:n,types:s}}function i9(i){return jv(i).values}function n9(i){const{split:e,types:t}=jv(i),n=e.length;return s=>{let r="";for(let a=0;a<n;a++)if(r+=e[a],s[a]!==void 0){const o=t[a];o===e9?r+=$y(s[a]):o===t9?r+=Js.transform(s[a]):r+=s[a]}return r}}const nue=i=>typeof i=="number"?0:i;function sue(i){const e=i9(i);return n9(i)(e.map(nue))}const oh={test:$le,parse:i9,createTransformer:n9,getAnimatableNone:sue};function iM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function rue({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;s=iM(l,o,i+1/3),r=iM(l,o,i),a=iM(l,o,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:n}}function E1(i,e){return t=>t>0?e:i}const vn=(i,e,t)=>i+(e-i)*t,nM=(i,e,t)=>{const n=i*i,s=t*(e*e-n)+n;return s<0?0:Math.sqrt(s)},aue=[rD,Df,cm],oue=i=>aue.find(e=>e.test(i));function lN(i){const e=oue(i);if(!e)return!1;let t=e.parse(i);return e===cm&&(t=rue(t)),t}const uN=(i,e)=>{const t=lN(i),n=lN(e);if(!t||!n)return E1(i,e);const s={...t};return r=>(s.red=nM(t.red,n.red,r),s.green=nM(t.green,n.green,r),s.blue=nM(t.blue,n.blue,r),s.alpha=vn(t.alpha,n.alpha,r),Df.transform(s))},aD=new Set(["none","hidden"]);function lue(i,e){return aD.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}const uue=(i,e)=>t=>e(i(t)),P_=(...i)=>i.reduce(uue);function cue(i,e){return t=>vn(i,e,t)}function b3(i){return typeof i=="number"?cue:typeof i=="string"?a3(i)?E1:Js.test(i)?uN:due:Array.isArray(i)?s9:typeof i=="object"?Js.test(i)?uN:hue:E1}function s9(i,e){const t=[...i],n=t.length,s=i.map((r,a)=>b3(r)(r,e[a]));return r=>{for(let a=0;a<n;a++)t[a]=s[a](r);return t}}function hue(i,e){const t={...i,...e},n={};for(const s in t)i[s]!==void 0&&e[s]!==void 0&&(n[s]=b3(i[s])(i[s],e[s]));return s=>{for(const r in n)t[r]=n[r](s);return t}}function fue(i,e){const t=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=i.indexes[r][n[r]],o=i.values[a]??0;t[s]=o,n[r]++}return t}const due=(i,e)=>{const t=oh.createTransformer(e),n=jv(i),s=jv(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?aD.has(i)&&!s.values.length||aD.has(e)&&!n.values.length?lue(i,e):P_(s9(fue(n,s),s.values),t):E1(i,e)};function r9(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?vn(i,e,t):b3(i)(i,e)}const pue=i=>{const e=({timestamp:t})=>i(t);return{start:()=>$i.update(e,!0),stop:()=>ah(e),now:()=>Is.isProcessing?Is.timestamp:Wr.now()}},a9=(i,e,t=10)=>{let n="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)n+=i(r/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},C1=2e4;function T3(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<C1;)e+=t,n=i.next(e);return e>=C1?1/0:e}function mue(i,e=100,t){const n=t({...i,keyframes:[0,e]}),s=Math.min(T3(n),C1);return{type:"keyframes",ease:r=>n.next(s*r).value/e,duration:xl(s)}}const gue=5;function o9(i,e,t){const n=Math.max(e-gue,0);return Qz(t-i(n),e-n)}const Dn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sM=.001;function yue({duration:i=Dn.duration,bounce:e=Dn.bounce,velocity:t=Dn.velocity,mass:n=Dn.mass}){let s,r,a=1-e;a=Ru(Dn.minDamping,Dn.maxDamping,a),i=Ru(Dn.minDuration,Dn.maxDuration,xl(i)),a<1?(s=u=>{const f=u*a,d=f*i,p=f-t,m=oD(u,a),_=Math.exp(-d);return sM-p/m*_},r=u=>{const d=u*a*i,p=d*t+t,m=Math.pow(a,2)*Math.pow(u,2)*i,_=Math.exp(-d),x=oD(Math.pow(u,2),a);return(-s(u)+sM>0?-1:1)*((p-m)*_)/x}):(s=u=>{const f=Math.exp(-u*i),d=(u-t)*i+1;return-sM+f*d},r=u=>{const f=Math.exp(-u*i),d=(t-u)*(i*i);return f*d});const o=5/i,l=_ue(s,r,o);if(i=_l(i),isNaN(l))return{stiffness:Dn.stiffness,damping:Dn.damping,duration:i};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:i}}}const vue=12;function _ue(i,e,t){let n=t;for(let s=1;s<vue;s++)n=n-i(n)/e(n);return n}function oD(i,e){return i*Math.sqrt(1-e*e)}const xue=["duration","bounce"],bue=["stiffness","damping","mass"];function cN(i,e){return e.some(t=>i[t]!==void 0)}function Tue(i){let e={velocity:Dn.velocity,stiffness:Dn.stiffness,damping:Dn.damping,mass:Dn.mass,isResolvedFromDuration:!1,...i};if(!cN(i,bue)&&cN(i,xue))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),s=n*n,r=2*Ru(.05,1,1-(i.bounce||0))*Math.sqrt(s);e={...e,mass:Dn.mass,stiffness:s,damping:r}}else{const t=yue(i);e={...e,...t,mass:Dn.mass},e.isResolvedFromDuration=!0}return e}function M1(i=Dn.visualDuration,e=Dn.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:u,mass:f,duration:d,velocity:p,isResolvedFromDuration:m}=Tue({...t,velocity:-xl(t.velocity||0)}),_=p||0,x=u/(2*Math.sqrt(l*f)),b=a-r,v=xl(Math.sqrt(l/f)),T=Math.abs(b)<5;n||(n=T?Dn.restSpeed.granular:Dn.restSpeed.default),s||(s=T?Dn.restDelta.granular:Dn.restDelta.default);let A;if(x<1){const B=oD(v,x);A=I=>{const P=Math.exp(-x*v*I);return a-P*((_+x*v*b)/B*Math.sin(B*I)+b*Math.cos(B*I))}}else if(x===1)A=B=>a-Math.exp(-v*B)*(b+(_+v*b)*B);else{const B=v*Math.sqrt(x*x-1);A=I=>{const P=Math.exp(-x*v*I),F=Math.min(B*I,300);return a-P*((_+x*v*b)*Math.sinh(F)+B*b*Math.cosh(F))/B}}const w={calculatedDuration:m&&d||null,next:B=>{const I=A(B);if(m)o.done=B>=d;else{let P=B===0?_:0;x<1&&(P=B===0?_l(_):o9(A,B,I));const F=Math.abs(P)<=n,N=Math.abs(a-I)<=s;o.done=F&&N}return o.value=o.done?a:I,o},toString:()=>{const B=Math.min(T3(w),C1),I=a9(P=>w.next(B*P).value,B,30);return B+"ms "+I},toTransition:()=>{}};return w}M1.applyToOptions=i=>{const e=mue(i,100,M1);return i.ease=e.ease,i.duration=_l(e.duration),i.type="keyframes",i};function lD({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=i[0],p={done:!1,value:d},m=F=>o!==void 0&&F<o||l!==void 0&&F>l,_=F=>o===void 0?l:l===void 0||Math.abs(o-F)<Math.abs(l-F)?o:l;let x=t*e;const b=d+x,v=a===void 0?b:a(b);v!==b&&(x=v-d);const T=F=>-x*Math.exp(-F/n),A=F=>v+T(F),w=F=>{const N=T(F),U=A(F);p.done=Math.abs(N)<=u,p.value=p.done?v:U};let B,I;const P=F=>{m(p.value)&&(B=F,I=M1({keyframes:[p.value,_(p.value)],velocity:o9(A,F,p.value),damping:s,stiffness:r,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:F=>{let N=!1;return!I&&B===void 0&&(N=!0,w(F),P(F)),B!==void 0&&F>=B?I.next(F-B):(!N&&w(F),p)}}}const Xv=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};function Sue(i,e,t){const n=[],s=t||Du.mix||r9,r=i.length-1;for(let a=0;a<r;a++){let o=s(i[a],i[a+1]);if(e){const l=Array.isArray(e)?e[a]||ro:e;o=P_(l,o)}n.push(o)}return n}function Aue(i,e,{clamp:t=!0,ease:n,mixer:s}={}){const r=i.length;if(s3(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),e=[...e].reverse());const o=Sue(e,n,s),l=o.length,u=f=>{if(a&&f<i[0])return e[0];let d=0;if(l>1)for(;d<i.length-2&&!(f<i[d+1]);d++);const p=Xv(i[d],i[d+1],f);return o[d](p)};return t?f=>u(Ru(i[0],i[r-1],f)):u}function Eue(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const s=Xv(0,e,n);i.push(vn(t,1,s))}}function Cue(i){const e=[0];return Eue(e,i.length-1),e}function Mue(i,e){return i.map(t=>t*e)}const l9=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,wue=1e-7,Due=12;function Rue(i,e,t,n,s){let r,a,o=0;do a=e+(t-e)/2,r=l9(a,n,s)-i,r>0?t=a:e=a;while(Math.abs(r)>wue&&++o<Due);return a}function U_(i,e,t,n){if(i===e&&t===n)return ro;const s=r=>Rue(r,0,1,i,t);return r=>r===0||r===1?r:l9(s(r),e,n)}const Bue=U_(.42,0,1,1),Lue=U_(0,0,.58,1),u9=U_(.42,0,.58,1),Iue=i=>Array.isArray(i)&&typeof i[0]!="number",c9=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,h9=i=>e=>1-i(1-e),f9=U_(.33,1.53,.69,.99),S3=h9(f9),d9=c9(S3),p9=i=>(i*=2)<1?.5*S3(i):.5*(2-Math.pow(2,-10*(i-1))),A3=i=>1-Math.sin(Math.acos(i)),m9=h9(A3),g9=c9(A3),y9=i=>Array.isArray(i)&&typeof i[0]=="number",Oue={linear:ro,easeIn:Bue,easeInOut:u9,easeOut:Lue,circIn:A3,circInOut:g9,circOut:m9,backIn:S3,backInOut:d9,backOut:f9,anticipate:p9},Pue=i=>typeof i=="string",hN=i=>{if(y9(i)){s3(i.length===4);const[e,t,n,s]=i;return U_(e,t,n,s)}else if(Pue(i))return Oue[i];return i};function Uue(i,e){return i.map(()=>e||u9).splice(0,i.length-1)}function ev({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const s=Iue(n)?n.map(hN):hN(n),r={done:!1,value:e[0]},a=Mue(t&&t.length===e.length?t:Cue(e),i),o=Aue(a,e,{ease:Array.isArray(s)?s:Uue(e,s)});return{calculatedDuration:i,next:l=>(r.value=o(l),r.done=l>=i,r)}}const Nue=i=>i!==null;function E3(i,{repeat:e,repeatType:t="loop"},n,s=1){const r=i.filter(Nue),o=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!o||n===void 0?r[o]:n}const Fue={decay:lD,inertia:lD,tween:ev,keyframes:ev,spring:M1};function v9(i){typeof i.type=="string"&&(i.type=Fue[i.type])}class C3{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const kue=i=>i/100;class _9 extends C3{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;if(t&&t.updatedAt!==Wr.now()&&this.tick(Wr.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:n}=this.options;n&&n()},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;v9(e);const{type:t=ev,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=t||ev;l!==ev&&typeof o[0]!="number"&&(this.mixKeyframes=P_(kue,r9(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=T3(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:f,repeat:d,repeatType:p,repeatDelay:m,type:_,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let A=this.currentTime,w=n;if(d){const F=Math.min(this.currentTime,s)/o;let N=Math.floor(F),U=F%1;!U&&F>=1&&(U=1),U===1&&N--,N=Math.min(N,d+1),!!(N%2)&&(p==="reverse"?(U=1-U,m&&(U-=m/o)):p==="mirror"&&(w=a)),A=Ru(0,1,U)*o}const B=T?{done:!1,value:f[0]}:w.next(A);r&&(B.value=r(B.value));let{done:I}=B;!T&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return P&&_!==lD&&(B.value=E3(f,this.options,b,this.speed)),x&&x(B.value),P&&this.finish(),B}then(e,t){return this.finished.then(e,t)}get duration(){return xl(this.calculatedDuration)}get time(){return xl(this.currentTime)}set time(e){e=_l(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=xl(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=pue,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.state==="finished"?(this.updateFinished(),this.startTime=s):this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),e.observe(this)}}function Hue(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const Rf=i=>i*180/Math.PI,uD=i=>{const e=Rf(Math.atan2(i[1],i[0]));return cD(e)},zue={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:uD,rotateZ:uD,skewX:i=>Rf(Math.atan(i[1])),skewY:i=>Rf(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},cD=i=>(i=i%360,i<0&&(i+=360),i),fN=uD,dN=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),pN=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),Gue={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dN,scaleY:pN,scale:i=>(dN(i)+pN(i))/2,rotateX:i=>cD(Rf(Math.atan2(i[6],i[5]))),rotateY:i=>cD(Rf(Math.atan2(-i[2],i[0]))),rotateZ:fN,rotate:fN,skewX:i=>Rf(Math.atan(i[4])),skewY:i=>Rf(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function mN(i){return i.includes("scale")?1:0}function hD(i,e){if(!i||i==="none")return mN(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(t)n=Gue,s=t;else{const o=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=zue,s=o}if(!s)return mN(e);const r=n[e],a=s[1].split(",").map(que);return typeof r=="function"?r(a):a[r]}const Vue=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return hD(t,e)};function que(i){return parseFloat(i.trim())}const gN=i=>i===Ug||i===Ot,jue=new Set(["x","y","z"]),Xue=Pg.filter(i=>!jue.has(i));function Wue(i){const e=[];return Xue.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const ug={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>hD(e,"x"),y:(i,{transform:e})=>hD(e,"y")};ug.translateX=ug.x;ug.translateY=ug.y;const Vf=new Set;let fD=!1,dD=!1,pD=!1;function x9(){if(dD){const i=Array.from(Vf).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const s=Wue(n);s.length&&(t.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=t.get(n);s&&s.forEach(([r,a])=>{var o;(o=n.getValue(r))==null||o.set(a)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}dD=!1,fD=!1,Vf.forEach(i=>i.complete(pD)),Vf.clear()}function b9(){Vf.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(dD=!0)})}function Yue(){pD=!0,b9(),x9(),pD=!1}class M3{constructor(e,t,n,s,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vf.add(this),fD||(fD=!0,$i.read(b9),$i.resolveKeyframes(x9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&t){const o=n.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}Hue(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Vf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Kue=i=>i.startsWith("--");function Jue(i,e,t){Kue(e)?i.style.setProperty(e,t):i.style[e]=t}function w3(i){let e;return()=>(e===void 0&&(e=i()),e)}const Que=w3(()=>window.ScrollTimeline!==void 0),Zue={};function $ue(i,e){const t=w3(i);return()=>Zue[e]??t()}const T9=$ue(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_y=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,yN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_y([0,.65,.55,1]),circOut:_y([.55,0,1,.45]),backIn:_y([.31,.01,.66,-.59]),backOut:_y([.33,1.53,.69,.99])};function S9(i,e){if(i)return typeof i=="function"?T9()?a9(i,e):"ease-out":y9(i)?_y(i):Array.isArray(i)?i.map(t=>S9(t,e)||yN.easeOut):yN[i]}function ece(i,e,t,{delay:n=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const f={[e]:t};l&&(f.offset=l);const d=S9(o,s);Array.isArray(d)&&(f.easing=d);const p={delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),i.animate(f,p)}function A9(i){return typeof i=="function"&&"applyToOptions"in i}function tce({type:i,...e}){return A9(i)&&T9()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ice extends C3{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,s3(typeof e.type!="string");const l=tce(e);this.animation=ece(t,n,s,l,r),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const u=E3(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):Jue(t,n,u),this.animation.cancel()}this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return xl(Number(e))}get time(){return xl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_l(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Que()?(this.animation.timeline=e,ro):t(this)}}const E9={anticipate:p9,backInOut:d9,circInOut:g9};function nce(i){return i in E9}function sce(i){typeof i.ease=="string"&&nce(i.ease)&&(i.ease=E9[i.ease])}const vN=10;class rce extends ice{constructor(e){sce(e),v9(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new _9({...a,autoplay:!1}),l=_l(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-vN).value,o.sample(l).value,vN),o.stop()}}const _N=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(oh.test(i)||i==="0")&&!i.startsWith("url("));function ace(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function oce(i,e,t,n){const s=i[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=i[i.length-1],a=_N(s,e),o=_N(r,e);return!a||!o?!1:ace(i)||(t==="spring"||A9(t))&&n}const lce=new Set(["opacity","clipPath","filter","transform"]),uce=w3(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cce(i){const{motionValue:e,name:t,repeatDelay:n,repeatType:s,damping:r,type:a}=i;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return uce()&&t&&lce.has(t)&&(t!=="transform"||!l)&&!o&&!n&&s!=="mirror"&&r!==0&&a!=="inertia"}const hce=40;class fce extends C3{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:f,...d}){var _;super(),this.stop=()=>{var x,b;this._animation?(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)):(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Wr.now();const p={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:u,element:f,...d},m=(f==null?void 0:f.KeyframeResolver)||M3;this.keyframeResolver=new m(o,(x,b,v)=>this.onKeyframesResolved(x,b,p,!v),l,u,f),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:f,onComplete:d}=n;this.resolvedAt=Wr.now(),oce(e,r,a,o)||((Du.instantAnimations||!l)&&(f==null||f(E3(e,n,t))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>hce?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},_=!u&&cce(m)?new rce({...m,element:m.motionValue.owner.current}):new _9(m);_.finished.then(()=>{d==null||d(),this.notifyFinished()}).catch(ro),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||Yue(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const D3=(i,e,t,n={},s,r)=>a=>{const o=v3(n,i)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-_l(l);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:i,motionValue:e,element:r?void 0:s};Wle(o)||Object.assign(f,Xle(i,f)),f.duration&&(f.duration=_l(f.duration)),f.repeatDelay&&(f.repeatDelay=_l(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),(Du.instantAnimations||Du.skipAnimations)&&(d=!0,f.duration=0,f.delay=0),f.allowFlatten=!o.type&&!o.ease,d&&!r&&e.get()!==void 0){const p=zle(f.keyframes,o);if(p!==void 0){$i.update(()=>{f.onUpdate(p),f.onComplete()});return}}return new fce(f)},C9=new Set(["width","height","top","left","right","bottom",...Pg]);function dce({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function M9(i,e,{delay:t=0,transitionOverride:n,type:s}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(r=n);const l=[],u=s&&i.animationState&&i.animationState.getState()[s];for(const f in o){const d=i.getValue(f,i.latestValues[f]??null),p=o[f];if(p===void 0||u&&dce(u,f))continue;const m={delay:t,...v3(r||{},f)};let _=!1;if(window.MotionHandoffAnimation){const b=Zz(i);if(b){const v=window.MotionHandoffAnimation(b,f,$i);v!==null&&(m.startTime=v,_=!0)}}sD(i,f),d.start(D3(f,d,p,i.shouldReduceMotion&&C9.has(f)?{type:!1}:m,i,_));const x=d.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{$i.update(()=>{a&&Fle(i,a)})}),l}function mD(i,e,t={}){var l;const n=Vv(i,e,t.type==="exit"?(l=i.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(s=t.transitionOverride);const r=n?()=>Promise.all(M9(i,n,t)):()=>Promise.resolve(),a=i.variantChildren&&i.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=s;return pce(i,e,f+u,d,p,t)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,f]=o==="beforeChildren"?[r,a]:[a,r];return u().then(()=>f())}else return Promise.all([r(),a(t.delay)])}function pce(i,e,t=0,n=0,s=1,r){const a=[],o=(i.variantChildren.size-1)*n,l=s===1?(u=0)=>u*n:(u=0)=>o-u*n;return Array.from(i.variantChildren).sort(mce).forEach((u,f)=>{u.notify("AnimationStart",e),a.push(mD(u,e,{...r,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function mce(i,e){return i.sortNodePosition(e)}function gce(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(r=>mD(i,r,t));n=Promise.all(s)}else if(typeof e=="string")n=mD(i,e,t);else{const s=typeof e=="function"?Vv(i,e,t.custom):e;n=Promise.all(M9(i,s,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function w9(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const yce=t3.length;function D9(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?D9(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<yce;t++){const n=t3[t],s=i.props[n];(Hv(s)||s===!1)&&(e[n]=s)}return e}const vce=[...e3].reverse(),_ce=e3.length;function xce(i){return e=>Promise.all(e.map(({animation:t,options:n})=>gce(i,t,n)))}function bce(i){let e=xce(i),t=xN(),n=!0;const s=l=>(u,f)=>{var p;const d=Vv(i,f,l==="exit"?(p=i.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:m,transitionEnd:_,...x}=d;u={...u,...x,..._}}return u};function r(l){e=l(i)}function a(l){const{props:u}=i,f=D9(i.parent)||{},d=[],p=new Set;let m={},_=1/0;for(let b=0;b<_ce;b++){const v=vce[b],T=t[v],A=u[v]!==void 0?u[v]:f[v],w=Hv(A),B=v===l?T.isActive:null;B===!1&&(_=b);let I=A===f[v]&&A!==u[v]&&w;if(I&&n&&i.manuallyAnimateOnMount&&(I=!1),T.protectedKeys={...m},!T.isActive&&B===null||!A&&!T.prevProp||nE(A)||typeof A=="boolean")continue;const P=Tce(T.prevProp,A);let F=P||v===l&&T.isActive&&!I&&w||b>_&&w,N=!1;const U=Array.isArray(A)?A:[A];let H=U.reduce(s(v),{});B===!1&&(H={});const{prevResolvedValues:re={}}=T,J={...re,...H},ae=Q=>{F=!0,p.has(Q)&&(N=!0,p.delete(Q)),T.needsAnimating[Q]=!0;const $=i.getValue(Q);$&&($.liveStyle=!1)};for(const Q in J){const $=H[Q],pe=re[Q];if(m.hasOwnProperty(Q))continue;let Se=!1;nD($)&&nD(pe)?Se=!w9($,pe):Se=$!==pe,Se?$!=null?ae(Q):p.add(Q):$!==void 0&&p.has(Q)?ae(Q):T.protectedKeys[Q]=!0}T.prevProp=A,T.prevResolvedValues=H,T.isActive&&(m={...m,...H}),n&&i.blockInitialAnimation&&(F=!1),F&&(!(I&&P)||N)&&d.push(...U.map(Q=>({animation:Q,options:{type:v}})))}if(p.size){const b={};if(typeof u.initial!="boolean"){const v=Vv(i,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}p.forEach(v=>{const T=i.getBaseTarget(v),A=i.getValue(v);A&&(A.liveStyle=!0),b[v]=T??null}),d.push({animation:b})}let x=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!i.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(d):Promise.resolve()}function o(l,u){var d;if(t[l].isActive===u)return Promise.resolve();(d=i.variantChildren)==null||d.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),t[l].isActive=u;const f=a(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>t,reset:()=>{t=xN(),n=!0}}}function Tce(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!w9(e,i):!1}function uf(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xN(){return{animate:uf(!0),whileInView:uf(),whileHover:uf(),whileTap:uf(),whileDrag:uf(),whileFocus:uf(),exit:uf()}}class _h{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Sce extends _h{constructor(e){super(e),e.animationState||(e.animationState=bce(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Ace=0;class Ece extends _h{constructor(){super(...arguments),this.id=Ace++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Cce={animation:{Feature:Sce},exit:{Feature:Ece}};function Wv(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}const R3=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1;function N_(i){return{point:{x:i.pageX,y:i.pageY}}}const Mce=i=>e=>R3(e)&&i(e,N_(e));function tv(i,e,t,n){return Wv(i,e,Mce(t),n)}function R9({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function wce({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function Dce(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const B9=1e-4,Rce=1-B9,Bce=1+B9,L9=.01,Lce=0-L9,Ice=0+L9;function Br(i){return i.max-i.min}function Oce(i,e,t){return Math.abs(i-e)<=t}function bN(i,e,t,n=.5){i.origin=n,i.originPoint=vn(e.min,e.max,i.origin),i.scale=Br(t)/Br(e),i.translate=vn(t.min,t.max,i.origin)-i.originPoint,(i.scale>=Rce&&i.scale<=Bce||isNaN(i.scale))&&(i.scale=1),(i.translate>=Lce&&i.translate<=Ice||isNaN(i.translate))&&(i.translate=0)}function iv(i,e,t,n){bN(i.x,e.x,t.x,n?n.originX:void 0),bN(i.y,e.y,t.y,n?n.originY:void 0)}function TN(i,e,t){i.min=t.min+e.min,i.max=i.min+Br(e)}function Pce(i,e,t){TN(i.x,e.x,t.x),TN(i.y,e.y,t.y)}function SN(i,e,t){i.min=e.min-t.min,i.max=i.min+Br(e)}function nv(i,e,t){SN(i.x,e.x,t.x),SN(i.y,e.y,t.y)}const AN=()=>({translate:0,scale:1,origin:0,originPoint:0}),hm=()=>({x:AN(),y:AN()}),EN=()=>({min:0,max:0}),Nn=()=>({x:EN(),y:EN()});function Ya(i){return[i("x"),i("y")]}function rM(i){return i===void 0||i===1}function gD({scale:i,scaleX:e,scaleY:t}){return!rM(i)||!rM(e)||!rM(t)}function vf(i){return gD(i)||I9(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function I9(i){return CN(i.x)||CN(i.y)}function CN(i){return i&&i!=="0%"}function w1(i,e,t){const n=i-t,s=e*n;return t+s}function MN(i,e,t,n,s){return s!==void 0&&(i=w1(i,s,n)),w1(i,t,n)+e}function yD(i,e=0,t=1,n,s){i.min=MN(i.min,e,t,n,s),i.max=MN(i.max,e,t,n,s)}function O9(i,{x:e,y:t}){yD(i.x,e.translate,e.scale,e.originPoint),yD(i.y,t.translate,t.scale,t.originPoint)}const wN=.999999999999,DN=1.0000000000001;function Uce(i,e,t,n=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=t[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&dm(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,O9(i,a)),n&&vf(r.latestValues)&&dm(i,r.latestValues))}e.x<DN&&e.x>wN&&(e.x=1),e.y<DN&&e.y>wN&&(e.y=1)}function fm(i,e){i.min=i.min+e,i.max=i.max+e}function RN(i,e,t,n,s=.5){const r=vn(i.min,i.max,s);yD(i,e,t,r,n)}function dm(i,e){RN(i.x,e.x,e.scaleX,e.scale,e.originX),RN(i.y,e.y,e.scaleY,e.scale,e.originY)}function P9(i,e){return R9(Dce(i.getBoundingClientRect(),e))}function Nce(i,e,t){const n=P9(i,t),{scroll:s}=e;return s&&(fm(n.x,s.offset.x),fm(n.y,s.offset.y)),n}const U9=({current:i})=>i?i.ownerDocument.defaultView:null,BN=(i,e)=>Math.abs(i-e);function Fce(i,e){const t=BN(i.x,e.x),n=BN(i.y,e.y);return Math.sqrt(t**2+n**2)}class N9{constructor(e,t,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=oM(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=Fce(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:_}=d,{timestamp:x}=Is;this.history.push({..._,timestamp:x});const{onStart:b,onMove:v}=this.handlers;p||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=aM(p,this.transformPagePoint),$i.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:_,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=oM(d.type==="pointercancel"?this.lastMoveEventInfo:aM(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,b),_&&_(d,b)},!R3(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const a=N_(e),o=aM(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=Is;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,oM(o,this.history)),this.removeListeners=P_(tv(this.contextWindow,"pointermove",this.handlePointerMove),tv(this.contextWindow,"pointerup",this.handlePointerUp),tv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ah(this.updatePoint)}}function aM(i,e){return e?{point:e(i.point)}:i}function LN(i,e){return{x:i.x-e.x,y:i.y-e.y}}function oM({point:i},e){return{point:i,delta:LN(i,F9(e)),offset:LN(i,kce(e)),velocity:Hce(e,.1)}}function kce(i){return i[0]}function F9(i){return i[i.length-1]}function Hce(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const s=F9(i);for(;t>=0&&(n=i[t],!(s.timestamp-n.timestamp>_l(e)));)t--;if(!n)return{x:0,y:0};const r=xl(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function zce(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?vn(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?vn(t,i,n.max):Math.min(i,t)),i}function IN(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function Gce(i,{top:e,left:t,bottom:n,right:s}){return{x:IN(i.x,t,s),y:IN(i.y,e,n)}}function ON(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function Vce(i,e){return{x:ON(i.x,e.x),y:ON(i.y,e.y)}}function qce(i,e){let t=.5;const n=Br(i),s=Br(e);return s>n?t=Xv(e.min,e.max-n,i.min):n>s&&(t=Xv(i.min,i.max-s,e.min)),Ru(0,1,t)}function jce(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const vD=.35;function Xce(i=vD){return i===!1?i=0:i===!0&&(i=vD),{x:PN(i,"left","right"),y:PN(i,"top","bottom")}}function PN(i,e,t){return{min:UN(i,e),max:UN(i,t)}}function UN(i,e){return typeof i=="number"?i:i[e]||0}const Ro={x:!1,y:!1};function k9(){return Ro.x||Ro.y}function Wce(i){return i==="x"||i==="y"?Ro[i]?null:(Ro[i]=!0,()=>{Ro[i]=!1}):Ro.x||Ro.y?null:(Ro.x=Ro.y=!0,()=>{Ro.x=Ro.y=!1})}const Yce=new WeakMap;class Kce{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(N_(f).point)},r=(f,d)=>{const{drag:p,dragPropagation:m,onDragStart:_}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Wce(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ya(b=>{let v=this.getAxisMotionValue(b).get()||0;if(vl.test(v)){const{projection:T}=this.visualElement;if(T&&T.layout){const A=T.layout.layoutBox[b];A&&(v=Br(A)*(parseFloat(v)/100))}}this.originPoint[b]=v}),_&&$i.postRender(()=>_(f,d)),sD(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:_,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=d;if(m&&this.currentDirection===null){this.currentDirection=Jce(b),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),x&&x(f,d)},o=(f,d)=>this.stop(f,d),l=()=>Ya(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)==null?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new N9(e,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:U9(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&$i.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!xT(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=zce(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&um(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Gce(n.layoutBox,e):this.constraints=!1,this.elastic=Xce(t),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ya(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=jce(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!um(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=Nce(n,s.root,this.visualElement.getTransformPagePoint());let a=Vce(s.layout.layoutBox,r);if(t){const o=t(wce(a));this.hasMutatedConstraints=!!o,o&&(a=R9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ya(f=>{if(!xT(f,t,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,_={type:"inertia",velocity:n?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(f,_)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return sD(this.visualElement,e),n.start(D3(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ya(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ya(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ya(t=>{const{drag:n}=this.getProps();if(!xT(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[t];r.set(e[t]-vn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!um(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ya(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=qce({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ya(a=>{if(!xT(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(vn(l,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;Yce.set(this.visualElement,this);const e=this.visualElement.current,t=tv(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();um(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),$i.read(n);const a=Wv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ya(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),t(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=vD,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function xT(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function Jce(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class Qce extends _h{constructor(e){super(e),this.removeGroupControls=ro,this.removeListeners=ro,this.controls=new Kce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ro}unmount(){this.removeGroupControls(),this.removeListeners()}}const NN=i=>(e,t)=>{i&&$i.postRender(()=>i(e,t))};class Zce extends _h{constructor(){super(...arguments),this.removePointerDownListener=ro}onPointerDown(e){this.session=new N9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:U9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:NN(e),onStart:NN(t),onMove:n,onEnd:(r,a)=>{delete this.session,s&&$i.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=tv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const JT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FN(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const sy={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Ot.test(i))i=parseFloat(i);else return i;const t=FN(i,e.target.x),n=FN(i,e.target.y);return`${t}% ${n}%`}},$ce={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,s=oh.parse(i);if(s.length>5)return n;const r=oh.createTransformer(i),a=typeof s[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const u=vn(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),r(s)}};class ehe extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;cle(the),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),JT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,a=n.projection;return a&&(a.isPresent=r,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||$i.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),n3.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function H9(i){const[e,t]=Lz(),n=ee.useContext(JB);return Ge(ehe,{...i,layoutGroup:n,switchLayoutGroup:ee.useContext(Fz),isPresent:e,safeToRemove:t})}const the={borderRadius:{...sy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sy,borderTopRightRadius:sy,borderBottomLeftRadius:sy,borderBottomRightRadius:sy,boxShadow:$ce};function ihe(i,e,t){const n=ir(i)?i:qv(i);return n.start(D3("",n,e,t)),n.animation}function nhe(i){return i instanceof SVGElement&&i.tagName!=="svg"}const she=(i,e)=>i.depth-e.depth;class rhe{constructor(){this.children=[],this.isDirty=!1}add(e){m3(this.children,e),this.isDirty=!0}remove(e){g3(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(she),this.isDirty=!1,this.children.forEach(e)}}function ahe(i,e){const t=Wr.now(),n=({timestamp:s})=>{const r=s-t;r>=e&&(ah(n),i(r-e))};return $i.setup(n,!0),()=>ah(n)}const z9=["TopLeft","TopRight","BottomLeft","BottomRight"],ohe=z9.length,kN=i=>typeof i=="string"?parseFloat(i):i,HN=i=>typeof i=="number"||Ot.test(i);function lhe(i,e,t,n,s,r){s?(i.opacity=vn(0,t.opacity??1,uhe(n)),i.opacityExit=vn(e.opacity??1,0,che(n))):r&&(i.opacity=vn(e.opacity??1,t.opacity??1,n));for(let a=0;a<ohe;a++){const o=`border${z9[a]}Radius`;let l=zN(e,o),u=zN(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||HN(l)===HN(u)?(i[o]=Math.max(vn(kN(l),kN(u),n),0),(vl.test(u)||vl.test(l))&&(i[o]+="%")):i[o]=u}(e.rotate||t.rotate)&&(i.rotate=vn(e.rotate||0,t.rotate||0,n))}function zN(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const uhe=G9(0,.5,m9),che=G9(.5,.95,ro);function G9(i,e,t){return n=>n<i?0:n>e?1:t(Xv(i,e,n))}function GN(i,e){i.min=e.min,i.max=e.max}function Xa(i,e){GN(i.x,e.x),GN(i.y,e.y)}function VN(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function qN(i,e,t,n,s){return i-=e,i=w1(i,1/t,n),s!==void 0&&(i=w1(i,1/s,n)),i}function hhe(i,e=0,t=1,n=.5,s,r=i,a=i){if(vl.test(e)&&(e=parseFloat(e),e=vn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=vn(r.min,r.max,n);i===r&&(o-=e),i.min=qN(i.min,e,t,o,s),i.max=qN(i.max,e,t,o,s)}function jN(i,e,[t,n,s],r,a){hhe(i,e[t],e[n],e[s],e.scale,r,a)}const fhe=["x","scaleX","originX"],dhe=["y","scaleY","originY"];function XN(i,e,t,n){jN(i.x,e,fhe,t?t.x:void 0,n?n.x:void 0),jN(i.y,e,dhe,t?t.y:void 0,n?n.y:void 0)}function WN(i){return i.translate===0&&i.scale===1}function V9(i){return WN(i.x)&&WN(i.y)}function YN(i,e){return i.min===e.min&&i.max===e.max}function phe(i,e){return YN(i.x,e.x)&&YN(i.y,e.y)}function KN(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function q9(i,e){return KN(i.x,e.x)&&KN(i.y,e.y)}function JN(i){return Br(i.x)/Br(i.y)}function QN(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class mhe{constructor(){this.members=[]}add(e){m3(this.members,e),e.scheduleRender()}remove(e){if(g3(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let n;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ghe(i,e,t){let n="";const s=i.x.translate/e.x,r=i.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((s||r||a)&&(n=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:p,skewX:m,skewY:_}=t;u&&(n=`perspective(${u}px) ${n}`),f&&(n+=`rotate(${f}deg) `),d&&(n+=`rotateX(${d}deg) `),p&&(n+=`rotateY(${p}deg) `),m&&(n+=`skewX(${m}deg) `),_&&(n+=`skewY(${_}deg) `)}const o=i.x.scale*e.x,l=i.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const lM=["","X","Y","Z"],yhe={visibility:"hidden"},ZN=1e3;let vhe=0;function uM(i,e,t,n){const{latestValues:s}=e;s[i]&&(t[i]=s[i],e.setStaticValue(i,0),n&&(n[i]=0))}function j9(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=Zz(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",$i,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&j9(n)}function X9({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=vhe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bhe),this.nodes.forEach(Che),this.nodes.forEach(Mhe),this.nodes.forEach(The)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new rhe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new y3),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=nhe(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),i){let d;const p=()=>this.root.updateBlockedByResize=!1;i(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=ahe(p,250),JT.hasAnimatedSinceResize&&(JT.hasAnimatedSinceResize=!1,this.nodes.forEach(e4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||Lhe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=f.getProps(),T=!this.targetLayout||!q9(this.targetLayout,_),A=!p&&m;if(this.options.layoutRoot||this.resumeFrom||A||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,A);const w={...v3(x,"layout"),onPlay:b,onComplete:v};(f.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||e4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ah(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(whe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&j9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($N);return}this.isUpdating||this.nodes.forEach(Ahe),this.isUpdating=!1,this.nodes.forEach(Ehe),this.nodes.forEach(_he),this.nodes.forEach(xhe),this.clearAllSnapshots();const o=Wr.now();Is.delta=Ru(0,1e3/60,o-Is.timestamp),Is.timestamp=o,Is.isProcessing=!0,eM.update.process(Is),eM.preRender.process(Is),eM.render.process(Is),Is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(She),this.sharedNodes.forEach(Dhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$i.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$i.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Br(this.snapshot.measuredBox.x)&&!Br(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!V9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(o||vf(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Ihe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Nn();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Ohe))){const{scroll:f}=this.root;f&&(fm(o.x,f.offset.x),fm(o.y,f.offset.y))}return o}removeElementScroll(a){var l;const o=Nn();if(Xa(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Xa(o,a),fm(o.x,d.offset.x),fm(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=Nn();Xa(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&dm(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),vf(f.latestValues)&&dm(l,f.latestValues)}return vf(this.latestValues)&&dm(l,this.latestValues),l}removeTransform(a){const o=Nn();Xa(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!vf(u.latestValues))continue;gD(u.latestValues)&&u.updateSnapshot();const f=Nn(),d=u.measurePageBox();Xa(f,d),XN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return vf(this.latestValues)&&XN(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Is.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),nv(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nn(),this.targetWithTransforms=Nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xa(this.target,this.layout.layoutBox),O9(this.target,this.targetDelta)):Xa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),nv(this.relativeTargetOrigin,this.target,m.target),Xa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gD(this.parent.latestValues)||I9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Is.timestamp&&(l=!1),l)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Xa(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;Uce(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Nn());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VN(this.prevProjectionDelta.x,this.projectionDelta.x),VN(this.prevProjectionDelta.y,this.projectionDelta.y)),iv(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!QN(this.projectionDelta.x,this.prevProjectionDelta.x)||!QN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hm(),this.projectionDelta=hm(),this.projectionDeltaWithTransform=hm()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=hm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=Nn(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,x=m!==_,b=this.getStack(),v=!b||b.members.length<=1,T=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(Bhe));this.animationProgress=0;let A;this.mixTargetDelta=w=>{const B=w/1e3;t4(d.x,a.x,B),t4(d.y,a.y,B),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nv(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Rhe(this.relativeTarget,this.relativeTargetOrigin,p,B),A&&phe(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Nn()),Xa(A,this.relativeTarget)),x&&(this.animationValues=f,lhe(f,u,this.latestValues,B,T,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ah(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$i.update(()=>{JT.hasAnimatedSinceResize=!0,this.currentAnimation=ihe(0,ZN,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&W9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Nn();const d=Br(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const p=Br(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+p}Xa(o,l),dm(o,f),iv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new mhe),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&uM("z",a,u,this.animationValues);for(let f=0;f<lM.length;f++)uM(`rotate${lM[f]}`,a,u,this.animationValues),uM(`skew${lM[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return yhe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=YT(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=YT(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!vf(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=ghe(this.projectionDeltaWithTransform,this.treeScale,f),l&&(o.transform=l(f,o.transform));const{x:d,y:p}=this.projectionDelta;o.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in zv){if(f[m]===void 0)continue;const{correct:_,applyTo:x,isCSSVariable:b}=zv[m],v=o.transform==="none"?f[m]:_(f[m],u);if(x){const T=x.length;for(let A=0;A<T;A++)o[x[A]]=v}else b?this.options.visualElement.renderState.vars[m]=v:o[m]=v}return this.options.layoutId&&(o.pointerEvents=u===this?YT(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach($N),this.root.sharedNodes.clear()}}}function _he(i){i.updateLayout()}function xhe(i){var t;const e=((t=i.resumeFrom)==null?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:r}=i.options,a=e.source!==i.layout.source;r==="size"?Ya(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],m=Br(p);p.min=n[d].min,p.max=p.min+m}):W9(r,e.layoutBox,n)&&Ya(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],m=Br(n[d]);p.max=p.min+m,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[d].max=i.relativeTarget[d].min+m)});const o=hm();iv(o,n,e.layoutBox);const l=hm();a?iv(l,i.applyTransform(s,!0),e.measuredBox):iv(l,n,e.layoutBox);const u=!V9(o);let f=!1;if(!i.resumeFrom){const d=i.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const _=Nn();nv(_,e.layoutBox,p.layoutBox);const x=Nn();nv(x,n,m.layoutBox),q9(_,x)||(f=!0),d.options.layoutRoot&&(i.relativeTarget=x,i.relativeTargetOrigin=_,i.relativeParent=d)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function bhe(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function The(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function She(i){i.clearSnapshot()}function $N(i){i.clearMeasurements()}function Ahe(i){i.isLayoutDirty=!1}function Ehe(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function e4(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function Che(i){i.resolveTargetDelta()}function Mhe(i){i.calcProjection()}function whe(i){i.resetSkewAndRotation()}function Dhe(i){i.removeLeadSnapshot()}function t4(i,e,t){i.translate=vn(e.translate,0,t),i.scale=vn(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function i4(i,e,t,n){i.min=vn(e.min,t.min,n),i.max=vn(e.max,t.max,n)}function Rhe(i,e,t,n){i4(i.x,e.x,t.x,n),i4(i.y,e.y,t.y,n)}function Bhe(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const Lhe={duration:.45,ease:[.4,0,.1,1]},n4=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),s4=n4("applewebkit/")&&!n4("chrome/")?Math.round:ro;function r4(i){i.min=s4(i.min),i.max=s4(i.max)}function Ihe(i){r4(i.x),r4(i.y)}function W9(i,e,t){return i==="position"||i==="preserve-aspect"&&!Oce(JN(e),JN(t),.2)}function Ohe(i){var e;return i!==i.root&&((e=i.scroll)==null?void 0:e.wasRoot)}const Phe=X9({attachResizeListener:(i,e)=>Wv(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cM={current:void 0},Y9=X9({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!cM.current){const i=new Phe({});i.mount(window),i.setOptions({layoutScroll:!0}),cM.current=i}return cM.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Uhe={pan:{Feature:Zce},drag:{Feature:Qce,ProjectionNode:Y9,MeasureLayout:H9}};function Nhe(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;e&&(n=e.current);const s=(t==null?void 0:t[i])??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}function K9(i,e){const t=Nhe(i),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[t,s,()=>n.abort()]}function a4(i){return!(i.pointerType==="touch"||k9())}function Fhe(i,e,t={}){const[n,s,r]=K9(i,t),a=o=>{if(!a4(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const f=d=>{a4(d)&&(u(d),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,s)};return n.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}function o4(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=n[s];r&&$i.postRender(()=>r(e,N_(e)))}class khe extends _h{mount(){const{current:e}=this.node;e&&(this.unmount=Fhe(e,(t,n)=>(o4(this.node,n,"Start"),s=>o4(this.node,s,"End"))))}unmount(){}}class Hhe extends _h{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=P_(Wv(this.node.current,"focus",()=>this.onFocus()),Wv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const J9=(i,e)=>e?i===e?!0:J9(i,e.parentElement):!1,zhe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ghe(i){return zhe.has(i.tagName)||i.tabIndex!==-1}const xy=new WeakSet;function l4(i){return e=>{e.key==="Enter"&&i(e)}}function hM(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Vhe=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=l4(()=>{if(xy.has(t))return;hM(t,"down");const s=l4(()=>{hM(t,"up")}),r=()=>hM(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function u4(i){return R3(i)&&!k9()}function qhe(i,e,t={}){const[n,s,r]=K9(i,t),a=o=>{const l=o.currentTarget;if(!u4(o)||xy.has(l))return;xy.add(l);const u=e(l,o),f=(m,_)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),!(!u4(m)||!xy.has(l))&&(xy.delete(l),typeof u=="function"&&u(m,{success:_}))},d=m=>{f(m,l===window||l===document||t.useGlobalTarget||J9(l,m.target))},p=m=>{f(m,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",p,s)};return n.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),o instanceof HTMLElement&&(o.addEventListener("focus",u=>Vhe(u,s)),!Ghe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function c4(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=n[s];r&&$i.postRender(()=>r(e,N_(e)))}class jhe extends _h{mount(){const{current:e}=this.node;e&&(this.unmount=qhe(e,(t,n)=>(c4(this.node,n,"Start"),(s,{success:r})=>c4(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _D=new WeakMap,fM=new WeakMap,Xhe=i=>{const e=_D.get(i.target);e&&e(i)},Whe=i=>{i.forEach(Xhe)};function Yhe({root:i,...e}){const t=i||document;fM.has(t)||fM.set(t,{});const n=fM.get(t),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(Whe,{root:i,...e})),n[s]}function Khe(i,e,t){const n=Yhe(e);return _D.set(i,t),n.observe(i),()=>{_D.delete(i),n.unobserve(i)}}const Jhe={some:0,all:1};class Qhe extends _h{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Jhe[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=u?f:d;p&&p(l)};return Khe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Zhe(e,t))&&this.startObserver()}unmount(){}}function Zhe({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const $he={inView:{Feature:Qhe},tap:{Feature:jhe},focus:{Feature:Hhe},hover:{Feature:khe}},efe={layout:{ProjectionNode:Y9,MeasureLayout:H9}},xD={current:null},Q9={current:!1};function tfe(){if(Q9.current=!0,!!ZB)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>xD.current=i.matches;i.addListener(e),e()}else xD.current=!1}const ife=new WeakMap;function nfe(i,e,t){for(const n in e){const s=e[n],r=t[n];if(ir(s))i.addValue(n,s);else if(ir(r))i.addValue(n,qv(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const a=i.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=i.getStaticValue(n);i.addValue(n,qv(a!==void 0?a:s,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const Z9=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),$9=i=>/^0[^.\s]+$/u.test(i),sfe={test:i=>i==="auto",parse:i=>i},eG=i=>e=>e.test(i),tG=[Ug,Ot,vl,wc,fle,hle,sfe],h4=i=>tG.find(eG(i)),rfe=[...tG,Js,oh],afe=i=>rfe.find(eG(i)),ofe=new Set(["brightness","contrast","saturate","opacity"]);function lfe(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(_3)||[];if(!n)return i;const s=t.replace(n,"");let r=ofe.has(e)?1:0;return n!==t&&(r*=100),e+"("+r+s+")"}const ufe=/\b([a-z-]*)\(.*?\)/gu,bD={...oh,getAnimatableNone:i=>{const e=i.match(ufe);return e?e.map(lfe).join(" "):i}},cfe={...o3,color:Js,backgroundColor:Js,outlineColor:Js,fill:Js,stroke:Js,borderColor:Js,borderTopColor:Js,borderRightColor:Js,borderBottomColor:Js,borderLeftColor:Js,filter:bD,WebkitFilter:bD},iG=i=>cfe[i];function nG(i,e){let t=iG(i);return t!==bD&&(t=oh),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const f4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hfe{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=M3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Wr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,$i.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=sE(t),this.isVariantNode=Uz(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const _=p[m];l[m]!==void 0&&ir(_)&&_.set(l[m],!1)}}mount(e){this.current=e,ife.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),Q9.current||tfe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xD.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ah(this.notifyUpdate),ah(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=bd.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&$i.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in lg){const t=lg[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<f4.length;n++){const s=f4[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=nfe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=qv(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Z9(n)||$9(n))?n=parseFloat(n):!afe(n)&&oh.test(t)&&(n=nG(e,t)),this.setBaseTarget(e,ir(n)?n.get():n)),ir(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=d3(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ir(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new y3),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}const ffe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dfe(i){const e=ffe.exec(i);if(!e)return[,];const[,t,n,s]=e;return[`--${t??n}`,s]}function sG(i,e,t=1){const[n,s]=dfe(i);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const a=r.trim();return Z9(a)?parseFloat(a):a}return a3(s)?sG(s,e,t+1):s}function pfe(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||$9(i):!0}const mfe=new Set(["auto","none","0"]);function gfe(i,e,t){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!mfe.has(r)&&jv(r).values.length&&(s=i[n]),n++}if(s&&t)for(const r of e)i[r]=nG(t,s)}class yfe extends M3{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),a3(u))){const f=sG(u,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!C9.has(n)||e.length!==2)return;const[s,r]=e,a=h4(s),o=h4(r);if(a!==o)if(gN(a)&&gN(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||pfe(e[s]))&&n.push(s);n.length&&gfe(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ug[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=n.length-1,a=n[r];n[r]=ug[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}class rG extends hfe{constructor(){super(...arguments),this.KeyframeResolver=yfe}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ir(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function vfe(i){return window.getComputedStyle(i)}class _fe extends rG{constructor(){super(...arguments),this.type="html",this.renderInstance=Wz}readValueFromInstance(e,t){if(bd.has(t))return Vue(e,t);{const n=vfe(e),s=(r3(t)?n.getPropertyValue(t):n[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return P9(e,t)}build(e,t,n){l3(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return p3(e,t,n)}}class xfe extends rG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Xz(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bd.has(t)){const n=iG(t);return n&&n.default||0}return t=Yz.has(t)?t:i3(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Jz(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&$i.postRender(this.updateDimensions)}build(e,t,n){h3(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,s){Kz(e,t,n,s)}mount(e){this.isSVGTag=f3(e.tagName),super.mount(e)}}const bfe=(i,e)=>c3(i)?new xfe(e):new _fe(e,{allowProjection:i!==ee.Fragment}),Tfe=Ile({...Cce,...$he,...Uhe,...efe},bfe),nl=Joe(Tfe),Sfe=[{name:"PHP",icon:"./img/php.png",category:"language",url:"https://www.php.net/"},{name:"JavaScript",icon:"./img/javascript.png",category:"language",url:"https://developer.mozilla.org/fr/docs/Web/JavaScript"},{name:"TypeScript",icon:"./img/typescript.png",category:"language",url:"https://www.typescriptlang.org/"},{name:"Node.js",icon:"./img/nodejs.png",category:"runtime",url:"https://nodejs.org/"},{name:"Deno",icon:"./img/deno.png",category:"runtime",url:"https://deno.com/"},{name:"PostgreSQL",icon:"./img/postgresql.png",category:"sgbd",url:"https://www.postgresql.org/"},{name:"SQL Server",icon:"./img/sqlserver.png",category:"sgbd",url:"https://www.microsoft.com/fr/sql-server/"},{name:"Oracle Database",icon:"./img/oracledb.png",category:"sgbd",url:"https://www.oracle.com/database/"},{name:"MariaDB",icon:"./img/mariadb.png",category:"sgbd",url:"https://mariadb.org/"},{name:"MySQL",icon:"./img/mysql.png",category:"sgbd",url:"https://www.mysql.com/"},{name:"SQLite",icon:"./img/sqlite.png",category:"sgbd",url:"https://www.sqlite.org/"},{name:"Symfony",icon:"./img/symfony.png",category:"framework",url:"https://symfony.com/"},{name:"Vue.js",icon:"./img/vuejs.png",category:"framework",url:"https://vuejs.org/"},{name:"Fresh",icon:"./img/fresh.png",category:"framework",url:"https://fresh.deno.dev/"},{name:"React",icon:"./img/react.png",category:"library",url:"https://react.dev/"},{name:"Tailwind CSS",icon:"./img/tailwindcss.png",category:"library",url:"https://tailwindcss.com/"},{name:"Bootstrap",icon:"./img/bootstrap.png",category:"library",url:"https://getbootstrap.com/"},{name:"Axios",icon:"./img/axios.png",category:"library",url:"https://axios-http.com/"},{name:"Chart.js",icon:"./img/chartjs.png",category:"library",url:"https://www.chartjs.org/"},{name:"Dropzone",icon:"./img/dropzone.png",category:"library",url:"https://www.dropzone.dev/"},{name:"jsPDF",icon:"./img/jspdf.png",category:"library",url:"https://github.com/parallax/jsPDF"},{name:"Three.js",icon:"./img/threejs.png",category:"library",url:"https://threejs.org/"},{name:"Motion",icon:"./img/motion.png",category:"library",url:"https://www.framer.com/motion/"},{name:"Kysely",icon:"./img/kysely.png",category:"library",url:"https://kysely.dev/"},{name:"Pinia",icon:"./img/pinia.png",category:"library",url:"https://pinia.vuejs.org/"},{name:"i18next",icon:"./img/i18next.png",category:"library",url:"https://www.i18next.com/"}],Afe=()=>{const{progress:i}=rre();return Ge(WT,{as:"div",center:!0,children:Yi("div",{className:"loader-container",children:[Ge("div",{className:"loader-spinner"}),Yi("p",{className:"loader-text",children:[Math.round(i),"%"]})]})})},Efe=({isMobile:i,setHud1Open:e,setHud2Open:t,setHud3Open:n})=>{const{scene:s}=I_("./models/gaming_setup/scene.gltf"),r=ee.useRef(),a=ee.useRef(),o=ee.useRef(),{camera:l,gl:u,raycaster:f}=is(),d=ee.useRef(new Te),[p,m]=ee.useState(null);return tre(!!p,"crosshair","auto"),ee.useEffect(()=>{s.traverse(_=>{if(_.isMesh){switch(_.name){case"Cube011_screen001_0":r.current=_;break;case"Object_6_Screen001_0":a.current=_;break;case"Cube003_Material001_0_Material074_30001_0":o.current=_;break}_.castShadow=!0,_.receiveShadow=!0,_.material&&(_.material.emissiveIntensity=.4)}})},[s]),ee.useEffect(()=>{const _=x=>{d.current.x=x.clientX/window.innerWidth*2-1,d.current.y=-(x.clientY/window.innerHeight)*2+1};return window.addEventListener("mousemove",_),()=>window.removeEventListener("mousemove",_)},[]),ee.useEffect(()=>{const _=()=>{f.setFromCamera(d.current,l);const x=[r.current,a.current,o.current].filter(Boolean),b=f.intersectObjects(x);if(b.length===0)return;const v=b[0].object;v===r.current&&e(),v===a.current&&t(),v===o.current&&n()};return u.domElement.addEventListener("click",_),()=>u.domElement.removeEventListener("click",_)},[l,f,u,e,t,n]),vh(()=>{f.setFromCamera(d.current,l);const _=[r.current,a.current,o.current].filter(Boolean),x=f.intersectObjects(_),b=x.length>0?x[0].object:null;b!==p&&m(b),_.forEach(v=>{v.material&&(v.material.emissiveIntensity=v===b?1:.4)})}),Yi("group",{children:[Ge("hemisphereLight",{intensity:.15,groundColor:"#330000"}),Ge("spotLight",{angle:.4,castShadow:!0,color:"#339cff",intensity:2,penumbra:.5,position:[10,15,10]}),Ge("pointLight",{position:[-10,5,-5],intensity:.8,color:"#ff0000"}),Ge("pointLight",{position:[0,5,0],intensity:.3,color:"#ffffff"}),Ge("primitive",{object:s,scale:i?.4:.75,position:i?[0,-3,-.6]:[0,-3.25,-1.1],rotation:[-.01,-.2,-.1],castShadow:!0,receiveShadow:!0})]})};function Cfe({src:i,alt:e,className:t}){const[n,s]=ee.useState(!1);return Yi("div",{className:"tech-image-wrapper",children:[!n&&Ge("div",{className:"tech-icon-loader"}),Ge("img",{src:i,alt:e,className:`${t} ${n?"visible":"hidden"}`,onLoad:()=>s(!0)})]})}function Mfe({technologies:i}){const e=i.filter(o=>o.category==="language"),t=i.filter(o=>o.category==="runtime"),n=i.filter(o=>o.category==="sgbd"),s=i.filter(o=>o.category==="framework"),r=i.filter(o=>o.category==="library"),a=(o,l)=>Yi("div",{className:"tech-group",children:[Ge("h3",{className:"tech-group-title",children:l}),Ge("div",{className:"tech-group-items",children:o.map(u=>Yi("div",{className:"tech-item",children:[Ge("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",title:`Visiter le site de ${u.name}`,children:Ge(Cfe,{src:u.icon,alt:u.name,className:"tech-icon"})}),Ge("p",{className:"tech-label",children:u.name})]},u.name))})]});return Yi("div",{className:"tech-list",children:[a(e,"Langages"),Ge("div",{className:"tech-separator"}),a(t,"Environnements d'exécution"),Ge("div",{className:"tech-separator"}),a(n,"SGBD"),Ge("div",{className:"tech-separator"}),a(s,"Frameworks"),Ge("div",{className:"tech-separator"}),a(r,"Librairies")]})}var by;typeof window<"u"?by=window:typeof eS<"u"?by=eS:typeof self<"u"?by=self:by={};var rE=by;const Z=Pu(rE),wfe={},Dfe=Object.freeze(Object.defineProperty({__proto__:null,default:wfe},Symbol.toStringTag,{value:"Module"})),Rfe=qF(Dfe);var d4=typeof eS<"u"?eS:typeof window<"u"?window:{},Bfe=Rfe,Ty;typeof document<"u"?Ty=document:(Ty=d4["__GLOBAL_DOCUMENT_CACHE@4"],Ty||(Ty=d4["__GLOBAL_DOCUMENT_CACHE@4"]=Bfe));var aG=Ty;const Xe=Pu(aG);var B3={exports:{}};const Lfe=qF(jse);var Ife=Pfe,Ofe=Object.prototype.toString;function Pfe(i){if(!i)return!1;var e=Ofe.call(i);return e==="[object Function]"||typeof i=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}function Ufe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=Nfe(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var n=0;return function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nfe(i,e){if(i){if(typeof i=="string")return p4(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p4(i,e)}}function p4(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var Ffe=function(){function i(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=i.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(n,s){this.typeToInterceptorsMap_.has(n)||this.typeToInterceptorsMap_.set(n,new Set);var r=this.typeToInterceptorsMap_.get(n);return r.has(s)?!1:(r.add(s),!0)},e.removeInterceptor=function(n,s){var r=this.typeToInterceptorsMap_.get(n);return r&&r.has(s)?(r.delete(s),!0):!1},e.clearInterceptorsByType=function(n){var s=this.typeToInterceptorsMap_.get(n);return s?(this.typeToInterceptorsMap_.delete(n),this.typeToInterceptorsMap_.set(n,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(n){return this.typeToInterceptorsMap_.get(n)||new Set},e.execute=function(n,s){for(var r=this.getForType(n),a=Ufe(r),o;!(o=a()).done;){var l=o.value;try{s=l(s)}catch{}}return s},i}(),kfe=Ffe,Hfe=function(){function i(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=i.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(n){this.maxAttempts_=n},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(n){this.delayFactor_=n},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(n){this.fuzzFactor_=n},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(n){this.initialDelay_=n},e.createRetry=function(n){var s=n===void 0?{}:n,r=s.maxAttempts,a=s.delayFactor,o=s.fuzzFactor,l=s.initialDelay;return new zfe({maxAttempts:r||this.maxAttempts_,delayFactor:a||this.delayFactor_,fuzzFactor:o||this.fuzzFactor_,initialDelay:l||this.initialDelay_})},i}(),zfe=function(){function i(t){this.maxAttempts_=t.maxAttempts,this.delayFactor_=t.delayFactor,this.fuzzFactor_=t.fuzzFactor,this.currentDelay_=t.initialDelay,this.currentAttempt_=1}var e=i.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var n=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+n},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var n=this.getCurrentMinPossibleDelay(),s=this.getCurrentMaxPossibleDelay();return n+Math.random()*(s-n)},i}(),Gfe=Hfe,Vfe=rE,qfe=function(e,t){return t===void 0&&(t=!1),function(n,s,r){if(n){e(n);return}if(s.statusCode>=400&&s.statusCode<=599){var a=r;if(t)if(Vfe.TextDecoder){var o=jfe(s.headers&&s.headers["content-type"]);try{a=new TextDecoder(o).decode(r)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:a});return}e(null,r)}};function jfe(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),s=n[0],r=n[1];return s.trim()==="charset"?r.trim():e},"utf-8")}var Xfe=qfe,oG=rE,Wfe=Lfe,Yfe=Ife,lG=kfe,Kfe=Gfe;Fn.httpHandler=Xfe;Fn.requestInterceptorsStorage=new lG;Fn.responseInterceptorsStorage=new lG;Fn.retryManager=new Kfe;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var Jfe=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(n){var s=n.indexOf(":"),r=n.slice(0,s).trim().toLowerCase(),a=n.slice(s+1).trim();typeof t[r]>"u"?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]}),t};B3.exports=Fn;B3.exports.default=Fn;Fn.XMLHttpRequest=oG.XMLHttpRequest||ede;Fn.XDomainRequest="withCredentials"in new Fn.XMLHttpRequest?Fn.XMLHttpRequest:oG.XDomainRequest;Qfe(["get","put","post","patch","head","delete"],function(i){Fn[i==="delete"?"del":i]=function(e,t,n){return t=uG(e,t,n),t.method=i.toUpperCase(),L3(t)}});function Qfe(i,e){for(var t=0;t<i.length;t++)e(i[t])}function Zfe(i){for(var e in i)if(i.hasOwnProperty(e))return!1;return!0}function uG(i,e,t){var n=i;return Yfe(e)?(t=e,typeof i=="string"&&(n={uri:i})):n=Wfe({},e,{uri:i}),n.callback=t,n}function Fn(i,e,t){return e=uG(i,e,t),L3(e)}function L3(i){if(typeof i.callback>"u")throw new Error("callback argument missing");if(i.requestType&&Fn.requestInterceptorsStorage.getIsEnabled()){var e={uri:i.uri||i.url,headers:i.headers||{},body:i.body,metadata:i.metadata||{},retry:i.retry,timeout:i.timeout},t=Fn.requestInterceptorsStorage.execute(i.requestType,e);i.uri=t.uri,i.headers=t.headers,i.body=t.body,i.metadata=t.metadata,i.retry=t.retry,i.timeout=t.timeout}var n=!1,s=function(B,I,P){n||(n=!0,i.callback(B,I,P))};function r(){u.readyState===4&&!Fn.responseInterceptorsStorage.getIsEnabled()&&setTimeout(l,0)}function a(){var w=void 0;if(u.response?w=u.response:w=u.responseText||$fe(u),v)try{w=JSON.parse(w)}catch{}return w}function o(w){if(clearTimeout(T),clearTimeout(i.retryTimeout),w instanceof Error||(w=new Error(""+(w||"Unknown XMLHttpRequest Error"))),w.statusCode=0,!d&&Fn.retryManager.getIsEnabled()&&i.retry&&i.retry.shouldRetry()){i.retryTimeout=setTimeout(function(){i.retry.moveToNextAttempt(),i.xhr=u,L3(i)},i.retry.getCurrentFuzzedDelay());return}if(i.requestType&&Fn.responseInterceptorsStorage.getIsEnabled()){var B={headers:A.headers||{},body:A.body,responseUrl:u.responseURL,responseType:u.responseType},I=Fn.responseInterceptorsStorage.execute(i.requestType,B);A.body=I.body,A.headers=I.headers}return s(w,A)}function l(){if(!d){var w;clearTimeout(T),clearTimeout(i.retryTimeout),i.useXDR&&u.status===void 0?w=200:w=u.status===1223?204:u.status;var B=A,I=null;if(w!==0?(B={body:a(),statusCode:w,method:m,headers:{},url:p,rawRequest:u},u.getAllResponseHeaders&&(B.headers=Jfe(u.getAllResponseHeaders()))):I=new Error("Internal XMLHttpRequest Error"),i.requestType&&Fn.responseInterceptorsStorage.getIsEnabled()){var P={headers:B.headers||{},body:B.body,responseUrl:u.responseURL,responseType:u.responseType},F=Fn.responseInterceptorsStorage.execute(i.requestType,P);B.body=F.body,B.headers=F.headers}return s(I,B,B.body)}}var u=i.xhr||null;u||(i.cors||i.useXDR?u=new Fn.XDomainRequest:u=new Fn.XMLHttpRequest);var f,d,p=u.url=i.uri||i.url,m=u.method=i.method||"GET",_=i.body||i.data,x=u.headers=i.headers||{},b=!!i.sync,v=!1,T,A={body:void 0,headers:{},statusCode:0,method:m,url:p,rawRequest:u};if("json"in i&&i.json!==!1&&(v=!0,x.accept||x.Accept||(x.Accept="application/json"),m!=="GET"&&m!=="HEAD"&&(x["content-type"]||x["Content-Type"]||(x["Content-Type"]="application/json"),_=JSON.stringify(i.json===!0?_:i.json))),u.onreadystatechange=r,u.onload=l,u.onerror=o,u.onprogress=function(){},u.onabort=function(){d=!0,clearTimeout(i.retryTimeout)},u.ontimeout=o,u.open(m,p,!b,i.username,i.password),b||(u.withCredentials=!!i.withCredentials),!b&&i.timeout>0&&(T=setTimeout(function(){if(!d){d=!0,u.abort("timeout");var w=new Error("XMLHttpRequest timeout");w.code="ETIMEDOUT",o(w)}},i.timeout)),u.setRequestHeader)for(f in x)x.hasOwnProperty(f)&&u.setRequestHeader(f,x[f]);else if(i.headers&&!Zfe(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(u.responseType=i.responseType),"beforeSend"in i&&typeof i.beforeSend=="function"&&i.beforeSend(u),u.send(_||null),u}function $fe(i){try{if(i.responseType==="document")return i.responseXML;var e=i.responseXML&&i.responseXML.documentElement.nodeName==="parsererror";if(i.responseType===""&&!e)return i.responseXML}catch{}return null}function ede(){}var tde=B3.exports;const cG=Pu(tde);var hG={exports:{}},m4=aG,I3=Object.create||function(){function i(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return i.prototype=e,new i}}();function ya(i,e){this.name="ParsingError",this.code=i.code,this.message=e||i.message}ya.prototype=I3(Error.prototype);ya.prototype.constructor=ya;ya.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function O3(i){function e(n,s,r,a){return(n|0)*3600+(s|0)*60+(r|0)+(a|0)/1e3}var t=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function sv(){this.values=I3(null)}sv.prototype={set:function(i,e){!this.get(i)&&e!==""&&(this.values[i]=e)},get:function(i,e,t){return t?this.has(i)?this.values[i]:e[t]:this.has(i)?this.values[i]:e},has:function(i){return i in this.values},alt:function(i,e,t){for(var n=0;n<t.length;++n)if(e===t[n]){this.set(i,e);break}},integer:function(i,e){/^-?\d+$/.test(e)&&this.set(i,parseInt(e,10))},percent:function(i,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(i,e),!0):!1}};function Sy(i,e,t,n){var s=n?i.split(n):[i];for(var r in s)if(typeof s[r]=="string"){var a=s[r].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function ide(i,e,t){var n=i;function s(){var o=O3(i);if(o===null)throw new ya(ya.Errors.BadTimeStamp,"Malformed timestamp: "+n);return i=i.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){var u=new sv;Sy(o,function(f,d){switch(f){case"region":for(var p=t.length-1;p>=0;p--)if(t[p].id===d){u.set(f,t[p].region);break}break;case"vertical":u.alt(f,d,["rl","lr"]);break;case"line":var m=d.split(","),_=m[0];u.integer(f,_),u.percent(f,_)&&u.set("snapToLines",!1),u.alt(f,_,["auto"]),m.length===2&&u.alt("lineAlign",m[1],["start","center","end"]);break;case"position":m=d.split(","),u.percent(f,m[0]),m.length===2&&u.alt("positionAlign",m[1],["start","center","end"]);break;case"size":u.percent(f,d);break;case"align":u.alt(f,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){i=i.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),i.substr(0,3)!=="-->")throw new ya(ya.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);i=i.substr(3),a(),e.endTime=s(),a(),r(i,e)}var dM=m4.createElement&&m4.createElement("textarea"),nde={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},g4={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},sde={v:"title",lang:"lang"},y4={rt:"ruby"};function fG(i,e){function t(){if(!e)return null;function _(b){return e=e.substr(b.length),b}var x=e.match(/^([^<]*)(<[^>]*>?)?/);return _(x[1]?x[1]:x[2])}function n(_){return dM.innerHTML=_,_=dM.textContent,dM.textContent="",_}function s(_,x){return!y4[x.localName]||y4[x.localName]===_.localName}function r(_,x){var b=nde[_];if(!b)return null;var v=i.document.createElement(b),T=sde[_];return T&&x&&(v[T]=x.trim()),v}for(var a=i.document.createElement("div"),o=a,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var f=O3(l.substr(1,l.length-2)),d;if(f){d=i.document.createProcessingInstruction("timestamp",f),o.appendChild(d);continue}var p=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p||(d=r(p[1],p[3]),!d)||!s(o,d))continue;if(p[2]){var m=p[2].split(".");m.forEach(function(_){var x=/^bg_/.test(_),b=x?_.slice(3):_;if(g4.hasOwnProperty(b)){var v=x?"background-color":"color",T=g4[b];d.style[v]=T}}),d.className=m.join(" ")}u.push(p[1]),o.appendChild(d),o=d;continue}o.appendChild(i.document.createTextNode(n(l)))}return a}var v4=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function rde(i){for(var e=0;e<v4.length;e++){var t=v4[e];if(i>=t[0]&&i<=t[1])return!0}return!1}function ade(i){var e=[],t="",n;if(!i||!i.childNodes)return"ltr";function s(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function r(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var f=u.match(/^.*(\n|\r)/);return f?(o.length=0,f[0]):u}if(l.tagName==="ruby")return r(o);if(l.childNodes)return s(o,l),r(o)}for(s(e,i);t=r(e);)for(var a=0;a<t.length;a++)if(n=t.charCodeAt(a),rde(n))return"rtl";return"ltr"}function ode(i){if(typeof i.line=="number"&&(i.snapToLines||i.line>=0&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var e=i.track,t=e.textTrackList,n=0,s=0;s<t.length&&t[s]!==e;s++)t[s].mode==="showing"&&n++;return++n*-1}function aE(){}aE.prototype.applyStyles=function(i,e){e=e||this.div;for(var t in i)i.hasOwnProperty(t)&&(e.style[t]=i[t])};aE.prototype.formatStyle=function(i,e){return i===0?0:i+e};function D1(i,e,t){aE.call(this),this.cue=e,this.cueDiv=fG(i,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=i.document.createElement("div"),n={direction:ade(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var s=0;switch(e.positionAlign){case"start":case"line-left":s=e.position;break;case"center":s=e.position-e.size/2;break;case"end":case"line-right":s=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(r){this.applyStyles({top:this.formatStyle(r.top,"px"),bottom:this.formatStyle(r.bottom,"px"),left:this.formatStyle(r.left,"px"),right:this.formatStyle(r.right,"px"),height:this.formatStyle(r.height,"px"),width:this.formatStyle(r.width,"px")})}}D1.prototype=I3(aE.prototype);D1.prototype.constructor=D1;function Mr(i){var e,t,n,s;if(i.div){t=i.div.offsetHeight,n=i.div.offsetWidth,s=i.div.offsetTop;var r=(r=i.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();i=i.div.getBoundingClientRect(),e=r?Math.max(r[0]&&r[0].height||0,i.height/r.length):0}this.left=i.left,this.right=i.right,this.top=i.top||s,this.height=i.height||t,this.bottom=i.bottom||s+(i.height||t),this.width=i.width||n,this.lineHeight=e!==void 0?e:i.lineHeight}Mr.prototype.move=function(i,e){switch(e=e!==void 0?e:this.lineHeight,i){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Mr.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top};Mr.prototype.overlapsAny=function(i){for(var e=0;e<i.length;e++)if(this.overlaps(i[e]))return!0;return!1};Mr.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right};Mr.prototype.overlapsOppositeAxis=function(i,e){switch(e){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}};Mr.prototype.intersectPercentage=function(i){var e=Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left)),t=Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top)),n=e*t;return n/(this.height*this.width)};Mr.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}};Mr.getSimpleBoxPosition=function(i){var e=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,t=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,n=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i;var s={left:i.left,right:i.right,top:i.top||n,height:i.height||e,bottom:i.bottom||n+(i.height||e),width:i.width||t};return s};function lde(i,e,t,n){function s(b,v){for(var T,A=new Mr(b),w=1,B=0;B<v.length;B++){for(;b.overlapsOppositeAxis(t,v[B])||b.within(t)&&b.overlapsAny(n);)b.move(v[B]);if(b.within(t))return b;var I=b.intersectPercentage(t);w>I&&(T=new Mr(b),w=I),b=new Mr(A)}return T||A}var r=new Mr(e),a=e.cue,o=ode(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var f=r.lineHeight,d=f*Math.round(o),p=t[u]+f,m=l[0];Math.abs(d)>p&&(d=d<0?-1:1,d*=Math.ceil(p/f)*f),o<0&&(d+=a.vertical===""?t.height:t.width,l=l.reverse()),r.move(m,d)}else{var _=r.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=_/2;break;case"end":o-=_;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],r=new Mr(e)}var x=s(r,l);e.move(x.toCSSCompatValues(t))}function Ng(){}Ng.StringDecoder=function(){return{decode:function(i){if(!i)return"";if(typeof i!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))}}};Ng.convertCueToDOMTree=function(i,e){return!i||!e?null:fG(i,e)};var ude=.05,cde="sans-serif",hde="1.5%";Ng.processCues=function(i,e,t){if(!i||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var n=i.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=hde,t.appendChild(n);function s(f){for(var d=0;d<f.length;d++)if(f[d].hasBeenReset||!f[d].displayState)return!0;return!1}if(!s(e)){for(var r=0;r<e.length;r++)n.appendChild(e[r].displayState);return}var a=[],o=Mr.getSimpleBoxPosition(n),l=Math.round(o.height*ude*100)/100,u={font:l+"px "+cde};(function(){for(var f,d,p=0;p<e.length;p++)d=e[p],f=new D1(i,d,u),n.appendChild(f.div),lde(i,f,o,a),d.displayState=f.div,a.push(Mr.getSimpleBoxPosition(f))})()};Ng.Parser=function(i,e,t){t||(t=e,e={}),e||(e={}),this.window=i,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};Ng.Parser.prototype={reportOrThrowError:function(i){if(i instanceof ya)this.onparsingerror&&this.onparsingerror(i);else throw i},parse:function(i){var e=this;i&&(e.buffer+=e.decoder.decode(i,{stream:!0}));function t(){for(var f=e.buffer,d=0;d<f.length&&f[d]!=="\r"&&f[d]!==`
`;)++d;var p=f.substr(0,d);return f[d]==="\r"&&++d,f[d]===`
`&&++d,e.buffer=f.substr(d),p}function n(f){var d=new sv;if(Sy(f,function(m,_){switch(m){case"id":d.set(m,_);break;case"width":d.percent(m,_);break;case"lines":d.integer(m,_);break;case"regionanchor":case"viewportanchor":var x=_.split(",");if(x.length!==2)break;var b=new sv;if(b.percent("x",x[0]),b.percent("y",x[1]),!b.has("x")||!b.has("y"))break;d.set(m+"X",b.get("x")),d.set(m+"Y",b.get("y"));break;case"scroll":d.alt(m,_,["up"]);break}},/=/,/\s/),d.has("id")){var p=new(e.vttjs.VTTRegion||e.window.VTTRegion);p.width=d.get("width",100),p.lines=d.get("lines",3),p.regionAnchorX=d.get("regionanchorX",0),p.regionAnchorY=d.get("regionanchorY",100),p.viewportAnchorX=d.get("viewportanchorX",0),p.viewportAnchorY=d.get("viewportanchorY",100),p.scroll=d.get("scroll",""),e.onregion&&e.onregion(p),e.regionList.push({id:d.get("id"),region:p})}}function s(f){var d=new sv;Sy(f,function(p,m){switch(p){case"MPEGT":d.integer(p+"S",m);break;case"LOCA":d.set(p+"L",O3(m));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function r(f){f.match(/X-TIMESTAMP-MAP/)?Sy(f,function(d,p){switch(d){case"X-TIMESTAMP-MAP":s(p);break}},/=/):Sy(f,function(d,p){switch(d){case"Region":n(p);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new ya(ya.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?r(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{ide(a,e.cue,e.regionList)}catch(f){e.reportOrThrowError(f),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(f){e.reportOrThrowError(f),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var i=this;try{if(i.buffer+=i.decoder.decode(),(i.cue||i.state==="HEADER")&&(i.buffer+=`

`,i.parse()),i.state==="INITIAL")throw new ya(ya.Errors.BadSignature)}catch(e){i.reportOrThrowError(e)}return i.onflush&&i.onflush(),this}};var fde=Ng,dde="auto",pde={"":1,lr:1,rl:1},mde={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function gde(i){if(typeof i!="string")return!1;var e=pde[i.toLowerCase()];return e?i.toLowerCase():!1}function pM(i){if(typeof i!="string")return!1;var e=mde[i.toLowerCase()];return e?i.toLowerCase():!1}function dG(i,e,t){this.hasBeenReset=!1;var n="",s=!1,r=i,a=e,o=t,l=null,u="",f=!0,d="auto",p="start",m="auto",_="auto",x=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(v){n=""+v}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(v){s=!!v}},startTime:{enumerable:!0,get:function(){return r},set:function(v){if(typeof v!="number")throw new TypeError("Start time must be set to a number.");r=v,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(v){if(typeof v!="number")throw new TypeError("End time must be set to a number.");a=v,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(v){o=""+v,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(v){l=v,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(v){var T=gde(v);if(T===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=T,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return f},set:function(v){f=!!v,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(v){if(typeof v!="number"&&v!==dde)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=v,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(v){var T=pM(v);T?(p=T,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(v){if(v<0||v>100)throw new Error("Position must be between 0 and 100.");m=v,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return _},set:function(v){var T=pM(v);T?(_=T,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return x},set:function(v){if(v<0||v>100)throw new Error("Size must be between 0 and 100.");x=v,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(v){var T=pM(v);if(!T)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=T,this.hasBeenReset=!0}}}),this.displayState=void 0}dG.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var yde=dG,vde={"":!0,up:!0};function _de(i){if(typeof i!="string")return!1;var e=vde[i.toLowerCase()];return e?i.toLowerCase():!1}function ry(i){return typeof i=="number"&&i>=0&&i<=100}function xde(){var i=100,e=3,t=0,n=100,s=0,r=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(o){if(!ry(o))throw new Error("Width must be between 0 and 100.");i=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!ry(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!ry(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!ry(o))throw new Error("ViewportAnchorY must be between 0 and 100.");r=o}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(o){if(!ry(o))throw new Error("ViewportAnchorX must be between 0 and 100.");s=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=_de(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var bde=xde,Bu=rE,Td=hG.exports={WebVTT:fde,VTTCue:yde,VTTRegion:bde};Bu.vttjs=Td;Bu.WebVTT=Td.WebVTT;var Tde=Td.VTTCue,Sde=Td.VTTRegion,Ade=Bu.VTTCue,Ede=Bu.VTTRegion;Td.shim=function(){Bu.VTTCue=Tde,Bu.VTTRegion=Sde};Td.restore=function(){Bu.VTTCue=Ade,Bu.VTTRegion=Ede};Bu.VTTCue||Td.shim();var Cde=hG.exports;const _4=Pu(Cde);var x4="https://example.com",oE=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Z.location&&Z.location.href||"");var n=/^\/\//.test(e),s=!Z.location&&!/\/\//i.test(e);e=new Z.URL(e,Z.location||x4);var r=new URL(t,e);return s?r.href.slice(x4.length):n?r.href.slice(r.protocol.length):r.href},P3=function(){function i(){this.listeners={}}var e=i.prototype;return e.on=function(n,s){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(s)},e.off=function(n,s){if(!this.listeners[n])return!1;var r=this.listeners[n].indexOf(s);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(r,1),r>-1},e.trigger=function(n){var s=this.listeners[n];if(s)if(arguments.length===2)for(var r=s.length,a=0;a<r;++a)s[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=s.length,u=0;u<l;++u)s[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(s){n.push(s)})},i}(),Mde=function(e){return Z.atob?Z.atob(e):Buffer.from(e,"base64").toString("binary")};function pG(i){for(var e=Mde(i),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class wde extends P3{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const Dde=String.fromCharCode(9),mM=function(i){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},Rde=function(){const i="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+i+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},xr=function(i){const e={};if(!i)return e;const t=i.split(Rde());let n=t.length,s;for(;n--;)t[n]!==""&&(s=/([^=]*)=(.*)/.exec(t[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e},b4=i=>{const e=i.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class Bde extends P3{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,a)=>{const o=a(e);return o===e?r:r.concat([o])},[e]).forEach(r=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),t=/^#EXTM3U/.exec(r),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),t){n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),this.trigger("data",n);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),t){n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),t){n=Ki(mM(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),t){n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(r),t){if(n={type:"tag",tagType:"map"},t[1]){const a=xr(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=mM(a.BYTERANGE))}this.trigger("data",n);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),t){n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=xr(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=b4(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(r),t){n={type:"tag",tagType:"media"},t[1]&&(n.attributes=xr(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-ENDLIST/.exec(r),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),t){n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(r),t){n={type:"tag",tagType:"key"},t[1]&&(n.attributes=xr(t[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(t=/^#EXT-X-START:(.*)$/.exec(r),t){n={type:"tag",tagType:"start"},t[1]&&(n.attributes=xr(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"skip"},n.attributes=xr(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Dde)),this.trigger("data",n);return}if(t=/^#EXT-X-PART:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"part"},n.attributes=xr(t[1]),["DURATION"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=mM(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"server-control"},n.attributes=xr(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"part-inf"},n.attributes=xr(t[1]),["PART-TARGET"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=xr(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(n.attributes.hasOwnProperty(a)){n.attributes[a]=parseInt(n.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[o]=n.attributes[a],delete n.attributes[a]}}),this.trigger("data",n);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=xr(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseInt(n.attributes[a],10))}),this.trigger("data",n);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=xr(t[1]),["ID","CLASS"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=String(n.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=new Date(n.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/i.test(n.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=n.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in n.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(n.attributes[o]),u=/^\d+(\.\d+)?$/.test(n.attributes[o]);n.attributes[o]=l?n.attributes[o].toString(16):u?parseFloat(n.attributes[o]):String(n.attributes[o])}this.trigger("data",n);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),t){n={type:"tag",tagType:"content-steering"},n.attributes=xr(t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),t){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=xr(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=b4(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(r),t){n={type:"tag",tagType:"define"},n.attributes=xr(t[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:t,dataParser:n,segment:s}){typeof n!="function"&&(n=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:s}),!0})}addTagMapper({expression:e,map:t}){const n=s=>e.test(s)?t(s):s;this.tagMappers.push(n)}}const Lde=i=>i.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Tc=function(i){const e={};return Object.keys(i).forEach(function(t){e[Lde(t)]=i[t]}),e},gM=function(i){const{serverControl:e,targetDuration:t,partTargetDuration:n}=i;if(!e)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",o=t&&t*3,l=n&&n*2;t&&!e.hasOwnProperty(r)&&(e[r]=o,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[r]<o&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${o})`}),e[r]=o),n&&!e.hasOwnProperty(a)&&(e[a]=n*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class Ide extends P3{constructor(e={}){super(),this.lineStream=new wde,this.parseStream=new Bde,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let s={},r,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let p=0,m=0;const _={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&a&&(s.key=a),!s.timeline&&typeof d=="number"&&(s.timeline=d),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(x){let b,v;if(t.manifest.definitions){for(const T in t.manifest.definitions)if(x.uri&&(x.uri=x.uri.replace(`{$${T}}`,t.manifest.definitions[T])),x.attributes)for(const A in x.attributes)typeof x.attributes[A]=="string"&&(x.attributes[A]=x.attributes[A].replace(`{$${T}}`,t.manifest.definitions[T]))}({tag(){({version(){x.version&&(this.manifest.version=x.version)},"allow-cache"(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const T={};"length"in x&&(s.byterange=T,T.length=x.length,"offset"in x||(x.offset=p)),"offset"in x&&(s.byterange=T,T.offset=x.offset),p=T.offset+T.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.title&&(s.title=x.title),x.duration>0&&(s.duration=x.duration),x.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){a=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===f){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:pG(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(a.iv=x.attributes.IV)},"media-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,d=x.number},"playlist-type"(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map(){r={},x.uri&&(r.uri=x.uri),x.byterange&&(r.byterange=x.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Ki(s.attributes,x.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const T=this.manifest.mediaGroups[x.attributes.TYPE];T[x.attributes["GROUP-ID"]]=T[x.attributes["GROUP-ID"]]||{},b=T[x.attributes["GROUP-ID"]],v={default:/yes/i.test(x.attributes.DEFAULT)},v.default?v.autoselect=!0:v.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(v.language=x.attributes.LANGUAGE),x.attributes.URI&&(v.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(v.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(v.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(v.forced=/yes/i.test(x.attributes.FORCED)),b[x.attributes.NAME]=v},discontinuity(){d+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),s.dateTimeString=x.dateTimeString,s.dateTimeObject=x.dateTimeObject;const{lastProgramDateTime:T}=this;this.lastProgramDateTime=new Date(x.dateTimeString).getTime(),T===null&&this.manifest.segments.reduceRight((A,w)=>(w.programDateTime=A-w.duration*1e3,w.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,gM.call(this,this.manifest)},start(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out"(){s.cueOut=x.data},"cue-out-cont"(){s.cueOutCont=x.data},"cue-in"(){s.cueIn=x.data},skip(){this.manifest.skip=Tc(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const T=this.manifest.segments.length,A=Tc(x.attributes);s.parts=s.parts||[],s.parts.push(A),A.byterange&&(A.byterange.hasOwnProperty("offset")||(A.byterange.offset=m),m=A.byterange.offset+A.byterange.length);const w=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${w} for segment #${T}`,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((B,I)=>{B.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${I} lacks required attribute(s): LAST-PART`})})},"server-control"(){const T=this.manifest.serverControl=Tc(x.attributes);T.hasOwnProperty("canBlockReload")||(T.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),gM.call(this,this.manifest),T.canSkipDateranges&&!T.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const T=this.manifest.segments.length,A=Tc(x.attributes),w=A.type&&A.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(A),A.byterange&&(A.byterange.hasOwnProperty("offset")||(A.byterange.offset=w?m:0,w&&(m=A.byterange.offset+A.byterange.length)));const B=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${B} for segment #${T}`,x.attributes,["TYPE","URI"]),!!A.type)for(let I=0;I<s.preloadHints.length-1;I++){const P=s.preloadHints[I];P.type&&P.type===A.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${B} for segment #${T} has the same TYPE ${A.type} as preload hint #${I}`})}},"rendition-report"(){const T=Tc(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(T);const A=this.manifest.renditionReports.length-1,w=["LAST-MSN","URI"];o&&w.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${A}`,x.attributes,w)},"part-inf"(){this.manifest.partInf=Tc(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),gM.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Tc(x.attributes));const T=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${T}`,x.attributes,["ID","START-DATE"]);const A=this.manifest.dateRanges[T];A.endDate&&A.startDate&&new Date(A.endDate)<new Date(A.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),A.duration&&A.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),A.plannedDuration&&A.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const w=!!A.endOnNext;if(w&&!A.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),w&&(A.duration||A.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),A.duration&&A.endDate){const I=A.startDate.getTime()+A.duration*1e3;this.manifest.dateRanges[T].endDate=new Date(I)}if(!_[A.id])_[A.id]=A;else{for(const I in _[A.id])if(A[I]&&JSON.stringify(_[A.id][I])!==JSON.stringify(A[I])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const B=this.manifest.dateRanges.findIndex(I=>I.id===A.id);this.manifest.dateRanges[B]=Ki(this.manifest.dateRanges[B],A),_[A.id]=Ki(_[A.id],A),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Tc(x.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",x.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const T=(A,w)=>{if(A in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${A}`});return}this.manifest.definitions[A]=w};if("QUERYPARAM"in x.attributes){if("NAME"in x.attributes||"IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const A=this.params.get(x.attributes.QUERYPARAM);if(!A){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${x.attributes.QUERYPARAM}`});return}T(x.attributes.QUERYPARAM,decodeURIComponent(A));return}if("NAME"in x.attributes){if("IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in x.attributes)||typeof x.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${x.attributes.NAME}`});return}T(x.attributes.NAME,x.attributes.VALUE);return}if("IMPORT"in x.attributes){if(!this.mainDefinitions[x.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${x.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}T(x.attributes.IMPORT,this.mainDefinitions[x.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:x.attributes,uri:x.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",x.attributes,["BANDWIDTH","URI"])}}[x.tagType]||l).call(t)},uri(){s.uri=x.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),a&&(s.key=a),s.timeline=d,r&&(s.map=r),m=0,this.lastProgramDateTime!==null&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=s.duration*1e3),s={}},comment(){},custom(){x.segment?(s.custom=s.custom||{},s.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const s=[];n.forEach(function(r){t.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var qf={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Ode=["video","audio","text"],T4=["Video","Audio","Text"],mG=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,s){var r=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(s).toString(16)).slice(-2);return"avc1."+r+"00"+a})},rl=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(s){s=s.trim();var r;Ode.forEach(function(a){var o=qf[a].exec(s.toLowerCase());if(!(!o||o.length<=1)){r=a;var l=s.substring(0,o[1].length),u=s.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),r||n.push({type:s,details:"",mediaType:"unknown"})}),n},Pde=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var s in n){var r=n[s];if(r.default&&r.playlists)return rl(r.playlists[0].attributes.CODECS)}return null},gG=function(e){return e===void 0&&(e=""),qf.audio.test(e.trim().toLowerCase())},Ude=function(e){return e===void 0&&(e=""),qf.text.test(e.trim().toLowerCase())},cg=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(r){return mG(r.trim())}),n="video";t.length===1&&gG(t[0])?n="audio":t.length===1&&Ude(t[0])&&(n="application");var s="mp4";return t.every(function(r){return qf.mp4.test(r)})?s="mp4":t.every(function(r){return qf.webm.test(r)})?s="webm":t.every(function(r){return qf.ogg.test(r)})&&(s="ogg"),n+"/"+s+';codecs="'+e+'"'}},rv=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),Z.MediaSource&&Z.MediaSource.isTypeSupported&&Z.MediaSource.isTypeSupported(cg(e))||t&&Z.ManagedMediaSource&&Z.ManagedMediaSource.isTypeSupported&&Z.ManagedMediaSource.isTypeSupported(cg(e))||!1},yM=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<T4.length;n++){var s=T4[n];if(qf["muxer"+s].test(t))return!0}return!1})},S4="mp4a.40.2",Nde="avc1.4d400d",Fde=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,kde=/^application\/dash\+xml/i,yG=function(e){return Fde.test(e)?"hls":kde.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Hde=function(e){return e.toString(2).length},zde=function(e){return Math.ceil(Hde(e)/8)},vG=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Gde=function(e){return vG(e)},Rt=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Gde(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ps=Z.BigInt||Number,TD=[Ps("0x1"),Ps("0x100"),Ps("0x10000"),Ps("0x1000000"),Ps("0x100000000"),Ps("0x10000000000"),Ps("0x1000000000000"),Ps("0x100000000000000"),Ps("0x10000000000000000")];(function(){var i=new Uint16Array([65484]),e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Vde=function(e,t){var n=t===void 0?{}:t,s=n.signed,r=s===void 0?!1:s,a=n.le,o=a===void 0?!1:a;e=Rt(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],f=u.call(e,function(p,m,_){var x=o?_:Math.abs(_+1-e.length);return p+Ps(m)*TD[x]},Ps(0));if(r){var d=TD[e.length]/Ps(2)-Ps(1);f=Ps(f),f>d&&(f-=d,f-=d,f-=Ps(2))}return Number(f)},qde=function(e,t){var n=t===void 0?{}:t,s=n.le,r=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Ps(e);for(var a=zde(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=r?l:Math.abs(l+1-o.length);o[u]=Number(e/TD[l]&Ps(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},_G=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n},jde=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Rt(t[0]);var s=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),r=new Uint8Array(s),a=0;return t.forEach(function(o){o=Rt(o),r.set(o,a),a+=o.byteLength}),r},cn=function(e,t,n){var s=n===void 0?{}:n,r=s.offset,a=r===void 0?0:r,o=s.mask,l=o===void 0?[]:o;e=Rt(e),t=Rt(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(f,d){var p=l[d]?l[d]&e[a+d]:e[a+d];return f===p})},Xde=function(e,t,n){t.forEach(function(s){for(var r in e.mediaGroups[s])for(var a in e.mediaGroups[s][r]){var o=e.mediaGroups[s][r][a];n(o,s,r,a)}})},xh={},Nu={};function Wde(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var n=0;n<i.length;n++)if(Object.prototype.hasOwnProperty.call(i,n)){var s=i[n];if(e.call(void 0,s,n,i))return s}}function U3(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}function Yde(i,e){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i}var xG=U3({HTML:"text/html",isHTML:function(i){return i===xG.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),bG=U3({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===bG.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Nu.assign=Yde;Nu.find=Wde;Nu.freeze=U3;Nu.MIME_TYPE=xG;Nu.NAMESPACE=bG;var TG=Nu,bl=TG.find,Yv=TG.NAMESPACE;function Kde(i){return i!==""}function Jde(i){return i?i.split(/[\t\n\f\r ]+/).filter(Kde):[]}function Qde(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function A4(i){if(!i)return[];var e=Jde(i);return Object.keys(e.reduce(Qde,{}))}function Zde(i){return function(e){return i&&i.indexOf(e)!==-1}}function F_(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Zr(i,e){var t=i.prototype;if(!(t instanceof e)){let s=function(){};var n=s;s.prototype=e.prototype,s=new s,F_(t,s),i.prototype=t=s}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var $r={},Fo=$r.ELEMENT_NODE=1,hg=$r.ATTRIBUTE_NODE=2,R1=$r.TEXT_NODE=3,SG=$r.CDATA_SECTION_NODE=4,AG=$r.ENTITY_REFERENCE_NODE=5,$de=$r.ENTITY_NODE=6,EG=$r.PROCESSING_INSTRUCTION_NODE=7,CG=$r.COMMENT_NODE=8,MG=$r.DOCUMENT_NODE=9,wG=$r.DOCUMENT_TYPE_NODE=10,Lu=$r.DOCUMENT_FRAGMENT_NODE=11,epe=$r.NOTATION_NODE=12,cr={},Ms={};cr.INDEX_SIZE_ERR=(Ms[1]="Index size error",1);cr.DOMSTRING_SIZE_ERR=(Ms[2]="DOMString size error",2);var Vr=cr.HIERARCHY_REQUEST_ERR=(Ms[3]="Hierarchy request error",3);cr.WRONG_DOCUMENT_ERR=(Ms[4]="Wrong document",4);cr.INVALID_CHARACTER_ERR=(Ms[5]="Invalid character",5);cr.NO_DATA_ALLOWED_ERR=(Ms[6]="No data allowed",6);cr.NO_MODIFICATION_ALLOWED_ERR=(Ms[7]="No modification allowed",7);var DG=cr.NOT_FOUND_ERR=(Ms[8]="Not found",8);cr.NOT_SUPPORTED_ERR=(Ms[9]="Not supported",9);var E4=cr.INUSE_ATTRIBUTE_ERR=(Ms[10]="Attribute in use",10);cr.INVALID_STATE_ERR=(Ms[11]="Invalid state",11);cr.SYNTAX_ERR=(Ms[12]="Syntax error",12);cr.INVALID_MODIFICATION_ERR=(Ms[13]="Invalid modification",13);cr.NAMESPACE_ERR=(Ms[14]="Invalid namespace",14);cr.INVALID_ACCESS_ERR=(Ms[15]="Invalid access",15);function Hn(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Ms[i]),this.message=Ms[i],Error.captureStackTrace&&Error.captureStackTrace(this,Hn);return t.code=i,e&&(this.message=this.message+": "+e),t}Hn.prototype=Error.prototype;F_(cr,Hn);function bu(){}bu.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],n=0;n<this.length;n++)pm(this[n],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function fg(i,e){this._node=i,this._refresh=e,N3(this)}function N3(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(zG(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var n=t.length;n in i;n++)Object.prototype.hasOwnProperty.call(i,n)&&delete i[n];F_(t,i),i._inc=e}}fg.prototype.item=function(i){return N3(this),this[i]||null};Zr(fg,bu);function B1(){}function RG(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function C4(i,e,t,n){if(n?e[RG(e,n)]=t:e[e.length++]=t,i){t.ownerElement=i;var s=i.ownerDocument;s&&(n&&IG(s,i,n),tpe(s,i,t))}}function M4(i,e,t){var n=RG(e,t);if(n>=0){for(var s=e.length-1;n<s;)e[n]=e[++n];if(e.length=s,i){var r=i.ownerDocument;r&&(IG(r,i,t),t.ownerElement=null)}}else throw new Hn(DG,new Error(i.tagName+"@"+t))}B1.prototype={length:0,item:bu.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new Hn(E4);var t=this.getNamedItem(i.nodeName);return C4(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new Hn(E4);return t=this.getNamedItemNS(i.namespaceURI,i.localName),C4(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return M4(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return M4(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==i)return n}return null}};function BG(){}BG.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var n=new k_;if(n.implementation=this,n.childNodes=new bu,n.doctype=t||null,t&&n.appendChild(t),e){var s=n.createElementNS(i,e);n.appendChild(s)}return n},createDocumentType:function(i,e,t){var n=new lE;return n.name=i,n.nodeName=i,n.publicId=e||"",n.systemId=t||"",n}};function ki(){}ki.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return L1(this,i,e)},replaceChild:function(i,e){L1(this,i,e,PG),e&&this.removeChild(e)},removeChild:function(i){return OG(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return SD(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==R1&&i.nodeType==R1?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return n}e=e.nodeType==hg?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==hg?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function LG(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}F_($r,ki);F_($r,ki.prototype);function Kv(i,e){if(e(i))return!0;if(i=i.firstChild)do if(Kv(i,e))return!0;while(i=i.nextSibling)}function k_(){this.ownerDocument=this}function tpe(i,e,t){i&&i._inc++;var n=t.namespaceURI;n===Yv.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function IG(i,e,t,n){i&&i._inc++;var s=t.namespaceURI;s===Yv.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function F3(i,e,t){if(i&&i._inc){i._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var s=e.firstChild,r=0;s;)n[r++]=s,s=s.nextSibling;n.length=r,delete n[n.length]}}}function OG(i,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:i.firstChild=n,n?n.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,F3(i.ownerDocument,i),e}function ipe(i){return i&&(i.nodeType===ki.DOCUMENT_NODE||i.nodeType===ki.DOCUMENT_FRAGMENT_NODE||i.nodeType===ki.ELEMENT_NODE)}function npe(i){return i&&(Tl(i)||k3(i)||Iu(i)||i.nodeType===ki.DOCUMENT_FRAGMENT_NODE||i.nodeType===ki.COMMENT_NODE||i.nodeType===ki.PROCESSING_INSTRUCTION_NODE)}function Iu(i){return i&&i.nodeType===ki.DOCUMENT_TYPE_NODE}function Tl(i){return i&&i.nodeType===ki.ELEMENT_NODE}function k3(i){return i&&i.nodeType===ki.TEXT_NODE}function w4(i,e){var t=i.childNodes||[];if(bl(t,Tl)||Iu(e))return!1;var n=bl(t,Iu);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function D4(i,e){var t=i.childNodes||[];function n(r){return Tl(r)&&r!==e}if(bl(t,n))return!1;var s=bl(t,Iu);return!(e&&s&&t.indexOf(s)>t.indexOf(e))}function spe(i,e,t){if(!ipe(i))throw new Hn(Vr,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new Hn(DG,"child not in parent");if(!npe(e)||Iu(e)&&i.nodeType!==ki.DOCUMENT_NODE)throw new Hn(Vr,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function rpe(i,e,t){var n=i.childNodes||[],s=e.childNodes||[];if(e.nodeType===ki.DOCUMENT_FRAGMENT_NODE){var r=s.filter(Tl);if(r.length>1||bl(s,k3))throw new Hn(Vr,"More than one element or text in fragment");if(r.length===1&&!w4(i,t))throw new Hn(Vr,"Element in fragment can not be inserted before doctype")}if(Tl(e)&&!w4(i,t))throw new Hn(Vr,"Only one element can be added and only after doctype");if(Iu(e)){if(bl(n,Iu))throw new Hn(Vr,"Only one doctype is allowed");var a=bl(n,Tl);if(t&&n.indexOf(a)<n.indexOf(t))throw new Hn(Vr,"Doctype can only be inserted before an element");if(!t&&a)throw new Hn(Vr,"Doctype can not be appended since element is present")}}function PG(i,e,t){var n=i.childNodes||[],s=e.childNodes||[];if(e.nodeType===ki.DOCUMENT_FRAGMENT_NODE){var r=s.filter(Tl);if(r.length>1||bl(s,k3))throw new Hn(Vr,"More than one element or text in fragment");if(r.length===1&&!D4(i,t))throw new Hn(Vr,"Element in fragment can not be inserted before doctype")}if(Tl(e)&&!D4(i,t))throw new Hn(Vr,"Only one element can be added and only after doctype");if(Iu(e)){let l=function(u){return Iu(u)&&u!==t};var o=l;if(bl(n,l))throw new Hn(Vr,"Only one doctype is allowed");var a=bl(n,Tl);if(t&&n.indexOf(a)<n.indexOf(t))throw new Hn(Vr,"Doctype can only be inserted before an element")}}function L1(i,e,t,n){spe(i,e,t),i.nodeType===ki.DOCUMENT_NODE&&(n||rpe)(i,e,t);var s=e.parentNode;if(s&&s.removeChild(e),e.nodeType===Lu){var r=e.firstChild;if(r==null)return e;var a=e.lastChild}else r=a=e;var o=t?t.previousSibling:i.lastChild;r.previousSibling=o,a.nextSibling=t,o?o.nextSibling=r:i.firstChild=r,t==null?i.lastChild=a:t.previousSibling=a;do r.parentNode=i;while(r!==a&&(r=r.nextSibling));return F3(i.ownerDocument||i,i),e.nodeType==Lu&&(e.firstChild=e.lastChild=null),e}function ape(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,F3(i.ownerDocument,i,e),e}k_.prototype={nodeName:"#document",nodeType:MG,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==Lu){for(var t=i.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return i}return L1(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===Fo&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),OG(this,i)},replaceChild:function(i,e){L1(this,i,e,PG),i.ownerDocument=this,e&&this.removeChild(e),Tl(i)&&(this.documentElement=i)},importNode:function(i,e){return HG(this,i,e)},getElementById:function(i){var e=null;return Kv(this.documentElement,function(t){if(t.nodeType==Fo&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=A4(i);return new fg(this,function(t){var n=[];return e.length>0&&Kv(t.documentElement,function(s){if(s!==t&&s.nodeType===Fo){var r=s.getAttribute("class");if(r){var a=i===r;if(!a){var o=A4(r);a=e.every(Zde(o))}a&&n.push(s)}}}),n})},createElement:function(i){var e=new ud;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new bu;var t=e.attributes=new B1;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new uE;return i.ownerDocument=this,i.childNodes=new bu,i},createTextNode:function(i){var e=new H3;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new z3;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new G3;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new q3;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new I1;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new V3;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new ud,n=e.split(":"),s=t.attributes=new B1;return t.childNodes=new bu,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,s._ownerElement=t,t},createAttributeNS:function(i,e){var t=new I1,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};Zr(k_,ki);function ud(){this._nsMap={}}ud.prototype={nodeType:Fo,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===Lu?this.insertBefore(i,null):ape(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var n=this.ownerDocument.createAttributeNS(i,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new fg(this,function(e){var t=[];return Kv(e,function(n){n!==e&&n.nodeType==Fo&&(i==="*"||n.tagName==i)&&t.push(n)}),t})},getElementsByTagNameNS:function(i,e){return new fg(this,function(t){var n=[];return Kv(t,function(s){s!==t&&s.nodeType===Fo&&(i==="*"||s.namespaceURI===i)&&(e==="*"||s.localName==e)&&n.push(s)}),n})}};k_.prototype.getElementsByTagName=ud.prototype.getElementsByTagName;k_.prototype.getElementsByTagNameNS=ud.prototype.getElementsByTagNameNS;Zr(ud,ki);function I1(){}I1.prototype.nodeType=hg;Zr(I1,ki);function H_(){}H_.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(Ms[Vr])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var n=this.data.substring(0,i),s=this.data.substring(i+e);t=n+t+s,this.nodeValue=this.data=t,this.length=t.length}};Zr(H_,ki);function H3(){}H3.prototype={nodeName:"#text",nodeType:R1,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Zr(H3,H_);function z3(){}z3.prototype={nodeName:"#comment",nodeType:CG};Zr(z3,H_);function G3(){}G3.prototype={nodeName:"#cdata-section",nodeType:SG};Zr(G3,H_);function lE(){}lE.prototype.nodeType=wG;Zr(lE,ki);function UG(){}UG.prototype.nodeType=epe;Zr(UG,ki);function NG(){}NG.prototype.nodeType=$de;Zr(NG,ki);function V3(){}V3.prototype.nodeType=AG;Zr(V3,ki);function uE(){}uE.prototype.nodeName="#document-fragment";uE.prototype.nodeType=Lu;Zr(uE,ki);function q3(){}q3.prototype.nodeType=EG;Zr(q3,ki);function FG(){}FG.prototype.serializeToString=function(i,e,t){return kG.call(i,e,t)};ki.prototype.toString=kG;function kG(i,e){var t=[],n=this.nodeType==9&&this.documentElement||this,s=n.prefix,r=n.namespaceURI;if(r&&s==null){var s=n.lookupPrefix(r);if(s==null)var a=[{namespace:r,prefix:null}]}return pm(this,t,i,e,a),t.join("")}function R4(i,e,t){var n=i.prefix||"",s=i.namespaceURI;if(!s||n==="xml"&&s===Yv.XML||s===Yv.XMLNS)return!1;for(var r=t.length;r--;){var a=t[r];if(a.prefix===n)return a.namespace!==s}return!0}function vM(i,e,t){i.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,LG),'"')}function pm(i,e,t,n,s){if(s||(s=[]),n)if(i=n(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case Fo:var r=i.attributes,a=r.length,v=i.firstChild,o=i.tagName;t=Yv.isHTML(i.namespaceURI)||t;var l=o;if(!t&&!i.prefix&&i.namespaceURI){for(var u,f=0;f<r.length;f++)if(r.item(f).name==="xmlns"){u=r.item(f).value;break}if(!u)for(var d=s.length-1;d>=0;d--){var p=s[d];if(p.prefix===""&&p.namespace===i.namespaceURI){u=p.namespace;break}}if(u!==i.namespaceURI)for(var d=s.length-1;d>=0;d--){var p=s[d];if(p.namespace===i.namespaceURI){p.prefix&&(l=p.prefix+":"+o);break}}}e.push("<",l);for(var m=0;m<a;m++){var _=r.item(m);_.prefix=="xmlns"?s.push({prefix:_.localName,namespace:_.value}):_.nodeName=="xmlns"&&s.push({prefix:"",namespace:_.value})}for(var m=0;m<a;m++){var _=r.item(m);if(R4(_,t,s)){var x=_.prefix||"",b=_.namespaceURI;vM(e,x?"xmlns:"+x:"xmlns",b),s.push({prefix:x,namespace:b})}pm(_,e,t,n,s)}if(o===l&&R4(i,t,s)){var x=i.prefix||"",b=i.namespaceURI;vM(e,x?"xmlns:"+x:"xmlns",b),s.push({prefix:x,namespace:b})}if(v||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;v;)v.data?e.push(v.data):pm(v,e,t,n,s.slice()),v=v.nextSibling;else for(;v;)pm(v,e,t,n,s.slice()),v=v.nextSibling;e.push("</",l,">")}else e.push("/>");return;case MG:case Lu:for(var v=i.firstChild;v;)pm(v,e,t,n,s.slice()),v=v.nextSibling;return;case hg:return vM(e,i.name,i.value);case R1:return e.push(i.data.replace(/[<&>]/g,LG));case SG:return e.push("<![CDATA[",i.data,"]]>");case CG:return e.push("<!--",i.data,"-->");case wG:var T=i.publicId,A=i.systemId;if(e.push("<!DOCTYPE ",i.name),T)e.push(" PUBLIC ",T),A&&A!="."&&e.push(" ",A),e.push(">");else if(A&&A!=".")e.push(" SYSTEM ",A,">");else{var w=i.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case EG:return e.push("<?",i.target," ",i.data,"?>");case AG:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function HG(i,e,t){var n;switch(e.nodeType){case Fo:n=e.cloneNode(!1),n.ownerDocument=i;case Lu:break;case hg:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=i,n.parentNode=null,t)for(var s=e.firstChild;s;)n.appendChild(HG(i,s,t)),s=s.nextSibling;return n}function SD(i,e,t){var n=new e.constructor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];typeof r!="object"&&r!=n[s]&&(n[s]=r)}switch(e.childNodes&&(n.childNodes=new bu),n.ownerDocument=i,n.nodeType){case Fo:var a=e.attributes,o=n.attributes=new B1,l=a.length;o._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode(SD(i,a.item(u),!0));break;case hg:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild(SD(i,f,t)),f=f.nextSibling;return n}function zG(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case Fo:case Lu:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};var Zve=i;Object.defineProperty(fg.prototype,"length",{get:function(){return N3(this),this.$$length}}),Object.defineProperty(ki.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case Fo:case Lu:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),zG=function(e,t,n){e["$$"+t]=n}}}catch{}xh.DocumentType=lE;xh.DOMException=Hn;xh.DOMImplementation=BG;xh.Element=ud;xh.Node=ki;xh.NodeList=bu;xh.XMLSerializer=FG;var cE={},GG={};(function(i){var e=Nu.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(GG);var j3={},Jv=Nu.NAMESPACE,AD=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,B4=new RegExp("[\\-\\.0-9"+AD.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),L4=new RegExp("^"+AD.source+B4.source+"*(?::"+AD.source+B4.source+"*)?$"),ay=0,Sc=1,Np=2,oy=3,Fp=4,kp=5,ly=6,bT=7;function dg(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,dg)}dg.prototype=new Error;dg.prototype.name=dg.name;function VG(){}VG.prototype={parse:function(i,e,t){var n=this.domBuilder;n.startDocument(),qG(e,e={}),ope(i,e,t,n,this.errorHandler),n.endDocument()}};function ope(i,e,t,n,s){function r(j){if(j>65535){j-=65536;var Q=55296+(j>>10),$=56320+(j&1023);return String.fromCharCode(Q,$)}else return String.fromCharCode(j)}function a(j){var Q=j.slice(1,-1);return Object.hasOwnProperty.call(t,Q)?t[Q]:Q.charAt(0)==="#"?r(parseInt(Q.substr(1).replace("x","0x"))):(s.error("entity not found:"+j),j)}function o(j){if(j>x){var Q=i.substring(x,j).replace(/&#?\w+;/g,a);p&&l(x),n.characters(Q,0,j-x),x=j}}function l(j,Q){for(;j>=f&&(Q=d.exec(i));)u=Q.index,f=u+Q[0].length,p.lineNumber++;p.columnNumber=j-u+1}for(var u=0,f=0,d=/.*(?:\r\n?|\n)|.*$/g,p=n.locator,m=[{currentNSMap:e}],_={},x=0;;){try{var b=i.indexOf("<",x);if(b<0){if(!i.substr(x).match(/^\s*$/)){var v=n.doc,T=v.createTextNode(i.substr(x));v.appendChild(T),n.currentElement=T}return}switch(b>x&&o(b),i.charAt(b+1)){case"/":var H=i.indexOf(">",b+3),A=i.substring(b+2,H).replace(/[ \t\n\r]+$/g,""),w=m.pop();H<0?(A=i.substring(b+2).replace(/[\s<].*/,""),s.error("end tag name: "+A+" is not complete:"+w.tagName),H=b+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),s.error("end tag name: "+A+" maybe not complete"),H=b+1+A.length);var B=w.localNSMap,I=w.tagName==A,P=I||w.tagName&&w.tagName.toLowerCase()==A.toLowerCase();if(P){if(n.endElement(w.uri,w.localName,A),B)for(var F in B)Object.prototype.hasOwnProperty.call(B,F)&&n.endPrefixMapping(F);I||s.fatalError("end tag name: "+A+" is not match the current start tagName:"+w.tagName)}else m.push(w);H++;break;case"?":p&&l(b),H=fpe(i,b,n);break;case"!":p&&l(b),H=hpe(i,b,n,s);break;default:p&&l(b);var N=new jG,U=m[m.length-1].currentNSMap,H=lpe(i,b,N,U,a,s),re=N.length;if(!N.closed&&cpe(i,H,N.tagName,_)&&(N.closed=!0,t.nbsp||s.warning("unclosed xml attribute")),p&&re){for(var J=I4(p,{}),ae=0;ae<re;ae++){var ce=N[ae];l(ce.offset),ce.locator=I4(p,{})}n.locator=J,O4(N,n,U)&&m.push(N),n.locator=p}else O4(N,n,U)&&m.push(N);Jv.isHTML(N.uri)&&!N.closed?H=upe(i,H,N.tagName,a,n):H++}}catch(j){if(j instanceof dg)throw j;s.error("element parse error: "+j),H=-1}H>x?x=H:o(Math.max(b,x)+1)}}function I4(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function lpe(i,e,t,n,s,r){function a(p,m,_){t.attributeNames.hasOwnProperty(p)&&r.fatalError("Attribute "+p+" redefined"),t.addValue(p,m.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),_)}for(var o,l,u=++e,f=ay;;){var d=i.charAt(u);switch(d){case"=":if(f===Sc)o=i.slice(e,u),f=oy;else if(f===Np)f=oy;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===oy||f===Sc)if(f===Sc&&(r.warning('attribute value must after "="'),o=i.slice(e,u)),e=u+1,u=i.indexOf(d,e),u>0)l=i.slice(e,u),a(o,l,e-1),f=kp;else throw new Error("attribute value no end '"+d+"' match");else if(f==Fp)l=i.slice(e,u),a(o,l,e),r.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=u+1,f=kp;else throw new Error('attribute value must after "="');break;case"/":switch(f){case ay:t.setTagName(i.slice(e,u));case kp:case ly:case bT:f=bT,t.closed=!0;case Fp:case Sc:break;case Np:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return r.error("unexpected end of input"),f==ay&&t.setTagName(i.slice(e,u)),u;case">":switch(f){case ay:t.setTagName(i.slice(e,u));case kp:case ly:case bT:break;case Fp:case Sc:l=i.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case Np:f===Np&&(l=o),f==Fp?(r.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!Jv.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case oy:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(f){case ay:t.setTagName(i.slice(e,u)),f=ly;break;case Sc:o=i.slice(e,u),f=Np;break;case Fp:var l=i.slice(e,u);r.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case kp:f=ly;break}else switch(f){case Np:t.tagName,(!Jv.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,f=Sc;break;case kp:r.warning('attribute space is required"'+o+'"!!');case ly:f=Sc,e=u;break;case oy:f=Fp,e=u;break;case bT:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function O4(i,e,t){for(var n=i.tagName,s=null,d=i.length;d--;){var r=i[d],a=r.qName,o=r.value,p=a.indexOf(":");if(p>0)var l=r.prefix=a.slice(0,p),u=a.slice(p+1),f=l==="xmlns"&&u;else u=a,l=null,f=a==="xmlns"&&"";r.localName=u,f!==!1&&(s==null&&(s={},qG(t,t={})),t[f]=s[f]=o,r.uri=Jv.XMLNS,e.startPrefixMapping(f,o))}for(var d=i.length;d--;){r=i[d];var l=r.prefix;l&&(l==="xml"&&(r.uri=Jv.XML),l!=="xmlns"&&(r.uri=t[l||""]))}var p=n.indexOf(":");p>0?(l=i.prefix=n.slice(0,p),u=i.localName=n.slice(p+1)):(l=null,u=i.localName=n);var m=i.uri=t[l||""];if(e.startElement(m,u,n,i),i.closed){if(e.endElement(m,u,n),s)for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&e.endPrefixMapping(l)}else return i.currentNSMap=t,i.localNSMap=s,!0}function upe(i,e,t,n,s){if(/^(?:script|textarea)$/i.test(t)){var r=i.indexOf("</"+t+">",e),a=i.substring(e+1,r);if(/[&<]/.test(a))return/^script$/i.test(t)?(s.characters(a,0,a.length),r):(a=a.replace(/&#?\w+;/g,n),s.characters(a,0,a.length),r)}return e+1}function cpe(i,e,t,n){var s=n[t];return s==null&&(s=i.lastIndexOf("</"+t+">"),s<e&&(s=i.lastIndexOf("</"+t)),n[t]=s),s<e}function qG(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function hpe(i,e,t,n){var s=i.charAt(e+2);switch(s){case"-":if(i.charAt(e+3)==="-"){var r=i.indexOf("-->",e+4);return r>e?(t.comment(i,e+4,r-e-4),r+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var r=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,r-e-9),t.endCDATA(),r+3}var a=dpe(i,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,f=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],f=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var d=a[o-1];return t.startDTD(l,u,f),t.endDTD(),d.index+d[0].length}}return-1}function fpe(i,e,t){var n=i.indexOf("?>",e);if(n){var s=i.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return s?(s[0].length,t.processingInstruction(s[1],s[2]),n+2):-1}return-1}function jG(){this.attributeNames={}}jG.prototype={setTagName:function(i){if(!L4.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!L4.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function dpe(i,e){var t,n=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(s.lastIndex=e,s.exec(i);t=s.exec(i);)if(n.push(t),t[1])return n}j3.XMLReader=VG;j3.ParseError=dg;var ppe=Nu,mpe=xh,P4=GG,XG=j3,gpe=mpe.DOMImplementation,U4=ppe.NAMESPACE,ype=XG.ParseError,vpe=XG.XMLReader;function WG(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function YG(i){this.options=i||{locator:{}}}YG.prototype.parseFromString=function(i,e){var t=this.options,n=new vpe,s=t.domBuilder||new z_,r=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?P4.HTML_ENTITIES:P4.XML_ENTITIES;a&&s.setDocumentLocator(a),n.errorHandler=_pe(r,s,a),n.domBuilder=t.domBuilder||s,l&&(o[""]=U4.HTML),o.xml=o.xml||U4.XML;var f=t.normalizeLineEndings||WG;return i&&typeof i=="string"?n.parse(f(i),o,u):n.errorHandler.error("invalid doc source"),s.doc};function _pe(i,e,t){if(!i){if(e instanceof z_)return e;i=e}var n={},s=i instanceof Function;t=t||{};function r(a){var o=i[a];!o&&s&&(o=i.length==2?function(l){i(a,l)}:i),n[a]=o&&function(l){o("[xmldom "+a+"]	"+l+ED(t))}||function(){}}return r("warning"),r("error"),r("fatalError"),n}function z_(){this.cdata=!1}function Hp(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}z_.prototype={startDocument:function(){this.doc=new gpe().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,n){var s=this.doc,r=s.createElementNS(i,t||e),a=n.length;TT(this,r),this.currentElement=r,this.locator&&Hp(this.locator,r);for(var o=0;o<a;o++){var i=n.getURI(o),l=n.getValue(o),t=n.getQName(o),u=s.createAttributeNS(i,t);this.locator&&Hp(n.getLocator(o),u),u.value=u.nodeValue=l,r.setAttributeNode(u)}},endElement:function(i,e,t){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&Hp(this.locator,t),TT(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=N4.apply(this,arguments),i){if(this.cdata)var n=this.doc.createCDATASection(i);else var n=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(i)&&this.doc.appendChild(n),this.locator&&Hp(this.locator,n)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=N4.apply(this,arguments);var n=this.doc.createComment(i);this.locator&&Hp(this.locator,n),TT(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var s=n.createDocumentType(i,e,t);this.locator&&Hp(this.locator,s),TT(this,s),this.doc.doctype=s}},warning:function(i){console.warn("[xmldom warning]	"+i,ED(this.locator))},error:function(i){console.error("[xmldom error]	"+i,ED(this.locator))},fatalError:function(i){throw new ype(i,this.locator)}};function ED(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function N4(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){z_.prototype[i]=function(){return null}});function TT(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}cE.__DOMHandler=z_;cE.normalizeLineEndings=WG;cE.DOMParser=YG;var xpe=cE.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const F4=i=>!!i&&typeof i=="object",bs=(...i)=>i.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):F4(e[n])&&F4(t[n])?e[n]=bs(e[n],t[n]):e[n]=t[n]}),e),{}),KG=i=>Object.keys(i).map(e=>i[e]),bpe=(i,e)=>{const t=[];for(let n=i;n<e;n++)t.push(n);return t},pg=i=>i.reduce((e,t)=>e.concat(t),[]),JG=i=>{if(!i.length)return[];const e=[];for(let t=0;t<i.length;t++)e.push(i[t]);return e},Tpe=(i,e)=>i.reduce((t,n,s)=>(n[e]&&t.push(s),t),[]),Spe=(i,e)=>KG(i.reduce((t,n)=>(n.forEach(s=>{t[e(s)]=s}),t),{}));var mg={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Qv=({baseUrl:i="",source:e="",range:t="",indexRange:n=""})=>{const s={uri:e,resolvedUri:oE(i||"",e)};if(t||n){const a=(t||n).split("-");let o=Z.BigInt?Z.BigInt(a[0]):parseInt(a[0],10),l=Z.BigInt?Z.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=Z.BigInt(l)-Z.BigInt(o)+Z.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),s.byterange={length:u,offset:o}}return s},Ape=i=>{let e;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=Z.BigInt(i.offset)+Z.BigInt(i.length)-Z.BigInt(1):e=i.offset+i.length-1,`${i.offset}-${e}`},k4=i=>(i&&typeof i!="number"&&(i=parseInt(i,10)),isNaN(i)?null:i),Epe={static(i){const{duration:e,timescale:t=1,sourceDuration:n,periodDuration:s}=i,r=k4(i.endNumber),a=e/t;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/a}:{start:0,end:n/a}},dynamic(i){const{NOW:e,clientOffset:t,availabilityStartTime:n,timescale:s=1,duration:r,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=i,u=k4(i.endNumber),f=(e+t)/1e3,d=n+a,m=f+o-d,_=Math.ceil(m*s/r),x=Math.floor((f-d-l)*s/r),b=Math.floor((f-d)*s/r);return{start:Math.max(0,x),end:typeof u=="number"?u:Math.min(_,b)}}},Cpe=i=>e=>{const{duration:t,timescale:n=1,periodStart:s,startNumber:r=1}=i;return{number:r+e,duration:t/n,timeline:s,time:e*t}},X3=i=>{const{type:e,duration:t,timescale:n=1,periodDuration:s,sourceDuration:r}=i,{start:a,end:o}=Epe[e](i),l=bpe(a,o).map(Cpe(i));if(e==="static"){const u=l.length-1,f=typeof s=="number"?s:r;l[u].duration=f-t/n*u}return l},QG=i=>{const{baseUrl:e,initialization:t={},sourceDuration:n,indexRange:s="",periodStart:r,presentationTime:a,number:o=0,duration:l}=i;if(!e)throw new Error(mg.NO_BASE_URL);const u=Qv({baseUrl:e,source:t.sourceURL,range:t.range}),f=Qv({baseUrl:e,source:e,indexRange:s});if(f.map=u,l){const d=X3(i);d.length&&(f.duration=d[0].duration,f.timeline=d[0].timeline)}else n&&(f.duration=n,f.timeline=r);return f.presentationTime=a||r,f.number=o,[f]},W3=(i,e,t)=>{const n=i.sidx.map?i.sidx.map:null,s=i.sidx.duration,r=i.timeline||0,a=i.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(b=>b.referenceType!==1),f=[],d=i.endList?"static":"dynamic",p=i.sidx.timeline;let m=p,_=i.mediaSequence||0,x;typeof e.firstOffset=="bigint"?x=Z.BigInt(o)+e.firstOffset:x=o+e.firstOffset;for(let b=0;b<u.length;b++){const v=e.references[b],T=v.referencedSize,A=v.subsegmentDuration;let w;typeof x=="bigint"?w=x+Z.BigInt(T)-Z.BigInt(1):w=x+T-1;const B=`${x}-${w}`,P=QG({baseUrl:t,timescale:l,timeline:r,periodStart:p,presentationTime:m,number:_,duration:A,sourceDuration:s,indexRange:B,type:d})[0];n&&(P.map=n),f.push(P),typeof x=="bigint"?x+=Z.BigInt(T):x+=T,m+=A/l,_++}return i.segments=f,i},Mpe=["AUDIO","SUBTITLES"],wpe=1/60,ZG=i=>Spe(i,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),Dpe=(i,e)=>{for(let t=0;t<i.length;t++)if(i[t].attributes.NAME===e)return i[t];return null},H4=i=>{let e=[];return Xde(i,Mpe,(t,n,s,r)=>{e=e.concat(t.playlists||[])}),e},z4=({playlist:i,mediaSequence:e})=>{i.mediaSequence=e,i.segments.forEach((t,n)=>{t.number=i.mediaSequence+n})},Rpe=({oldPlaylists:i,newPlaylists:e,timelineStarts:t})=>{e.forEach(n=>{n.discontinuitySequence=t.findIndex(function({timeline:l}){return l===n.timeline});const s=Dpe(i,n.attributes.NAME);if(!s||n.sidx)return;const r=n.segments[0],a=s.segments.findIndex(function(l){return Math.abs(l.presentationTime-r.presentationTime)<wpe});if(a===-1){z4({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}s.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),z4({playlist:n,mediaSequence:s.segments[a].number})})},Bpe=({oldManifest:i,newManifest:e})=>{const t=i.playlists.concat(H4(i)),n=e.playlists.concat(H4(e));return e.timelineStarts=ZG([i.timelineStarts,e.timelineStarts]),Rpe({oldPlaylists:t,newPlaylists:n,timelineStarts:e.timelineStarts}),e},hE=i=>i&&i.uri+"-"+Ape(i.byterange),_M=i=>{const e=i.reduce(function(n,s){return n[s.attributes.baseUrl]||(n[s.attributes.baseUrl]=[]),n[s.attributes.baseUrl].push(s),n},{});let t=[];return Object.values(e).forEach(n=>{const s=KG(n.reduce((r,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return r[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[o].segments.push(...a.segments)),a.attributes.contentProtection&&(r[o].attributes.contentProtection=a.attributes.contentProtection)):(r[o]=a,r[o].attributes.timelineStarts=[]),r[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));t=t.concat(s)}),t.map(n=>(n.discontinuityStarts=Tpe(n.segments||[],"discontinuity"),n))},Y3=(i,e)=>{const t=hE(i.sidx),n=t&&e[t]&&e[t].sidx;return n&&W3(i,n,i.sidx.resolvedUri),i},Lpe=(i,e={})=>{if(!Object.keys(e).length)return i;for(const t in i)i[t]=Y3(i[t],e);return i},Ipe=({attributes:i,segments:e,sidx:t,mediaSequence:n,discontinuitySequence:s,discontinuityStarts:r},a)=>{const o={attributes:{NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:i.timelineStarts,mediaSequence:n,segments:e};return i.contentProtection&&(o.contentProtection=i.contentProtection),i.serviceLocation&&(o.attributes.serviceLocation=i.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Ope=({attributes:i,segments:e,mediaSequence:t,discontinuityStarts:n,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);const r={NAME:i.id,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1};i.codecs&&(r.CODECS=i.codecs);const a={attributes:r,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:n,discontinuitySequence:s,mediaSequence:t,segments:e};return i.serviceLocation&&(a.attributes.serviceLocation=i.serviceLocation),a},Ppe=(i,e={},t=!1)=>{let n;const s=i.reduce((r,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const d=o?` (${o})`:"";u=`${a.attributes.lang}${d}`}r[u]||(r[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const f=Y3(Ipe(a,t),e);return r[u].playlists.push(f),typeof n>"u"&&o==="main"&&(n=a,n.default=!0),r},{});if(!n){const r=Object.keys(s)[0];s[r].default=!0}return s},Upe=(i,e={})=>i.reduce((t,n)=>{const s=n.attributes.label||n.attributes.lang||"text",r=n.attributes.lang||"und";return t[s]||(t[s]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),t[s].playlists.push(Y3(Ope(n),e)),t},{}),Npe=i=>i.reduce((e,t)=>(t&&t.forEach(n=>{const{channel:s,language:r}=n;e[r]={autoselect:!1,default:!1,instreamId:s,language:r},n.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[r].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[r]["3D"]=n["3D"])}),e),{}),Fpe=({attributes:i,segments:e,sidx:t,discontinuityStarts:n})=>{const s={attributes:{NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuityStarts:n,timelineStarts:i.timelineStarts,segments:e};return i.frameRate&&(s.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(s.contentProtection=i.contentProtection),i.serviceLocation&&(s.attributes.serviceLocation=i.serviceLocation),t&&(s.sidx=t),s},kpe=({attributes:i})=>i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video",Hpe=({attributes:i})=>i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio",zpe=({attributes:i})=>i.mimeType==="text/vtt"||i.contentType==="text",Gpe=(i,e)=>{i.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:n}){return n===t.timeline}),t.segments&&t.segments.forEach((n,s)=>{n.number=s})})},G4=i=>i?Object.keys(i).reduce((e,t)=>{const n=i[t];return e.concat(n.playlists)},[]):[],Vpe=({dashPlaylists:i,locations:e,contentSteering:t,sidxMapping:n={},previousManifest:s,eventStream:r})=>{if(!i.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=i[0].attributes,f=_M(i.filter(kpe)).map(Fpe),d=_M(i.filter(Hpe)),p=_M(i.filter(zpe)),m=i.map(w=>w.attributes.captionServices).filter(Boolean),_={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:Lpe(f,n)};u>=0&&(_.minimumUpdatePeriod=u*1e3),e&&(_.locations=e),t&&(_.contentSteering=t),o==="dynamic"&&(_.suggestedPresentationDelay=l),r&&r.length>0&&(_.eventStream=r);const x=_.playlists.length===0,b=d.length?Ppe(d,n,x):null,v=p.length?Upe(p,n):null,T=f.concat(G4(b),G4(v)),A=T.map(({timelineStarts:w})=>w);return _.timelineStarts=ZG(A),Gpe(T,_.timelineStarts),b&&(_.mediaGroups.AUDIO.audio=b),v&&(_.mediaGroups.SUBTITLES.subs=v),m.length&&(_.mediaGroups["CLOSED-CAPTIONS"].cc=Npe(m)),s?Bpe({oldManifest:s,newManifest:_}):_},qpe=(i,e,t)=>{const{NOW:n,clientOffset:s,availabilityStartTime:r,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=i,u=(n+s)/1e3,f=r+o,p=u+l-f;return Math.ceil((p*a-e)/t)},$G=(i,e)=>{const{type:t,minimumUpdatePeriod:n=0,media:s="",sourceDuration:r,timescale:a=1,startNumber:o=1,periodStart:l}=i,u=[];let f=-1;for(let d=0;d<e.length;d++){const p=e[d],m=p.d,_=p.r||0,x=p.t||0;f<0&&(f=x),x&&x>f&&(f=x);let b;if(_<0){const A=d+1;A===e.length?t==="dynamic"&&n>0&&s.indexOf("$Number$")>0?b=qpe(i,f,m):b=(r*a-f)/m:b=(e[A].t-f)/m}else b=_+1;const v=o+u.length+b;let T=o+u.length;for(;T<v;)u.push({number:T,duration:m/a,time:f,timeline:l}),f+=m,T++}return u},jpe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Xpe=i=>(e,t,n,s)=>{if(e==="$$")return"$";if(typeof i[t]>"u")return e;const r=""+i[t];return t==="RepresentationID"||(n?s=parseInt(s,10):s=1,r.length>=s)?r:`${new Array(s-r.length+1).join("0")}${r}`},V4=(i,e)=>i.replace(jpe,Xpe(e)),Wpe=(i,e)=>!i.duration&&!e?[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]:i.duration?X3(i):$G(i,e),Ype=(i,e)=>{const t={RepresentationID:i.id,Bandwidth:i.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=i,s=Qv({baseUrl:i.baseUrl,source:V4(n.sourceURL,t),range:n.range});return Wpe(i,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=V4(i.media||"",t),l=i.timescale||1,u=i.presentationTimeOffset||0,f=i.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:oE(i.baseUrl||"",o),map:s,number:a.number,presentationTime:f}})},Kpe=(i,e)=>{const{baseUrl:t,initialization:n={}}=i,s=Qv({baseUrl:t,source:n.sourceURL,range:n.range}),r=Qv({baseUrl:t,source:e.media,range:e.mediaRange});return r.map=s,r},Jpe=(i,e)=>{const{duration:t,segmentUrls:n=[],periodStart:s}=i;if(!t&&!e||t&&e)throw new Error(mg.SEGMENT_TIME_UNSPECIFIED);const r=n.map(l=>Kpe(i,l));let a;return t&&(a=X3(i)),e&&(a=$G(i,e)),a.map((l,u)=>{if(r[u]){const f=r[u],d=i.timescale||1,p=i.presentationTimeOffset||0;return f.timeline=l.timeline,f.duration=l.duration,f.number=l.number,f.presentationTime=s+(l.time-p)/d,f}}).filter(l=>l)},Qpe=({attributes:i,segmentInfo:e})=>{let t,n;e.template?(n=Ype,t=bs(i,e.template)):e.base?(n=QG,t=bs(i,e.base)):e.list&&(n=Jpe,t=bs(i,e.list));const s={attributes:i};if(!n)return s;const r=n(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else r.length?t.duration=r.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return s.attributes=t,s.segments=r,e.base&&t.indexRange&&(s.sidx=r[0],s.segments=[]),s},Zpe=i=>i.map(Qpe),fn=(i,e)=>JG(i.childNodes).filter(({tagName:t})=>t===e),G_=i=>i.textContent.trim(),$pe=i=>parseFloat(i.split("/").reduce((e,t)=>e/t)),zp=i=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!o)return 0;const[l,u,f,d,p,m]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(f||0)*86400+parseFloat(d||0)*3600+parseFloat(p||0)*60+parseFloat(m||0)},eme=i=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)),q4={mediaPresentationDuration(i){return zp(i)},availabilityStartTime(i){return eme(i)/1e3},minimumUpdatePeriod(i){return zp(i)},suggestedPresentationDelay(i){return zp(i)},type(i){return i},timeShiftBufferDepth(i){return zp(i)},start(i){return zp(i)},width(i){return parseInt(i,10)},height(i){return parseInt(i,10)},bandwidth(i){return parseInt(i,10)},frameRate(i){return $pe(i)},startNumber(i){return parseInt(i,10)},timescale(i){return parseInt(i,10)},presentationTimeOffset(i){return parseInt(i,10)},duration(i){const e=parseInt(i,10);return isNaN(e)?zp(i):e},d(i){return parseInt(i,10)},t(i){return parseInt(i,10)},r(i){return parseInt(i,10)},presentationTime(i){return parseInt(i,10)},DEFAULT(i){return i}},Yn=i=>i&&i.attributes?JG(i.attributes).reduce((e,t)=>{const n=q4[t.name]||q4.DEFAULT;return e[t.name]=n(t.value),e},{}):{},tme={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},fE=(i,e)=>e.length?pg(i.map(function(t){return e.map(function(n){const s=G_(n),r=oE(t.baseUrl,s),a=bs(Yn(n),{baseUrl:r});return r!==s&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):i,K3=i=>{const e=fn(i,"SegmentTemplate")[0],t=fn(i,"SegmentList")[0],n=t&&fn(t,"SegmentURL").map(d=>bs({tag:"SegmentURL"},Yn(d))),s=fn(i,"SegmentBase")[0],r=t||e,a=r&&fn(r,"SegmentTimeline")[0],o=t||s||e,l=o&&fn(o,"Initialization")[0],u=e&&Yn(e);u&&l?u.initialization=l&&Yn(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const f={template:u,segmentTimeline:a&&fn(a,"S").map(d=>Yn(d)),list:t&&bs(Yn(t),{segmentUrls:n,initialization:Yn(l)}),base:s&&bs(Yn(s),{initialization:Yn(l)})};return Object.keys(f).forEach(d=>{f[d]||delete f[d]}),f},ime=(i,e,t)=>n=>{const s=fn(n,"BaseURL"),r=fE(e,s),a=bs(i,Yn(n)),o=K3(n);return r.map(l=>({segmentInfo:bs(t,o),attributes:bs(a,l)}))},nme=i=>i.reduce((e,t)=>{const n=Yn(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const s=tme[n.schemeIdUri];if(s){e[s]={attributes:n};const r=fn(t,"cenc:pssh")[0];if(r){const a=G_(r);e[s].pssh=a&&pG(a)}}return e},{}),sme=i=>{if(i.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{let n,s;return s=t,/^CC\d=/.test(t)?[n,s]=t.split("="):/^CC\d$/.test(t)&&(n=t),{channel:n,language:s}});if(i.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[s,r=""]=t.split("=");n.channel=s,n.language=t,r.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?n.language=l:o==="er"?n.easyReader=Number(l):o==="war"?n.aspectRatio=Number(l):o==="3D"&&(n["3D"]=Number(l))})}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})},rme=i=>pg(fn(i.node,"EventStream").map(e=>{const t=Yn(e),n=t.schemeIdUri;return fn(e,"Event").map(s=>{const r=Yn(s),a=r.presentationTime||0,o=t.timescale||1,l=r.duration||0,u=a/o+i.attributes.start;return{schemeIdUri:n,value:t.value,id:r.id,start:u,end:u+l/o,messageData:G_(s)||r.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),ame=(i,e,t)=>n=>{const s=Yn(n),r=fE(e,fn(n,"BaseURL")),a=fn(n,"Role")[0],o={role:Yn(a)};let l=bs(i,s,o);const u=fn(n,"Accessibility")[0],f=sme(Yn(u));f&&(l=bs(l,{captionServices:f}));const d=fn(n,"Label")[0];if(d&&d.childNodes.length){const b=d.childNodes[0].nodeValue.trim();l=bs(l,{label:b})}const p=nme(fn(n,"ContentProtection"));Object.keys(p).length&&(l=bs(l,{contentProtection:p}));const m=K3(n),_=fn(n,"Representation"),x=bs(t,m);return pg(_.map(ime(l,r,x)))},ome=(i,e)=>(t,n)=>{const s=fE(e,fn(t.node,"BaseURL")),r=bs(i,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(r.periodDuration=t.attributes.duration);const a=fn(t.node,"AdaptationSet"),o=K3(t.node);return pg(a.map(ame(r,s,o)))},lme=(i,e)=>{if(i.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!i.length)return null;const t=bs({serverURL:G_(i[0])},Yn(i[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},ume=({attributes:i,priorPeriodAttributes:e,mpdType:t})=>typeof i.start=="number"?i.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,cme=(i,e={})=>{const{manifestUri:t="",NOW:n=Date.now(),clientOffset:s=0,eventHandler:r=function(){}}=e,a=fn(i,"Period");if(!a.length)throw new Error(mg.INVALID_NUMBER_OF_PERIOD);const o=fn(i,"Location"),l=Yn(i),u=fE([{baseUrl:t}],fn(i,"BaseURL")),f=fn(i,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=n,l.clientOffset=s,o.length&&(l.locations=o.map(G_));const d=[];return a.forEach((p,m)=>{const _=Yn(p),x=d[m-1];_.start=ume({attributes:_,priorPeriodAttributes:x?x.attributes:null,mpdType:l.type}),d.push({node:p,attributes:_})}),{locations:l.locations,contentSteeringInfo:lme(f,r),representationInfo:pg(d.map(ome(l,u))),eventStream:pg(d.map(rme))}},eV=i=>{if(i==="")throw new Error(mg.DASH_EMPTY_MANIFEST);const e=new xpe;let t,n;try{t=e.parseFromString(i,"application/xml"),n=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(mg.DASH_INVALID_XML);return n},hme=i=>{const e=fn(i,"UTCTiming")[0];if(!e)return null;const t=Yn(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(mg.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},fme=(i,e={})=>{const t=cme(eV(i),e),n=Zpe(t.representationInfo);return Vpe({dashPlaylists:n,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},dme=i=>hme(eV(i));var tV=Math.pow(2,32),pme=function(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*tV+e.getUint32(4)},mme={getUint64:pme,MAX_UINT32:tV},j4=mme.getUint64,gme=function(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength),t={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;t.version===0?(t.earliestPresentationTime=e.getUint32(n),t.firstOffset=e.getUint32(n+4),n+=8):(t.earliestPresentationTime=j4(i.subarray(n)),t.firstOffset=j4(i.subarray(n+8)),n+=16),n+=2;var s=e.getUint16(n);for(n+=2;s>0;n+=12,s--)t.references.push({referenceType:(i[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(i[n+8]&128),sapType:(i[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return t},yme=gme;const vme=Pu(yme);var _me=Rt([73,68,51]),xme=function(e,t){t===void 0&&(t=0),e=Rt(e);var n=e[t+5],s=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(n&16)>>4;return r?s+20:s+10},Ay=function i(e,t){return t===void 0&&(t=0),e=Rt(e),e.length-t<10||!cn(e,_me,{offset:t})?t:(t+=xme(e,t),i(e,t))},X4=function(e){return typeof e=="string"?_G(e):e},bme=function(e){return Array.isArray(e)?e.map(function(t){return X4(t)}):[X4(e)]},Tme=function i(e,t,n){n===void 0&&(n=!1),t=bme(t),e=Rt(e);var s=[];if(!t.length)return s;for(var r=0;r<e.length;){var a=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,o=e.subarray(r+4,r+8);if(a===0)break;var l=r+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(r+8,l);cn(o,t[0])&&(t.length===1?s.push(u):s.push.apply(s,i(u,t.slice(1),n))),r=l}return s},ST={EBML:Rt([26,69,223,163]),DocType:Rt([66,130]),Segment:Rt([24,83,128,103]),SegmentInfo:Rt([21,73,169,102]),Tracks:Rt([22,84,174,107]),Track:Rt([174]),TrackNumber:Rt([215]),DefaultDuration:Rt([35,227,131]),TrackEntry:Rt([174]),TrackType:Rt([131]),FlagDefault:Rt([136]),CodecID:Rt([134]),CodecPrivate:Rt([99,162]),VideoTrack:Rt([224]),AudioTrack:Rt([225]),Cluster:Rt([31,67,182,117]),Timestamp:Rt([231]),TimestampScale:Rt([42,215,177]),BlockGroup:Rt([160]),BlockDuration:Rt([155]),Block:Rt([161]),SimpleBlock:Rt([163])},CD=[128,64,32,16,8,4,2,1],Sme=function(e){for(var t=1,n=0;n<CD.length&&!(e&CD[n]);n++)t++;return t},O1=function(e,t,n,s){n===void 0&&(n=!0),s===void 0&&(s=!1);var r=Sme(e[t]),a=e.subarray(t,t+r);return n&&(a=Array.prototype.slice.call(e,t,t+r),a[0]^=CD[r-1]),{length:r,value:Vde(a,{signed:s}),bytes:a}},W4=function i(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return i(t)}):typeof e=="number"?qde(e):e},Ame=function(e){return Array.isArray(e)?e.map(function(t){return W4(t)}):[W4(e)]},Eme=function i(e,t,n){if(n>=t.length)return t.length;var s=O1(t,n,!1);if(cn(e.bytes,s.bytes))return n;var r=O1(t,n+s.length);return i(e,t,n+r.length+r.value+s.length)},Y4=function i(e,t){t=Ame(t),e=Rt(e);var n=[];if(!t.length)return n;for(var s=0;s<e.length;){var r=O1(e,s,!1),a=O1(e,s+r.length),o=s+r.length+a.length;a.value===127&&(a.value=Eme(r,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);cn(t[0],r.bytes)&&(t.length===1?n.push(u):n=n.concat(i(u,t.slice(1))));var f=r.length+a.length+u.length;s+=f}return n},Cme=Rt([0,0,0,1]),Mme=Rt([0,0,1]),wme=Rt([0,0,3]),Dme=function(e){for(var t=[],n=1;n<e.length-2;)cn(e.subarray(n,n+3),wme)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var s=e.length-t.length,r=new Uint8Array(s),a=0;for(n=0;n<s;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r},iV=function(e,t,n,s){s===void 0&&(s=1/0),e=Rt(e),n=[].concat(n);for(var r=0,a,o=0;r<e.length&&(o<s||a);){var l=void 0;if(cn(e.subarray(r),Cme)?l=4:cn(e.subarray(r),Mme)&&(l=3),!l){r++;continue}if(o++,a)return Dme(e.subarray(a,r));var u=void 0;t==="h264"?u=e[r+l]&31:t==="h265"&&(u=e[r+l]>>1&63),n.indexOf(u)!==-1&&(a=r+l),r+=l+(t==="h264"?1:2)}return e.subarray(0,0)},Rme=function(e,t,n){return iV(e,"h264",t,n)},Bme=function(e,t,n){return iV(e,"h265",t,n)},br={webm:Rt([119,101,98,109]),matroska:Rt([109,97,116,114,111,115,107,97]),flac:Rt([102,76,97,67]),ogg:Rt([79,103,103,83]),ac3:Rt([11,119]),riff:Rt([82,73,70,70]),avi:Rt([65,86,73]),wav:Rt([87,65,86,69]),"3gp":Rt([102,116,121,112,51,103]),mp4:Rt([102,116,121,112]),fmp4:Rt([115,116,121,112]),mov:Rt([102,116,121,112,113,116]),moov:Rt([109,111,111,118]),moof:Rt([109,111,111,102])},gg={aac:function(e){var t=Ay(e);return cn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Ay(e);return cn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Y4(e,[ST.EBML,ST.DocType])[0];return cn(t,br.webm)},mkv:function(e){var t=Y4(e,[ST.EBML,ST.DocType])[0];return cn(t,br.matroska)},mp4:function(e){if(gg["3gp"](e)||gg.mov(e))return!1;if(cn(e,br.mp4,{offset:4})||cn(e,br.fmp4,{offset:4})||cn(e,br.moof,{offset:4})||cn(e,br.moov,{offset:4}))return!0},mov:function(e){return cn(e,br.mov,{offset:4})},"3gp":function(e){return cn(e,br["3gp"],{offset:4})},ac3:function(e){var t=Ay(e);return cn(e,br.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Ay(e);return cn(e,br.flac,{offset:t})},ogg:function(e){return cn(e,br.ogg)},avi:function(e){return cn(e,br.riff)&&cn(e,br.avi,{offset:8})},wav:function(e){return cn(e,br.riff)&&cn(e,br.wav,{offset:8})},h264:function(e){return Rme(e,7,3).length},h265:function(e){return Bme(e,[32,33],3).length}},MD=Object.keys(gg).filter(function(i){return i!=="ts"&&i!=="h264"&&i!=="h265"}).concat(["ts","h264","h265"]);MD.forEach(function(i){var e=gg[i];gg[i]=function(t){return e(Rt(t))}});var Lme=gg,J3=function(e){e=Rt(e);for(var t=0;t<MD.length;t++){var n=MD[t];if(Lme[n](e))return n}return""},Ime=function(e){return Tme(e,["moof"]).length>0},Q3=9e4,Z3,$3,dE,eL,nV,sV,rV;Z3=function(i){return i*Q3};$3=function(i,e){return i*e};dE=function(i){return i/Q3};eL=function(i,e){return i/e};nV=function(i,e){return Z3(eL(i,e))};sV=function(i,e){return $3(dE(i),e)};rV=function(i,e,t){return dE(t?i:i-e)};var Bf={ONE_SECOND_IN_TS:Q3,secondsToVideoTs:Z3,secondsToAudioTs:$3,videoTsToSeconds:dE,audioTsToSeconds:eL,audioTsToVideoTs:nV,videoTsToAudioTs:sV,metadataTsToSeconds:rV};/**
 * @license
 * Video.js 8.22.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var wD="8.22.0";const lu={},lh=function(i,e){return lu[i]=lu[i]||[],e&&(lu[i]=lu[i].concat(e)),lu[i]},Ome=function(i,e){lh(i,e)},aV=function(i,e){const t=lh(i).indexOf(e);return t<=-1?!1:(lu[i]=lu[i].slice(),lu[i].splice(t,1),!0)},Pme=function(i,e){lh(i,[].concat(e).map(t=>{const n=(...s)=>(aV(i,n),t(...s));return n}))},P1={prefixed:!0},QT=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],K4=QT[0];let Ey;for(let i=0;i<QT.length;i++)if(QT[i][1]in Xe){Ey=QT[i];break}if(Ey){for(let i=0;i<Ey.length;i++)P1[K4[i]]=Ey[i];P1.prefixed=Ey[0]!==K4[0]}let zr=[];const Ume=(i,e,t)=>(n,s,r)=>{const a=e.levels[s],o=new RegExp(`^(${a})$`);let l=i;if(n!=="log"&&r.unshift(n.toUpperCase()+":"),t&&(l=`%c${i}`,r.unshift(t)),r.unshift(l+":"),zr){zr.push([].concat(r));const f=zr.length-1e3;zr.splice(0,f>0?f:0)}if(!Z.console)return;let u=Z.console[n];!u&&n==="debug"&&(u=Z.console.info||Z.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(r)?"apply":"call"](Z.console,r)};function DD(i,e=":",t=""){let n="info",s;function r(...a){s("log",n,a)}return s=Ume(i,r,t),r.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,f=l!==void 0?l:t,d=`${i} ${u} ${a}`;return DD(d,u,f)},r.createNewLogger=(a,o,l)=>DD(a,o,l),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=a=>{if(typeof a=="string"){if(!r.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);n=a}return n},r.history=()=>zr?[].concat(zr):[],r.history.filter=a=>(zr||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),r.history.clear=()=>{zr&&(zr.length=0)},r.history.disable=()=>{zr!==null&&(zr.length=0,zr=null)},r.history.enable=()=>{zr===null&&(zr=[])},r.error=(...a)=>s("error",n,a),r.warn=(...a)=>s("warn",n,a),r.debug=(...a)=>s("debug",n,a),r}const ti=DD("VIDEOJS"),oV=ti.createLogger,Nme=Object.prototype.toString,lV=function(i){return El(i)?Object.keys(i):[]};function Dm(i,e){lV(i).forEach(t=>e(i[t],t))}function uV(i,e,t=0){return lV(i).reduce((n,s)=>e(n,i[s],s),t)}function El(i){return!!i&&typeof i=="object"}function yg(i){return El(i)&&Nme.call(i)==="[object Object]"&&i.constructor===Object}function qi(...i){const e={};return i.forEach(t=>{t&&Dm(t,(n,s)=>{if(!yg(n)){e[s]=n;return}yg(e[s])||(e[s]={}),e[s]=qi(e[s],n)})}),e}function cV(i={}){const e=[];for(const t in i)if(i.hasOwnProperty(t)){const n=i[t];e.push(n)}return e}function pE(i,e,t,n=!0){const s=a=>Object.defineProperty(i,e,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const a=t();return s(a),a}};return n&&(r.set=s),Object.defineProperty(i,e,r)}var Fme=Object.freeze({__proto__:null,each:Dm,reduce:uV,isObject:El,isPlain:yg,merge:qi,values:cV,defineLazyProperty:pE});let tL=!1,hV=null,zo=!1,fV,dV=!1,Rm=!1,Bm=!1,Cl=!1,iL=null,mE=null;const kme=!!(Z.cast&&Z.cast.framework&&Z.cast.framework.CastReceiverContext);let pV=null,U1=!1,gE=!1,N1=!1,yE=!1,F1=!1,k1=!1,H1=!1;const Zv=!!(Fg()&&("ontouchstart"in Z||Z.navigator.maxTouchPoints||Z.DocumentTouch&&Z.document instanceof Z.DocumentTouch)),Ac=Z.navigator&&Z.navigator.userAgentData;Ac&&Ac.platform&&Ac.brands&&(zo=Ac.platform==="Android",Rm=!!Ac.brands.find(i=>i.brand==="Microsoft Edge"),Bm=!!Ac.brands.find(i=>i.brand==="Chromium"),Cl=!Rm&&Bm,iL=mE=(Ac.brands.find(i=>i.brand==="Chromium")||{}).version||null,gE=Ac.platform==="Windows");if(!Bm){const i=Z.navigator&&Z.navigator.userAgent||"";tL=/iPod/i.test(i),hV=function(){const e=i.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),zo=/Android/i.test(i),fV=function(){const e=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),dV=/Firefox/i.test(i),Rm=/Edg/i.test(i),Bm=/Chrome/i.test(i)||/CriOS/i.test(i),Cl=!Rm&&Bm,iL=mE=function(){const e=i.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),pV=function(){const e=/MSIE\s(\d+)\.\d/.exec(i);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(t=11),t}(),F1=/Tizen/i.test(i),k1=/Web0S/i.test(i),H1=F1||k1,U1=/Safari/i.test(i)&&!Cl&&!zo&&!Rm&&!H1,gE=/Windows/i.test(i),N1=/iPad/i.test(i)||U1&&Zv&&!/iPhone/i.test(i),yE=/iPhone/i.test(i)&&!N1}const rr=yE||N1||tL,vE=(U1||rr)&&!Cl;var mV=Object.freeze({__proto__:null,get IS_IPOD(){return tL},get IOS_VERSION(){return hV},get IS_ANDROID(){return zo},get ANDROID_VERSION(){return fV},get IS_FIREFOX(){return dV},get IS_EDGE(){return Rm},get IS_CHROMIUM(){return Bm},get IS_CHROME(){return Cl},get CHROMIUM_VERSION(){return iL},get CHROME_VERSION(){return mE},IS_CHROMECAST_RECEIVER:kme,get IE_VERSION(){return pV},get IS_SAFARI(){return U1},get IS_WINDOWS(){return gE},get IS_IPAD(){return N1},get IS_IPHONE(){return yE},get IS_TIZEN(){return F1},get IS_WEBOS(){return k1},get IS_SMART_TV(){return H1},TOUCH_ENABLED:Zv,IS_IOS:rr,IS_ANY_SAFARI:vE});function J4(i){return typeof i=="string"&&!!i.trim()}function Hme(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Fg(){return Xe===Z.document}function kg(i){return El(i)&&i.nodeType===1}function gV(){try{return Z.parent!==Z.self}catch{return!0}}function yV(i){return function(e,t){if(!J4(e))return Xe[i](null);J4(t)&&(t=Xe.querySelector(t));const n=kg(t)?t:Xe;return n[i]&&n[i](e)}}function Pt(i="div",e={},t={},n){const s=Xe.createElement(i);return Object.getOwnPropertyNames(e).forEach(function(r){const a=e[r];r==="textContent"?bh(s,a):(s[r]!==a||r==="tabIndex")&&(s[r]=a)}),Object.getOwnPropertyNames(t).forEach(function(r){s.setAttribute(r,t[r])}),n&&nL(s,n),s}function bh(i,e){return typeof i.textContent>"u"?i.innerText=e:i.textContent=e,i}function RD(i,e){e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}function av(i,e){return Hme(e),i.classList.contains(e)}function jf(i,...e){return i.classList.add(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),i}function _E(i,...e){return i?(i.classList.remove(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),i):(ti.warn("removeClass was called with an element that doesn't exist"),null)}function vV(i,e,t){return typeof t=="function"&&(t=t(i,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(n=>i.classList.toggle(n,t)),i}function _V(i,e){Object.getOwnPropertyNames(e).forEach(function(t){const n=e[t];n===null||typeof n>"u"||n===!1?i.removeAttribute(t):i.setAttribute(t,n===!0?"":n)})}function Bc(i){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(i&&i.attributes&&i.attributes.length>0){const n=i.attributes;for(let s=n.length-1;s>=0;s--){const r=n[s].name;let a=n[s].value;t.includes(r)&&(a=a!==null),e[r]=a}}return e}function xV(i,e){return i.getAttribute(e)}function vg(i,e,t){i.setAttribute(e,t)}function xE(i,e){i.removeAttribute(e)}function bV(){Xe.body.focus(),Xe.onselectstart=function(){return!1}}function TV(){Xe.onselectstart=function(){return!0}}function _g(i){if(i&&i.getBoundingClientRect&&i.parentNode){const e=i.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(xg(i,"height"))),t.width||(t.width=parseFloat(xg(i,"width"))),t}}function $v(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};const e=i.offsetWidth,t=i.offsetHeight;let n=0,s=0;for(;i.offsetParent&&i!==Xe[P1.fullscreenElement];)n+=i.offsetLeft,s+=i.offsetTop,i=i.offsetParent;return{left:n,top:s,width:e,height:t}}function bE(i,e){const t={x:0,y:0};if(rr){let f=i;for(;f&&f.nodeName.toLowerCase()!=="html";){const d=xg(f,"transform");if(/^matrix/.test(d)){const p=d.slice(7,-1).split(/,\s/).map(Number);t.x+=p[4],t.y+=p[5]}else if(/^matrix3d/.test(d)){const p=d.slice(9,-1).split(/,\s/).map(Number);t.x+=p[12],t.y+=p[13]}if(f.assignedSlot&&f.assignedSlot.parentElement&&Z.WebKitCSSMatrix){const p=Z.getComputedStyle(f.assignedSlot.parentElement).transform,m=new Z.WebKitCSSMatrix(p);t.x+=m.m41,t.y+=m.m42}f=f.parentNode||f.host}}const n={},s=$v(e.target),r=$v(i),a=r.width,o=r.height;let l=e.offsetY-(r.top-s.top),u=e.offsetX-(r.left-s.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-r.left,l=e.changedTouches[0].pageY+r.top,rr&&(u-=t.x,l-=t.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,u/a)),n}function SV(i){return El(i)&&i.nodeType===3}function TE(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function AV(i){return typeof i=="function"&&(i=i()),(Array.isArray(i)?i:[i]).map(e=>{if(typeof e=="function"&&(e=e()),kg(e)||SV(e))return e;if(typeof e=="string"&&/\S/.test(e))return Xe.createTextNode(e)}).filter(e=>e)}function nL(i,e){return AV(e).forEach(t=>i.appendChild(t)),i}function EV(i,e){return nL(TE(i),e)}function e_(i){return i.button===void 0&&i.buttons===void 0||i.button===0&&i.buttons===void 0||i.type==="mouseup"&&i.button===0&&i.buttons===0||i.type==="mousedown"&&i.button===0&&i.buttons===0?!0:!(i.button!==0||i.buttons!==1)}const uh=yV("querySelector"),CV=yV("querySelectorAll");function xg(i,e){if(!i||!e)return"";if(typeof Z.getComputedStyle=="function"){let t;try{t=Z.getComputedStyle(i)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function MV(i){[...Xe.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(s=>s.cssText).join(""),n=Xe.createElement("style");n.textContent=t,i.document.head.appendChild(n)}catch{const n=Xe.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,i.document.head.appendChild(n)}})}var wV=Object.freeze({__proto__:null,isReal:Fg,isEl:kg,isInFrame:gV,createEl:Pt,textContent:bh,prependTo:RD,hasClass:av,addClass:jf,removeClass:_E,toggleClass:vV,setAttributes:_V,getAttributes:Bc,getAttribute:xV,setAttribute:vg,removeAttribute:xE,blockTextSelection:bV,unblockTextSelection:TV,getBoundingClientRect:_g,findPosition:$v,getPointerPosition:bE,isTextNode:SV,emptyEl:TE,normalizeContent:AV,appendContent:nL,insertContent:EV,isSingleLeftClick:e_,$:uh,$$:CV,computedStyle:xg,copyStyleSheetsToWindow:MV});let DV=!1,BD;const zme=function(){if(BD.options.autoSetup===!1)return;const i=Array.prototype.slice.call(Xe.getElementsByTagName("video")),e=Array.prototype.slice.call(Xe.getElementsByTagName("audio")),t=Array.prototype.slice.call(Xe.getElementsByTagName("video-js")),n=i.concat(e,t);if(n&&n.length>0)for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&BD(a);else{LD(1);break}}else DV||LD(1)};function LD(i,e){Fg()&&(e&&(BD=e),Z.setTimeout(zme,i))}function ID(){DV=!0,Z.removeEventListener("load",ID)}Fg()&&(Xe.readyState==="complete"?ID():Z.addEventListener("load",ID));const RV=function(i){const e=Xe.createElement("style");return e.className=i,e},BV=function(i,e){i.styleSheet?i.styleSheet.cssText=e:i.textContent=e};var wr=new WeakMap;const Gme=3;let Vme=Gme;function uo(){return Vme++}function Q4(i,e){if(!wr.has(i))return;const t=wr.get(i);t.handlers[e].length===0&&(delete t.handlers[e],i.removeEventListener?i.removeEventListener(e,t.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&wr.delete(i)}function sL(i,e,t,n){t.forEach(function(s){i(e,s,n)})}function SE(i){if(i.fixed_)return i;function e(){return!0}function t(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){const n=i||Z.event;i={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in n)s.includes(r)||r==="returnValue"&&n.preventDefault||(i[r]=n[r]);if(i.target||(i.target=i.srcElement||Xe),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){n.preventDefault&&n.preventDefault(),i.returnValue=!1,n.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),i.cancelBubble=!0,n.cancelBubble=!0,i.isPropagationStopped=e},i.isPropagationStopped=t,i.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),i.isImmediatePropagationStopped=e,i.stopPropagation()},i.isImmediatePropagationStopped=t,i.clientX!==null&&i.clientX!==void 0){const r=Xe.documentElement,a=Xe.body;i.pageX=i.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),i.pageY=i.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}i.which=i.charCode||i.keyCode,i.button!==null&&i.button!==void 0&&(i.button=i.button&1?0:i.button&4?1:i.button&2?2:0)}return i.fixed_=!0,i}let AT;const qme=function(){if(typeof AT!="boolean"){AT=!1;try{const i=Object.defineProperty({},"passive",{get(){AT=!0}});Z.addEventListener("test",null,i),Z.removeEventListener("test",null,i)}catch{}}return AT},jme=["touchstart","touchmove"];function wa(i,e,t){if(Array.isArray(e))return sL(wa,i,e,t);wr.has(i)||wr.set(i,{});const n=wr.get(i);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=uo()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,r){if(n.disabled)return;s=SE(s);const a=n.handlers[s.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!s.isImmediatePropagationStopped();l++)try{o[l].call(i,s,r)}catch(f){ti.error(f)}}}),n.handlers[e].length===1)if(i.addEventListener){let s=!1;qme()&&jme.indexOf(e)>-1&&(s={passive:!0}),i.addEventListener(e,n.dispatcher,s)}else i.attachEvent&&i.attachEvent("on"+e,n.dispatcher)}function ar(i,e,t){if(!wr.has(i))return;const n=wr.get(i);if(!n.handlers)return;if(Array.isArray(e))return sL(ar,i,e,t);const s=function(a,o){n.handlers[o]=[],Q4(a,o)};if(e===void 0){for(const a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&s(i,a);return}const r=n.handlers[e];if(r){if(!t){s(i,e);return}if(t.guid)for(let a=0;a<r.length;a++)r[a].guid===t.guid&&r.splice(a--,1);Q4(i,e)}}function Hg(i,e,t){const n=wr.has(i)?wr.get(i):{},s=i.parentNode||i.ownerDocument;if(typeof e=="string"?e={type:e,target:i}:e.target||(e.target=i),e=SE(e),n.dispatcher&&n.dispatcher.call(i,e,t),s&&!e.isPropagationStopped()&&e.bubbles===!0)Hg.call(null,s,e,t);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){wr.has(e.target)||wr.set(e.target,{});const r=wr.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function AE(i,e,t){if(Array.isArray(e))return sL(AE,i,e,t);const n=function(){ar(i,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||uo(),wa(i,e,n)}function rL(i,e,t){const n=function(){ar(i,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||uo(),wa(i,e,n)}var Xme=Object.freeze({__proto__:null,fixEvent:SE,on:wa,off:ar,trigger:Hg,one:AE,any:rL});const co=30,Ji=function(i,e,t){e.guid||(e.guid=uo());const n=e.bind(i);return n.guid=t?t+"_"+e.guid:e.guid,n},Ml=function(i,e){let t=Z.performance.now();return function(...s){const r=Z.performance.now();r-t>=e&&(i(...s),t=r)}},LV=function(i,e,t,n=Z){let s;const r=()=>{n.clearTimeout(s),s=null},a=function(){const o=this,l=arguments;let u=function(){s=null,u=null,t||i.apply(o,l)};!s&&t&&i.apply(o,l),n.clearTimeout(s),s=n.setTimeout(u,e)};return a.cancel=r,a};var Wme=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:co,bind_:Ji,throttle:Ml,debounce:LV});let uy;class Da{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},wa(this,e,t),this.addEventListener=n}off(e,t){ar(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},AE(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},rL(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=SE(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Hg(this,e)}queueTrigger(e){uy||(uy=new Map);const t=e.type||e;let n=uy.get(this);n||(n=new Map,uy.set(this,n));const s=n.get(t);n.delete(t),Z.clearTimeout(s);const r=Z.setTimeout(()=>{n.delete(t),n.size===0&&(n=null,uy.delete(this)),this.trigger(e)},0);n.set(t,r)}}Da.prototype.allowedEvents_={};Da.prototype.addEventListener=Da.prototype.on;Da.prototype.removeEventListener=Da.prototype.off;Da.prototype.dispatchEvent=Da.prototype.trigger;const EE=i=>typeof i.name=="function"?i.name():typeof i.name=="string"?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i,Tu=i=>i instanceof Da||!!i.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof i[e]=="function"),Yme=(i,e)=>{Tu(i)?e():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(e))},OD=i=>typeof i=="string"&&/\S/.test(i)||Array.isArray(i)&&!!i.length,z1=(i,e,t)=>{if(!i||!i.nodeName&&!Tu(i))throw new Error(`Invalid target for ${EE(e)}#${t}; must be a DOM node or evented object.`)},IV=(i,e,t)=>{if(!OD(i))throw new Error(`Invalid event type for ${EE(e)}#${t}; must be a non-empty string or array.`)},OV=(i,e,t)=>{if(typeof i!="function")throw new Error(`Invalid listener for ${EE(e)}#${t}; must be a function.`)},xM=(i,e,t)=>{const n=e.length<3||e[0]===i||e[0]===i.eventBusEl_;let s,r,a;return n?(s=i.eventBusEl_,e.length>=3&&e.shift(),[r,a]=e):(s=e[0],r=e[1],a=e[2]),z1(s,i,t),IV(r,i,t),OV(a,i,t),a=Ji(i,a),{isTargetingSelf:n,target:s,type:r,listener:a}},cf=(i,e,t,n)=>{z1(i,i,e),i.nodeName?Xme[e](i,t,n):i[e](t,n)},Kme={on(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=xM(this,i,"on");if(cf(t,"on",n,s),!e){const r=()=>this.off(t,n,s);r.guid=s.guid;const a=()=>this.off("dispose",r);a.guid=s.guid,cf(this,"on","dispose",r),cf(t,"on","dispose",a)}},one(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=xM(this,i,"one");if(e)cf(t,"one",n,s);else{const r=(...a)=>{this.off(t,n,r),s.apply(null,a)};r.guid=s.guid,cf(t,"one",n,r)}},any(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=xM(this,i,"any");if(e)cf(t,"any",n,s);else{const r=(...a)=>{this.off(t,n,r),s.apply(null,a)};r.guid=s.guid,cf(t,"any",n,r)}},off(i,e,t){if(!i||OD(i))ar(this.eventBusEl_,i,e);else{const n=i,s=e;z1(n,this,"off"),IV(s,this,"off"),OV(t,this,"off"),t=Ji(this,t),this.off("dispose",t),n.nodeName?(ar(n,s,t),ar(n,"dispose",t)):Tu(n)&&(n.off(s,t),n.off("dispose",t))}},trigger(i,e){z1(this.eventBusEl_,this,"trigger");const t=i&&typeof i!="string"?i.type:i;if(!OD(t))throw new Error(`Invalid event type for ${EE(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Hg(this.eventBusEl_,i,e)}};function aL(i,e={}){const{eventBusKey:t}=e;if(t){if(!i[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);i.eventBusEl_=i[t]}else i.eventBusEl_=Pt("span",{className:"vjs-event-bus"});return Object.assign(i,Kme),i.eventedCallbacks&&i.eventedCallbacks.forEach(n=>{n()}),i.on("dispose",()=>{i.off(),[i,i.el_,i.eventBusEl_].forEach(function(n){n&&wr.has(n)&&wr.delete(n)}),Z.setTimeout(()=>{i.eventBusEl_=null},0)}),i}const Jme={state:{},setState(i){typeof i=="function"&&(i=i());let e;return Dm(i,(t,n)=>{this.state[n]!==t&&(e=e||{},e[n]={from:this.state[n],to:t}),this.state[n]=t}),e&&Tu(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function PV(i,e){return Object.assign(i,Jme),i.state=Object.assign({},i.state,e),typeof i.handleStateChanged=="function"&&Tu(i)&&i.on("statechanged",i.handleStateChanged),i}const ov=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toLowerCase())},Bn=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},UV=function(i,e){return Bn(i)===Bn(e)};var Qme=Object.freeze({__proto__:null,toLowerCase:ov,toTitleCase:Bn,titleCaseEquals:UV});class De{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=qi({},this.options_),t=this.options_=qi(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${uo()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),t.evented!==!1&&(aL(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),PV(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(n),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=qi(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Pt(e,t,n)}localize(e,t,n=e){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[s],o=s&&s.split("-")[0],l=r&&r[o];let u=n;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(f,d){const p=t[d-1];let m=p;return typeof p>"u"&&(m=f),m})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,s)=>n.concat(s),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",s=Pt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=Xe.createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const a=Xe.createElementNS(n,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(r),this.iconIsSet_?t.replaceChild(s,t.querySelector(".vjs-icon-placeholder")):t.appendChild(s),this.iconIsSet_=!0,s}addChild(e,t={},n=this.children_.length){let s,r;if(typeof e=="string"){r=Bn(e);const a=t.componentClass||r;t.name=r;const o=De.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;s=new o(this.player_||this,t)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&Bn(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[ov(r)]=s),typeof s.el=="function"&&s.el()){let a=null;this.children_[n+1]&&(this.children_[n+1].el_?a=this.children_[n+1].el_:kg(this.children_[n+1])&&(a=this.children_[n+1])),this.contentEl().insertBefore(s.el(),a)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){t=!0,this.children_.splice(s,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Bn(e.name())]=null,this.childNameIndex_[ov(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let s;const r=De.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(a){return!s.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=De.getComponent(a.opts.componentClass||Bn(a.name));return o&&!r.isTech(o)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return uh(e,t||this.contentEl())}$$(e,t){return CV(e,t||this.contentEl())}hasClass(e){return av(this.el_,e)}addClass(...e){jf(this.el_,...e)}removeClass(...e){_E(this.el_,...e)}toggleClass(e,t){vV(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return xV(this.el_,e)}setAttribute(e,t){vg(this.el_,e,t)}removeAttribute(e){xE(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+Bn(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=xg(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const n=`offset${Bn(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,s=200;let r;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=Z.performance.now(),r=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)r=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>n&&(r=!1)}});const a=function(){r=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,r===!0&&Z.performance.now()-e<s&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Ji(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(s){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=Ji(this,e),this.clearTimersOnDispose_(),n=Z.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Z.clearTimeout(e)),e}setInterval(e,t){e=Ji(this,e),this.clearTimersOnDispose_();const n=Z.setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Z.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Ji(this,e),t=Z.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=Ji(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Z.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((n,s)=>this[t](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(r){const a=Z.getComputedStyle(r,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function n(r){return!(!t(r.parentElement)||!t(r)||r.style.opacity==="0"||Z.getComputedStyle(r).height==="0px"||Z.getComputedStyle(r).width==="0px")}function s(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;const a={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(a.x<0||a.x>(Xe.documentElement.clientWidth||Z.innerWidth)||a.y<0||a.y>(Xe.documentElement.clientHeight||Z.innerHeight))return!1;let o=Xe.elementFromPoint(a.x,a.y);for(;o;){if(o===r)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(s(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=De.getComponent("Tech"),s=n&&n.isTech(t),r=De===t||De.prototype.isPrototypeOf(t.prototype);if(s||!r){let o;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Bn(e),De.components_||(De.components_={});const a=De.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return De.components_[e]=t,De.components_[ov(e)]=t,t}static getComponent(e){if(!(!e||!De.components_))return De.components_[e]}}De.registerComponent("Component",De);function Zme(i,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function Z4(i,e,t,n){return Zme(i,n,t.length-1),t[n][e]}function bM(i){let e;return i===void 0||i.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:i.length,start:Z4.bind(null,"start",0,i),end:Z4.bind(null,"end",1,i)},Z.Symbol&&Z.Symbol.iterator&&(e[Z.Symbol.iterator]=()=>(i||[]).values()),e}function ko(i,e){return Array.isArray(i)?bM(i):i===void 0||e===void 0?bM():bM([[i,e]])}const NV=function(i,e){i=i<0?0:i;let t=Math.floor(i%60),n=Math.floor(i/60%60),s=Math.floor(i/3600);const r=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(i)||i===1/0)&&(s=n=t="-"),s=s>0||a>0?s+":":"",n=((s||r>=10)&&n<10?"0"+n:n)+":",t=t<10?"0"+t:t,s+n+t};let oL=NV;function FV(i){oL=i}function kV(){oL=NV}function cd(i,e=i){return oL(i,e)}var $me=Object.freeze({__proto__:null,createTimeRanges:ko,createTimeRange:ko,setFormatTime:FV,resetFormatTime:kV,formatTime:cd});function HV(i,e){let t=0,n,s;if(!e)return 0;(!i||!i.length)&&(i=ko(0,0));for(let r=0;r<i.length;r++)n=i.start(r),s=i.end(r),s>e&&(s=e),t+=s-n;return t/e}function Tn(i){if(i instanceof Tn)return i;typeof i=="number"?this.code=i:typeof i=="string"?this.message=i:El(i)&&(typeof i.code=="number"&&(this.code=i.code),Object.assign(this,i)),this.message||(this.message=Tn.defaultMessages[this.code]||"")}Tn.prototype.code=0;Tn.prototype.message="";Tn.prototype.status=null;Tn.prototype.metadata=null;Tn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Tn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Tn.MEDIA_ERR_CUSTOM=0;Tn.prototype.MEDIA_ERR_CUSTOM=0;Tn.MEDIA_ERR_ABORTED=1;Tn.prototype.MEDIA_ERR_ABORTED=1;Tn.MEDIA_ERR_NETWORK=2;Tn.prototype.MEDIA_ERR_NETWORK=2;Tn.MEDIA_ERR_DECODE=3;Tn.prototype.MEDIA_ERR_DECODE=3;Tn.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Tn.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Tn.MEDIA_ERR_ENCRYPTED=5;Tn.prototype.MEDIA_ERR_ENCRYPTED=5;function lv(i){return i!=null&&typeof i.then=="function"}function ul(i){lv(i)&&i.then(null,e=>{})}const PD=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,s)=>(i[n]&&(t[n]=i[n]),t),{cues:i.cues&&Array.prototype.map.call(i.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},ege=function(i){const e=i.$$("track"),t=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=PD(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(i.textTracks(),function(s){return t.indexOf(s)===-1}).map(PD))},tge=function(i,e){return i.forEach(function(t){const n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(s=>n.addCue(s))}),e.textTracks()};var $4={textTracksToJson:ege,jsonToTextTracks:tge,trackToJson_:PD};const TM="vjs-modal-dialog";class zg extends De{constructor(e,t){super(e,t),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Pt("div",{className:`${TM}-content`},{role:"document"}),this.descEl_=Pt("p",{className:`${TM}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),bh(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${TM} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const s=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,s=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),EV(t,e),this.trigger("modalfill"),s?n.insertBefore(t,s):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),TE(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Xe.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let s;for(let r=0;r<t.length;r++)if(n===t[r]){s=r;break}Xe.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof Z.HTMLAnchorElement||t instanceof Z.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof Z.HTMLInputElement||t instanceof Z.HTMLSelectElement||t instanceof Z.HTMLTextAreaElement||t instanceof Z.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof Z.HTMLIFrameElement||t instanceof Z.HTMLObjectElement||t instanceof Z.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}zg.prototype.options_={pauseOnOpen:!0,temporary:!0};De.registerComponent("ModalDialog",zg);class bg extends Da{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Tu(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}bg.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const i in bg.prototype.allowedEvents_)bg.prototype["on"+i]=null;const SM=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].enabled=!1)};class ige extends bg{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){SM(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&SM(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,SM(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const AM=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].selected=!1)};class nge extends bg{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){AM(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&AM(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,AM(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class zV extends bg{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class sge{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class G1{constructor(e){G1.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const s=e.length;this.cues_=e,this.length_=e.length;const r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<s)for(n=t;n<s;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}const rge={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},age={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},oge={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},eF={disabled:"disabled",hidden:"hidden",showing:"showing"};class lL extends Da{constructor(e={}){super();const t={id:e.id||"vjs_track_"+uo(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const s in t)Object.defineProperty(this,s,{get(){return t[s]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(s){s!==n&&(n=s,this.trigger("labelchange"))}})}}const uL=function(i){return new URL(i,Xe.baseURI)},GV=function(i){return new URL(i,Xe.baseURI).href},cL=function(i){if(typeof i=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(t)return t.pop().toLowerCase()}return""},CE=function(i,e=Z.location){return uL(i).origin!==e.origin};var lge=Object.freeze({__proto__:null,parseUrl:uL,getAbsoluteURL:GV,getFileExtension:cL,isCrossOrigin:CE});const tF=function(i,e){const t=new Z.WebVTT.Parser(Z,Z.vttjs,Z.WebVTT.StringDecoder()),n=[];t.oncue=function(s){e.addCue(s)},t.onparsingerror=function(s){n.push(s)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(i),n.length>0&&(Z.console&&Z.console.groupCollapsed&&Z.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(s=>ti.error(s)),Z.console&&Z.console.groupEnd&&Z.console.groupEnd()),t.flush()},iF=function(i,e){const t={uri:i},n=CE(i);n&&(t.cors=n);const s=e.tech_.crossOrigin()==="use-credentials";s&&(t.withCredentials=s),cG(t,Ji(this,function(r,a,o){if(r)return ti.error(r,a);e.loaded_=!0,typeof Z.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){ti.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return tF(o,e)}):tF(o,e)}))};class V_ extends lL{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=qi(e,{kind:oge[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=eF[t.mode]||"disabled";const s=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new G1(this.cues_),a=new G1(this.activeCues_);let o=!1;this.timeupdateHandler=Ji(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return n},set(u){eF[u]&&n!==u&&(n=u,!this.preload_&&n!=="disabled"&&this.cues.length===0&&iF(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),f=[];for(let d=0,p=this.cues.length;d<p;d++){const m=this.cues[d];m.startTime<=u&&m.endTime>=u&&f.push(m)}if(o=!1,f.length!==this.activeCues_.length)o=!0;else for(let d=0;d<f.length;d++)this.activeCues_.indexOf(f[d])===-1&&(o=!0);return this.activeCues_=f,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&iF(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new Z.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in t||(t[s]=e[s]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let s=0;s<n.length;s++)n[s]!==this&&n[s].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}V_.prototype.allowedEvents_={cuechange:"cuechange"};class VV extends lL{constructor(e={}){const t=qi(e,{kind:age[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class qV extends lL{constructor(e={}){const t=qi(e,{kind:rge[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Ou extends Da{constructor(e={}){super();let t;const n=new V_(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=Ou.NONE,n.addEventListener("loadeddata",()=>{t=Ou.LOADED,this.trigger({type:"load",target:this})})}}Ou.prototype.allowedEvents_={load:"load"};Ou.NONE=0;Ou.LOADING=1;Ou.LOADED=2;Ou.ERROR=3;const ao={audio:{ListClass:ige,TrackClass:VV,capitalName:"Audio"},video:{ListClass:nge,TrackClass:qV,capitalName:"Video"},text:{ListClass:zV,TrackClass:V_,capitalName:"Text"}};Object.keys(ao).forEach(function(i){ao[i].getterName=`${i}Tracks`,ao[i].privateName=`${i}Tracks_`});const Tg={remoteText:{ListClass:zV,TrackClass:V_,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:sge,TrackClass:Ou,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ar=Object.assign({},ao,Tg);Tg.names=Object.keys(Tg);ao.names=Object.keys(ao);Ar.names=[].concat(Tg.names).concat(ao.names);function uge(i,e,t,n,s={}){const r=i.textTracks();s.kind=e,t&&(s.label=t),n&&(s.language=n),s.tech=i;const a=new Ar.text.TrackClass(s);return r.addTrack(a),a}class jt extends De{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Ar.names.forEach(n=>{const s=Ar[n];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Ar.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ji(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return ko(0,0)}bufferedPercent(){return HV(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(ao.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const n=this[`${t}Tracks`]()||[];let s=n.length;for(;s--;){const r=n[s];t==="text"&&this.removeRemoteTextTrack(r),n.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Tn(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?ko(0,0):ko()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){ao.names.forEach(e=>{const t=ao[e],n=()=>{this.trigger(`${e}trackchange`)},s=this[t.getterName]();s.addEventListener("removetrack",n),s.addEventListener("addtrack",n),this.on("dispose",()=>{s.removeEventListener("removetrack",n),s.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!Z.WebVTT)if(Xe.body.contains(this.el())){if(!this.options_["vtt.js"]&&yg(_4)&&Object.keys(_4).length>0){this.trigger("vttjsloaded");return}const e=Xe.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),Z.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=o=>e.addTrack(o.track),s=o=>e.removeTrack(o.track);t.on("addtrack",n),t.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",r),l.mode==="showing"&&l.addEventListener("cuechange",r)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",s),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",r)})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return uge(this,e,t,n)}createRemoteTextTrack(e){const t=qi(e,{tech:this});return new Tg.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=uo();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return jt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof jt||e instanceof jt||e===jt}static registerTech(e,t){if(jt.techs_||(jt.techs_={}),!jt.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!jt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!jt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Bn(e),jt.techs_[e]=t,jt.techs_[ov(e)]=t,e!=="Tech"&&jt.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(jt.techs_&&jt.techs_[e])return jt.techs_[e];if(e=Bn(e),Z&&Z.videojs&&Z.videojs[e])return ti.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Z.videojs[e]}}}Ar.names.forEach(function(i){const e=Ar[i];jt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});jt.prototype.featuresVolumeControl=!0;jt.prototype.featuresMuteControl=!0;jt.prototype.featuresFullscreenResize=!1;jt.prototype.featuresPlaybackRate=!1;jt.prototype.featuresProgressEvents=!1;jt.prototype.featuresSourceset=!1;jt.prototype.featuresTimeupdateEvents=!1;jt.prototype.featuresNativeTextTracks=!1;jt.prototype.featuresVideoFrameCallback=!1;jt.withSourceHandlers=function(i){i.registerSourceHandler=function(t,n){let s=i.sourceHandlers;s||(s=i.sourceHandlers=[]),n===void 0&&(n=s.length),s.splice(n,0,t)},i.canPlayType=function(t){const n=i.sourceHandlers||[];let s;for(let r=0;r<n.length;r++)if(s=n[r].canPlayType(t),s)return s;return""},i.selectSourceHandler=function(t,n){const s=i.sourceHandlers||[];let r;for(let a=0;a<s.length;a++)if(r=s[a].canHandleSource(t,n),r)return s[a];return null},i.canPlaySource=function(t,n){const s=i.selectSourceHandler(t,n);return s?s.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){const n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(t){let n=i.selectSourceHandler(t,this.options_);n||(i.nativeSourceHandler?n=i.nativeSourceHandler:ti.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==i.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};De.registerComponent("Tech",jt);jt.registerTech("Tech",jt);jt.defaultTechOrder_=[];const Xf={},V1={},q1={};function cge(i,e){Xf[i]=Xf[i]||[],Xf[i].push(e)}function hge(i,e,t){i.setTimeout(()=>_f(e,Xf[e.type],t,i),1)}function fge(i,e){i.forEach(t=>t.setTech&&t.setTech(e))}function dge(i,e,t){return i.reduceRight(hL(t),e[t]())}function pge(i,e,t,n){return e[t](i.reduce(hL(t),n))}function nF(i,e,t,n=null){const s="call"+Bn(t),r=i.reduce(hL(s),n),a=r===q1,o=a?null:e[t](r);return yge(i,t,o,a),o}const mge={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},gge={setCurrentTime:1,setMuted:1,setVolume:1},sF={play:1,pause:1};function hL(i){return(e,t)=>e===q1?q1:t[i]?t[i](e):e}function yge(i,e,t,n){for(let s=i.length-1;s>=0;s--){const r=i[s];r[e]&&r[e](n,t)}}function vge(i){V1.hasOwnProperty(i.id())&&delete V1[i.id()]}function _ge(i,e){const t=V1[i.id()];let n=null;if(t==null)return n=e(i),V1[i.id()]=[[e,n]],n;for(let s=0;s<t.length;s++){const[r,a]=t[s];r===e&&(n=a)}return n===null&&(n=e(i),t.push([e,n])),n}function _f(i={},e=[],t,n,s=[],r=!1){const[a,...o]=e;if(typeof a=="string")_f(i,Xf[a],t,n,s,r);else if(a){const l=_ge(n,a);if(!l.setSource)return s.push(l),_f(i,o,t,n,s,r);l.setSource(Object.assign({},i),function(u,f){if(u)return _f(i,o,t,n,s,r);s.push(l),_f(f,i.type===f.type?o:Xf[f.type],t,n,s,r)})}else o.length?_f(i,o,t,n,s,r):r?t(i,s):_f(i,Xf["*"],t,n,s,!0)}const xge={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},j1=function(i=""){const e=cL(i);return xge[e.toLowerCase()]||""},bge=(i,e)=>{if(!e)return"";if(i.cache_.source.src===e&&i.cache_.source.type)return i.cache_.source.type;const t=i.cache_.sources.filter(s=>s.src===e);if(t.length)return t[0].type;const n=i.$$("source");for(let s=0;s<n.length;s++){const r=n[s];if(r.type&&r.src&&r.src===e)return r.type}return j1(e)},jV=function(i){if(Array.isArray(i)){let e=[];i.forEach(function(t){t=jV(t),Array.isArray(t)?e=e.concat(t):El(t)&&e.push(t)}),i=e}else typeof i=="string"&&i.trim()?i=[rF({src:i})]:El(i)&&typeof i.src=="string"&&i.src&&i.src.trim()?i=[rF(i)]:i=[];return i};function rF(i){if(!i.type){const e=j1(i.src);e&&(i.type=e)}return i}var Tge=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const aF=F1?10009:k1?461:8,Gp={codes:{play:415,pause:19,ff:417,rw:412,back:aF},names:{415:"play",19:"pause",417:"ff",412:"rw",[aF]:"back"},isEventKey(i,e){return e=e.toLowerCase(),!!(this.names[i.keyCode]&&this.names[i.keyCode]===e)},getEventName(i){if(this.names[i.keyCode])return this.names[i.keyCode];if(this.codes[i.code]){const e=this.codes[i.code];return this.names[e]}return null}},oF=5;class Sge extends Da{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const n=t.key.substring(5).toLowerCase();this.move(n)}else if(Gp.isEventKey(t,"play")||Gp.isEventKey(t,"pause")||Gp.isEventKey(t,"ff")||Gp.isEventKey(t,"rw")){t.preventDefault();const n=Gp.getEventName(t);this.performMediaAction_(n)}else Gp.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+oF);break;case"rw":this.userSeek_(this.player_.currentTime()-oF);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const s=this.getCurrentComponent(e.target);t&&(n=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!t)&&(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(s){for(const r of s)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&t.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&n(r.children_)}return e.children_.forEach(s=>{if(s.hasOwnProperty("el_"))if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())){t.push(s);return}else s.hasOwnProperty("children_")&&s.children_.length>0?n(s.children_):s.hasOwnProperty("items")&&s.items.length>0?n(s.items):this.findSuitableDOMChild(s)&&t.push(s);if(s.name_==="ErrorDisplay"&&s.opened_){const r=s.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),f={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:f,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let s=0;s<n.children.length;s++){const r=n.children[s],a=t(r);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===t)return n}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),s=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(n.boundingClientRect,a.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(n.center,s,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let s=1/0,r=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,n);l<s&&(s=l,r=a)}return r}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const s=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);let a;switch(n){case"right":case"left":a=s+r*100;break;case"up":a=r*2+s*.5;break;case"down":a=r*5+s;break;default:a=s+r}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class Age extends De{constructor(e,t,n){const s=qi({createEl:!1},t);if(super(e,s,n),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let r=0,a=t.playerOptions.techOrder;r<a.length;r++){const o=Bn(a[r]);let l=jt.getTech(o);if(o||(l=De.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}De.registerComponent("MediaLoader",Age);class ME extends De{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&ti.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const s=Pt(e,t,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Pt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,bh(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}De.registerComponent("ClickableComponent",ME);class UD extends ME{constructor(e,t){super(e,t),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Pt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Pt("picture",{className:"vjs-poster",tabIndex:-1},{},Pt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?ul(this.player_.play()):this.player_.pause())}}UD.prototype.crossorigin=UD.prototype.crossOrigin;De.registerComponent("PosterImage",UD);const Wa="#222",lF="#ccc",Ege={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function EM(i,e){let t;if(i.length===4)t=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else if(i.length===7)t=i.slice(1);else throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function sl(i,e,t){try{i.style[e]=t}catch{return}}function uF(i){return i?`${i}px`:""}class Cge extends De{constructor(e,t,n){super(e,t,n);const s=a=>this.updateDisplay(a),r=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",s),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(Ji(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const a=Z.screen.orientation||Z,o=Z.screen.orientation?"change":"orientationchange";a.addEventListener(o,r),e.on("dispose",()=>a.removeEventListener(o,r));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let s,r,a;for(let o=0;o<t.length;o++){const l=t[o];n&&n.enabled&&n.language&&n.language===l.language&&l.kind in e?l.kind===n.kind?a=l:a||(a=l):n&&!n.enabled?(a=null,s=null,r=null):l.default&&(l.kind==="descriptions"&&!s?s=l:l.kind in e&&!r&&(r=l))}a?a.mode="showing":r?r.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof Z.WebVTT=="function"&&Z.WebVTT.processCues(Z,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let n=null,s=null,r=e.length;for(;r--;){const a=e[r];a.mode==="showing"&&(a.kind==="descriptions"?n=a:s=a)}if(s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!Z.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",sl(a,"position","relative"),sl(a,"height",u-l+"px"),sl(a,"top","unset"),H1?sl(a,"bottom",u+"px"):sl(a,"bottom","0px"),o.length>0&&o.forEach(f=>{if(f.style.inset){const d=f.style.inset.split(" ");d.length===3&&Object.assign(f.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!Z.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,s=this.player_.videoWidth()/this.player_.videoHeight();let r=0,a=0;Math.abs(n-s)>.1&&(n>s?r=Math.round((e-t*s)/2):a=Math.round((t-e/s)/2)),sl(this.el_,"insetInline",uF(r)),sl(this.el_,"insetBlock",uF(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let s=n.length;for(;s--;){const r=n[s];if(!r)continue;const a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&sl(a.firstChild,"color",EM(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&sl(a.firstChild,"backgroundColor",EM(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?sl(a,"backgroundColor",EM(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Wa}, 2px 2px 4px ${Wa}, 2px 2px 5px ${Wa}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Wa}, 2px 2px ${Wa}, 3px 3px ${Wa}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${lF}, 0 1px ${lF}, -1px -1px ${Wa}, 0 -1px ${Wa}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Wa}, 0 0 4px ${Wa}, 0 0 4px ${Wa}, 0 0 4px ${Wa}`)),t.fontPercent&&t.fontPercent!==1){const o=Z.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Ege[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof Z.WebVTT!="function"||e.every(n=>!n.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r)t.push(s.activeCues[r])}Z.WebVTT.processCues(Z,t,this.el_);for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r){const a=s.activeCues[r].displayState;jf(a,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:n)),s.language&&vg(a,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}De.registerComponent("TextTrackDisplay",Cge);class Mge extends De{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Pt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(n),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}De.registerComponent("LoadingSpinner",Mge);class or extends ME{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const s=Pt(e,t,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,t={}){const n=this.constructor.name;return ti.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),De.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}De.registerComponent("Button",or);class XV extends or{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){ul(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),s=n&&n.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const r=()=>s.focus();lv(t)?t.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}XV.prototype.controlText_="Play Video";De.registerComponent("BigPlayButton",XV);class wge extends or{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}De.registerComponent("CloseButton",wge);class WV extends or{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),t.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?ul(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}WV.prototype.controlText_="Play";De.registerComponent("PlayToggle",WV);class Gg extends De{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Pt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(n),this.contentEl_=Pt("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=cd(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,ti.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Xe.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Gg.prototype.labelText_="Time";Gg.prototype.controlText_="Time";De.registerComponent("TimeDisplay",Gg);class fL extends Gg{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}fL.prototype.labelText_="Current Time";fL.prototype.controlText_="Current Time";De.registerComponent("CurrentTimeDisplay",fL);class dL extends Gg{constructor(e,t){super(e,t);const n=s=>this.updateContent(s);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}dL.prototype.labelText_="Duration";dL.prototype.controlText_="Duration";De.registerComponent("DurationDisplay",dL);class Dge extends De{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}}De.registerComponent("TimeDivider",Dge);class pL extends Gg{constructor(e,t){super(e,t),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Pt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}pL.prototype.labelText_="Remaining Time";pL.prototype.controlText_="Remaining Time";De.registerComponent("RemainingTimeDisplay",pL);class Rge extends De{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Pt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Pt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Xe.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}De.registerComponent("LiveDisplay",Rge);class YV extends or{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Pt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}YV.prototype.controlText_="Seek to live, currently playing live";De.registerComponent("SeekToLive",YV);function q_(i,e,t){return i=Number(i),Math.min(t,Math.max(e,isNaN(i)?e:i))}var Bge=Object.freeze({__proto__:null,clamp:q_});class mL extends De{constructor(e,t){super(e,t),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Cl&&e.preventDefault(),bV(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;TV(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(q_(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=bE(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,s=t&&t.horizontalSeek;n?s&&e.key==="ArrowLeft"||!s&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):s&&e.key==="ArrowRight"||!s&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}De.registerComponent("Slider",mL);const CM=(i,e)=>q_(i/e*100,0,100).toFixed(2)+"%";class Lge extends De{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Pt("span",{className:"vjs-control-text"}),n=Pt("span",{textContent:this.localize("Loaded")}),s=Xe.createTextNode(": ");return this.percentageEl_=Pt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(s),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,n=this.player_.buffered(),s=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,o=CM(r,s);this.percent_!==o&&(this.el_.style.width=o,bh(this.percentageEl_,o),this.percent_=o);for(let l=0;l<n.length;l++){const u=n.start(l),f=n.end(l);let d=a[l];d||(d=this.el_.appendChild(Pt()),a[l]=d),!(d.dataset.start===u&&d.dataset.end===f)&&(d.dataset.start=u,d.dataset.end=f,d.style.left=CM(u,r),d.style.width=CM(f-u,r))}for(let l=a.length;l>n.length;l--)this.el_.removeChild(a[l-1]);a.length=n.length})}}De.registerComponent("LoadProgressBar",Lge);class Ige extends De{constructor(e,t){super(e,t),this.update=Ml(Ji(this,this.update),co)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const s=$v(this.el_),r=_g(this.player_.el()),a=e.width*t;if(!r||!s)return;let o=e.left-r.left+a,l=e.width-a+(r.right-e.right);l||(l=e.width-a,o=a);let u=s.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>s.width&&(u=s.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){bh(this.el_,e)}updateTime(e,t,n,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;r=(l<1?"":"-")+cd(l,o)}else r=cd(n,a);this.update(e,t,r),s&&s()})}}De.registerComponent("TimeTooltip",Ige);class gL extends De{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Ml(Ji(this,this.update),co)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,s)}}gL.prototype.options_={children:[]};!rr&&!zo&&gL.prototype.options_.children.push("timeTooltip");De.registerComponent("PlayProgressBar",gL);class KV extends De{constructor(e,t){super(e,t),this.update=Ml(Ji(this,this.update),co)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=`${e.width*t}px`})}}KV.prototype.options_={children:["timeTooltip"]};De.registerComponent("MouseTimeDisplay",KV);class wE extends mL{constructor(e,t){t=qi(wE.prototype.options_,t),t.children=[...t.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(rr||zo);(!rr&&!zo||n)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbingOnMobile_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Ji(this,this.update),this.update=Ml(this.update_,co),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Xe&&"visibilityState"in Xe&&this.on(Xe,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Xe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,co))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Xe.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==n||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[cd(n,r),cd(r,r)],"{1} of {2}")),this.currentTime_=n,this.duration_=r),this.bar&&this.bar.update(_g(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){e_(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!e_(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const s=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())n=s*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(s>=.99){r.seekToLiveEdge();return}const a=r.seekableStart(),o=r.liveCurrentTime();if(n=a+s*r.liveWindow(),n>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=n:this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ul(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Xe&&"visibilityState"in Xe&&this.off(Xe,"visibilitychange",this.toggleVisibility_),super.dispose()}}wE.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};De.registerComponent("SeekBar",wE);class JV extends De{constructor(e,t){super(e,t),this.handleMouseMove=Ml(Ji(this,this.handleMouseMove),co),this.throttledHandleMouseSeek=Ml(Ji(this,this.handleMouseSeek),co),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),s=t.getChild("mouseTimeDisplay");if(!n&&!s)return;const r=t.el(),a=$v(r);let o=bE(r,e).x;o=q_(o,0,1),s&&s.update(a,o),n&&n.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&ul(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}JV.prototype.options_={children:["seekBar"]};De.registerComponent("ProgressControl",JV);class QV extends or{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Xe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Z?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Xe.exitPictureInPicture=="function"&&super.show()}}QV.prototype.controlText_="Picture-in-Picture";De.registerComponent("PictureInPictureToggle",QV);class ZV extends or{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Xe[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}ZV.prototype.controlText_="Fullscreen";De.registerComponent("FullscreenToggle",ZV);const Oge=function(i,e){e.tech_&&!e.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class Pge extends De{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}De.registerComponent("VolumeLevel",Pge);class Uge extends De{constructor(e,t){super(e,t),this.update=Ml(Ji(this,this.update),co)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,s){if(!n){const r=_g(this.el_),a=_g(this.player_.el()),o=e.width*t;if(!a||!r)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let f=r.width/2;l<f?f+=f-l:u<f&&(f=u),f<0?f=0:f>r.width&&(f=r.width),this.el_.style.right=`-${f}px`}this.write(`${s}%`)}write(e){bh(this.el_,e)}updateVolume(e,t,n,s,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,s.toFixed(0)),r&&r()})}}De.registerComponent("VolumeLevelTooltip",Uge);class $V extends De{constructor(e,t){super(e,t),this.update=Ml(Ji(this,this.update),co)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const s=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,s,()=>{n?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}$V.prototype.options_={children:["volumeLevelTooltip"]};De.registerComponent("MouseVolumeLevelDisplay",$V);class DE extends mL{constructor(e,t){super(e,t),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){e_(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),s=_g(n),r=this.vertical();let a=bE(n,e);a=r?a.y:a.x,a=q_(a,0,1),t.update(s,a,r)}e_(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}DE.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!rr&&!zo&&DE.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");DE.prototype.playerEvent="volumechange";De.registerComponent("VolumeBar",DE);class e7 extends De{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||yg(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),Oge(this,e),this.throttledHandleMouseMove=Ml(Ji(this,this.handleMouseMove),co),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}e7.prototype.options_={children:["volumeBar"]};De.registerComponent("VolumeControl",e7);const Nge=function(i,e){e.tech_&&!e.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class t7 extends or{constructor(e,t){super(e,t),Nge(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(t===0){const s=n<.1?.1:n;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),rr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),_E(this.el_,[0,1,2,3].reduce((n,s)=>n+`${s?" ":""}vjs-vol-${s}`,"")),jf(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}t7.prototype.controlText_="Mute";De.registerComponent("MuteToggle",t7);class i7 extends De{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||yg(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),wa(Xe,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),ar(Xe,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}i7.prototype.options_={children:["muteToggle","volumeControl"]};De.registerComponent("VolumePanel",i7);class n7 extends or{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;t+this.skipTime<=s?r=t+this.skipTime:r=s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}n7.prototype.controlText_="Skip Forward";De.registerComponent("SkipForward",n7);class s7 extends or{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()&&n.seekableStart();let r;s&&t-this.skipTime<=s?r=s:t>=this.skipTime?r=t-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}s7.prototype.controlText_="Skip Backward";De.registerComponent("SkipBackward",s7);class r7 extends De{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof De&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof De&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Pt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),wa(t,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Xe.activeElement;if(!this.children().some(n=>n.el()===t)){const n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(s=>s.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}De.registerComponent("Menu",r7);class yL extends De{constructor(e,t={}){super(e,t),this.menuButton_=new or(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=or.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),wa(Xe,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new r7(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Pt("li",{className:"vjs-menu-title",textContent:Bn(this.options_.title),tabIndex:-1}),n=new De(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=or.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),ar(Xe,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),rr&&gV())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}De.registerComponent("MenuButton",yL);class vL extends yL{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const s=Ji(this,this.update);n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)})}}De.registerComponent("TrackButton",vL);class j_ extends ME{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),r=Pt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}De.registerComponent("MenuItem",j_);class X_ extends j_{constructor(e,t){const n=t.track,s=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected=n.mode==="showing",super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",a)}),s.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof Z.Event!="object")try{o=new Z.Event("change")}catch{}o||(o=Xe.createEvent("Event"),o.initEvent("change",!0,!0)),s.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let s=0;s<n.length;s++){const r=n[s];this.kinds.indexOf(r.kind)!==-1&&(r===t?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}De.registerComponent("TextTrackMenuItem",X_);class a7 extends X_{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}De.registerComponent("OffTextTrackMenuItem",a7);class Vg extends vL{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=X_){let n;this.label_&&(n=`${this.label_} off`),e.push(new a7(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const a=s[r];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}De.registerComponent("TextTrackButton",Vg);class o7 extends j_{constructor(e,t){const n=t.track,s=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=s.text,t.selected=s.startTime<=r&&r<s.endTime,super(e,t),this.track=n,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}De.registerComponent("ChaptersTrackMenuItem",o7);class _L extends Vg{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Bn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,s=t.length;n<s;n++){const r=t[n],a=new o7(this.player_,{track:this.track_,cue:r});e.push(a)}return e}}_L.prototype.kind_="chapters";_L.prototype.controlText_="Chapters";De.registerComponent("ChaptersButton",_L);class xL extends Vg{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const s=e.textTracks(),r=Ji(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.kind!==this.kind_&&a.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}xL.prototype.kind_="descriptions";xL.prototype.controlText_="Descriptions";De.registerComponent("DescriptionsButton",xL);class bL extends Vg{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}bL.prototype.kind_="subtitles";bL.prototype.controlText_="Subtitles";De.registerComponent("SubtitlesButton",bL);class TL extends X_{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}De.registerComponent("CaptionSettingsMenuItem",TL);class SL extends Vg{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new TL(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}SL.prototype.kind_="captions";SL.prototype.controlText_="Captions";De.registerComponent("CaptionsButton",SL);class l7 extends X_{createEl(e,t,n){const s=super.createEl(e,t,n),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Pt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}De.registerComponent("SubsCapsMenuItem",l7);class AL extends Vg{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Bn(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new TL(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,l7),e}}AL.prototype.kinds_=["captions","subtitles"];AL.prototype.controlText_="Subtitles";De.registerComponent("SubsCapsButton",AL);class u7 extends j_{constructor(e,t){const n=t.track,s=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...a)=>{this.handleTracksChange.apply(this,a)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(e,t,n){const s=super.createEl(e,t,n),r=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Pt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const s=t[n];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}De.registerComponent("AudioTrackMenuItem",u7);class c7 extends vL{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const s=t[n];e.push(new u7(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}c7.prototype.controlText_="Audio Track";De.registerComponent("AudioTrackButton",c7);class EL extends j_{constructor(e,t){const n=t.rate,s=parseFloat(n,10);t.label=n,t.selected=s===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=s,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}EL.prototype.contentElType="button";De.registerComponent("PlaybackRateMenuItem",EL);class h7 extends yL{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Pt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new EL(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}h7.prototype.controlText_="Playback Rate";De.registerComponent("PlaybackRateMenuButton",h7);class f7 extends De{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}De.registerComponent("Spacer",f7);class Fge extends f7{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}De.registerComponent("CustomControlSpacer",Fge);class d7 extends De{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}d7.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};De.registerComponent("ControlBar",d7);class p7 extends zg{constructor(e,t){super(e,t),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}p7.prototype.options_=Object.assign({},zg.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});De.registerComponent("ErrorDisplay",p7);class m7 extends De{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Pt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${uo()}`)+"-"+t[1].replace(/\W+/g,""),s=Pt("option",{id:n,value:this.localize(t[0]),textContent:this.localize(t[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),s}))}}De.registerComponent("TextTrackSelect",m7);class Wf extends De{constructor(e,t={}){super(e,t);const n=Pt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const s=this.options_.selects;for(const r of s){const a=this.options_.selectConfigs[r],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const f=`vjs_select_${uo()}`;if(this.options_.type==="colors"){u=Pt("span",{className:o});const p=Pt("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});p.setAttribute("for",f),u.appendChild(p)}const d=new m7(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:f,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return Pt("fieldset",{className:this.options_.className})}}De.registerComponent("TextTrackFieldset",Wf);class g7 extends De{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,s=new Wf(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const r=new Wf(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const a=new Wf(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Pt("div",{className:"vjs-track-settings-colors"})}}De.registerComponent("TextTrackSettingsColors",g7);class y7 extends De{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,s=new Wf(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const r=new Wf(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const a=new Wf(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Pt("div",{className:"vjs-track-settings-font"})}}De.registerComponent("TextTrackSettingsFont",y7);class v7 extends De{constructor(e,t={}){super(e,t);const n=this.localize("restore all settings to the default values"),s=new or(e,{controlText:n,className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const r=new or(e,{controlText:n,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return Pt("div",{className:"vjs-track-settings-controls"})}}De.registerComponent("TrackSettingsControls",v7);const MM="vjs-text-track-settings",cF=["#000","Black"],hF=["#00F","Blue"],fF=["#0FF","Cyan"],dF=["#0F0","Green"],pF=["#F0F","Magenta"],mF=["#F00","Red"],gF=["#FFF","White"],yF=["#FF0","Yellow"],wM=["1","Opaque"],DM=["0.5","Semi-Transparent"],vF=["0","Transparent"],Lc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cF,gF,mF,dF,hF,yF,pF,fF],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[wM,DM,vF],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gF,cF,mF,dF,hF,yF,pF,fF],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:i=>i==="1.00"?null:Number(i)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[wM,DM],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[vF,DM,wM],className:"vjs-window-opacity vjs-opacity"}};Lc.windowColor.options=Lc.backgroundColor.options;function _7(i,e){if(e&&(i=e(i)),i&&i!=="none")return i}function kge(i,e){const t=i.options[i.options.selectedIndex].value;return _7(t,e)}function Hge(i,e,t){if(e){for(let n=0;n<i.options.length;n++)if(_7(i.options[n].value,t)===e){i.selectedIndex=n;break}}}class zge extends zg{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Pt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new g7(e,{textTrackComponentid:this.id_,selectConfigs:Lc,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new y7(e,{textTrackComponentid:this.id_,selectConfigs:Lc,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const s=new v7(e);this.addChild(s)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Dm(Lc,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return uV(Lc,(e,t,n)=>{const s=kge(this.$(t.selector),t.parser);return s!==void 0&&(e[n]=s),e},{})}setValues(e){Dm(Lc,(t,n)=>{Hge(this.$(t.selector),e[n],t.parser)})}setDefaults(){Dm(Lc,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(Z.localStorage.getItem(MM))}catch(t){ti.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?Z.localStorage.setItem(MM,JSON.stringify(e)):Z.localStorage.removeItem(MM)}catch(t){ti.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}De.registerComponent("TextTrackSettings",zge);class Gge extends De{constructor(e,t){let n=t.ResizeObserver||Z.ResizeObserver;t.ResizeObserver===null&&(n=!1);const s=qi({createEl:!n,reportTouchActivity:!1},t);super(e,s),this.ResizeObserver=t.ResizeObserver||Z.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=LV(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let a=this.unloadListener_=function(){ar(this,"resize",r),ar(this,"unload",a),a=null};wa(this.el_.contentWindow,"unload",a),wa(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}De.registerComponent("ResizeManager",Gge);const Vge={trackingThreshold:20,liveTolerance:15};class qge extends De{constructor(e,t){const n=qi(Vge,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(Z.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const s=this.liveCurrentTime(),r=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,co),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}De.registerComponent("LiveTracker",qge);class jge extends De{constructor(e,t){super(e,t),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Pt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${uo()}`}),description:Pt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${uo()}`})},Pt("div",{className:"vjs-title-bar"},{},cV(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const r=this.state[s],a=this.els[s],o=n[s];TE(a),r&&bh(a,r),t&&(t.removeAttribute(o),r&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}De.registerComponent("TitleBar",jge);const Xge={initialDisplay:4e3,position:[],takeFocus:!1};class Wge extends or{constructor(e,t){t=qi(Xge,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Pt("button",{},{type:"button",class:this.buildCSSClass()},Pt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}De.registerComponent("TransientButton",Wge);const ND=i=>{const e=i.el();if(e.hasAttribute("src"))return i.triggerSourceset(e.src),!0;const t=i.$$("source"),n=[];let s="";if(!t.length)return!1;for(let r=0;r<t.length;r++){const a=t[r].src;a&&n.indexOf(a)===-1&&n.push(a)}return n.length?(n.length===1&&(s=n[0]),i.triggerSourceset(s),!0):!1},Yge=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(i){const e=Xe.createElement(this.nodeName.toLowerCase());e.innerHTML=i;const t=Xe.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",Z.Element.prototype.appendChild.call(this,t),this.innerHTML}}),x7=(i,e)=>{let t={};for(let n=0;n<i.length&&(t=Object.getOwnPropertyDescriptor(i[n],e),!(t&&t.set&&t.get));n++);return t.enumerable=!0,t.configurable=!0,t},Kge=i=>x7([i.el(),Z.HTMLMediaElement.prototype,Z.Element.prototype,Yge],"innerHTML"),_F=function(i){const e=i.el();if(e.resetSourceWatch_)return;const t={},n=Kge(i),s=r=>(...a)=>{const o=r.apply(e,a);return ND(i),o};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(t[r]=e[r],e[r]=s(t[r]))}),Object.defineProperty(e,"innerHTML",qi(n,{set:s(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(r=>{e[r]=t[r]}),Object.defineProperty(e,"innerHTML",n)},i.one("sourceset",e.resetSourceWatch_)},Jge=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?GV(Z.Element.prototype.getAttribute.call(this,"src")):""},set(i){return Z.Element.prototype.setAttribute.call(this,"src",i),i}}),Qge=i=>x7([i.el(),Z.HTMLMediaElement.prototype,Jge],"src"),Zge=function(i){if(!i.featuresSourceset)return;const e=i.el();if(e.resetSourceset_)return;const t=Qge(i),n=e.setAttribute,s=e.load;Object.defineProperty(e,"src",qi(t,{set:r=>{const a=t.set.call(e,r);return i.triggerSourceset(e.src),a}})),e.setAttribute=(r,a)=>{const o=n.call(e,r,a);return/src/i.test(r)&&i.triggerSourceset(e.src),o},e.load=()=>{const r=s.call(e);return ND(i)||(i.triggerSourceset(""),_F(i)),r},e.currentSrc?i.triggerSourceset(e.currentSrc):ND(i)||_F(i),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=n,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class ft extends jt{constructor(e,t){super(e,t);const n=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let a=r.length;const o=[];for(;a--;){const l=r[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!s&&!this.el_.hasAttribute("crossorigin")&&CE(l.src)&&(s=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&ti.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Zv||yE)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ft.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Zge(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let r=0;r<e.length;r++){const a=e[r];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const s=()=>{for(let r=0;r<t.length;r++){const a=t[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",s)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(s=>{this.el()[`${n}Tracks`].removeEventListener(s,this[`${n}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=ao[e],n=this.el()[t.getterName],s=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:o=>{const l={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(l),e==="text"&&this[Tg.remoteText.getterName]().trigger(l)},addtrack(o){s.addTrack(o.track)},removetrack(o){s.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<s.length;l++){let u=!1;for(let f=0;f<n.length;f++)if(n[f]===s[l]){u=!0;break}u||o.push(s[l])}for(;o.length;)s.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach(o=>{const l=r[o];n.addEventListener(o,l),this.on("dispose",u=>n.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){ao.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),ft.disposeMediaElement(e),e=n}else{e=Xe.createElement("video");const n=this.options_.tag&&Bc(this.options_.tag),s=qi({},n);(!Zv||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,_V(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&vg(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const s=t[n],r=this.options_[s];typeof r<"u"&&(r?vg(e,s,s):xE(e,s),e[s]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const s=function(){n=!0};this.on("loadstart",s);const r=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),n||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&vE?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){ti(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&zo&&Cl&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ul(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return ti.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const s=Pt("source",{},n);return this.el_.appendChild(s),!0}removeSourceElement(e){if(!e)return ti.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return ti.warn(`No matching source element found with src: ${e}`),!1}reset(){ft.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Xe.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)(e===t[n]||e===t[n].track)&&this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Z.performance&&(e.creationTime=Z.performance.now()),e}}pE(ft,"TEST_VID",function(){if(!Fg())return;const i=Xe.createElement("video"),e=Xe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",i.appendChild(e),i});ft.isSupported=function(){try{ft.TEST_VID.volume=.5}catch{return!1}return!!(ft.TEST_VID&&ft.TEST_VID.canPlayType)};ft.canPlayType=function(i){return ft.TEST_VID.canPlayType(i)};ft.canPlaySource=function(i,e){return ft.canPlayType(i.type)};ft.canControlVolume=function(){try{const i=ft.TEST_VID.volume;ft.TEST_VID.volume=i/2+.1;const e=i!==ft.TEST_VID.volume;return e&&rr?(Z.setTimeout(()=>{ft&&ft.prototype&&(ft.prototype.featuresVolumeControl=i!==ft.TEST_VID.volume)}),!1):e}catch{return!1}};ft.canMuteVolume=function(){try{const i=ft.TEST_VID.muted;return ft.TEST_VID.muted=!i,ft.TEST_VID.muted?vg(ft.TEST_VID,"muted","muted"):xE(ft.TEST_VID,"muted","muted"),i!==ft.TEST_VID.muted}catch{return!1}};ft.canControlPlaybackRate=function(){if(zo&&Cl&&mE<58)return!1;try{const i=ft.TEST_VID.playbackRate;return ft.TEST_VID.playbackRate=i/2+.1,i!==ft.TEST_VID.playbackRate}catch{return!1}};ft.canOverrideAttributes=function(){try{const i=()=>{};Object.defineProperty(Xe.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(Xe.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(Xe.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(Xe.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0};ft.supportsNativeTextTracks=function(){return vE||rr&&Cl};ft.supportsNativeVideoTracks=function(){return!!(ft.TEST_VID&&ft.TEST_VID.videoTracks)};ft.supportsNativeAudioTracks=function(){return!!(ft.TEST_VID&&ft.TEST_VID.audioTracks)};ft.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([i,e]){pE(ft.prototype,i,()=>ft[e](),!0)});ft.prototype.featuresVolumeControl=ft.canControlVolume();ft.prototype.movingMediaElementInDOM=!rr;ft.prototype.featuresFullscreenResize=!0;ft.prototype.featuresProgressEvents=!0;ft.prototype.featuresTimeupdateEvents=!0;ft.prototype.featuresVideoFrameCallback=!!(ft.TEST_VID&&ft.TEST_VID.requestVideoFrameCallback);ft.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()}};ft.resetMediaElement=function(i){if(!i)return;const e=i.querySelectorAll("source");let t=e.length;for(;t--;)i.removeChild(e[t]);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){ft.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){ft.prototype["set"+Bn(i)]=function(e){this.el_[i]=e,e?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){ft.prototype[i]=function(){return this.el_[i]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){ft.prototype["set"+Bn(i)]=function(e){this.el_[i]=e}});["pause","load","play"].forEach(function(i){ft.prototype[i]=function(){return this.el_[i]()}});jt.withSourceHandlers(ft);ft.nativeSourceHandler={};ft.nativeSourceHandler.canPlayType=function(i){try{return ft.TEST_VID.canPlayType(i)}catch{return""}};ft.nativeSourceHandler.canHandleSource=function(i,e){if(i.type)return ft.nativeSourceHandler.canPlayType(i.type);if(i.src){const t=cL(i.src);return ft.nativeSourceHandler.canPlayType(`video/${t}`)}return""};ft.nativeSourceHandler.handleSource=function(i,e,t){e.setSrc(i.src)};ft.nativeSourceHandler.dispose=function(){};ft.registerSourceHandler(ft.nativeSourceHandler);jt.registerTech("Html5",ft);const b7=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],RM={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},FD=["tiny","xsmall","small","medium","large","xlarge","huge"],ZT={};FD.forEach(i=>{const e=i.charAt(0)==="x"?`x-${i.substring(1)}`:i;ZT[i]=`vjs-layout-${e}`});const $ge={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class an extends De{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${uo()}`,t=Object.assign(an.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=oV(this.id_),this.fsApi_=P1,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Bc(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=an.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),aL(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(wa(Xe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=qi(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new Z.DOMParser().parseFromString(Tge,"image/svg+xml");if(o.querySelector("parsererror"))ti.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new Sge(this),this.addClass("vjs-spatial-navigation-enabled")),Zv&&this.addClass("vjs-touch-enabled"),rr||this.addClass("vjs-workinghover"),an.players[this.id_]=this;const r=wD.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),ar(Xe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ar(Xe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),an.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),vge(this),Ar.names.forEach(e=>{const t=Ar[e],n=this[t.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";n?t=this.el_=e.parentNode:s||(t=this.el_=super.createEl("div"));const r=Bc(e);if(s){for(t=this.el_=e,e=this.tag=Xe.createElement("video");t.children.length;)e.appendChild(t.firstChild);av(t,"video-js")||jf(t,"video-js"),t.appendChild(e),n=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",Cl&&gE&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(l){s&&l==="class"||t.setAttribute(l,r[l]),s&&e.setAttribute(l,r[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>mV[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),Z.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=RV("vjs-styles-dimensions");const l=uh(".vjs-styles-defaults"),u=uh("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);jf(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),RD(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){ti.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(t===void 0)return this[n]||0;if(t===""||t==="auto"){this[n]=void 0,this.updateStyleEl_();return}const s=parseFloat(t);if(isNaN(s)){ti.error(`Improper value "${t}" supplied for for ${e}`);return}this[n]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Tu(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Yme(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(Z.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,n,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const r=n.split(":"),a=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),BV(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${t}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Bn(e),s=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(jt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const a={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ar.names.forEach(l=>{const u=Ar[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[s]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=jt.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(Ji(this,this.handleTechReady_),!0),$4.jsonToTextTracks(this.textTracksJson_||[],this.tech_),b7.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Bn(l)}_`](u))}),Object.keys(RM).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${RM[l]}_`].bind(this),event:u});return}this[`handleTech${RM[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&RD(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Ar.names.forEach(e=>{const t=Ar[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=$4.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&ti.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":wD}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const a=this.play();if(lv(a))return a.catch(o=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),lv(n)&&(n=n.catch(t))):e==="muted"&&!this.muted()?n=t():n=this.play(),!!lv(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,n="";typeof t!="string"&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=bge(this,t)),this.cache_.source=qi({},e,{src:t,type:n});const s=this.cache_.sources.filter(l=>l.src&&l.src===t),r=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=Bc(a[l]);r.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=r=>this.updateSourceCaches_(r);const n=this.currentSource().src,s=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==n)&&(t=()=>{}),t(s),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?ul(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Xe.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let s=Xe[this.fsApi_.fullscreenElement]===n;!s&&n.matches&&(s=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in gge)return pge(this.middleware_,this.tech_,e,t);if(e in sF)return nF(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw ti(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in mge)return dge(this.middleware_,this.tech_,e);if(e in sF)return nF(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(ti(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(ti(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(ti(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=ul){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(vE||rr);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&n&&this.load();return}const s=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||ko(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=ko(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=ko(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return HV(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,s)=>{function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){r(),n()}function o(u,f){r(),s(f)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(r,r),l.then(n,s))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function s(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){s(),t()}function a(l,u){s(),n(u)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(s,s),o.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Xe[this.fsApi_.exitFullscreen]();return e&&ul(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Xe.documentElement.style.overflow,wa(Xe,"keydown",this.boundFullWindowOnEscKey_),Xe.documentElement.style.overflow="hidden",jf(Xe.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,ar(Xe,"keydown",this.boundFullWindowOnEscKey_),Xe.documentElement.style.overflow=this.docOrigOverflow,_E(Xe.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Z.documentPictureInPicture){const e=Xe.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Pt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Z.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(MV(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",n=>{const s=n.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Xe&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(Z.documentPictureInPicture&&Z.documentPictureInPicture.window)return Z.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Xe)return Xe.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(s=>{const r=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?a.indexOf(s.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=a=>e.key.toLowerCase()==="f",muteKey:s=a=>e.key.toLowerCase()==="m",playPauseKey:r=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const a=De.getComponent("FullscreenToggle");Xe[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),De.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),De.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,s=this.options_.techOrder;n<s.length;n++){const r=s[n];let a=jt.getTech(r);if(a||(a=De.getComponent(r)),!a){ti.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,jt.getTech(o)]).filter(([o,l])=>l?l.isSupported():(ti.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(o,l,u){let f;return o.some(d=>l.some(p=>{if(f=u(d,p),f)return!0})),f};let s;const r=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?s=n(e,t,r(a)):s=n(t,e,a),s||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=jV(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),hge(this,n[0],(s,r)=>{if(this.middleware_=r,t||(this.cache_.sources=n),this.updateSourceCaches_(s),this.src_(s)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}fge(r,this.tech_)}),n.length>1){const s=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?UV(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();ul(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Tu(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),t&&t.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(lh("beforeerror").forEach(t=>{const n=t(this,e);if(!(El(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Tn(e),this.addClass("vjs-error"),ti.error(`(CODE:${this.error_.code} ${Tn.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),lh("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const s=Ji(this,this.reportUserActivity),r=function(d){(d.screenX!==t||d.screenY!==n)&&(t=d.screenX,n=d.screenY,s())},a=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},o=function(d){s(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!rr&&!zo&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let u;const f=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(f,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(s=>{s!==t&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Tu(this)&&this.trigger("languagechange"))}languages(){return qi(an.prototype.options_.languages,this.languages_)}toJSON(){const e=qi(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let s=t[n];s=qi(s),s.player=void 0,e.tracks[n]=s}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new zg(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<FD.length;n++){const s=FD[n],r=this.breakpoints_[s];if(t<=r){if(e===s)return;e&&this.removeClass(ZT[e]),this.addClass(ZT[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},$ge,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return ZT[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=qi(e);const{artist:s,artwork:r,description:a,poster:o,src:l,textTracks:u,title:f}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:j1(o)}]),n&&this.crossOrigin(n),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:f,description:a||s||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),s={src:t,textTracks:n};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:j1(s.poster)}]),s}return qi(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=Bc(e),s=n["data-setup"];if(av(e,"vjs-fill")&&(n.fill=!0),av(e,"vjs-fluid")&&(n.fluid=!0),s!==null)try{Object.assign(n,JSON.parse(s||"{}"))}catch(r){ti.error("data-setup",r)}if(Object.assign(t,n),e.hasChildNodes()){const r=e.childNodes;for(let a=0,o=r.length;a<o;a++){const l=r[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(Bc(l)):u==="track"&&t.tracks.push(Bc(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Ar.names.forEach(function(i){const e=Ar[i];an.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});an.prototype.crossorigin=an.prototype.crossOrigin;an.players={};const cy=Z.navigator;an.prototype.options_={techOrder:jt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:cy&&(cy.languages&&cy.languages[0]||cy.userLanguage||cy.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};b7.forEach(function(i){an.prototype[`handleTech${Bn(i)}_`]=function(){return this.trigger(i)}});De.registerComponent("Player",an);const X1="plugin",Lm="activePlugins_",mm={},W1=i=>mm.hasOwnProperty(i),$T=i=>W1(i)?mm[i]:void 0,T7=(i,e)=>{i[Lm]=i[Lm]||{},i[Lm][e]=!0},Y1=(i,e,t)=>{const n=(t?"before":"")+"pluginsetup";i.trigger(n,e),i.trigger(n+":"+e.name,e)},e0e=function(i,e){const t=function(){Y1(this,{name:i,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return T7(this,i),Y1(this,{name:i,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},xF=(i,e)=>(e.prototype.name=i,function(...t){Y1(this,{name:i,plugin:e,instance:null},!0);const n=new e(this,...t);return this[i]=()=>n,Y1(this,n.getEventHash()),n});class Yr{constructor(e){if(this.constructor===Yr)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),aL(this),delete this.trigger,PV(this,this.constructor.defaultState),T7(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Hg(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Lm][e]=!1,this.player=this.state=null,t[e]=xF(e,mm[e])}static isBasic(e){const t=typeof e=="string"?$T(e):e;return typeof t=="function"&&!Yr.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(W1(e))ti.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(an.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return mm[e]=t,e!==X1&&(Yr.isBasic(t)?an.prototype[e]=e0e(e,t):an.prototype[e]=xF(e,t)),t}static deregisterPlugin(e){if(e===X1)throw new Error("Cannot de-register base plugin.");W1(e)&&(delete mm[e],delete an.prototype[e])}static getPlugins(e=Object.keys(mm)){let t;return e.forEach(n=>{const s=$T(n);s&&(t=t||{},t[n]=s)}),t}static getPluginVersion(e){const t=$T(e);return t&&t.VERSION||""}}Yr.getPlugin=$T;Yr.BASE_PLUGIN_NAME=X1;Yr.registerPlugin(X1,Yr);an.prototype.usingPlugin=function(i){return!!this[Lm]&&this[Lm][i]===!0};an.prototype.hasPlugin=function(i){return!!W1(i)};function t0e(i,e){let t=!1;return function(...n){return t||ti.warn(i),t=!0,e.apply(this,n)}}function jo(i,e,t,n){return t0e(`${e} is deprecated and will be removed in ${i}.0; please use ${t} instead.`,n)}var i0e={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const S7=i=>i.indexOf("#")===0?i.slice(1):i;function ye(i,e,t){let n=ye.getPlayer(i);if(n)return e&&ti.warn(`Player "${i}" is already initialised. Options will not be applied.`),t&&n.ready(t),n;const s=typeof i=="string"?uh("#"+S7(i)):i;if(!kg(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in s?s.getRootNode()instanceof Z.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!a.contains(s))&&ti.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),lh("beforesetup").forEach(l=>{const u=l(s,qi(e));if(!El(u)||Array.isArray(u)){ti.error("please return an object in beforesetup hooks");return}e=qi(e,u)});const o=De.getComponent("Player");return n=new o(s,e,t),lh("setup").forEach(l=>l(n)),n}ye.hooks_=lu;ye.hooks=lh;ye.hook=Ome;ye.hookOnce=Pme;ye.removeHook=aV;if(Z.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Fg()){let i=uh(".vjs-styles-defaults");if(!i){i=RV("vjs-styles-defaults");const e=uh("head");e&&e.insertBefore(i,e.firstChild),BV(i,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}LD(1,ye);ye.VERSION=wD;ye.options=an.prototype.options_;ye.getPlayers=()=>an.players;ye.getPlayer=i=>{const e=an.players;let t;if(typeof i=="string"){const n=S7(i),s=e[n];if(s)return s;t=uh("#"+n)}else t=i;if(kg(t)){const{player:n,playerId:s}=t;if(n||e[s])return n||e[s]}};ye.getAllPlayers=()=>Object.keys(an.players).map(i=>an.players[i]).filter(Boolean);ye.players=an.players;ye.getComponent=De.getComponent;ye.registerComponent=(i,e)=>(jt.isTech(e)&&ti.warn(`The ${i} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),De.registerComponent.call(De,i,e));ye.getTech=jt.getTech;ye.registerTech=jt.registerTech;ye.use=cge;Object.defineProperty(ye,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ye.middleware,"TERMINATOR",{value:q1,writeable:!1,enumerable:!0});ye.browser=mV;ye.obj=Fme;ye.mergeOptions=jo(9,"videojs.mergeOptions","videojs.obj.merge",qi);ye.defineLazyProperty=jo(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",pE);ye.bind=jo(9,"videojs.bind","native Function.prototype.bind",Ji);ye.registerPlugin=Yr.registerPlugin;ye.deregisterPlugin=Yr.deregisterPlugin;ye.plugin=(i,e)=>(ti.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Yr.registerPlugin(i,e));ye.getPlugins=Yr.getPlugins;ye.getPlugin=Yr.getPlugin;ye.getPluginVersion=Yr.getPluginVersion;ye.addLanguage=function(i,e){return i=(""+i).toLowerCase(),ye.options.languages=qi(ye.options.languages,{[i]:e}),ye.options.languages[i]};ye.log=ti;ye.createLogger=oV;ye.time=$me;ye.createTimeRange=jo(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ko);ye.createTimeRanges=jo(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ko);ye.formatTime=jo(9,"videojs.formatTime","videojs.time.formatTime",cd);ye.setFormatTime=jo(9,"videojs.setFormatTime","videojs.time.setFormatTime",FV);ye.resetFormatTime=jo(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",kV);ye.parseUrl=jo(9,"videojs.parseUrl","videojs.url.parseUrl",uL);ye.isCrossOrigin=jo(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",CE);ye.EventTarget=Da;ye.any=rL;ye.on=wa;ye.one=AE;ye.off=ar;ye.trigger=Hg;ye.xhr=cG;ye.TextTrack=V_;ye.AudioTrack=VV;ye.VideoTrack=qV;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(i=>{ye[i]=function(){return ti.warn(`videojs.${i}() is deprecated; use videojs.dom.${i}() instead`),wV[i].apply(null,arguments)}});ye.computedStyle=jo(9,"videojs.computedStyle","videojs.dom.computedStyle",xg);ye.dom=wV;ye.fn=Wme;ye.num=Bge;ye.str=Qme;ye.url=lge;ye.Error=i0e;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class n0e{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(n){t.enabled_(n)}}),t}}class K1 extends ye.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new n0e(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const s=this[t];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}K1.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const i in K1.prototype.allowedEvents_)K1.prototype["on"+i]=null;var A7="4.1.0";const s0e=function(i,e){const t=i.qualityLevels,n=new K1,s=function(){n.dispose(),i.qualityLevels=t,i.off("dispose",s)};return i.on("dispose",s),i.qualityLevels=()=>n,i.qualityLevels.VERSION=A7,n},E7=function(i){return s0e(this,ye.obj.merge({},i))};ye.registerPlugin("qualityLevels",E7);E7.VERSION=A7;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const qr=oE,J1=(i,e)=>e&&e.responseURL&&i!==e.responseURL?e.responseURL:i,po=i=>ye.log.debug?ye.log.debug.bind(ye,"VHS:",`${i} >`):function(){};function Bi(...i){const e=ye.obj||ye;return(e.merge||e.mergeOptions).apply(e,i)}function Ss(...i){const e=ye.time||ye;return(e.createTimeRanges||e.createTimeRanges).apply(e,i)}function r0e(i){if(i.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<i.length;t++){const n=i.start(t),s=i.end(t);e+=`${n} --> ${s}. Duration (${s-n})
`}return e}const cl=1/30,hl=cl*3,C7=function(i,e){const t=[];let n;if(i&&i.length)for(n=0;n<i.length;n++)e(i.start(n),i.end(n))&&t.push([i.start(n),i.end(n)]);return Ss(t)},gm=function(i,e){return C7(i,function(t,n){return t-hl<=e&&n+hl>=e})},ET=function(i,e){return C7(i,function(t){return t-cl>=e})},a0e=function(i){if(i.length<2)return Ss();const e=[];for(let t=1;t<i.length;t++){const n=i.end(t-1),s=i.start(t);e.push([n,s])}return Ss(e)},o0e=function(i,e){let t=null,n=null,s=0;const r=[],a=[];if(!i||!i.length||!e||!e.length)return Ss();let o=i.length;for(;o--;)r.push({time:i.start(o),type:"start"}),r.push({time:i.end(o),type:"end"});for(o=e.length;o--;)r.push({time:e.start(o),type:"start"}),r.push({time:e.end(o),type:"end"});for(r.sort(function(l,u){return l.time-u.time}),o=0;o<r.length;o++)r[o].type==="start"?(s++,s===2&&(t=r[o].time)):r[o].type==="end"&&(s--,s===1&&(n=r[o].time)),t!==null&&n!==null&&(a.push([t,n]),t=null,n=null);return Ss(a)},M7=i=>{const e=[];if(!i||!i.length)return"";for(let t=0;t<i.length;t++)e.push(i.start(t)+" => "+i.end(t));return e.join(", ")},l0e=function(i,e,t=1){return((i.length?i.end(i.length-1):0)-e)/t},Lf=i=>{const e=[];for(let t=0;t<i.length;t++)e.push({start:i.start(t),end:i.end(t)});return e},u0e=function(i,e){if(i===e)return!1;if(!i&&e||!e&&i||i.length!==e.length)return!0;for(let t=0;t<i.length;t++)if(i.start(t)!==e.start(t)||i.end(t)!==e.end(t))return!0;return!1},BM=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},CL=function(i,e){let t=0;if(!i||!i.length)return t;for(let n=0;n<i.length;n++){const s=i.start(n),r=i.end(n);if(!(e>r)){if(e>s&&e<=r){t+=r-e;continue}t+=r-s}}return t},ML=(i,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=i.partTargetDuration)}),t},kD=i=>(i.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(s,r){e.push({duration:s.duration,segmentIndex:n,partIndex:r,part:s,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),w7=i=>{const e=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return e&&e.parts||[]},D7=({preloadSegment:i})=>{if(!i)return;const{parts:e,preloadHints:t}=i;let n=(t||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},R7=(i,e)=>{if(e.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const t=w7(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},c0e=function(i,e){let t=0,n=e-i.mediaSequence,s=i.segments[n];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;n--;){if(s=i.segments[n],typeof s.end<"u")return{result:t+s.end,precise:!0};if(t+=ML(i,s),typeof s.start<"u")return{result:t+s.start,precise:!0}}return{result:t,precise:!1}},h0e=function(i,e){let t=0,n,s=e-i.mediaSequence;for(;s<i.segments.length;s++){if(n=i.segments[s],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=ML(i,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},B7=function(i,e,t){if(typeof e>"u"&&(e=i.mediaSequence+i.segments.length),e<i.mediaSequence)return 0;const n=c0e(i,e);if(n.precise)return n.result;const s=h0e(i,e);return s.precise?s.result:n.result+t},L7=function(i,e,t){if(!i)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return Z.Infinity}return B7(i,e,t)},uv=function({defaultDuration:i,durationList:e,startIndex:t,endIndex:n}){let s=0;if(t>n&&([t,n]=[n,t]),t<0){for(let r=t;r<Math.min(0,n);r++)s+=i;t=0}for(let r=t;r<n;r++)s+=e[r].duration;return s},I7=function(i,e,t,n){if(!i||!i.segments)return null;if(i.endList)return L7(i);if(e===null)return null;e=e||0;let s=B7(i,i.mediaSequence+i.segments.length,e);return t&&(n=typeof n=="number"?n:R7(null,i),s-=n),Math.max(0,s)},f0e=function(i,e,t){const s=e||0;let r=I7(i,e,!0,t);return r===null?Ss():(r<s&&(r=s),Ss(s,r))},d0e=function({playlist:i,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:s,exactManifestTimings:r}){let a=e-s;const o=kD(i);let l=0;for(let u=0;u<o.length;u++){const f=o[u];if(t===f.segmentIndex&&!(typeof n=="number"&&typeof f.partIndex=="number"&&n!==f.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const f=o[u];if(a+=f.duration,r){if(a<0)continue}else if(a+cl<=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:s-uv({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=i.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const f=o[u];a-=f.duration;const d=f.duration>cl,p=a===0,m=d&&a+cl>=0;if(!((p||m)&&u!==o.length-1)){if(r){if(a>0)continue}else if(a-cl>=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:s+uv({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},O7=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},wL=function(i){return i.excludeUntil&&i.excludeUntil===1/0},RE=function(i){const e=O7(i);return!i.disabled&&!e},p0e=function(i){return i.disabled},m0e=function(i){for(let e=0;e<i.segments.length;e++)if(i.segments[e].key)return!0;return!1},P7=function(i,e){return e.attributes&&e.attributes[i]},g0e=function(i,e,t,n=0){return P7("BANDWIDTH",t)?(i*t.attributes.BANDWIDTH-n*8)/e:NaN},HD=(i,e)=>{if(i.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(n=>RE(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},DL=(i,e)=>!i&&!e||!i&&e||i&&!e?!1:!!(i===e||i.id&&e.id&&i.id===e.id||i.resolvedUri&&e.resolvedUri&&i.resolvedUri===e.resolvedUri||i.uri&&e.uri&&i.uri===e.uri),bF=function(i,e){const t=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let n=!1;for(const s in t){for(const r in t[s])if(n=e(t[s][r]),n)break;if(n)break}return!!n},W_=i=>{if(!i||!i.playlists||!i.playlists.length)return bF(i,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<i.playlists.length;e++){const t=i.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(r=>gG(r))||bF(i,r=>DL(t,r))))return!1}return!0};var Xr={liveEdgeDelay:R7,duration:L7,seekable:f0e,getMediaInfoForTime:d0e,isEnabled:RE,isDisabled:p0e,isExcluded:O7,isIncompatible:wL,playlistEnd:I7,isAes:m0e,hasAttribute:P7,estimateSegmentRequestTime:g0e,isLowestEnabledRendition:HD,isAudioOnly:W_,playlistMatch:DL,segmentDurationWithParts:ML};const{log:U7}=ye,Im=(i,e)=>`${i}-${e}`,N7=(i,e,t)=>`placeholder-uri-${i}-${e}-${t}`,y0e=({onwarn:i,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:s=[],llhls:r})=>{const a=new Ide;i&&a.on("warn",i),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),s.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(f){u.hasOwnProperty(f)&&delete u[f]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((f,d)=>Math.max(f,d.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=w7(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((f,d)=>Math.max(f,d.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${u}`}),U7.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},qg=(i,e)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(i.mediaGroups[t])for(const n in i.mediaGroups[t])for(const s in i.mediaGroups[t][n]){const r=i.mediaGroups[t][n][s];e(r,t,n,s)}})},F7=({playlist:i,uri:e,id:t})=>{i.id=t,i.playlistErrors_=0,e&&(i.uri=e),i.attributes=i.attributes||{}},v0e=i=>{let e=i.playlists.length;for(;e--;){const t=i.playlists[e];F7({playlist:t,id:Im(e,t.uri)}),t.resolvedUri=qr(i.uri,t.uri),i.playlists[t.id]=t,i.playlists[t.uri]=t,t.attributes.BANDWIDTH||U7.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},_0e=i=>{qg(i,e=>{e.uri&&(e.resolvedUri=qr(i.uri,e.uri))})},x0e=(i,e)=>{const t=Im(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Z.location.href,resolvedUri:Z.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},k7=(i,e,t=N7)=>{i.uri=e;for(let s=0;s<i.playlists.length;s++)if(!i.playlists[s].uri){const r=`placeholder-uri-${s}`;i.playlists[s].uri=r}const n=W_(i);qg(i,(s,r,a,o)=>{if(!s.playlists||!s.playlists.length){if(n&&r==="AUDIO"&&!s.uri)for(let l=0;l<i.playlists.length;l++){const u=i.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}s.playlists=[Ki({},s)]}s.playlists.forEach(function(l,u){const f=t(r,a,o,l),d=Im(u,f);l.uri?l.resolvedUri=l.resolvedUri||qr(i.uri,l.uri):(l.uri=u===0?f:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},i.playlists[l.id]=l,i.playlists[l.uri]=l})}),v0e(i),_0e(i)};class TF{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,s)=>{if(!this.processedDateRanges_.has(s)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const r=e[n.class].push(n);n.classListIndex=r-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const s=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&s[n.classListIndex+1]?n.endTime=s[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,s)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const H7=22,Yf=({requestType:i,request:e,error:t,parseFailure:n})=>{const s=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:i},o=s&&!r||n;if(t&&r)a.error=Ki({},t),a.errorType=ye.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=ye.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=ye.Error.NetworkRequestTimeout;else if(o){const l=n?ye.Error.NetworkBodyParserFailed:ye.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},b0e=po("CodecUtils"),z7=function(i){const e=i.attributes||{};if(e.CODECS)return rl(e.CODECS)},G7=(i,e)=>{const t=e.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&t.AUDIO&&i.mediaGroups.AUDIO[t.AUDIO]},T0e=(i,e)=>{if(!G7(i,e))return!0;const t=e.attributes||{},n=i.mediaGroups.AUDIO[t.AUDIO];for(const s in n)if(!n[s].uri&&!n[s].playlists)return!0;return!1},t_=function(i){const e={};return i.forEach(({mediaType:t,type:n,details:s})=>{e[t]=e[t]||[],e[t].push(mG(`${n}${s}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){b0e(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},SF=function(i){let e=0;return i.audio&&e++,i.video&&e++,e},cv=function(i,e){const t=e.attributes||{},n=t_(z7(e)||[]);if(G7(i,e)&&!n.audio&&!T0e(i,e)){const s=t_(Pde(i,t.AUDIO)||[]);s.audio&&(n.audio=s.audio)}return n},{EventTarget:S0e}=ye,A0e=(i,e)=>{if(e.endList||!e.serverControl)return i;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let s=e.mediaSequence+e.segments.length;if(n){const r=n.parts||[],a=D7(e)-1;a>-1&&a!==r.length-1&&(t._HLS_part=a),(a>-1||r.length)&&s--}t._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new Z.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){t.hasOwnProperty(s)&&n.searchParams.set(s,t[s])}),i=n.toString()}return i},E0e=(i,e)=>{if(!i)return e;const t=Bi(i,e);if(i.preloadHints&&!e.preloadHints&&delete t.preloadHints,i.parts&&!e.parts)delete t.parts;else if(i.parts&&e.parts)for(let n=0;n<e.parts.length;n++)i.parts&&i.parts[n]&&(t.parts[n]=Bi(i.parts[n],e.parts[n]));return!i.skipped&&e.skipped&&(t.skipped=!1),i.preload&&!e.preload&&(t.preload=!1),t},C0e=(i,e,t)=>{const n=i.slice(),s=e.slice();t=t||0;const r=[];let a;for(let o=0;o<s.length;o++){const l=n[o+t],u=s[o];l?(a=l.map||a,r.push(E0e(l,u))):(a&&!u.map&&(u.map=a),r.push(u))}return r},V7=(i,e)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=qr(e,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=qr(e,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=qr(e,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=qr(e,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=qr(e,t.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=qr(e,t.uri))})},q7=function(i){const e=i.segments||[],t=i.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=i.targetDuration,t.preload=!0,e.push(t)}return e},j7=(i,e)=>i===e||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.endList===e.endList&&i.mediaSequence===e.mediaSequence&&i.preloadSegment===e.preloadSegment,zD=(i,e,t=j7)=>{const n=Bi(i,{}),s=n.playlists[e.id];if(!s||t(s,e))return null;e.segments=q7(e);const r=Bi(s,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}r.segments=C0e(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}r.segments.forEach(a=>{V7(a,r.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=r);return n.playlists[e.id]=r,n.playlists[e.uri]=r,qg(i,(a,o,l,u)=>{if(a.playlists)for(let f=0;f<a.playlists.length;f++)e.id===a.playlists[f].id&&(a.playlists[f]=r)}),n},GD=(i,e)=>{const t=i.segments||[],n=t[t.length-1],s=n&&n.parts&&n.parts[n.parts.length-1],r=s&&s.duration||n&&n.duration;return e&&r?r*1e3:(i.partTargetDuration||i.targetDuration||10)*500},AF=(i,e,t)=>{if(!i)return;const n=[];return i.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:r,RESOLUTION:a,CODECS:o}=s.attributes;n.push({id:s.id,bandwidth:r,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:n}};class ym extends S0e{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=po("PlaylistLoader");const{withCredentials:s=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=s,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new TF,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=qr(this.main.uri,e.uri);this.llhls&&(t=A0e(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:s,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Yf({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const n=y0e({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!n.playlists||!n.playlists.length||this.excludeAudioOnlyVariants(n.playlists),n}catch(n){this.error=n,this.error.metadata={errorType:ye.Error.StreamingHlsPlaylistParserError,error:n}}}excludeAudioOnlyVariants(e){const t=n=>{const s=n.attributes||{},{width:r,height:a}=s.RESOLUTION||{};if(r&&a)return!0;const o=z7(n)||[];return!!t_(o).video};e.some(t)&&e.forEach(n=>{t(n)||(n.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:s}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:r});const a=t||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),F7({playlist:a,uri:n,id:s});const o=zD(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(GD(this.media(),!!o)),r.parsedPlaylist=AF(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Z.clearTimeout(this.mediaUpdateTimeout),Z.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new TF,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Z.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Z.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,s=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(GD(e,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=J1(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Z.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=Z.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=Z.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:Yf({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=J1(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const s=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=AF(s.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,k7(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=q7(n),n.segments.forEach(s=>{V7(s,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||Z.location.href;this.main=x0e(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,s=e.ID;let r=n.playlists.length;for(;r--;){const a=n.playlists[r];if(a.attributes["PATHWAY-ID"]===s){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),f=Im(s,u),d=this.createCloneAttributes_(s,a.attributes),p=this.createClonePlaylist_(a,f,e,d);n.playlists[r]=p,n.playlists[f]=p,n.playlists[u]=p}else n.playlists.splice(r,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!n.mediaGroups[r]||!n.mediaGroups[r][s])){for(const a in n.mediaGroups[r])if(a===s){for(const o in n.mediaGroups[r][a])n.mediaGroups[r][a][o].playlists.forEach((u,f)=>{const d=n.playlists[u.id],p=d.id,m=d.resolvedUri;delete n.playlists[p],delete n.playlists[m]});delete n.mediaGroups[r][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,s=n.playlists.length,r=this.createCloneURI_(t.resolvedUri,e),a=Im(e.ID,r),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);n.playlists[s]=l,n.playlists[a]=l,n.playlists[r]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||s.mediaGroups[r][t]))for(const a in s.mediaGroups[r]){if(a===n)s.mediaGroups[r][t]={};else continue;for(const o in s.mediaGroups[r][a]){const l=s.mediaGroups[r][a][o];s.mediaGroups[r][t][o]=Ki({},l);const u=s.mediaGroups[r][t][o],f=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=f,u.uri=f,u.playlists=[],l.playlists.forEach((d,p)=>{const m=s.playlists[d.id],_=N7(r,t,o),x=Im(t,_);if(m&&!s.playlists[x]){const b=this.createClonePlaylist_(m,x,e),v=b.resolvedUri;s.playlists[x]=b,s.playlists[v]=b}u.playlists[p]=this.createClonePlaylist_(d,x,e)})}}})}createClonePlaylist_(e,t,n,s){const r=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:r,uri:r,id:t};return e.segments&&(a.segments=[]),s&&(a.attributes=s),Bi(e,a)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const s=t["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))n.searchParams.set(r,s[r]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{t[s]&&(n[s]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes.keyId;s&&t.add(s.toLowerCase())}return t}}}const VD=function(i,e,t,n){const s=i.responseType==="arraybuffer"?i.response:i.responseText;!e&&s&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=s.byteLength||s.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),t.headers&&(i.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(i.timedout=!0),!e&&!i.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(i&&(s||i.responseText)))),n(e,i)},M0e=(i,e)=>{if(!i||!i.size)return;let t=e;return i.forEach(n=>{t=n(t)}),t},w0e=(i,e,t,n)=>{!i||!i.size||i.forEach(s=>{s(e,t,n)})},X7=function(){const i=function e(t,n){t=Bi({timeout:45e3},t);const s=e.beforeRequest||ye.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||ye.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||ye.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(ye.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const o=ye.Vhs.xhr.original===!0?ye.xhr:ye.Vhs.xhr,l=M0e(r,t);r.delete(s);const u=o(l||t,function(d,p){return w0e(a,u,d,p),VD(u,d,p,n)}),f=u.abort;return u.abort=function(){return u.aborted=!0,f.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return i.original=!0,i},D0e=function(i){let e;const t=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=Z.BigInt(i.offset)+Z.BigInt(i.length)-Z.BigInt(1):e=i.offset+i.length-1,"bytes="+t+"-"+e},qD=function(i){const e={};return i.byterange&&(e.Range=D0e(i.byterange)),e},R0e=function(i,e){return i.start(e)+"-"+i.end(e)},B0e=function(i,e){const t=i.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},L0e=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},W7=function(i){const e={};return Object.keys(i).forEach(t=>{const n=i[t];vG(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},Q1=function(i){const e=i.byterange||{length:1/0,offset:0};return[e.length,e.offset,i.resolvedUri].join(",")},Y7=function(i){return i.resolvedUri},K7=i=>{const e=Array.prototype.slice.call(i),t=16;let n="",s,r;for(let a=0;a<e.length/t;a++)s=e.slice(a*t,a*t+t).map(B0e).join(""),r=e.slice(a*t,a*t+t).map(L0e).join(""),n+=s+" "+r+`
`;return n},I0e=({bytes:i})=>K7(i),O0e=i=>{let e="",t;for(t=0;t<i.length;t++)e+=R0e(i,t)+" ";return e};var P0e=Object.freeze({__proto__:null,createTransferableMessage:W7,initSegmentId:Q1,segmentKeyId:Y7,hexDump:K7,tagDump:I0e,textRanges:O0e});const J7=.25,U0e=(i,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+t,r=i-s;return new Date(e.dateTimeObject.getTime()+r*1e3)},N0e=i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,F0e=(i,e)=>{let t;try{t=new Date(i)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const s=e.segments[e.segments.length-1],r=s.dateTimeObject,a=s.videoTimingInfo?N0e(s.videoTimingInfo):s.duration+s.duration*J7,o=new Date(r.getTime()+a*1e3);return t>o?null:(t>new Date(r)&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Xr.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},k0e=(i,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let r=0;r<e.segments.length&&(n=e.segments[r],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(i<=t));r++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>t){if(i>t+s.duration*J7)return null;n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},H0e=(i,e)=>{let t,n;try{t=new Date(i),n=new Date(e)}catch{}const s=t.getTime();return(n.getTime()-s)/1e3},z0e=i=>{if(!i.segments||i.segments.length===0)return!1;for(let e=0;e<i.segments.length;e++)if(!i.segments[e].dateTimeObject)return!1;return!0},G0e=({playlist:i,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=k0e(e,i);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const s={mediaSeconds:e},r=U0e(e,n.segment);return r&&(s.programDateTime=r.toISOString()),t(null,s)},Q7=({programTime:i,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:s=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!z0e(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=F0e(i,e);if(!o)return a({message:`${i} was not found in the stream`});const l=o.segment,u=H0e(l.dateTimeObject,i);if(o.type==="estimate"){if(t===0)return a({message:`${i} is not buffered yet. Try again`});n(o.estimatedStart+u),r.one("seeked",()=>{Q7({programTime:i,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:s,tech:r,callback:a})});return}const f=l.start+u,d=()=>a(null,r.currentTime());r.one("seeked",d),s&&r.pause(),n(f)},LM=(i,e)=>{if(i.readyState===4)return e()},V0e=(i,e,t,n)=>{let s=[],r,a=!1;const o=function(d,p,m,_){return p.abort(),a=!0,t(d,p,m,_)},l=function(d,p){if(a)return;if(d)return d.metadata=Yf({requestType:n,request:p,error:d}),o(d,p,"",s);const m=p.responseText.substring(s&&s.byteLength||0,p.responseText.length);if(s=jde(s,_G(m,!0)),r=r||Ay(s),s.length<10||r&&s.length<r+2)return LM(p,()=>o(d,p,"",s));const _=J3(s);return _==="ts"&&s.length<188?LM(p,()=>o(d,p,"",s)):!_&&s.length<376?LM(p,()=>o(d,p,"",s)):o(null,p,_,s)},f=e({uri:i,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:p,loaded:m}){return VD(d,null,{statusCode:d.status},l)})}},function(d,p){return VD(f,d,p,l)});return f},{EventTarget:q0e}=ye,EF=function(i,e){if(!j7(i,e)||i.sidx&&e.sidx&&(i.sidx.offset!==e.sidx.offset||i.sidx.length!==e.sidx.length))return!1;if(!i.sidx&&e.sidx||i.sidx&&!e.sidx||i.segments&&!e.segments||!i.segments&&e.segments)return!1;if(!i.segments&&!e.segments)return!0;for(let t=0;t<i.segments.length;t++){const n=i.segments[t],s=e.segments[t];if(n.uri!==s.uri)return!1;if(!n.byterange&&!s.byterange)continue;const r=n.byterange,a=s.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},j0e=(i,e,t,n)=>{const s=n.attributes.NAME||t;return`placeholder-uri-${i}-${e}-${s}`},X0e=({mainXml:i,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:s})=>{const r=fme(i,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:s});return k7(r,e,j0e),r},W0e=(i,e)=>{qg(i,(t,n,s,r)=>{(!e.mediaGroups[n][s]||!(r in e.mediaGroups[n][s]))&&delete i.mediaGroups[n][s][r]})},Y0e=(i,e,t)=>{let n=!0,s=Bi(i,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const a=e.playlists[r];if(a.sidx){const l=hE(a.sidx);t&&t[l]&&t[l].sidx&&W3(a,t[l].sidx,a.sidx.resolvedUri)}const o=zD(s,a,EF);o&&(s=o,n=!1)}return qg(e,(r,a,o,l)=>{if(r.playlists&&r.playlists.length){const u=r.playlists[0].id,f=zD(s,r.playlists[0],EF);f&&(s=f,l in s.mediaGroups[a][o]||(s.mediaGroups[a][o][l]=r),s.mediaGroups[a][o][l].playlists[0]=s.playlists[u],n=!1)}}),W0e(s,e),e.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(n=!1),n?null:s},K0e=(i,e)=>(!i.map&&!e.map||!!(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length))&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length,CF=(i,e)=>{const t={};for(const n in i){const r=i[n].sidx;if(r){const a=hE(r);if(!e[a])break;const o=e[a].sidxInfo;K0e(o,r)&&(t[a]=e[a])}}return t},J0e=(i,e)=>{let n=CF(i.playlists,e);return qg(i,(s,r,a,o)=>{if(s.playlists&&s.playlists.length){const l=s.playlists;n=Bi(n,CF(l,e))}}),n};class jD extends q0e{constructor(e,t,n={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=po("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const s=e.sidx&&hE(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){Z.clearTimeout(this.mediaRequest_),this.mediaRequest_=Z.setTimeout(()=>n(!1),0);return}const r=J1(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const f=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let p;try{p=vme(Rt(u.response).subarray(8))}catch(m){m.metadata=Yf({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(m,u,t);return}return f[s]={sidxInfo:e.sidx,sidx:p},W3(e,p,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=V0e(r,this.vhs_.xhr,(l,u,f,d)=>{if(l)return a(l,u);if(!f||f!=="mp4"){const _=f||"unknown";return a({status:u.status,message:`Unsupported ${_} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:p,length:m}=e.sidx.byterange;if(d.length>=m+p)return a(l,{response:d.subarray(p,p+m),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:qD({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Z.clearTimeout(this.minimumUpdatePeriodTimeout_),Z.clearTimeout(this.mediaRequest_),Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,s=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,Z.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Z.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,Z.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Z.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){Z.clearTimeout(this.mediaRequest_),this.mediaRequest_=Z.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,s)=>{if(n){const{requestType:a}=s;n.metadata=Yf({requestType:a,request:s,error:n})}if(this.requestErrored_(n,s)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const r=s.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=J1(this.mainPlaylistLoader_.srcUrl,s),r){this.handleMain_(),this.syncClientServerClock_(()=>e(s,r));return}return e(s,r)})}syncClientServerClock_(e){const t=dme(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:qr(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,s)=>{if(!this.request)return;if(n){const{requestType:a}=s;return this.error.metadata=Yf({requestType:a,request:s,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;t.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(s.responseHeaders.date):r=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){Z.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=X0e({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:ye.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(n=Y0e(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:r,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:r,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Z.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Z.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=J0e(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=Z.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},GD(this.media(),!!n)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes["cenc:default_KID"];s&&t.add(s.replace(/-/g,"").toLowerCase())}return t}}}var _s={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Q0e=i=>{const e=new Uint8Array(new ArrayBuffer(i.length));for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e.buffer},Z7=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},Z0e=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(i),URL.createObjectURL(t.getBlob())}},$7=function(i){return function(){const e=Z0e(i),t=Z7(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},eq=function(i){return`var browserWorkerPolyFill = ${Z7.toString()};
browserWorkerPolyFill(self);
`+i},tq=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},$0e=eq(tq(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var y={};this.on=function(E,C){y[E]||(y[E]=[]),y[E]=y[E].concat(C)},this.off=function(E,C){var M;return y[E]?(M=y[E].indexOf(C),y[E]=y[E].slice(),y[E].splice(M,1),M>-1):!1},this.trigger=function(E){var C,M,R,O;if(C=y[E],!!C)if(arguments.length===2)for(R=C.length,M=0;M<R;++M)C[M].call(this,arguments[1]);else{for(O=[],M=arguments.length,M=1;M<arguments.length;++M)O.push(arguments[M]);for(R=C.length,M=0;M<R;++M)C[M].apply(this,O)}},this.dispose=function(){y={}}}};e.prototype.pipe=function(y){return this.on("data",function(E){y.push(E)}),this.on("done",function(E){y.flush(E)}),this.on("partialdone",function(E){y.partialFlush(E)}),this.on("endedtimeline",function(E){y.endTimeline(E)}),this.on("reset",function(E){y.reset(E)}),y},e.prototype.push=function(y){this.trigger("data",y)},e.prototype.flush=function(y){this.trigger("done",y)},e.prototype.partialFlush=function(y){this.trigger("partialdone",y)},e.prototype.endTimeline=function(y){this.trigger("endedtimeline",y)},e.prototype.reset=function(y){this.trigger("reset",y)};var t=e,n=Math.pow(2,32),s=function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C;return E.getBigUint64?(C=E.getBigUint64(0),C<Number.MAX_SAFE_INTEGER?Number(C):C):E.getUint32(0)*n+E.getUint32(4)},r={getUint64:s,MAX_UINT32:n},a=r.MAX_UINT32,o,l,u,f,d,p,m,_,x,b,v,T,A,w,B,I,P,F,N,U,H,re,J,ae,ce,j,Q,$,pe,Se,Le,qe,ht,me,Fe,nt;(function(){var y;if(J={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(y in J)J.hasOwnProperty(y)&&(J[y]=[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]);ae=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),j=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ce=new Uint8Array([0,0,0,1]),Q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),$=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),pe={video:Q,audio:$},qe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Le=new Uint8Array([0,0,0,0,0,0,0,0]),ht=new Uint8Array([0,0,0,0,0,0,0,0]),me=ht,Fe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),nt=ht,Se=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(y){var E=[],C=0,M,R,O;for(M=1;M<arguments.length;M++)E.push(arguments[M]);for(M=E.length;M--;)C+=E[M].byteLength;for(R=new Uint8Array(C+8),O=new DataView(R.buffer,R.byteOffset,R.byteLength),O.setUint32(0,R.byteLength),R.set(y,4),M=0,C=8;M<E.length;M++)R.set(E[M],C),C+=E[M].byteLength;return R},l=function(){return o(J.dinf,o(J.dref,qe))},u=function(y){return o(J.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,y.audioobjecttype<<3|y.samplingfrequencyindex>>>1,y.samplingfrequencyindex<<7|y.channelcount<<3,6,1,2]))},f=function(){return o(J.ftyp,ae,ce,ae,j)},I=function(y){return o(J.hdlr,pe[y])},d=function(y){return o(J.mdat,y)},B=function(y){var E=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,y.duration>>>24&255,y.duration>>>16&255,y.duration>>>8&255,y.duration&255,85,196,0,0]);return y.samplerate&&(E[12]=y.samplerate>>>24&255,E[13]=y.samplerate>>>16&255,E[14]=y.samplerate>>>8&255,E[15]=y.samplerate&255),o(J.mdhd,E)},w=function(y){return o(J.mdia,B(y),I(y.type),m(y))},p=function(y){return o(J.mfhd,new Uint8Array([0,0,0,0,(y&4278190080)>>24,(y&16711680)>>16,(y&65280)>>8,y&255]))},m=function(y){return o(J.minf,y.type==="video"?o(J.vmhd,Se):o(J.smhd,Le),l(),F(y))},_=function(y,E){for(var C=[],M=E.length;M--;)C[M]=U(E[M]);return o.apply(null,[J.moof,p(y)].concat(C))},x=function(y){for(var E=y.length,C=[];E--;)C[E]=T(y[E]);return o.apply(null,[J.moov,v(4294967295)].concat(C).concat(b(y)))},b=function(y){for(var E=y.length,C=[];E--;)C[E]=H(y[E]);return o.apply(null,[J.mvex].concat(C))},v=function(y){var E=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(y&4278190080)>>24,(y&16711680)>>16,(y&65280)>>8,y&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(J.mvhd,E)},P=function(y){var E=y.samples||[],C=new Uint8Array(4+E.length),M,R;for(R=0;R<E.length;R++)M=E[R].flags,C[R+4]=M.dependsOn<<4|M.isDependedOn<<2|M.hasRedundancy;return o(J.sdtp,C)},F=function(y){return o(J.stbl,N(y),o(J.stts,nt),o(J.stsc,me),o(J.stsz,Fe),o(J.stco,ht))},function(){var y,E;N=function(C){return o(J.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),C.type==="video"?y(C):E(C))},y=function(C){var M=C.sps||[],R=C.pps||[],O=[],G=[],q,K;for(q=0;q<M.length;q++)O.push((M[q].byteLength&65280)>>>8),O.push(M[q].byteLength&255),O=O.concat(Array.prototype.slice.call(M[q]));for(q=0;q<R.length;q++)G.push((R[q].byteLength&65280)>>>8),G.push(R[q].byteLength&255),G=G.concat(Array.prototype.slice.call(R[q]));if(K=[J.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(C.width&65280)>>8,C.width&255,(C.height&65280)>>8,C.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(J.avcC,new Uint8Array([1,C.profileIdc,C.profileCompatibility,C.levelIdc,255].concat([M.length],O,[R.length],G))),o(J.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],C.sarRatio){var Y=C.sarRatio[0],le=C.sarRatio[1];K.push(o(J.pasp,new Uint8Array([(Y&4278190080)>>24,(Y&16711680)>>16,(Y&65280)>>8,Y&255,(le&4278190080)>>24,(le&16711680)>>16,(le&65280)>>8,le&255])))}return o.apply(null,K)},E=function(C){return o(J.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(C.channelcount&65280)>>8,C.channelcount&255,(C.samplesize&65280)>>8,C.samplesize&255,0,0,0,0,(C.samplerate&65280)>>8,C.samplerate&255,0,0]),u(C))}}(),A=function(y){var E=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(y.id&4278190080)>>24,(y.id&16711680)>>16,(y.id&65280)>>8,y.id&255,0,0,0,0,(y.duration&4278190080)>>24,(y.duration&16711680)>>16,(y.duration&65280)>>8,y.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(y.width&65280)>>8,y.width&255,0,0,(y.height&65280)>>8,y.height&255,0,0]);return o(J.tkhd,E)},U=function(y){var E,C,M,R,O,G,q;return E=o(J.tfhd,new Uint8Array([0,0,0,58,(y.id&4278190080)>>24,(y.id&16711680)>>16,(y.id&65280)>>8,y.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),G=Math.floor(y.baseMediaDecodeTime/a),q=Math.floor(y.baseMediaDecodeTime%a),C=o(J.tfdt,new Uint8Array([1,0,0,0,G>>>24&255,G>>>16&255,G>>>8&255,G&255,q>>>24&255,q>>>16&255,q>>>8&255,q&255])),O=32+20+8+16+8+8,y.type==="audio"?(M=re(y,O),o(J.traf,E,C,M)):(R=P(y),M=re(y,R.length+O),o(J.traf,E,C,M,R))},T=function(y){return y.duration=y.duration||4294967295,o(J.trak,A(y),w(y))},H=function(y){var E=new Uint8Array([0,0,0,0,(y.id&4278190080)>>24,(y.id&16711680)>>16,(y.id&65280)>>8,y.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return y.type!=="video"&&(E[E.length-1]=0),o(J.trex,E)},function(){var y,E,C;C=function(M,R){var O=0,G=0,q=0,K=0;return M.length&&(M[0].duration!==void 0&&(O=1),M[0].size!==void 0&&(G=2),M[0].flags!==void 0&&(q=4),M[0].compositionTimeOffset!==void 0&&(K=8)),[0,0,O|G|q|K,1,(M.length&4278190080)>>>24,(M.length&16711680)>>>16,(M.length&65280)>>>8,M.length&255,(R&4278190080)>>>24,(R&16711680)>>>16,(R&65280)>>>8,R&255]},E=function(M,R){var O,G,q,K,Y,le;for(K=M.samples||[],R+=8+12+16*K.length,q=C(K,R),G=new Uint8Array(q.length+K.length*16),G.set(q),O=q.length,le=0;le<K.length;le++)Y=K[le],G[O++]=(Y.duration&4278190080)>>>24,G[O++]=(Y.duration&16711680)>>>16,G[O++]=(Y.duration&65280)>>>8,G[O++]=Y.duration&255,G[O++]=(Y.size&4278190080)>>>24,G[O++]=(Y.size&16711680)>>>16,G[O++]=(Y.size&65280)>>>8,G[O++]=Y.size&255,G[O++]=Y.flags.isLeading<<2|Y.flags.dependsOn,G[O++]=Y.flags.isDependedOn<<6|Y.flags.hasRedundancy<<4|Y.flags.paddingValue<<1|Y.flags.isNonSyncSample,G[O++]=Y.flags.degradationPriority&61440,G[O++]=Y.flags.degradationPriority&15,G[O++]=(Y.compositionTimeOffset&4278190080)>>>24,G[O++]=(Y.compositionTimeOffset&16711680)>>>16,G[O++]=(Y.compositionTimeOffset&65280)>>>8,G[O++]=Y.compositionTimeOffset&255;return o(J.trun,G)},y=function(M,R){var O,G,q,K,Y,le;for(K=M.samples||[],R+=8+12+8*K.length,q=C(K,R),O=new Uint8Array(q.length+K.length*8),O.set(q),G=q.length,le=0;le<K.length;le++)Y=K[le],O[G++]=(Y.duration&4278190080)>>>24,O[G++]=(Y.duration&16711680)>>>16,O[G++]=(Y.duration&65280)>>>8,O[G++]=Y.duration&255,O[G++]=(Y.size&4278190080)>>>24,O[G++]=(Y.size&16711680)>>>16,O[G++]=(Y.size&65280)>>>8,O[G++]=Y.size&255;return o(J.trun,O)},re=function(M,R){return M.type==="audio"?y(M,R):E(M,R)}}();var Qe={ftyp:f,mdat:d,moof:_,moov:x,initSegment:function(y){var E=f(),C=x(y),M;return M=new Uint8Array(E.byteLength+C.byteLength),M.set(E),M.set(C,E.byteLength),M}},gt=function(y){var E,C,M=[],R=[];for(R.byteLength=0,R.nalCount=0,R.duration=0,M.byteLength=0,E=0;E<y.length;E++)C=y[E],C.nalUnitType==="access_unit_delimiter_rbsp"?(M.length&&(M.duration=C.dts-M.dts,R.byteLength+=M.byteLength,R.nalCount+=M.length,R.duration+=M.duration,R.push(M)),M=[C],M.byteLength=C.data.byteLength,M.pts=C.pts,M.dts=C.dts):(C.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(M.keyFrame=!0),M.duration=C.dts-M.dts,M.byteLength+=C.data.byteLength,M.push(C));return R.length&&(!M.duration||M.duration<=0)&&(M.duration=R[R.length-1].duration),R.byteLength+=M.byteLength,R.nalCount+=M.length,R.duration+=M.duration,R.push(M),R},Gt=function(y){var E,C,M=[],R=[];for(M.byteLength=0,M.nalCount=0,M.duration=0,M.pts=y[0].pts,M.dts=y[0].dts,R.byteLength=0,R.nalCount=0,R.duration=0,R.pts=y[0].pts,R.dts=y[0].dts,E=0;E<y.length;E++)C=y[E],C.keyFrame?(M.length&&(R.push(M),R.byteLength+=M.byteLength,R.nalCount+=M.nalCount,R.duration+=M.duration),M=[C],M.nalCount=C.length,M.byteLength=C.byteLength,M.pts=C.pts,M.dts=C.dts,M.duration=C.duration):(M.duration+=C.duration,M.nalCount+=C.length,M.byteLength+=C.byteLength,M.push(C));return R.length&&M.duration<=0&&(M.duration=R[R.length-1].duration),R.byteLength+=M.byteLength,R.nalCount+=M.nalCount,R.duration+=M.duration,R.push(M),R},dt=function(y){var E;return!y[0][0].keyFrame&&y.length>1&&(E=y.shift(),y.byteLength-=E.byteLength,y.nalCount-=E.nalCount,y[0][0].dts=E.dts,y[0][0].pts=E.pts,y[0][0].duration+=E.duration),y},yt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ut=function(y,E){var C=yt();return C.dataOffset=E,C.compositionTimeOffset=y.pts-y.dts,C.duration=y.duration,C.size=4*y.length,C.size+=y.byteLength,y.keyFrame&&(C.flags.dependsOn=2,C.flags.isNonSyncSample=0),C},Ct=function(y,E){var C,M,R,O,G,q=E||0,K=[];for(C=0;C<y.length;C++)for(O=y[C],M=0;M<O.length;M++)G=O[M],R=Ut(G,q),q+=R.size,K.push(R);return K},te=function(y){var E,C,M,R,O,G,q=0,K=y.byteLength,Y=y.nalCount,le=K+4*Y,ve=new Uint8Array(le),Ze=new DataView(ve.buffer);for(E=0;E<y.length;E++)for(R=y[E],C=0;C<R.length;C++)for(O=R[C],M=0;M<O.length;M++)G=O[M],Ze.setUint32(q,G.data.byteLength),q+=4,ve.set(G.data,q),q+=G.data.byteLength;return ve},ui=function(y,E){var C,M=E||0,R=[];return C=Ut(y,M),R.push(C),R},Pe=function(y){var E,C,M=0,R=y.byteLength,O=y.length,G=R+4*O,q=new Uint8Array(G),K=new DataView(q.buffer);for(E=0;E<y.length;E++)C=y[E],K.setUint32(M,C.data.byteLength),M+=4,q.set(C.data,M),M+=C.data.byteLength;return q},Ie={groupNalsIntoFrames:gt,groupFramesIntoGops:Gt,extendFirstKeyFrame:dt,generateSampleTable:Ct,concatenateNalData:te,generateSampleTableForFrame:ui,concatenateNalDataForFrame:Pe},Me=[33,16,5,32,164,27],We=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ge=function(y){for(var E=[];y--;)E.push(0);return E},X=function(y){return Object.keys(y).reduce(function(E,C){return E[C]=new Uint8Array(y[C].reduce(function(M,R){return M.concat(R)},[])),E},{})},k,ue=function(){if(!k){var y={96e3:[Me,[227,64],ge(154),[56]],88200:[Me,[231],ge(170),[56]],64e3:[Me,[248,192],ge(240),[56]],48e3:[Me,[255,192],ge(268),[55,148,128],ge(54),[112]],44100:[Me,[255,192],ge(268),[55,163,128],ge(84),[112]],32e3:[Me,[255,192],ge(268),[55,234],ge(226),[112]],24e3:[Me,[255,192],ge(268),[55,255,128],ge(268),[111,112],ge(126),[224]],16e3:[Me,[255,192],ge(268),[55,255,128],ge(268),[111,255],ge(269),[223,108],ge(195),[1,192]],12e3:[We,ge(268),[3,127,248],ge(268),[6,255,240],ge(268),[13,255,224],ge(268),[27,253,128],ge(259),[56]],11025:[We,ge(268),[3,127,248],ge(268),[6,255,240],ge(268),[13,255,224],ge(268),[27,255,192],ge(268),[55,175,128],ge(108),[112]],8e3:[We,ge(268),[3,121,16],ge(47),[7]]};k=X(y)}return k},Ae=9e4,Re,we,et,Ke,lt,Vt,ze;Re=function(y){return y*Ae},we=function(y,E){return y*E},et=function(y){return y/Ae},Ke=function(y,E){return y/E},lt=function(y,E){return Re(Ke(y,E))},Vt=function(y,E){return we(et(y),E)},ze=function(y,E,C){return et(C?y:y-E)};var Ve={ONE_SECOND_IN_TS:Ae,secondsToVideoTs:Re,secondsToAudioTs:we,videoTsToSeconds:et,audioTsToSeconds:Ke,audioTsToVideoTs:lt,videoTsToAudioTs:Vt,metadataTsToSeconds:ze},xt=ue,_t=Ve,rt=function(y){var E,C,M=0;for(E=0;E<y.length;E++)C=y[E],M+=C.data.byteLength;return M},se=function(y,E,C,M){var R,O=0,G=0,q=0,K=0,Y,le,ve;if(E.length&&(R=_t.audioTsToVideoTs(y.baseMediaDecodeTime,y.samplerate),O=Math.ceil(_t.ONE_SECOND_IN_TS/(y.samplerate/1024)),C&&M&&(G=R-Math.max(C,M),q=Math.floor(G/O),K=q*O),!(q<1||K>_t.ONE_SECOND_IN_TS/2))){for(Y=xt()[y.samplerate],Y||(Y=E[0].data),le=0;le<q;le++)ve=E[0],E.splice(0,0,{data:Y,dts:ve.dts-O,pts:ve.pts-O});return y.baseMediaDecodeTime-=Math.floor(_t.videoTsToAudioTs(K,y.samplerate)),K}},Be=function(y,E,C){return E.minSegmentDts>=C?y:(E.minSegmentDts=1/0,y.filter(function(M){return M.dts>=C?(E.minSegmentDts=Math.min(E.minSegmentDts,M.dts),E.minSegmentPts=E.minSegmentDts,!0):!1}))},tt=function(y){var E,C,M=[];for(E=0;E<y.length;E++)C=y[E],M.push({size:C.data.byteLength,duration:1024});return M},ne=function(y){var E,C,M=0,R=new Uint8Array(rt(y));for(E=0;E<y.length;E++)C=y[E],R.set(C.data,M),M+=C.data.byteLength;return R},je={prefixWithSilence:se,trimAdtsFramesByEarliestDts:Be,generateSampleTable:tt,concatenateFrameData:ne},Ee=Ve.ONE_SECOND_IN_TS,Ue=function(y,E){typeof E.pts=="number"&&(y.timelineStartInfo.pts===void 0&&(y.timelineStartInfo.pts=E.pts),y.minSegmentPts===void 0?y.minSegmentPts=E.pts:y.minSegmentPts=Math.min(y.minSegmentPts,E.pts),y.maxSegmentPts===void 0?y.maxSegmentPts=E.pts:y.maxSegmentPts=Math.max(y.maxSegmentPts,E.pts)),typeof E.dts=="number"&&(y.timelineStartInfo.dts===void 0&&(y.timelineStartInfo.dts=E.dts),y.minSegmentDts===void 0?y.minSegmentDts=E.dts:y.minSegmentDts=Math.min(y.minSegmentDts,E.dts),y.maxSegmentDts===void 0?y.maxSegmentDts=E.dts:y.maxSegmentDts=Math.max(y.maxSegmentDts,E.dts))},at=function(y){delete y.minSegmentDts,delete y.maxSegmentDts,delete y.minSegmentPts,delete y.maxSegmentPts},st=function(y,E){var C,M,R=y.minSegmentDts;return E||(R-=y.timelineStartInfo.dts),C=y.timelineStartInfo.baseMediaDecodeTime,C+=R,C=Math.max(0,C),y.type==="audio"&&(M=y.samplerate/Ee,C*=M,C=Math.floor(C)),C},Mt={clearDtsInfo:at,calculateTrackBaseMediaDecodeTime:st,collectDtsInfo:Ue},Zt=4,Di=128,Xt=function(y){for(var E=0,C={payloadType:-1,payloadSize:0},M=0,R=0;E<y.byteLength&&y[E]!==Di;){for(;y[E]===255;)M+=255,E++;for(M+=y[E++];y[E]===255;)R+=255,E++;if(R+=y[E++],!C.payload&&M===Zt){var O=String.fromCharCode(y[E+3],y[E+4],y[E+5],y[E+6]);if(O==="GA94"){C.payloadType=M,C.payloadSize=R,C.payload=y.subarray(E,E+R);break}else C.payload=void 0}E+=R,M=0,R=0}return C},Sn=function(y){return y.payload[0]!==181||(y.payload[1]<<8|y.payload[2])!==49||String.fromCharCode(y.payload[3],y.payload[4],y.payload[5],y.payload[6])!=="GA94"||y.payload[7]!==3?null:y.payload.subarray(8,y.payload.length-1)},Jn=function(y,E){var C=[],M,R,O,G;if(!(E[0]&64))return C;for(R=E[0]&31,M=0;M<R;M++)O=M*3,G={type:E[O+2]&3,pts:y},E[O+2]&4&&(G.ccData=E[O+3]<<8|E[O+4],C.push(G));return C},Th=function(y){for(var E=y.byteLength,C=[],M=1,R,O;M<E-2;)y[M]===0&&y[M+1]===0&&y[M+2]===3?(C.push(M+2),M+=2):M++;if(C.length===0)return y;R=E-C.length,O=new Uint8Array(R);var G=0;for(M=0;M<R;G++,M++)G===C[0]&&(G++,C.shift()),O[M]=y[G];return O},Rl={parseSei:Xt,parseUserData:Sn,parseCaptionPackets:Jn,discardEmulationPreventionBytes:Th,USER_DATA_REGISTERED_ITU_T_T35:Zt},hr=t,ws=Rl,Gn=function(y){y=y||{},Gn.prototype.init.call(this),this.parse708captions_=typeof y.parse708captions=="boolean"?y.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ri(0,0),new Ri(0,1),new Ri(1,0),new Ri(1,1)],this.parse708captions_&&(this.cc708Stream_=new yi({captionServices:y.captionServices})),this.reset(),this.ccStreams_.forEach(function(E){E.on("data",this.trigger.bind(this,"data")),E.on("partialdone",this.trigger.bind(this,"partialdone")),E.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Gn.prototype=new hr,Gn.prototype.push=function(y){var E,C,M;if(y.nalUnitType==="sei_rbsp"&&(E=ws.parseSei(y.escapedRBSP),!!E.payload&&E.payloadType===ws.USER_DATA_REGISTERED_ITU_T_T35&&(C=ws.parseUserData(E),!!C))){if(y.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(y.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}M=ws.parseCaptionPackets(y.pts,C),this.captionPackets_=this.captionPackets_.concat(M),this.latestDts_!==y.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=y.dts}},Gn.prototype.flushCCStreams=function(y){this.ccStreams_.forEach(function(E){return y==="flush"?E.flush():E.partialFlush()},this)},Gn.prototype.flushStream=function(y){if(!this.captionPackets_.length){this.flushCCStreams(y);return}this.captionPackets_.forEach(function(E,C){E.presortIndex=C}),this.captionPackets_.sort(function(E,C){return E.pts===C.pts?E.presortIndex-C.presortIndex:E.pts-C.pts}),this.captionPackets_.forEach(function(E){E.type<2?this.dispatchCea608Packet(E):this.dispatchCea708Packet(E)},this),this.captionPackets_.length=0,this.flushCCStreams(y)},Gn.prototype.flush=function(){return this.flushStream("flush")},Gn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Gn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(y){y.reset()})},Gn.prototype.dispatchCea608Packet=function(y){this.setsTextOrXDSActive(y)?this.activeCea608Channel_[y.type]=null:this.setsChannel1Active(y)?this.activeCea608Channel_[y.type]=0:this.setsChannel2Active(y)&&(this.activeCea608Channel_[y.type]=1),this.activeCea608Channel_[y.type]!==null&&this.ccStreams_[(y.type<<1)+this.activeCea608Channel_[y.type]].push(y)},Gn.prototype.setsChannel1Active=function(y){return(y.ccData&30720)===4096},Gn.prototype.setsChannel2Active=function(y){return(y.ccData&30720)===6144},Gn.prototype.setsTextOrXDSActive=function(y){return(y.ccData&28928)===256||(y.ccData&30974)===4138||(y.ccData&30974)===6186},Gn.prototype.dispatchCea708Packet=function(y){this.parse708captions_&&this.cc708Stream_.push(y)};var ea={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Fs=function(y){var E=ea[y]||y;return y&4096&&y===E?"":String.fromCharCode(E)},Ba=function(y){return 32<=y&&y<=127||160<=y&&y<=255},ci=function(y){this.windowNum=y,this.reset()};ci.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ci.prototype.getText=function(){return this.rows.join(`
`)},ci.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ci.prototype.newLine=function(y){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(y),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ci.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},ci.prototype.addText=function(y){this.rows[this.rowIdx]+=y},ci.prototype.backspace=function(){if(!this.isEmpty()){var y=this.rows[this.rowIdx];this.rows[this.rowIdx]=y.substr(0,y.length-1)}};var mo=function(y,E,C){this.serviceNum=y,this.text="",this.currentWindow=new ci(-1),this.windows=[],this.stream=C,typeof E=="string"&&this.createTextDecoder(E)};mo.prototype.init=function(y,E){this.startPts=y;for(var C=0;C<8;C++)this.windows[C]=new ci(C),typeof E=="function"&&(this.windows[C].beforeRowOverflow=E)},mo.prototype.setCurrentWindow=function(y){this.currentWindow=this.windows[y]},mo.prototype.createTextDecoder=function(y){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(y)}catch(E){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+y+" encoding. "+E})}};var yi=function(y){y=y||{},yi.prototype.init.call(this);var E=this,C=y.captionServices||{},M={},R;Object.keys(C).forEach(O=>{R=C[O],/^SERVICE/.test(O)&&(M[O]=R.encoding)}),this.serviceEncodings=M,this.current708Packet=null,this.services={},this.push=function(O){O.type===3?(E.new708Packet(),E.add708Bytes(O)):(E.current708Packet===null&&E.new708Packet(),E.add708Bytes(O))}};yi.prototype=new hr,yi.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},yi.prototype.add708Bytes=function(y){var E=y.ccData,C=E>>>8,M=E&255;this.current708Packet.ptsVals.push(y.pts),this.current708Packet.data.push(C),this.current708Packet.data.push(M)},yi.prototype.push708Packet=function(){var y=this.current708Packet,E=y.data,C=null,M=null,R=0,O=E[R++];for(y.seq=O>>6,y.sizeCode=O&63;R<E.length;R++)O=E[R++],C=O>>5,M=O&31,C===7&&M>0&&(O=E[R++],C=O),this.pushServiceBlock(C,R,M),M>0&&(R+=M-1)},yi.prototype.pushServiceBlock=function(y,E,C){var M,R=E,O=this.current708Packet.data,G=this.services[y];for(G||(G=this.initService(y,R));R<E+C&&R<O.length;R++)M=O[R],Ba(M)?R=this.handleText(R,G):M===24?R=this.multiByteCharacter(R,G):M===16?R=this.extendedCommands(R,G):128<=M&&M<=135?R=this.setCurrentWindow(R,G):152<=M&&M<=159?R=this.defineWindow(R,G):M===136?R=this.clearWindows(R,G):M===140?R=this.deleteWindows(R,G):M===137?R=this.displayWindows(R,G):M===138?R=this.hideWindows(R,G):M===139?R=this.toggleWindows(R,G):M===151?R=this.setWindowAttributes(R,G):M===144?R=this.setPenAttributes(R,G):M===145?R=this.setPenColor(R,G):M===146?R=this.setPenLocation(R,G):M===143?G=this.reset(R,G):M===8?G.currentWindow.backspace():M===12?G.currentWindow.clearText():M===13?G.currentWindow.pendingNewLine=!0:M===14?G.currentWindow.clearText():M===141&&R++},yi.prototype.extendedCommands=function(y,E){var C=this.current708Packet.data,M=C[++y];return Ba(M)&&(y=this.handleText(y,E,{isExtended:!0})),y},yi.prototype.getPts=function(y){return this.current708Packet.ptsVals[Math.floor(y/2)]},yi.prototype.initService=function(y,E){var M="SERVICE"+y,C=this,M,R;return M in this.serviceEncodings&&(R=this.serviceEncodings[M]),this.services[y]=new mo(y,R,C),this.services[y].init(this.getPts(E),function(O){C.flushDisplayed(O,C.services[y])}),this.services[y]},yi.prototype.handleText=function(y,E,C){var M=C&&C.isExtended,R=C&&C.isMultiByte,O=this.current708Packet.data,G=M?4096:0,q=O[y],K=O[y+1],Y=E.currentWindow,le,ve;function Ze(Oe){return Oe.map(St=>("0"+(St&255).toString(16)).slice(-2)).join("")}if(R?(ve=[q,K],y++):ve=[q],E.textDecoder_&&!M)le=E.textDecoder_.decode(new Uint8Array(ve));else if(R){const Oe=Ze(ve);le=String.fromCharCode(parseInt(Oe,16))}else le=Fs(G|q);return Y.pendingNewLine&&!Y.isEmpty()&&Y.newLine(this.getPts(y)),Y.pendingNewLine=!1,Y.addText(le),y},yi.prototype.multiByteCharacter=function(y,E){var C=this.current708Packet.data,M=C[y+1],R=C[y+2];return Ba(M)&&Ba(R)&&(y=this.handleText(++y,E,{isMultiByte:!0})),y},yi.prototype.setCurrentWindow=function(y,E){var C=this.current708Packet.data,M=C[y],R=M&7;return E.setCurrentWindow(R),y},yi.prototype.defineWindow=function(y,E){var C=this.current708Packet.data,M=C[y],R=M&7;E.setCurrentWindow(R);var O=E.currentWindow;return M=C[++y],O.visible=(M&32)>>5,O.rowLock=(M&16)>>4,O.columnLock=(M&8)>>3,O.priority=M&7,M=C[++y],O.relativePositioning=(M&128)>>7,O.anchorVertical=M&127,M=C[++y],O.anchorHorizontal=M,M=C[++y],O.anchorPoint=(M&240)>>4,O.rowCount=M&15,M=C[++y],O.columnCount=M&63,M=C[++y],O.windowStyle=(M&56)>>3,O.penStyle=M&7,O.virtualRowCount=O.rowCount+1,y},yi.prototype.setWindowAttributes=function(y,E){var C=this.current708Packet.data,M=C[y],R=E.currentWindow.winAttr;return M=C[++y],R.fillOpacity=(M&192)>>6,R.fillRed=(M&48)>>4,R.fillGreen=(M&12)>>2,R.fillBlue=M&3,M=C[++y],R.borderType=(M&192)>>6,R.borderRed=(M&48)>>4,R.borderGreen=(M&12)>>2,R.borderBlue=M&3,M=C[++y],R.borderType+=(M&128)>>5,R.wordWrap=(M&64)>>6,R.printDirection=(M&48)>>4,R.scrollDirection=(M&12)>>2,R.justify=M&3,M=C[++y],R.effectSpeed=(M&240)>>4,R.effectDirection=(M&12)>>2,R.displayEffect=M&3,y},yi.prototype.flushDisplayed=function(y,E){for(var C=[],M=0;M<8;M++)E.windows[M].visible&&!E.windows[M].isEmpty()&&C.push(E.windows[M].getText());E.endPts=y,E.text=C.join(`

`),this.pushCaption(E),E.startPts=y},yi.prototype.pushCaption=function(y){y.text!==""&&(this.trigger("data",{startPts:y.startPts,endPts:y.endPts,text:y.text,stream:"cc708_"+y.serviceNum}),y.text="",y.startPts=y.endPts)},yi.prototype.displayWindows=function(y,E){var C=this.current708Packet.data,M=C[++y],R=this.getPts(y);this.flushDisplayed(R,E);for(var O=0;O<8;O++)M&1<<O&&(E.windows[O].visible=1);return y},yi.prototype.hideWindows=function(y,E){var C=this.current708Packet.data,M=C[++y],R=this.getPts(y);this.flushDisplayed(R,E);for(var O=0;O<8;O++)M&1<<O&&(E.windows[O].visible=0);return y},yi.prototype.toggleWindows=function(y,E){var C=this.current708Packet.data,M=C[++y],R=this.getPts(y);this.flushDisplayed(R,E);for(var O=0;O<8;O++)M&1<<O&&(E.windows[O].visible^=1);return y},yi.prototype.clearWindows=function(y,E){var C=this.current708Packet.data,M=C[++y],R=this.getPts(y);this.flushDisplayed(R,E);for(var O=0;O<8;O++)M&1<<O&&E.windows[O].clearText();return y},yi.prototype.deleteWindows=function(y,E){var C=this.current708Packet.data,M=C[++y],R=this.getPts(y);this.flushDisplayed(R,E);for(var O=0;O<8;O++)M&1<<O&&E.windows[O].reset();return y},yi.prototype.setPenAttributes=function(y,E){var C=this.current708Packet.data,M=C[y],R=E.currentWindow.penAttr;return M=C[++y],R.textTag=(M&240)>>4,R.offset=(M&12)>>2,R.penSize=M&3,M=C[++y],R.italics=(M&128)>>7,R.underline=(M&64)>>6,R.edgeType=(M&56)>>3,R.fontStyle=M&7,y},yi.prototype.setPenColor=function(y,E){var C=this.current708Packet.data,M=C[y],R=E.currentWindow.penColor;return M=C[++y],R.fgOpacity=(M&192)>>6,R.fgRed=(M&48)>>4,R.fgGreen=(M&12)>>2,R.fgBlue=M&3,M=C[++y],R.bgOpacity=(M&192)>>6,R.bgRed=(M&48)>>4,R.bgGreen=(M&12)>>2,R.bgBlue=M&3,M=C[++y],R.edgeRed=(M&48)>>4,R.edgeGreen=(M&12)>>2,R.edgeBlue=M&3,y},yi.prototype.setPenLocation=function(y,E){var C=this.current708Packet.data,M=C[y],R=E.currentWindow.penLoc;return E.currentWindow.pendingNewLine=!0,M=C[++y],R.row=M&15,M=C[++y],R.column=M&63,y},yi.prototype.reset=function(y,E){var C=this.getPts(y);return this.flushDisplayed(C,E),this.initService(E.serviceNum,y)};var Sd={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Bl=function(y){return y===null?"":(y=Sd[y]||y,String.fromCharCode(y))},Fu=14,Sh=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ta=function(){for(var y=[],E=Fu+1;E--;)y.push({text:"",indent:0,offset:0});return y},Ri=function(y,E){Ri.prototype.init.call(this),this.field_=y||0,this.dataChannel_=E||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(C){var M,R,O,G,q;if(M=C.ccData&32639,M===this.lastControlCode_){this.lastControlCode_=null;return}if((M&61440)===4096?this.lastControlCode_=M:M!==this.PADDING_&&(this.lastControlCode_=null),O=M>>>8,G=M&255,M!==this.PADDING_)if(M===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(M===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(C.pts),this.flushDisplayed(C.pts),R=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=R,this.startPts_=C.pts;else if(M===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(C.pts);else if(M===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(C.pts);else if(M===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(C.pts);else if(M===this.CARRIAGE_RETURN_)this.clearFormatting(C.pts),this.flushDisplayed(C.pts),this.shiftRowsUp_(),this.startPts_=C.pts;else if(M===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(M===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(C.pts),this.displayed_=ta();else if(M===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ta();else if(M===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(C.pts),this.displayed_=ta()),this.mode_="paintOn",this.startPts_=C.pts;else if(this.isSpecialCharacter(O,G))O=(O&3)<<8,q=Bl(O|G),this[this.mode_](C.pts,q),this.column_++;else if(this.isExtCharacter(O,G))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),O=(O&3)<<8,q=Bl(O|G),this[this.mode_](C.pts,q),this.column_++;else if(this.isMidRowCode(O,G))this.clearFormatting(C.pts),this[this.mode_](C.pts," "),this.column_++,(G&14)===14&&this.addFormatting(C.pts,["i"]),(G&1)===1&&this.addFormatting(C.pts,["u"]);else if(this.isOffsetControlCode(O,G)){const Y=G&3;this.nonDisplayed_[this.row_].offset=Y,this.column_+=Y}else if(this.isPAC(O,G)){var K=Sh.indexOf(M&7968);if(this.mode_==="rollUp"&&(K-this.rollUpRows_+1<0&&(K=this.rollUpRows_-1),this.setRollUp(C.pts,K)),K!==this.row_&&K>=0&&K<=14&&(this.clearFormatting(C.pts),this.row_=K),G&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(C.pts,["u"]),(M&16)===16){const Y=(M&14)>>1;this.column_=Y*4,this.nonDisplayed_[this.row_].indent+=Y}this.isColorPAC(G)&&(G&14)===14&&this.addFormatting(C.pts,["i"])}else this.isNormalChar(O)&&(G===0&&(G=null),q=Bl(O),q+=Bl(G),this[this.mode_](C.pts,q),this.column_+=q.length)}};Ri.prototype=new hr,Ri.prototype.flushDisplayed=function(y){const E=M=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+M+"."})},C=[];this.displayed_.forEach((M,R)=>{if(M&&M.text&&M.text.length){try{M.text=M.text.trim()}catch{E(R)}M.text.length&&C.push({text:M.text,line:R+1,position:10+Math.min(70,M.indent*10)+M.offset*2.5})}else M==null&&E(R)}),C.length&&this.trigger("data",{startPts:this.startPts_,endPts:y,content:C,stream:this.name_})},Ri.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ta(),this.nonDisplayed_=ta(),this.lastControlCode_=null,this.column_=0,this.row_=Fu,this.rollUpRows_=2,this.formatting_=[]},Ri.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ri.prototype.isSpecialCharacter=function(y,E){return y===this.EXT_&&E>=48&&E<=63},Ri.prototype.isExtCharacter=function(y,E){return(y===this.EXT_+1||y===this.EXT_+2)&&E>=32&&E<=63},Ri.prototype.isMidRowCode=function(y,E){return y===this.EXT_&&E>=32&&E<=47},Ri.prototype.isOffsetControlCode=function(y,E){return y===this.OFFSET_&&E>=33&&E<=35},Ri.prototype.isPAC=function(y,E){return y>=this.BASE_&&y<this.BASE_+8&&E>=64&&E<=127},Ri.prototype.isColorPAC=function(y){return y>=64&&y<=79||y>=96&&y<=127},Ri.prototype.isNormalChar=function(y){return y>=32&&y<=127},Ri.prototype.setRollUp=function(y,E){if(this.mode_!=="rollUp"&&(this.row_=Fu,this.mode_="rollUp",this.flushDisplayed(y),this.nonDisplayed_=ta(),this.displayed_=ta()),E!==void 0&&E!==this.row_)for(var C=0;C<this.rollUpRows_;C++)this.displayed_[E-C]=this.displayed_[this.row_-C],this.displayed_[this.row_-C]={text:"",indent:0,offset:0};E===void 0&&(E=this.row_),this.topRow_=E-this.rollUpRows_+1},Ri.prototype.addFormatting=function(y,E){this.formatting_=this.formatting_.concat(E);var C=E.reduce(function(M,R){return M+"<"+R+">"},"");this[this.mode_](y,C)},Ri.prototype.clearFormatting=function(y){if(this.formatting_.length){var E=this.formatting_.reverse().reduce(function(C,M){return C+"</"+M+">"},"");this.formatting_=[],this[this.mode_](y,E)}},Ri.prototype.popOn=function(y,E){var C=this.nonDisplayed_[this.row_].text;C+=E,this.nonDisplayed_[this.row_].text=C},Ri.prototype.rollUp=function(y,E){var C=this.displayed_[this.row_].text;C+=E,this.displayed_[this.row_].text=C},Ri.prototype.shiftRowsUp_=function(){var y;for(y=0;y<this.topRow_;y++)this.displayed_[y]={text:"",indent:0,offset:0};for(y=this.row_+1;y<Fu+1;y++)this.displayed_[y]={text:"",indent:0,offset:0};for(y=this.topRow_;y<this.row_;y++)this.displayed_[y]=this.displayed_[y+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Ri.prototype.paintOn=function(y,E){var C=this.displayed_[this.row_].text;C+=E,this.displayed_[this.row_].text=C};var z={CaptionStream:Gn,Cea608Stream:Ri,Cea708Stream:yi},oe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},xe=t,be=8589934592,he=4294967296,He="shared",it=function(y,E){var C=1;for(y>E&&(C=-1);Math.abs(E-y)>he;)y+=C*be;return y},ut=function(y){var E,C;ut.prototype.init.call(this),this.type_=y||He,this.push=function(M){if(M.type==="metadata"){this.trigger("data",M);return}this.type_!==He&&M.type!==this.type_||(C===void 0&&(C=M.dts),M.dts=it(M.dts,C),M.pts=it(M.pts,C),E=M.dts,this.trigger("data",M))},this.flush=function(){C=E,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){C=void 0,E=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ut.prototype=new xe;var pt={TimestampRolloverStream:ut,handleRollover:it},It=(y,E,C)=>{if(!y)return-1;for(var M=C;M<y.length;M++)if(y[M]===E)return M;return-1},Lt={typedArrayIndexOf:It},Tt=Lt.typedArrayIndexOf,Kt={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},hi=function(y,E,C){var M,R="";for(M=E;M<C;M++)R+="%"+("00"+y[M].toString(16)).slice(-2);return R},Li=function(y,E,C){return decodeURIComponent(hi(y,E,C))},bi=function(y,E,C){return unescape(hi(y,E,C))},Jt=function(y){return y[0]<<21|y[1]<<14|y[2]<<7|y[3]},At={APIC:function(y){var E=1,C,M,R="-->";y.data[0]===Kt.Utf8&&(C=Tt(y.data,0,E),!(C<0)&&(y.mimeType=bi(y.data,E,C),E=C+1,y.pictureType=y.data[E],E++,M=Tt(y.data,0,E),!(M<0)&&(y.description=Li(y.data,E,M),E=M+1,y.mimeType===R?y.url=bi(y.data,E,y.data.length):y.pictureData=y.data.subarray(E,y.data.length))))},"T*":function(y){y.data[0]===Kt.Utf8&&(y.value=Li(y.data,1,y.data.length).replace(/\0*$/,""),y.values=y.value.split("\0"))},TXXX:function(y){var E;y.data[0]===Kt.Utf8&&(E=Tt(y.data,0,1),E!==-1&&(y.description=Li(y.data,1,E),y.value=Li(y.data,E+1,y.data.length).replace(/\0*$/,""),y.data=y.value))},"W*":function(y){y.url=bi(y.data,0,y.data.length).replace(/\0.*$/,"")},WXXX:function(y){var E;y.data[0]===Kt.Utf8&&(E=Tt(y.data,0,1),E!==-1&&(y.description=Li(y.data,1,E),y.url=bi(y.data,E+1,y.data.length).replace(/\0.*$/,"")))},PRIV:function(y){var E;for(E=0;E<y.data.length;E++)if(y.data[E]===0){y.owner=bi(y.data,0,E);break}y.privateData=y.data.subarray(E+1),y.data=y.privateData}},An=function(y){var E,C,M=10,R=0,O=[];if(!(y.length<10||y[0]!=="I".charCodeAt(0)||y[1]!=="D".charCodeAt(0)||y[2]!=="3".charCodeAt(0))){R=Jt(y.subarray(6,10)),R+=10;var G=y[5]&64;G&&(M+=4,M+=Jt(y.subarray(10,14)),R-=Jt(y.subarray(16,20)));do{if(E=Jt(y.subarray(M+4,M+8)),E<1)break;C=String.fromCharCode(y[M],y[M+1],y[M+2],y[M+3]);var q={id:C,data:y.subarray(M+10,M+E+10)};q.key=q.id,At[q.id]?At[q.id](q):q.id[0]==="T"?At["T*"](q):q.id[0]==="W"&&At["W*"](q),O.push(q),M+=10,M+=E}while(M<R);return O}},fi={parseId3Frames:An,parseSyncSafeInteger:Jt,frameParsers:At},ks=t,La=oe,en=fi,ia;ia=function(y){var E={descriptor:y&&y.descriptor},C=0,M=[],R=0,O;if(ia.prototype.init.call(this),this.dispatchType=La.METADATA_STREAM_TYPE.toString(16),E.descriptor)for(O=0;O<E.descriptor.length;O++)this.dispatchType+=("00"+E.descriptor[O].toString(16)).slice(-2);this.push=function(G){var q,K,Y,le,ve,Ze;if(G.type==="timed-metadata"){if(G.dataAlignmentIndicator&&(R=0,M.length=0),M.length===0&&(G.data.length<10||G.data[0]!=="I".charCodeAt(0)||G.data[1]!=="D".charCodeAt(0)||G.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(M.push(G),R+=G.data.byteLength,M.length===1&&(C=en.parseSyncSafeInteger(G.data.subarray(6,10)),C+=10),!(R<C)){for(q={data:new Uint8Array(C),frames:[],pts:M[0].pts,dts:M[0].dts},ve=0;ve<C;)q.data.set(M[0].data.subarray(0,C-ve),ve),ve+=M[0].data.byteLength,R-=M[0].data.byteLength,M.shift();K=10,q.data[5]&64&&(K+=4,K+=en.parseSyncSafeInteger(q.data.subarray(10,14)),C-=en.parseSyncSafeInteger(q.data.subarray(16,20)));do{if(Y=en.parseSyncSafeInteger(q.data.subarray(K+4,K+8)),Y<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ze=String.fromCharCode(q.data[K],q.data[K+1],q.data[K+2],q.data[K+3]),le={id:Ze,data:q.data.subarray(K+10,K+Y+10)},le.key=le.id,en.frameParsers[le.id]?en.frameParsers[le.id](le):le.id[0]==="T"?en.frameParsers["T*"](le):le.id[0]==="W"&&en.frameParsers["W*"](le),le.owner==="com.apple.streaming.transportStreamTimestamp"){var Oe=le.data,St=(Oe[3]&1)<<30|Oe[4]<<22|Oe[5]<<14|Oe[6]<<6|Oe[7]>>>2;St*=4,St+=Oe[7]&3,le.timeStamp=St,q.pts===void 0&&q.dts===void 0&&(q.pts=le.timeStamp,q.dts=le.timeStamp),this.trigger("timestamp",le)}q.frames.push(le),K+=10,K+=Y}while(K<C);this.trigger("data",q)}}}},ia.prototype=new ks;var Ii=ia,Qn=t,Zn=z,Oi=oe,$n=pt.TimestampRolloverStream,fr,Hs,Ll,go=188,Ad=71;fr=function(){var y=new Uint8Array(go),E=0;fr.prototype.init.call(this),this.push=function(C){var M=0,R=go,O;for(E?(O=new Uint8Array(C.byteLength+E),O.set(y.subarray(0,E)),O.set(C,E),E=0):O=C;R<O.byteLength;){if(O[M]===Ad&&O[R]===Ad){this.trigger("data",O.subarray(M,R)),M+=go,R+=go;continue}M++,R++}M<O.byteLength&&(y.set(O.subarray(M),0),E=O.byteLength-M)},this.flush=function(){E===go&&y[0]===Ad&&(this.trigger("data",y),E=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){E=0,this.trigger("reset")}},fr.prototype=new Qn,Hs=function(){var y,E,C,M;Hs.prototype.init.call(this),M=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,y=function(R,O){var G=0;O.payloadUnitStartIndicator&&(G+=R[G]+1),O.type==="pat"?E(R.subarray(G),O):C(R.subarray(G),O)},E=function(R,O){O.section_number=R[7],O.last_section_number=R[8],M.pmtPid=(R[10]&31)<<8|R[11],O.pmtPid=M.pmtPid},C=function(R,O){var G,q,K,Y;if(R[5]&1){for(M.programMapTable={video:null,audio:null,"timed-metadata":{}},G=(R[1]&15)<<8|R[2],q=3+G-4,K=(R[10]&15)<<8|R[11],Y=12+K;Y<q;){var le=R[Y],ve=(R[Y+1]&31)<<8|R[Y+2];le===Oi.H264_STREAM_TYPE&&M.programMapTable.video===null?M.programMapTable.video=ve:le===Oi.ADTS_STREAM_TYPE&&M.programMapTable.audio===null?M.programMapTable.audio=ve:le===Oi.METADATA_STREAM_TYPE&&(M.programMapTable["timed-metadata"][ve]=le),Y+=((R[Y+3]&15)<<8|R[Y+4])+5}O.programMapTable=M.programMapTable}},this.push=function(R){var O={},G=4;if(O.payloadUnitStartIndicator=!!(R[1]&64),O.pid=R[1]&31,O.pid<<=8,O.pid|=R[2],(R[3]&48)>>>4>1&&(G+=R[G]+1),O.pid===0)O.type="pat",y(R.subarray(G),O),this.trigger("data",O);else if(O.pid===this.pmtPid)for(O.type="pmt",y(R.subarray(G),O),this.trigger("data",O);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([R,G,O]):this.processPes_(R,G,O)},this.processPes_=function(R,O,G){G.pid===this.programMapTable.video?G.streamType=Oi.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?G.streamType=Oi.ADTS_STREAM_TYPE:G.streamType=this.programMapTable["timed-metadata"][G.pid],G.type="pes",G.data=R.subarray(O),this.trigger("data",G)}},Hs.prototype=new Qn,Hs.STREAM_TYPES={h264:27,adts:15},Ll=function(){var y=this,E=!1,C={data:[],size:0},M={data:[],size:0},R={data:[],size:0},O,G=function(K,Y){var le;const ve=K[0]<<16|K[1]<<8|K[2];Y.data=new Uint8Array,ve===1&&(Y.packetLength=6+(K[4]<<8|K[5]),Y.dataAlignmentIndicator=(K[6]&4)!==0,le=K[7],le&192&&(Y.pts=(K[9]&14)<<27|(K[10]&255)<<20|(K[11]&254)<<12|(K[12]&255)<<5|(K[13]&254)>>>3,Y.pts*=4,Y.pts+=(K[13]&6)>>>1,Y.dts=Y.pts,le&64&&(Y.dts=(K[14]&14)<<27|(K[15]&255)<<20|(K[16]&254)<<12|(K[17]&255)<<5|(K[18]&254)>>>3,Y.dts*=4,Y.dts+=(K[18]&6)>>>1)),Y.data=K.subarray(9+K[8]))},q=function(K,Y,le){var ve=new Uint8Array(K.size),Ze={type:Y},Oe=0,St=0,Dt=!1,nn;if(!(!K.data.length||K.size<9)){for(Ze.trackId=K.data[0].pid,Oe=0;Oe<K.data.length;Oe++)nn=K.data[Oe],ve.set(nn.data,St),St+=nn.data.byteLength;G(ve,Ze),Dt=Y==="video"||Ze.packetLength<=K.size,(le||Dt)&&(K.size=0,K.data.length=0),Dt&&y.trigger("data",Ze)}};Ll.prototype.init.call(this),this.push=function(K){({pat:function(){},pes:function(){var Y,le;switch(K.streamType){case Oi.H264_STREAM_TYPE:Y=C,le="video";break;case Oi.ADTS_STREAM_TYPE:Y=M,le="audio";break;case Oi.METADATA_STREAM_TYPE:Y=R,le="timed-metadata";break;default:return}K.payloadUnitStartIndicator&&q(Y,le,!0),Y.data.push(K),Y.size+=K.data.byteLength},pmt:function(){var Y={type:"metadata",tracks:[]};O=K.programMapTable,O.video!==null&&Y.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.video,codec:"avc",type:"video"}),O.audio!==null&&Y.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.audio,codec:"adts",type:"audio"}),E=!0,y.trigger("data",Y)}})[K.type]()},this.reset=function(){C.size=0,C.data.length=0,M.size=0,M.data.length=0,this.trigger("reset")},this.flushStreams_=function(){q(C,"video"),q(M,"audio"),q(R,"timed-metadata")},this.flush=function(){if(!E&&O){var K={type:"metadata",tracks:[]};O.video!==null&&K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.video,codec:"avc",type:"video"}),O.audio!==null&&K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.audio,codec:"adts",type:"audio"}),y.trigger("data",K)}E=!1,this.flushStreams_(),this.trigger("done")}},Ll.prototype=new Qn;var Ed={PAT_PID:0,MP2T_PACKET_LENGTH:go,TransportPacketStream:fr,TransportParseStream:Hs,ElementaryStream:Ll,TimestampRolloverStream:$n,CaptionStream:Zn.CaptionStream,Cea608Stream:Zn.Cea608Stream,Cea708Stream:Zn.Cea708Stream,MetadataStream:Ii};for(var Cd in Oi)Oi.hasOwnProperty(Cd)&&(Ed[Cd]=Oi[Cd]);var Y_=Ed,K_=t,J_=Ve.ONE_SECOND_IN_TS,ku,jg=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ku=function(y){var E,C=0;ku.prototype.init.call(this),this.skipWarn_=function(M,R){this.trigger("log",{level:"warn",message:`adts skiping bytes ${M} to ${R} in frame ${C} outside syncword`})},this.push=function(M){var R=0,O,G,q,K,Y;if(y||(C=0),M.type==="audio"){E&&E.length?(q=E,E=new Uint8Array(q.byteLength+M.data.byteLength),E.set(q),E.set(M.data,q.byteLength)):E=M.data;for(var le;R+7<E.length;){if(E[R]!==255||(E[R+1]&246)!==240){typeof le!="number"&&(le=R),R++;continue}if(typeof le=="number"&&(this.skipWarn_(le,R),le=null),G=(~E[R+1]&1)*2,O=(E[R+3]&3)<<11|E[R+4]<<3|(E[R+5]&224)>>5,K=((E[R+6]&3)+1)*1024,Y=K*J_/jg[(E[R+2]&60)>>>2],E.byteLength-R<O)break;this.trigger("data",{pts:M.pts+C*Y,dts:M.dts+C*Y,sampleCount:K,audioobjecttype:(E[R+2]>>>6&3)+1,channelcount:(E[R+2]&1)<<2|(E[R+3]&192)>>>6,samplerate:jg[(E[R+2]&60)>>>2],samplingfrequencyindex:(E[R+2]&60)>>>2,samplesize:16,data:E.subarray(R+7+G,R+O)}),C++,R+=O}typeof le=="number"&&(this.skipWarn_(le,R),le=null),E=E.subarray(R)}},this.flush=function(){C=0,this.trigger("done")},this.reset=function(){E=void 0,this.trigger("reset")},this.endTimeline=function(){E=void 0,this.trigger("endedtimeline")}},ku.prototype=new K_;var Q_=ku,Md;Md=function(y){var E=y.byteLength,C=0,M=0;this.length=function(){return 8*E},this.bitsAvailable=function(){return 8*E+M},this.loadWord=function(){var R=y.byteLength-E,O=new Uint8Array(4),G=Math.min(4,E);if(G===0)throw new Error("no bytes available");O.set(y.subarray(R,R+G)),C=new DataView(O.buffer).getUint32(0),M=G*8,E-=G},this.skipBits=function(R){var O;M>R?(C<<=R,M-=R):(R-=M,O=Math.floor(R/8),R-=O*8,E-=O,this.loadWord(),C<<=R,M-=R)},this.readBits=function(R){var O=Math.min(M,R),G=C>>>32-O;return M-=O,M>0?C<<=O:E>0&&this.loadWord(),O=R-O,O>0?G<<O|this.readBits(O):G},this.skipLeadingZeros=function(){var R;for(R=0;R<M;++R)if(C&2147483648>>>R)return C<<=R,M-=R,R;return this.loadWord(),R+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var R=this.skipLeadingZeros();return this.readBits(R+1)-1},this.readExpGolomb=function(){var R=this.readUnsignedExpGolomb();return 1&R?1+R>>>1:-1*(R>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Z_=Md,Xg=t,$_=Z_,Hu,zu,Wg;zu=function(){var y=0,E,C;zu.prototype.init.call(this),this.push=function(M){var R;C?(R=new Uint8Array(C.byteLength+M.data.byteLength),R.set(C),R.set(M.data,C.byteLength),C=R):C=M.data;for(var O=C.byteLength;y<O-3;y++)if(C[y+2]===1){E=y+5;break}for(;E<O;)switch(C[E]){case 0:if(C[E-1]!==0){E+=2;break}else if(C[E-2]!==0){E++;break}y+3!==E-2&&this.trigger("data",C.subarray(y+3,E-2));do E++;while(C[E]!==1&&E<O);y=E-2,E+=3;break;case 1:if(C[E-1]!==0||C[E-2]!==0){E+=3;break}this.trigger("data",C.subarray(y+3,E-2)),y=E-2,E+=3;break;default:E+=3;break}C=C.subarray(y),E-=y,y=0},this.reset=function(){C=null,y=0,this.trigger("reset")},this.flush=function(){C&&C.byteLength>3&&this.trigger("data",C.subarray(y+3)),C=null,y=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},zu.prototype=new Xg,Wg={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Hu=function(){var y=new zu,E,C,M,R,O,G,q;Hu.prototype.init.call(this),E=this,this.push=function(K){K.type==="video"&&(C=K.trackId,M=K.pts,R=K.dts,y.push(K))},y.on("data",function(K){var Y={trackId:C,pts:M,dts:R,data:K,nalUnitTypeCode:K[0]&31};switch(Y.nalUnitTypeCode){case 5:Y.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Y.nalUnitType="sei_rbsp",Y.escapedRBSP=O(K.subarray(1));break;case 7:Y.nalUnitType="seq_parameter_set_rbsp",Y.escapedRBSP=O(K.subarray(1)),Y.config=G(Y.escapedRBSP);break;case 8:Y.nalUnitType="pic_parameter_set_rbsp";break;case 9:Y.nalUnitType="access_unit_delimiter_rbsp";break}E.trigger("data",Y)}),y.on("done",function(){E.trigger("done")}),y.on("partialdone",function(){E.trigger("partialdone")}),y.on("reset",function(){E.trigger("reset")}),y.on("endedtimeline",function(){E.trigger("endedtimeline")}),this.flush=function(){y.flush()},this.partialFlush=function(){y.partialFlush()},this.reset=function(){y.reset()},this.endTimeline=function(){y.endTimeline()},q=function(K,Y){var le=8,ve=8,Ze,Oe;for(Ze=0;Ze<K;Ze++)ve!==0&&(Oe=Y.readExpGolomb(),ve=(le+Oe+256)%256),le=ve===0?le:ve},O=function(K){for(var Y=K.byteLength,le=[],ve=1,Ze,Oe;ve<Y-2;)K[ve]===0&&K[ve+1]===0&&K[ve+2]===3?(le.push(ve+2),ve+=2):ve++;if(le.length===0)return K;Ze=Y-le.length,Oe=new Uint8Array(Ze);var St=0;for(ve=0;ve<Ze;St++,ve++)St===le[0]&&(St++,le.shift()),Oe[ve]=K[St];return Oe},G=function(K){var Y=0,le=0,ve=0,Ze=0,Oe,St,Dt,nn,Vs,Pa,Oh,tc,Pr,Hl,ic,Pi=[1,1],zl,Vn;if(Oe=new $_(K),St=Oe.readUnsignedByte(),nn=Oe.readUnsignedByte(),Dt=Oe.readUnsignedByte(),Oe.skipUnsignedExpGolomb(),Wg[St]&&(Vs=Oe.readUnsignedExpGolomb(),Vs===3&&Oe.skipBits(1),Oe.skipUnsignedExpGolomb(),Oe.skipUnsignedExpGolomb(),Oe.skipBits(1),Oe.readBoolean()))for(ic=Vs!==3?8:12,Vn=0;Vn<ic;Vn++)Oe.readBoolean()&&(Vn<6?q(16,Oe):q(64,Oe));if(Oe.skipUnsignedExpGolomb(),Pa=Oe.readUnsignedExpGolomb(),Pa===0)Oe.readUnsignedExpGolomb();else if(Pa===1)for(Oe.skipBits(1),Oe.skipExpGolomb(),Oe.skipExpGolomb(),Oh=Oe.readUnsignedExpGolomb(),Vn=0;Vn<Oh;Vn++)Oe.skipExpGolomb();if(Oe.skipUnsignedExpGolomb(),Oe.skipBits(1),tc=Oe.readUnsignedExpGolomb(),Pr=Oe.readUnsignedExpGolomb(),Hl=Oe.readBits(1),Hl===0&&Oe.skipBits(1),Oe.skipBits(1),Oe.readBoolean()&&(Y=Oe.readUnsignedExpGolomb(),le=Oe.readUnsignedExpGolomb(),ve=Oe.readUnsignedExpGolomb(),Ze=Oe.readUnsignedExpGolomb()),Oe.readBoolean()&&Oe.readBoolean()){switch(zl=Oe.readUnsignedByte(),zl){case 1:Pi=[1,1];break;case 2:Pi=[12,11];break;case 3:Pi=[10,11];break;case 4:Pi=[16,11];break;case 5:Pi=[40,33];break;case 6:Pi=[24,11];break;case 7:Pi=[20,11];break;case 8:Pi=[32,11];break;case 9:Pi=[80,33];break;case 10:Pi=[18,11];break;case 11:Pi=[15,11];break;case 12:Pi=[64,33];break;case 13:Pi=[160,99];break;case 14:Pi=[4,3];break;case 15:Pi=[3,2];break;case 16:Pi=[2,1];break;case 255:{Pi=[Oe.readUnsignedByte()<<8|Oe.readUnsignedByte(),Oe.readUnsignedByte()<<8|Oe.readUnsignedByte()];break}}Pi&&Pi[0]/Pi[1]}return{profileIdc:St,levelIdc:Dt,profileCompatibility:nn,width:(tc+1)*16-Y*2-le*2,height:(2-Hl)*(Pr+1)*16-ve*2-Ze*2,sarRatio:Pi}}},Hu.prototype=new Xg;var BE={H264Stream:Hu,NalByteStream:zu},LE=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Yg=function(y,E){var C=y[E+6]<<21|y[E+7]<<14|y[E+8]<<7|y[E+9],M=y[E+5],R=(M&16)>>4;return C=C>=0?C:0,R?C+20:C+10},Gu=function(y,E){return y.length-E<10||y[E]!=="I".charCodeAt(0)||y[E+1]!=="D".charCodeAt(0)||y[E+2]!=="3".charCodeAt(0)?E:(E+=Yg(y,E),Gu(y,E))},Kg=function(y){var E=Gu(y,0);return y.length>=E+2&&(y[E]&255)===255&&(y[E+1]&240)===240&&(y[E+1]&22)===16},Ah=function(y){return y[0]<<21|y[1]<<14|y[2]<<7|y[3]},ex=function(y,E,C){var M,R="";for(M=E;M<C;M++)R+="%"+("00"+y[M].toString(16)).slice(-2);return R},tx=function(y,E,C){return unescape(ex(y,E,C))},Jg=function(y,E){var C=(y[E+5]&224)>>5,M=y[E+4]<<3,R=y[E+3]&6144;return R|M|C},ix=function(y,E){return y[E]==="I".charCodeAt(0)&&y[E+1]==="D".charCodeAt(0)&&y[E+2]==="3".charCodeAt(0)?"timed-metadata":y[E]&!0&&(y[E+1]&240)===240?"audio":null},nx=function(y){for(var E=0;E+5<y.length;){if(y[E]!==255||(y[E+1]&246)!==240){E++;continue}return LE[(y[E+2]&60)>>>2]}return null},Il=function(y){var E,C,M,R;E=10,y[5]&64&&(E+=4,E+=Ah(y.subarray(10,14)));do{if(C=Ah(y.subarray(E+4,E+8)),C<1)return null;if(R=String.fromCharCode(y[E],y[E+1],y[E+2],y[E+3]),R==="PRIV"){M=y.subarray(E+10,E+C+10);for(var O=0;O<M.byteLength;O++)if(M[O]===0){var G=tx(M,0,O);if(G==="com.apple.streaming.transportStreamTimestamp"){var q=M.subarray(O+1),K=(q[3]&1)<<30|q[4]<<22|q[5]<<14|q[6]<<6|q[7]>>>2;return K*=4,K+=q[7]&3,K}break}}E+=10,E+=C}while(E<y.byteLength);return null},Vu={isLikelyAacData:Kg,parseId3TagSize:Yg,parseAdtsSize:Jg,parseType:ix,parseSampleRate:nx,parseAacTimestamp:Il},sx=t,wd=Vu,Eh;Eh=function(){var y=new Uint8Array,E=0;Eh.prototype.init.call(this),this.setTimestamp=function(C){E=C},this.push=function(C){var M=0,R=0,O,G,q,K;for(y.length?(K=y.length,y=new Uint8Array(C.byteLength+K),y.set(y.subarray(0,K)),y.set(C,K)):y=C;y.length-R>=3;){if(y[R]==="I".charCodeAt(0)&&y[R+1]==="D".charCodeAt(0)&&y[R+2]==="3".charCodeAt(0)){if(y.length-R<10||(M=wd.parseId3TagSize(y,R),R+M>y.length))break;G={type:"timed-metadata",data:y.subarray(R,R+M)},this.trigger("data",G),R+=M;continue}else if((y[R]&255)===255&&(y[R+1]&240)===240){if(y.length-R<7||(M=wd.parseAdtsSize(y,R),R+M>y.length))break;q={type:"audio",data:y.subarray(R,R+M),pts:E,dts:E},this.trigger("data",q),R+=M;continue}R++}O=y.length-R,O>0?y=y.subarray(R):y=new Uint8Array},this.reset=function(){y=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){y=new Uint8Array,this.trigger("endedtimeline")}},Eh.prototype=new sx;var rx=Eh,IE=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],es=IE,ax=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ox=ax,Ch=t,qu=Qe,ju=Ie,Xo=je,dr=Mt,Ia=Y_,Mh=Ve,Qg=Q_,Zg=BE.H264Stream,$g=rx,lx=Vu.isLikelyAacData,e0=Ve.ONE_SECOND_IN_TS,wh=es,Dh=ox,Xu,Wo,Rh,Ds,t0=function(y,E){E.stream=y,this.trigger("log",E)},ux=function(y,E){for(var C=Object.keys(E),M=0;M<C.length;M++){var R=C[M];R==="headOfPipeline"||!E[R].on||E[R].on("log",t0.bind(y,R))}},i0=function(y,E){var C;if(y.length!==E.length)return!1;for(C=0;C<y.length;C++)if(y[C]!==E[C])return!1;return!0},Oa=function(y,E,C,M,R,O){var G=C-E,q=M-E,K=R-C;return{start:{dts:y,pts:y+G},end:{dts:y+q,pts:y+K},prependedContentDuration:O,baseMediaDecodeTime:y}};Wo=function(y,E){var C=[],M,R=0,O=0,G=1/0;E=E||{},M=E.firstSequenceNumber||0,Wo.prototype.init.call(this),this.push=function(q){dr.collectDtsInfo(y,q),y&&wh.forEach(function(K){y[K]=q[K]}),C.push(q)},this.setEarliestDts=function(q){R=q},this.setVideoBaseMediaDecodeTime=function(q){G=q},this.setAudioAppendStart=function(q){O=q},this.flush=function(){var q,K,Y,le,ve,Ze,Oe;if(C.length===0){this.trigger("done","AudioSegmentStream");return}q=Xo.trimAdtsFramesByEarliestDts(C,y,R),y.baseMediaDecodeTime=dr.calculateTrackBaseMediaDecodeTime(y,E.keepOriginalTimestamps),Oe=Xo.prefixWithSilence(y,q,O,G),y.samples=Xo.generateSampleTable(q),Y=qu.mdat(Xo.concatenateFrameData(q)),C=[],K=qu.moof(M,[y]),le=new Uint8Array(K.byteLength+Y.byteLength),M++,le.set(K),le.set(Y,K.byteLength),dr.clearDtsInfo(y),ve=Math.ceil(e0*1024/y.samplerate),q.length&&(Ze=q.length*ve,this.trigger("segmentTimingInfo",Oa(Mh.audioTsToVideoTs(y.baseMediaDecodeTime,y.samplerate),q[0].dts,q[0].pts,q[0].dts+Ze,q[0].pts+Ze,Oe||0)),this.trigger("timingInfo",{start:q[0].pts,end:q[0].pts+Ze})),this.trigger("data",{track:y,boxes:le}),this.trigger("done","AudioSegmentStream")},this.reset=function(){dr.clearDtsInfo(y),C=[],this.trigger("reset")}},Wo.prototype=new Ch,Xu=function(y,E){var C,M=[],R=[],O,G;E=E||{},C=E.firstSequenceNumber||0,Xu.prototype.init.call(this),delete y.minPTS,this.gopCache_=[],this.push=function(q){dr.collectDtsInfo(y,q),q.nalUnitType==="seq_parameter_set_rbsp"&&!O&&(O=q.config,y.sps=[q.data],Dh.forEach(function(K){y[K]=O[K]},this)),q.nalUnitType==="pic_parameter_set_rbsp"&&!G&&(G=q.data,y.pps=[q.data]),M.push(q)},this.flush=function(){for(var q,K,Y,le,ve,Ze,Oe=0,St,Dt;M.length&&M[0].nalUnitType!=="access_unit_delimiter_rbsp";)M.shift();if(M.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(q=ju.groupNalsIntoFrames(M),Y=ju.groupFramesIntoGops(q),Y[0][0].keyFrame||(K=this.getGopForFusion_(M[0],y),K?(Oe=K.duration,Y.unshift(K),Y.byteLength+=K.byteLength,Y.nalCount+=K.nalCount,Y.pts=K.pts,Y.dts=K.dts,Y.duration+=K.duration):Y=ju.extendFirstKeyFrame(Y)),R.length){var nn;if(E.alignGopsAtEnd?nn=this.alignGopsAtEnd_(Y):nn=this.alignGopsAtStart_(Y),!nn){this.gopCache_.unshift({gop:Y.pop(),pps:y.pps,sps:y.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),M=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}dr.clearDtsInfo(y),Y=nn}dr.collectDtsInfo(y,Y),y.samples=ju.generateSampleTable(Y),ve=qu.mdat(ju.concatenateNalData(Y)),y.baseMediaDecodeTime=dr.calculateTrackBaseMediaDecodeTime(y,E.keepOriginalTimestamps),this.trigger("processedGopsInfo",Y.map(function(Vs){return{pts:Vs.pts,dts:Vs.dts,byteLength:Vs.byteLength}})),St=Y[0],Dt=Y[Y.length-1],this.trigger("segmentTimingInfo",Oa(y.baseMediaDecodeTime,St.dts,St.pts,Dt.dts+Dt.duration,Dt.pts+Dt.duration,Oe)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[Y.length-1].pts+Y[Y.length-1].duration}),this.gopCache_.unshift({gop:Y.pop(),pps:y.pps,sps:y.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),M=[],this.trigger("baseMediaDecodeTime",y.baseMediaDecodeTime),this.trigger("timelineStartInfo",y.timelineStartInfo),le=qu.moof(C,[y]),Ze=new Uint8Array(le.byteLength+ve.byteLength),C++,Ze.set(le),Ze.set(ve,le.byteLength),this.trigger("data",{track:y,boxes:Ze}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),M=[],this.gopCache_.length=0,R.length=0,this.trigger("reset")},this.resetStream_=function(){dr.clearDtsInfo(y),O=void 0,G=void 0},this.getGopForFusion_=function(q){var K=45e3,Y=1e4,le=1/0,ve,Ze,Oe,St,Dt;for(Dt=0;Dt<this.gopCache_.length;Dt++)St=this.gopCache_[Dt],Oe=St.gop,!(!(y.pps&&i0(y.pps[0],St.pps[0]))||!(y.sps&&i0(y.sps[0],St.sps[0])))&&(Oe.dts<y.timelineStartInfo.dts||(ve=q.dts-Oe.dts-Oe.duration,ve>=-Y&&ve<=K&&(!Ze||le>ve)&&(Ze=St,le=ve)));return Ze?Ze.gop:null},this.alignGopsAtStart_=function(q){var K,Y,le,ve,Ze,Oe,St,Dt;for(Ze=q.byteLength,Oe=q.nalCount,St=q.duration,K=Y=0;K<R.length&&Y<q.length&&(le=R[K],ve=q[Y],le.pts!==ve.pts);){if(ve.pts>le.pts){K++;continue}Y++,Ze-=ve.byteLength,Oe-=ve.nalCount,St-=ve.duration}return Y===0?q:Y===q.length?null:(Dt=q.slice(Y),Dt.byteLength=Ze,Dt.duration=St,Dt.nalCount=Oe,Dt.pts=Dt[0].pts,Dt.dts=Dt[0].dts,Dt)},this.alignGopsAtEnd_=function(q){var K,Y,le,ve,Ze,Oe;for(K=R.length-1,Y=q.length-1,Ze=null,Oe=!1;K>=0&&Y>=0;){if(le=R[K],ve=q[Y],le.pts===ve.pts){Oe=!0;break}if(le.pts>ve.pts){K--;continue}K===R.length-1&&(Ze=Y),Y--}if(!Oe&&Ze===null)return null;var St;if(Oe?St=Y:St=Ze,St===0)return q;var Dt=q.slice(St),nn=Dt.reduce(function(Vs,Pa){return Vs.byteLength+=Pa.byteLength,Vs.duration+=Pa.duration,Vs.nalCount+=Pa.nalCount,Vs},{byteLength:0,duration:0,nalCount:0});return Dt.byteLength=nn.byteLength,Dt.duration=nn.duration,Dt.nalCount=nn.nalCount,Dt.pts=Dt[0].pts,Dt.dts=Dt[0].dts,Dt},this.alignGopsWith=function(q){R=q}},Xu.prototype=new Ch,Ds=function(y,E){this.numberOfTracks=0,this.metadataStream=E,y=y||{},typeof y.remux<"u"?this.remuxTracks=!!y.remux:this.remuxTracks=!0,typeof y.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=y.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ds.prototype.init.call(this),this.push=function(C){if(C.content||C.text)return this.pendingCaptions.push(C);if(C.frames)return this.pendingMetadata.push(C);this.pendingTracks.push(C.track),this.pendingBytes+=C.boxes.byteLength,C.track.type==="video"&&(this.videoTrack=C.track,this.pendingBoxes.push(C.boxes)),C.track.type==="audio"&&(this.audioTrack=C.track,this.pendingBoxes.unshift(C.boxes))}},Ds.prototype=new Ch,Ds.prototype.flush=function(y){var E=0,C={captions:[],captionStreams:{},metadata:[],info:{}},M,R,O,G=0,q;if(this.pendingTracks.length<this.numberOfTracks){if(y!=="VideoSegmentStream"&&y!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,Dh.forEach(function(K){C.info[K]=this.videoTrack[K]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,wh.forEach(function(K){C.info[K]=this.audioTrack[K]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?C.type=this.pendingTracks[0].type:C.type="combined",this.emittedTracks+=this.pendingTracks.length,O=qu.initSegment(this.pendingTracks),C.initSegment=new Uint8Array(O.byteLength),C.initSegment.set(O),C.data=new Uint8Array(this.pendingBytes),q=0;q<this.pendingBoxes.length;q++)C.data.set(this.pendingBoxes[q],E),E+=this.pendingBoxes[q].byteLength;for(q=0;q<this.pendingCaptions.length;q++)M=this.pendingCaptions[q],M.startTime=Mh.metadataTsToSeconds(M.startPts,G,this.keepOriginalTimestamps),M.endTime=Mh.metadataTsToSeconds(M.endPts,G,this.keepOriginalTimestamps),C.captionStreams[M.stream]=!0,C.captions.push(M);for(q=0;q<this.pendingMetadata.length;q++)R=this.pendingMetadata[q],R.cueTime=Mh.metadataTsToSeconds(R.pts,G,this.keepOriginalTimestamps),C.metadata.push(R);for(C.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",C),q=0;q<C.captions.length;q++)M=C.captions[q],this.trigger("caption",M);for(q=0;q<C.metadata.length;q++)R=C.metadata[q],this.trigger("id3Frame",R)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ds.prototype.setRemux=function(y){this.remuxTracks=y},Rh=function(y){var E=this,C=!0,M,R;Rh.prototype.init.call(this),y=y||{},this.baseMediaDecodeTime=y.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var O={};this.transmuxPipeline_=O,O.type="aac",O.metadataStream=new Ia.MetadataStream,O.aacStream=new $g,O.audioTimestampRolloverStream=new Ia.TimestampRolloverStream("audio"),O.timedMetadataTimestampRolloverStream=new Ia.TimestampRolloverStream("timed-metadata"),O.adtsStream=new Qg,O.coalesceStream=new Ds(y,O.metadataStream),O.headOfPipeline=O.aacStream,O.aacStream.pipe(O.audioTimestampRolloverStream).pipe(O.adtsStream),O.aacStream.pipe(O.timedMetadataTimestampRolloverStream).pipe(O.metadataStream).pipe(O.coalesceStream),O.metadataStream.on("timestamp",function(G){O.aacStream.setTimestamp(G.timeStamp)}),O.aacStream.on("data",function(G){G.type!=="timed-metadata"&&G.type!=="audio"||O.audioSegmentStream||(R=R||{timelineStartInfo:{baseMediaDecodeTime:E.baseMediaDecodeTime},codec:"adts",type:"audio"},O.coalesceStream.numberOfTracks++,O.audioSegmentStream=new Wo(R,y),O.audioSegmentStream.on("log",E.getLogTrigger_("audioSegmentStream")),O.audioSegmentStream.on("timingInfo",E.trigger.bind(E,"audioTimingInfo")),O.adtsStream.pipe(O.audioSegmentStream).pipe(O.coalesceStream),E.trigger("trackinfo",{hasAudio:!!R,hasVideo:!!M}))}),O.coalesceStream.on("data",this.trigger.bind(this,"data")),O.coalesceStream.on("done",this.trigger.bind(this,"done")),ux(this,O)},this.setupTsPipeline=function(){var O={};this.transmuxPipeline_=O,O.type="ts",O.metadataStream=new Ia.MetadataStream,O.packetStream=new Ia.TransportPacketStream,O.parseStream=new Ia.TransportParseStream,O.elementaryStream=new Ia.ElementaryStream,O.timestampRolloverStream=new Ia.TimestampRolloverStream,O.adtsStream=new Qg,O.h264Stream=new Zg,O.captionStream=new Ia.CaptionStream(y),O.coalesceStream=new Ds(y,O.metadataStream),O.headOfPipeline=O.packetStream,O.packetStream.pipe(O.parseStream).pipe(O.elementaryStream).pipe(O.timestampRolloverStream),O.timestampRolloverStream.pipe(O.h264Stream),O.timestampRolloverStream.pipe(O.adtsStream),O.timestampRolloverStream.pipe(O.metadataStream).pipe(O.coalesceStream),O.h264Stream.pipe(O.captionStream).pipe(O.coalesceStream),O.elementaryStream.on("data",function(G){var q;if(G.type==="metadata"){for(q=G.tracks.length;q--;)!M&&G.tracks[q].type==="video"?(M=G.tracks[q],M.timelineStartInfo.baseMediaDecodeTime=E.baseMediaDecodeTime):!R&&G.tracks[q].type==="audio"&&(R=G.tracks[q],R.timelineStartInfo.baseMediaDecodeTime=E.baseMediaDecodeTime);M&&!O.videoSegmentStream&&(O.coalesceStream.numberOfTracks++,O.videoSegmentStream=new Xu(M,y),O.videoSegmentStream.on("log",E.getLogTrigger_("videoSegmentStream")),O.videoSegmentStream.on("timelineStartInfo",function(K){R&&!y.keepOriginalTimestamps&&(R.timelineStartInfo=K,O.audioSegmentStream.setEarliestDts(K.dts-E.baseMediaDecodeTime))}),O.videoSegmentStream.on("processedGopsInfo",E.trigger.bind(E,"gopInfo")),O.videoSegmentStream.on("segmentTimingInfo",E.trigger.bind(E,"videoSegmentTimingInfo")),O.videoSegmentStream.on("baseMediaDecodeTime",function(K){R&&O.audioSegmentStream.setVideoBaseMediaDecodeTime(K)}),O.videoSegmentStream.on("timingInfo",E.trigger.bind(E,"videoTimingInfo")),O.h264Stream.pipe(O.videoSegmentStream).pipe(O.coalesceStream)),R&&!O.audioSegmentStream&&(O.coalesceStream.numberOfTracks++,O.audioSegmentStream=new Wo(R,y),O.audioSegmentStream.on("log",E.getLogTrigger_("audioSegmentStream")),O.audioSegmentStream.on("timingInfo",E.trigger.bind(E,"audioTimingInfo")),O.audioSegmentStream.on("segmentTimingInfo",E.trigger.bind(E,"audioSegmentTimingInfo")),O.adtsStream.pipe(O.audioSegmentStream).pipe(O.coalesceStream)),E.trigger("trackinfo",{hasAudio:!!R,hasVideo:!!M})}}),O.coalesceStream.on("data",this.trigger.bind(this,"data")),O.coalesceStream.on("id3Frame",function(G){G.dispatchType=O.metadataStream.dispatchType,E.trigger("id3Frame",G)}),O.coalesceStream.on("caption",this.trigger.bind(this,"caption")),O.coalesceStream.on("done",this.trigger.bind(this,"done")),ux(this,O)},this.setBaseMediaDecodeTime=function(O){var G=this.transmuxPipeline_;y.keepOriginalTimestamps||(this.baseMediaDecodeTime=O),R&&(R.timelineStartInfo.dts=void 0,R.timelineStartInfo.pts=void 0,dr.clearDtsInfo(R),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity()),M&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),M.timelineStartInfo.dts=void 0,M.timelineStartInfo.pts=void 0,dr.clearDtsInfo(M),G.captionStream.reset()),G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(O){R&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(O)},this.setRemux=function(O){var G=this.transmuxPipeline_;y.remux=O,G&&G.coalesceStream&&G.coalesceStream.setRemux(O)},this.alignGopsWith=function(O){M&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(O)},this.getLogTrigger_=function(O){var G=this;return function(q){q.stream=O,G.trigger("log",q)}},this.push=function(O){if(C){var G=lx(O);G&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!G&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),C=!1}this.transmuxPipeline_.headOfPipeline.push(O)},this.flush=function(){C=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Rh.prototype=new Ch;var yo={Transmuxer:Rh,VideoSegmentStream:Xu,AudioSegmentStream:Wo,AUDIO_PROPERTIES:wh,VIDEO_PROPERTIES:Dh,generateSegmentTimingInfo:Oa},n0=function(y){return y>>>0},s0=function(y){return("00"+y.toString(16)).slice(-2)},Yo={toUnsigned:n0,toHexString:s0},Dd=function(y){var E="";return E+=String.fromCharCode(y[0]),E+=String.fromCharCode(y[1]),E+=String.fromCharCode(y[2]),E+=String.fromCharCode(y[3]),E},vo=Dd,cs=Yo.toUnsigned,Rd=vo,r0=function(y,E){var C=[],M,R,O,G,q;if(!E.length)return null;for(M=0;M<y.byteLength;)R=cs(y[M]<<24|y[M+1]<<16|y[M+2]<<8|y[M+3]),O=Rd(y.subarray(M+4,M+8)),G=R>1?M+R:y.byteLength,O===E[0]&&(E.length===1?C.push(y.subarray(M+8,G)):(q=r0(y.subarray(M+8,G),E.slice(1)),q.length&&(C=C.concat(q)))),M=G;return C},Wu=r0,Bh=Yo.toUnsigned,a0=r.getUint64,Bd=function(y){var E={version:y[0],flags:new Uint8Array(y.subarray(1,4))};return E.version===1?E.baseMediaDecodeTime=a0(y.subarray(4)):E.baseMediaDecodeTime=Bh(y[4]<<24|y[5]<<16|y[6]<<8|y[7]),E},Ld=Bd,pr=function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:y[0],flags:new Uint8Array(y.subarray(1,4)),trackId:E.getUint32(4)},M=C.flags[2]&1,R=C.flags[2]&2,O=C.flags[2]&8,G=C.flags[2]&16,q=C.flags[2]&32,K=C.flags[0]&65536,Y=C.flags[0]&131072,le;return le=8,M&&(le+=4,C.baseDataOffset=E.getUint32(12),le+=4),R&&(C.sampleDescriptionIndex=E.getUint32(le),le+=4),O&&(C.defaultSampleDuration=E.getUint32(le),le+=4),G&&(C.defaultSampleSize=E.getUint32(le),le+=4),q&&(C.defaultSampleFlags=E.getUint32(le)),K&&(C.durationIsEmpty=!0),!M&&Y&&(C.baseDataOffsetIsMoof=!0),C},Id=pr,Od=r.getUint64,cx=function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:y[0],flags:new Uint8Array(y.subarray(1,4)),references:[],referenceId:E.getUint32(4),timescale:E.getUint32(8)},M=12;C.version===0?(C.earliestPresentationTime=E.getUint32(M),C.firstOffset=E.getUint32(M+4),M+=8):(C.earliestPresentationTime=Od(y.subarray(M)),C.firstOffset=Od(y.subarray(M+8)),M+=16),M+=2;var R=E.getUint16(M);for(M+=2;R>0;M+=12,R--)C.references.push({referenceType:(y[M]&128)>>>7,referencedSize:E.getUint32(M)&2147483647,subsegmentDuration:E.getUint32(M+4),startsWithSap:!!(y[M+8]&128),sapType:(y[M+8]&112)>>>4,sapDeltaTime:E.getUint32(M+8)&268435455});return C},hx=cx,o0=function(y){return{isLeading:(y[0]&12)>>>2,dependsOn:y[0]&3,isDependedOn:(y[1]&192)>>>6,hasRedundancy:(y[1]&48)>>>4,paddingValue:(y[1]&14)>>>1,isNonSyncSample:y[1]&1,degradationPriority:y[2]<<8|y[3]}},l0=o0,u0=l0,Pd=function(y){var E={version:y[0],flags:new Uint8Array(y.subarray(1,4)),samples:[]},C=new DataView(y.buffer,y.byteOffset,y.byteLength),M=E.flags[2]&1,R=E.flags[2]&4,O=E.flags[1]&1,G=E.flags[1]&2,q=E.flags[1]&4,K=E.flags[1]&8,Y=C.getUint32(4),le=8,ve;for(M&&(E.dataOffset=C.getInt32(le),le+=4),R&&Y&&(ve={flags:u0(y.subarray(le,le+4))},le+=4,O&&(ve.duration=C.getUint32(le),le+=4),G&&(ve.size=C.getUint32(le),le+=4),K&&(E.version===1?ve.compositionTimeOffset=C.getInt32(le):ve.compositionTimeOffset=C.getUint32(le),le+=4),E.samples.push(ve),Y--);Y--;)ve={},O&&(ve.duration=C.getUint32(le),le+=4),G&&(ve.size=C.getUint32(le),le+=4),q&&(ve.flags=u0(y.subarray(le,le+4)),le+=4),K&&(E.version===1?ve.compositionTimeOffset=C.getInt32(le):ve.compositionTimeOffset=C.getUint32(le),le+=4),E.samples.push(ve);return E},Yu=Pd,tn=r,fx=tn.getUint64,hs,Ud,fs=function(y){return new Date(y*1e3-20828448e5)},Ir=vo,dx=Wu,px=function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C=[],M,R;for(M=0;M+4<y.length;M+=R){if(R=E.getUint32(M),M+=4,R<=0){C.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(y[M]&31){case 1:C.push("slice_layer_without_partitioning_rbsp");break;case 5:C.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:C.push("sei_rbsp");break;case 7:C.push("seq_parameter_set_rbsp");break;case 8:C.push("pic_parameter_set_rbsp");break;case 9:C.push("access_unit_delimiter_rbsp");break;default:C.push("UNKNOWN NAL - "+y[M]&31);break}}return C},zs={avc1:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength);return{dataReferenceIndex:E.getUint16(6),width:E.getUint16(24),height:E.getUint16(26),horizresolution:E.getUint16(28)+E.getUint16(30)/16,vertresolution:E.getUint16(32)+E.getUint16(34)/16,frameCount:E.getUint16(40),depth:E.getUint16(74),config:hs(y.subarray(78,y.byteLength))}},avcC:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={configurationVersion:y[0],avcProfileIndication:y[1],profileCompatibility:y[2],avcLevelIndication:y[3],lengthSizeMinusOne:y[4]&3,sps:[],pps:[]},M=y[5]&31,R,O,G,q;for(G=6,q=0;q<M;q++)O=E.getUint16(G),G+=2,C.sps.push(new Uint8Array(y.subarray(G,G+O))),G+=O;for(R=y[G],G++,q=0;q<R;q++)O=E.getUint16(G),G+=2,C.pps.push(new Uint8Array(y.subarray(G,G+O))),G+=O;return C},btrt:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength);return{bufferSizeDB:E.getUint32(0),maxBitrate:E.getUint32(4),avgBitrate:E.getUint32(8)}},edts:function(E){return{boxes:hs(E)}},elst:function(E){var C=new DataView(E.buffer,E.byteOffset,E.byteLength),M={version:C.getUint8(0),flags:new Uint8Array(E.subarray(1,4)),edits:[]},R=C.getUint32(4),O;for(O=8;R;R--)M.version===0?(M.edits.push({segmentDuration:C.getUint32(O),mediaTime:C.getInt32(O+4),mediaRate:C.getUint16(O+8)+C.getUint16(O+10)/(256*256)}),O+=12):(M.edits.push({segmentDuration:fx(E.subarray(O)),mediaTime:fx(E.subarray(O+8)),mediaRate:C.getUint16(O+16)+C.getUint16(O+18)/(256*256)}),O+=20);return M},esds:function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),esId:y[6]<<8|y[7],streamPriority:y[8]&31,decoderConfig:{objectProfileIndication:y[11],streamType:y[12]>>>2&63,bufferSize:y[13]<<16|y[14]<<8|y[15],maxBitrate:y[16]<<24|y[17]<<16|y[18]<<8|y[19],avgBitrate:y[20]<<24|y[21]<<16|y[22]<<8|y[23],decoderConfigDescriptor:{tag:y[24],length:y[25],audioObjectType:y[26]>>>3&31,samplingFrequencyIndex:(y[26]&7)<<1|y[27]>>>7&1,channelConfiguration:y[27]>>>3&15}}}},ftyp:function(y){for(var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={majorBrand:Ir(y.subarray(0,4)),minorVersion:E.getUint32(4),compatibleBrands:[]},M=8;M<y.byteLength;)C.compatibleBrands.push(Ir(y.subarray(M,M+4))),M+=4;return C},dinf:function(y){return{boxes:hs(y)}},dref:function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),dataReferences:hs(y.subarray(8))}},hdlr:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),handlerType:Ir(y.subarray(8,12)),name:""},M=8;for(M=24;M<y.byteLength;M++){if(y[M]===0){M++;break}C.name+=String.fromCharCode(y[M])}return C.name=decodeURIComponent(escape(C.name)),C},mdat:function(y){return{byteLength:y.byteLength,nals:px(y)}},mdhd:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C=4,M,R={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),language:""};return R.version===1?(C+=4,R.creationTime=fs(E.getUint32(C)),C+=8,R.modificationTime=fs(E.getUint32(C)),C+=4,R.timescale=E.getUint32(C),C+=8,R.duration=E.getUint32(C)):(R.creationTime=fs(E.getUint32(C)),C+=4,R.modificationTime=fs(E.getUint32(C)),C+=4,R.timescale=E.getUint32(C),C+=4,R.duration=E.getUint32(C)),C+=4,M=E.getUint16(C),R.language+=String.fromCharCode((M>>10)+96),R.language+=String.fromCharCode(((M&992)>>5)+96),R.language+=String.fromCharCode((M&31)+96),R},mdia:function(y){return{boxes:hs(y)}},mfhd:function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),sequenceNumber:y[4]<<24|y[5]<<16|y[6]<<8|y[7]}},minf:function(y){return{boxes:hs(y)}},mp4a:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={dataReferenceIndex:E.getUint16(6),channelcount:E.getUint16(16),samplesize:E.getUint16(18),samplerate:E.getUint16(24)+E.getUint16(26)/65536};return y.byteLength>28&&(C.streamDescriptor=hs(y.subarray(28))[0]),C},moof:function(y){return{boxes:hs(y)}},moov:function(y){return{boxes:hs(y)}},mvex:function(y){return{boxes:hs(y)}},mvhd:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C=4,M={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4))};return M.version===1?(C+=4,M.creationTime=fs(E.getUint32(C)),C+=8,M.modificationTime=fs(E.getUint32(C)),C+=4,M.timescale=E.getUint32(C),C+=8,M.duration=E.getUint32(C)):(M.creationTime=fs(E.getUint32(C)),C+=4,M.modificationTime=fs(E.getUint32(C)),C+=4,M.timescale=E.getUint32(C),C+=4,M.duration=E.getUint32(C)),C+=4,M.rate=E.getUint16(C)+E.getUint16(C+2)/16,C+=4,M.volume=E.getUint8(C)+E.getUint8(C+1)/8,C+=2,C+=2,C+=2*4,M.matrix=new Uint32Array(y.subarray(C,C+9*4)),C+=9*4,C+=6*4,M.nextTrackId=E.getUint32(C),M},pdin:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength);return{version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),rate:E.getUint32(4),initialDelay:E.getUint32(8)}},sdtp:function(y){var E={version:y[0],flags:new Uint8Array(y.subarray(1,4)),samples:[]},C;for(C=4;C<y.byteLength;C++)E.samples.push({dependsOn:(y[C]&48)>>4,isDependedOn:(y[C]&12)>>2,hasRedundancy:y[C]&3});return E},sidx:hx,smhd:function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),balance:y[4]+y[5]/256}},stbl:function(y){return{boxes:hs(y)}},ctts:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),compositionOffsets:[]},M=E.getUint32(4),R;for(R=8;M;R+=8,M--)C.compositionOffsets.push({sampleCount:E.getUint32(R),sampleOffset:E[C.version===0?"getUint32":"getInt32"](R+4)});return C},stss:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),syncSamples:[]},M=E.getUint32(4),R;for(R=8;M;R+=4,M--)C.syncSamples.push(E.getUint32(R));return C},stco:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:y[0],flags:new Uint8Array(y.subarray(1,4)),chunkOffsets:[]},M=E.getUint32(4),R;for(R=8;M;R+=4,M--)C.chunkOffsets.push(E.getUint32(R));return C},stsc:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C=E.getUint32(4),M={version:y[0],flags:new Uint8Array(y.subarray(1,4)),sampleToChunks:[]},R;for(R=8;C;R+=12,C--)M.sampleToChunks.push({firstChunk:E.getUint32(R),samplesPerChunk:E.getUint32(R+4),sampleDescriptionIndex:E.getUint32(R+8)});return M},stsd:function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),sampleDescriptions:hs(y.subarray(8))}},stsz:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:y[0],flags:new Uint8Array(y.subarray(1,4)),sampleSize:E.getUint32(4),entries:[]},M;for(M=12;M<y.byteLength;M+=4)C.entries.push(E.getUint32(M));return C},stts:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C={version:y[0],flags:new Uint8Array(y.subarray(1,4)),timeToSamples:[]},M=E.getUint32(4),R;for(R=8;M;R+=8,M--)C.timeToSamples.push({sampleCount:E.getUint32(R),sampleDelta:E.getUint32(R+4)});return C},styp:function(y){return zs.ftyp(y)},tfdt:Ld,tfhd:Id,tkhd:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength),C=4,M={version:E.getUint8(0),flags:new Uint8Array(y.subarray(1,4))};return M.version===1?(C+=4,M.creationTime=fs(E.getUint32(C)),C+=8,M.modificationTime=fs(E.getUint32(C)),C+=4,M.trackId=E.getUint32(C),C+=4,C+=8,M.duration=E.getUint32(C)):(M.creationTime=fs(E.getUint32(C)),C+=4,M.modificationTime=fs(E.getUint32(C)),C+=4,M.trackId=E.getUint32(C),C+=4,C+=4,M.duration=E.getUint32(C)),C+=4,C+=2*4,M.layer=E.getUint16(C),C+=2,M.alternateGroup=E.getUint16(C),C+=2,M.volume=E.getUint8(C)+E.getUint8(C+1)/8,C+=2,C+=2,M.matrix=new Uint32Array(y.subarray(C,C+9*4)),C+=9*4,M.width=E.getUint16(C)+E.getUint16(C+2)/65536,C+=4,M.height=E.getUint16(C)+E.getUint16(C+2)/65536,M},traf:function(y){return{boxes:hs(y)}},trak:function(y){return{boxes:hs(y)}},trex:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength);return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),trackId:E.getUint32(4),defaultSampleDescriptionIndex:E.getUint32(8),defaultSampleDuration:E.getUint32(12),defaultSampleSize:E.getUint32(16),sampleDependsOn:y[20]&3,sampleIsDependedOn:(y[21]&192)>>6,sampleHasRedundancy:(y[21]&48)>>4,samplePaddingValue:(y[21]&14)>>1,sampleIsDifferenceSample:!!(y[21]&1),sampleDegradationPriority:E.getUint16(22)}},trun:Yu,"url ":function(y){return{version:y[0],flags:new Uint8Array(y.subarray(1,4))}},vmhd:function(y){var E=new DataView(y.buffer,y.byteOffset,y.byteLength);return{version:y[0],flags:new Uint8Array(y.subarray(1,4)),graphicsmode:E.getUint16(4),opcolor:new Uint16Array([E.getUint16(6),E.getUint16(8),E.getUint16(10)])}}};hs=function(y){for(var E=0,C=[],M,R,O,G,q,K=new ArrayBuffer(y.length),Y=new Uint8Array(K),le=0;le<y.length;++le)Y[le]=y[le];for(M=new DataView(K);E<y.byteLength;)R=M.getUint32(E),O=Ir(y.subarray(E+4,E+8)),G=R>1?E+R:y.byteLength,q=(zs[O]||function(ve){return{data:ve}})(y.subarray(E+8,G)),q.size=R,q.type=O,C.push(q),E=G;return C},Ud=function(y,E){var C;return E=E||0,C=new Array(E*2+1).join(" "),y.map(function(M,R){return C+M.type+`
`+Object.keys(M).filter(function(O){return O!=="type"&&O!=="boxes"}).map(function(O){var G=C+"  "+O+": ",q=M[O];if(q instanceof Uint8Array||q instanceof Uint32Array){var K=Array.prototype.slice.call(new Uint8Array(q.buffer,q.byteOffset,q.byteLength)).map(function(Y){return" "+("00"+Y.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return K?K.length===1?G+"<"+K.join("").slice(1)+">":G+`<
`+K.map(function(Y){return C+"  "+Y}).join(`
`)+`
`+C+"  >":G+"<>"}return G+JSON.stringify(q,null,2).split(`
`).map(function(Y,le){return le===0?Y:C+"  "+Y}).join(`
`)}).join(`
`)+(M.boxes?`
`+Ud(M.boxes,E+1):"")}).join(`
`)};var Gs={inspect:hs,textify:Ud,parseType:Ir,findBox:dx,parseTraf:zs.traf,parseTfdt:zs.tfdt,parseHdlr:zs.hdlr,parseTfhd:zs.tfhd,parseTrun:zs.trun,parseSidx:zs.sidx},mx=function(y){for(var E=0,C=String.fromCharCode(y[E]),M="";C!=="\0";)M+=C,E++,C=String.fromCharCode(y[E]);return M+=C,M},gx={uint8ToCString:mx},Lh=gx.uint8ToCString,c0=r.getUint64,h0=function(y){var E=4,C=y[0],M,R,O,G,q,K,Y,le;if(C===0){M=Lh(y.subarray(E)),E+=M.length,R=Lh(y.subarray(E)),E+=R.length;var ve=new DataView(y.buffer);O=ve.getUint32(E),E+=4,q=ve.getUint32(E),E+=4,K=ve.getUint32(E),E+=4,Y=ve.getUint32(E),E+=4}else if(C===1){var ve=new DataView(y.buffer);O=ve.getUint32(E),E+=4,G=c0(y.subarray(E)),E+=8,K=ve.getUint32(E),E+=4,Y=ve.getUint32(E),E+=4,M=Lh(y.subarray(E)),E+=M.length,R=Lh(y.subarray(E)),E+=R.length}le=new Uint8Array(y.subarray(E,y.byteLength));var Ze={scheme_id_uri:M,value:R,timescale:O||1,presentation_time:G,presentation_time_delta:q,event_duration:K,id:Y,message_data:le};return yx(C,Ze)?Ze:void 0},Nd=function(y,E,C,M){return y||y===0?y/E:M+C/E},yx=function(y,E){var C=E.scheme_id_uri!=="\0",M=y===0&&vx(E.presentation_time_delta)&&C,R=y===1&&vx(E.presentation_time)&&C;return!(y>1)&&M||R},vx=function(y){return y!==void 0||y!==null},_x={parseEmsgBox:h0,scaleTime:Nd},Ku;typeof window<"u"?Ku=window:typeof i<"u"?Ku=i:typeof self<"u"?Ku=self:Ku={};var Or=Ku,Ju=Yo.toUnsigned,Qu=Yo.toHexString,mn=Wu,Ko=vo,ds=_x,xx=Id,mr=Yu,bx=Ld,_o=r.getUint64,Ol,xo,Fd,kd,bo,Hd,Pl,Ul=Or,Nl=fi.parseId3Frames;Ol=function(y){var E={},C=mn(y,["moov","trak"]);return C.reduce(function(M,R){var O,G,q,K,Y;return O=mn(R,["tkhd"])[0],!O||(G=O[0],q=G===0?12:20,K=Ju(O[q]<<24|O[q+1]<<16|O[q+2]<<8|O[q+3]),Y=mn(R,["mdia","mdhd"])[0],!Y)?null:(G=Y[0],q=G===0?12:20,M[K]=Ju(Y[q]<<24|Y[q+1]<<16|Y[q+2]<<8|Y[q+3]),M)},E)},xo=function(y,E){var C;C=mn(E,["moof","traf"]);var M=C.reduce(function(R,O){var G=mn(O,["tfhd"])[0],q=Ju(G[4]<<24|G[5]<<16|G[6]<<8|G[7]),K=y[q]||9e4,Y=mn(O,["tfdt"])[0],le=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),ve;Y[0]===1?ve=_o(Y.subarray(4,12)):ve=le.getUint32(4);let Ze;return typeof ve=="bigint"?Ze=ve/Ul.BigInt(K):typeof ve=="number"&&!isNaN(ve)&&(Ze=ve/K),Ze<Number.MAX_SAFE_INTEGER&&(Ze=Number(Ze)),Ze<R&&(R=Ze),R},1/0);return typeof M=="bigint"||isFinite(M)?M:0},Fd=function(y,E){var C=mn(E,["moof","traf"]),M=0,R=0,O;if(C&&C.length){var G=mn(C[0],["tfhd"])[0],q=mn(C[0],["trun"])[0],K=mn(C[0],["tfdt"])[0];if(G){var Y=xx(G);O=Y.trackId}if(K){var le=bx(K);M=le.baseMediaDecodeTime}if(q){var ve=mr(q);ve.samples&&ve.samples.length&&(R=ve.samples[0].compositionTimeOffset||0)}}var Ze=y[O]||9e4;typeof M=="bigint"&&(R=Ul.BigInt(R),Ze=Ul.BigInt(Ze));var Oe=(M+R)/Ze;return typeof Oe=="bigint"&&Oe<Number.MAX_SAFE_INTEGER&&(Oe=Number(Oe)),Oe},kd=function(y){var E=mn(y,["moov","trak"]),C=[];return E.forEach(function(M){var R=mn(M,["mdia","hdlr"]),O=mn(M,["tkhd"]);R.forEach(function(G,q){var K=Ko(G.subarray(8,12)),Y=O[q],le,ve,Ze;K==="vide"&&(le=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),ve=le.getUint8(0),Ze=ve===0?le.getUint32(12):le.getUint32(20),C.push(Ze))})}),C},Hd=function(y){var E=y[0],C=E===0?12:20;return Ju(y[C]<<24|y[C+1]<<16|y[C+2]<<8|y[C+3])},bo=function(y){var E=mn(y,["moov","trak"]),C=[];return E.forEach(function(M){var R={},O=mn(M,["tkhd"])[0],G,q;O&&(G=new DataView(O.buffer,O.byteOffset,O.byteLength),q=G.getUint8(0),R.id=q===0?G.getUint32(12):G.getUint32(20));var K=mn(M,["mdia","hdlr"])[0];if(K){var Y=Ko(K.subarray(8,12));Y==="vide"?R.type="video":Y==="soun"?R.type="audio":R.type=Y}var le=mn(M,["mdia","minf","stbl","stsd"])[0];if(le){var ve=le.subarray(8);R.codec=Ko(ve.subarray(4,8));var Ze=mn(ve,[R.codec])[0],Oe,St;Ze&&(/^[asm]vc[1-9]$/i.test(R.codec)?(Oe=Ze.subarray(78),St=Ko(Oe.subarray(4,8)),St==="avcC"&&Oe.length>11?(R.codec+=".",R.codec+=Qu(Oe[9]),R.codec+=Qu(Oe[10]),R.codec+=Qu(Oe[11])):R.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(R.codec)?(Oe=Ze.subarray(28),St=Ko(Oe.subarray(4,8)),St==="esds"&&Oe.length>20&&Oe[19]!==0?(R.codec+="."+Qu(Oe[19]),R.codec+="."+Qu(Oe[20]>>>2&63).replace(/^0/,"")):R.codec="mp4a.40.2"):R.codec=R.codec.toLowerCase())}var Dt=mn(M,["mdia","mdhd"])[0];Dt&&(R.timescale=Hd(Dt)),C.push(R)}),C},Pl=function(y,E=0){var C=mn(y,["emsg"]);return C.map(M=>{var R=ds.parseEmsgBox(new Uint8Array(M)),O=Nl(R.message_data);return{cueTime:ds.scaleTime(R.presentation_time,R.timescale,R.presentation_time_delta,E),duration:ds.scaleTime(R.event_duration,R.timescale),frames:O}})};var Zu={findBox:mn,parseType:Ko,timescale:Ol,startTime:xo,compositionStartTime:Fd,videoTrackIds:kd,tracks:bo,getTimescaleFromMediaHeader:Hd,getEmsgID3:Pl};const{parseTrun:Tx}=Gs,{findBox:$u}=Zu;var f0=Or,zd=function(y){var E=$u(y,["moof","traf"]),C=$u(y,["mdat"]),M=[];return C.forEach(function(R,O){var G=E[O];M.push({mdat:R,traf:G})}),M},Sx=function(y,E,C){var M=E,R=C.defaultSampleDuration||0,O=C.defaultSampleSize||0,G=C.trackId,q=[];return y.forEach(function(K){var Y=Tx(K),le=Y.samples;le.forEach(function(ve){ve.duration===void 0&&(ve.duration=R),ve.size===void 0&&(ve.size=O),ve.trackId=G,ve.dts=M,ve.compositionTimeOffset===void 0&&(ve.compositionTimeOffset=0),typeof M=="bigint"?(ve.pts=M+f0.BigInt(ve.compositionTimeOffset),M+=f0.BigInt(ve.duration)):(ve.pts=M+ve.compositionTimeOffset,M+=ve.duration)}),q=q.concat(le)}),q},Gd={getMdatTrafPairs:zd,parseSamples:Sx},d0=Rl.discardEmulationPreventionBytes,p0=z.CaptionStream,Vd=Wu,m0=Ld,gr=Id,{getMdatTrafPairs:Ax,parseSamples:Rs}=Gd,Ex=function(y,E){for(var C=y,M=0;M<E.length;M++){var R=E[M];if(C<R.size)return R;C-=R.size}return null},g0=function(y,E,C){var M=new DataView(y.buffer,y.byteOffset,y.byteLength),R={logs:[],seiNals:[]},O,G,q,K;for(G=0;G+4<y.length;G+=q)if(q=M.getUint32(G),G+=4,!(q<=0))switch(y[G]&31){case 6:var Y=y.subarray(G+1,G+1+q),le=Ex(G,E);if(O={nalUnitType:"sei_rbsp",size:q,data:Y,escapedRBSP:d0(Y),trackId:C},le)O.pts=le.pts,O.dts=le.dts,K=le;else if(K)O.pts=K.pts,O.dts=K.dts;else{R.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+G+" for trackId "+C+". See mux.js#223."});break}R.seiNals.push(O);break}return R},Cx=function(y,E){var C={},M=Ax(y);return M.forEach(function(R){var O=R.mdat,G=R.traf,q=Vd(G,["tfhd"]),K=gr(q[0]),Y=K.trackId,le=Vd(G,["tfdt"]),ve=le.length>0?m0(le[0]).baseMediaDecodeTime:0,Ze=Vd(G,["trun"]),Oe,St;E===Y&&Ze.length>0&&(Oe=Rs(Ze,ve,K),St=g0(O,Oe,Y),C[Y]||(C[Y]={seiNals:[],logs:[]}),C[Y].seiNals=C[Y].seiNals.concat(St.seiNals),C[Y].logs=C[Y].logs.concat(St.logs))}),C},OE=function(y,E,C){var M;if(E===null)return null;M=Cx(y,E);var R=M[E]||{};return{seiNals:R.seiNals,logs:R.logs,timescale:C}},To=function(){var y=!1,E,C,M,R,O,G;this.isInitialized=function(){return y},this.init=function(q){E=new p0,y=!0,G=q?q.isPartial:!1,E.on("data",function(K){K.startTime=K.startPts/R,K.endTime=K.endPts/R,O.captions.push(K),O.captionStreams[K.stream]=!0}),E.on("log",function(K){O.logs.push(K)})},this.isNewInit=function(q,K){return q&&q.length===0||K&&typeof K=="object"&&Object.keys(K).length===0?!1:M!==q[0]||R!==K[M]},this.parse=function(q,K,Y){var le;if(this.isInitialized()){if(!K||!Y)return null;if(this.isNewInit(K,Y))M=K[0],R=Y[M];else if(M===null||!R)return C.push(q),null}else return null;for(;C.length>0;){var ve=C.shift();this.parse(ve,K,Y)}return le=OE(q,M,R),le&&le.logs&&(O.logs=O.logs.concat(le.logs)),le===null||!le.seiNals?O.logs.length?{logs:O.logs,captions:[],captionStreams:[]}:null:(this.pushNals(le.seiNals),this.flushStream(),O)},this.pushNals=function(q){if(!this.isInitialized()||!q||q.length===0)return null;q.forEach(function(K){E.push(K)})},this.flushStream=function(){if(!this.isInitialized())return null;G?E.partialFlush():E.flush()},this.clearParsedCaptions=function(){O.captions=[],O.captionStreams={},O.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;E.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){C=[],M=null,R=null,O?this.clearParsedCaptions():O={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Mx=To;const{parseTfdt:y0}=Gs,yr=Wu,{getTimescaleFromMediaHeader:wx}=Zu,{parseSamples:Dx,getMdatTrafPairs:Rx}=Gd;var qd=function(){let y=9e4;this.init=function(E){const C=yr(E,["moov","trak","mdia","mdhd"])[0];C&&(y=wx(C))},this.parseSegment=function(E){const C=[],M=Rx(E);let R=0;return M.forEach(function(O){const G=O.mdat,q=O.traf,K=yr(q,["tfdt"])[0],Y=yr(q,["tfhd"])[0],le=yr(q,["trun"]);if(K&&(R=y0(K).baseMediaDecodeTime),le.length&&Y){const ve=Dx(le,R,Y);let Ze=0;ve.forEach(function(Oe){const St="utf-8",Dt=new TextDecoder(St),nn=G.slice(Ze,Ze+Oe.size);if(yr(nn,["vtte"])[0]){Ze+=Oe.size;return}yr(nn,["vttc"]).forEach(function(Oh){const tc=yr(Oh,["payl"])[0],Pr=yr(Oh,["sttg"])[0],Hl=Oe.pts/y,ic=(Oe.pts+Oe.duration)/y;let Pi,zl;if(tc)try{Pi=Dt.decode(tc)}catch(Vn){console.error(Vn)}if(Pr)try{zl=Dt.decode(Pr)}catch(Vn){console.error(Vn)}Oe.duration&&Pi&&C.push({cueText:Pi,start:Hl,end:ic,settings:zl})}),Ze+=Oe.size})}}),C}},Ih=oe,Bx=function(y){var E=y[1]&31;return E<<=8,E|=y[2],E},jd=function(y){return!!(y[1]&64)},Xd=function(y){var E=0;return(y[3]&48)>>>4>1&&(E+=y[4]+1),E},Lx=function(y,E){var C=Bx(y);return C===0?"pat":C===E?"pmt":E?"pes":null},Ix=function(y){var E=jd(y),C=4+Xd(y);return E&&(C+=y[C]+1),(y[C+10]&31)<<8|y[C+11]},ec=function(y){var E={},C=jd(y),M=4+Xd(y);if(C&&(M+=y[M]+1),!!(y[M+5]&1)){var R,O,G;R=(y[M+1]&15)<<8|y[M+2],O=3+R-4,G=(y[M+10]&15)<<8|y[M+11];for(var q=12+G;q<O;){var K=M+q;E[(y[K+1]&31)<<8|y[K+2]]=y[K],q+=((y[K+3]&15)<<8|y[K+4])+5}return E}},Wd=function(y,E){var C=Bx(y),M=E[C];switch(M){case Ih.H264_STREAM_TYPE:return"video";case Ih.ADTS_STREAM_TYPE:return"audio";case Ih.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Ox=function(y){var E=jd(y);if(!E)return null;var C=4+Xd(y);if(C>=y.byteLength)return null;var M=null,R;return R=y[C+7],R&192&&(M={},M.pts=(y[C+9]&14)<<27|(y[C+10]&255)<<20|(y[C+11]&254)<<12|(y[C+12]&255)<<5|(y[C+13]&254)>>>3,M.pts*=4,M.pts+=(y[C+13]&6)>>>1,M.dts=M.pts,R&64&&(M.dts=(y[C+14]&14)<<27|(y[C+15]&255)<<20|(y[C+16]&254)<<12|(y[C+17]&255)<<5|(y[C+18]&254)>>>3,M.dts*=4,M.dts+=(y[C+18]&6)>>>1)),M},Yd=function(y){switch(y){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},UE=function(y){for(var E=4+Xd(y),C=y.subarray(E),M=0,R=0,O=!1,G;R<C.byteLength-3;R++)if(C[R+2]===1){M=R+5;break}for(;M<C.byteLength;)switch(C[M]){case 0:if(C[M-1]!==0){M+=2;break}else if(C[M-2]!==0){M++;break}R+3!==M-2&&(G=Yd(C[R+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(O=!0));do M++;while(C[M]!==1&&M<C.length);R=M-2,M+=3;break;case 1:if(C[M-1]!==0||C[M-2]!==0){M+=3;break}G=Yd(C[R+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(O=!0),R=M-2,M+=3;break;default:M+=3;break}return C=C.subarray(R),M-=R,R=0,C&&C.byteLength>3&&(G=Yd(C[R+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(O=!0)),O},Px={parseType:Lx,parsePat:Ix,parsePmt:ec,parsePayloadUnitStartIndicator:jd,parsePesType:Wd,parsePesTime:Ox,videoPacketContainsKeyFrame:UE},Jo=oe,Fl=pt.handleRollover,Et={};Et.ts=Px,Et.aac=Vu;var So=Ve.ONE_SECOND_IN_TS,Bs=188,na=71,NE=function(y,E){for(var C=0,M=Bs,R,O;M<y.byteLength;){if(y[C]===na&&y[M]===na){switch(R=y.subarray(C,M),O=Et.ts.parseType(R,E.pid),O){case"pat":E.pid=Et.ts.parsePat(R);break;case"pmt":var G=Et.ts.parsePmt(R);E.table=E.table||{},Object.keys(G).forEach(function(q){E.table[q]=G[q]});break}C+=Bs,M+=Bs;continue}C++,M++}},Ux=function(y,E,C){for(var M=0,R=Bs,O,G,q,K,Y,le=!1;R<=y.byteLength;){if(y[M]===na&&(y[R]===na||R===y.byteLength)){switch(O=y.subarray(M,R),G=Et.ts.parseType(O,E.pid),G){case"pes":q=Et.ts.parsePesType(O,E.table),K=Et.ts.parsePayloadUnitStartIndicator(O),q==="audio"&&K&&(Y=Et.ts.parsePesTime(O),Y&&(Y.type="audio",C.audio.push(Y),le=!0));break}if(le)break;M+=Bs,R+=Bs;continue}M++,R++}for(R=y.byteLength,M=R-Bs,le=!1;M>=0;){if(y[M]===na&&(y[R]===na||R===y.byteLength)){switch(O=y.subarray(M,R),G=Et.ts.parseType(O,E.pid),G){case"pes":q=Et.ts.parsePesType(O,E.table),K=Et.ts.parsePayloadUnitStartIndicator(O),q==="audio"&&K&&(Y=Et.ts.parsePesTime(O),Y&&(Y.type="audio",C.audio.push(Y),le=!0));break}if(le)break;M-=Bs,R-=Bs;continue}M--,R--}},FE=function(y,E,C){for(var M=0,R=Bs,O,G,q,K,Y,le,ve,Ze,Oe=!1,St={data:[],size:0};R<y.byteLength;){if(y[M]===na&&y[R]===na){switch(O=y.subarray(M,R),G=Et.ts.parseType(O,E.pid),G){case"pes":if(q=Et.ts.parsePesType(O,E.table),K=Et.ts.parsePayloadUnitStartIndicator(O),q==="video"&&(K&&!Oe&&(Y=Et.ts.parsePesTime(O),Y&&(Y.type="video",C.video.push(Y),Oe=!0)),!C.firstKeyFrame)){if(K&&St.size!==0){for(le=new Uint8Array(St.size),ve=0;St.data.length;)Ze=St.data.shift(),le.set(Ze,ve),ve+=Ze.byteLength;if(Et.ts.videoPacketContainsKeyFrame(le)){var Dt=Et.ts.parsePesTime(le);Dt?(C.firstKeyFrame=Dt,C.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}St.size=0}St.data.push(O),St.size+=O.byteLength}break}if(Oe&&C.firstKeyFrame)break;M+=Bs,R+=Bs;continue}M++,R++}for(R=y.byteLength,M=R-Bs,Oe=!1;M>=0;){if(y[M]===na&&y[R]===na){switch(O=y.subarray(M,R),G=Et.ts.parseType(O,E.pid),G){case"pes":q=Et.ts.parsePesType(O,E.table),K=Et.ts.parsePayloadUnitStartIndicator(O),q==="video"&&K&&(Y=Et.ts.parsePesTime(O),Y&&(Y.type="video",C.video.push(Y),Oe=!0));break}if(Oe)break;M-=Bs,R-=Bs;continue}M--,R--}},kE=function(y,E){if(y.audio&&y.audio.length){var C=E;(typeof C>"u"||isNaN(C))&&(C=y.audio[0].dts),y.audio.forEach(function(O){O.dts=Fl(O.dts,C),O.pts=Fl(O.pts,C),O.dtsTime=O.dts/So,O.ptsTime=O.pts/So})}if(y.video&&y.video.length){var M=E;if((typeof M>"u"||isNaN(M))&&(M=y.video[0].dts),y.video.forEach(function(O){O.dts=Fl(O.dts,M),O.pts=Fl(O.pts,M),O.dtsTime=O.dts/So,O.ptsTime=O.pts/So}),y.firstKeyFrame){var R=y.firstKeyFrame;R.dts=Fl(R.dts,M),R.pts=Fl(R.pts,M),R.dtsTime=R.dts/So,R.ptsTime=R.pts/So}}},v0=function(y){for(var E=!1,C=0,M=null,R=null,O=0,G=0,q;y.length-G>=3;){var K=Et.aac.parseType(y,G);switch(K){case"timed-metadata":if(y.length-G<10){E=!0;break}if(O=Et.aac.parseId3TagSize(y,G),O>y.length){E=!0;break}R===null&&(q=y.subarray(G,G+O),R=Et.aac.parseAacTimestamp(q)),G+=O;break;case"audio":if(y.length-G<7){E=!0;break}if(O=Et.aac.parseAdtsSize(y,G),O>y.length){E=!0;break}M===null&&(q=y.subarray(G,G+O),M=Et.aac.parseSampleRate(q)),C++,G+=O;break;default:G++;break}if(E)return null}if(M===null||R===null)return null;var Y=So/M,le={audio:[{type:"audio",dts:R,pts:R},{type:"audio",dts:R+C*1024*Y,pts:R+C*1024*Y}]};return le},Qo=function(y){var E={pid:null,table:null},C={};NE(y,E);for(var M in E.table)if(E.table.hasOwnProperty(M)){var R=E.table[M];switch(R){case Jo.H264_STREAM_TYPE:C.video=[],FE(y,E,C),C.video.length===0&&delete C.video;break;case Jo.ADTS_STREAM_TYPE:C.audio=[],Ux(y,E,C),C.audio.length===0&&delete C.audio;break}}return C},Nx=function(y,E){var C=Et.aac.isLikelyAacData(y),M;return C?M=v0(y):M=Qo(y),!M||!M.audio&&!M.video?null:(kE(M,E),M)},Kd={inspect:Nx,parseAudioPes_:Ux};const kl=function(y,E){E.on("data",function(C){const M=C.initSegment;C.initSegment={data:M.buffer,byteOffset:M.byteOffset,byteLength:M.byteLength};const R=C.data;C.data=R.buffer,y.postMessage({action:"data",segment:C,byteOffset:R.byteOffset,byteLength:R.byteLength},[C.data])}),E.on("done",function(C){y.postMessage({action:"done"})}),E.on("gopInfo",function(C){y.postMessage({action:"gopInfo",gopInfo:C})}),E.on("videoSegmentTimingInfo",function(C){const M={start:{decode:Ve.videoTsToSeconds(C.start.dts),presentation:Ve.videoTsToSeconds(C.start.pts)},end:{decode:Ve.videoTsToSeconds(C.end.dts),presentation:Ve.videoTsToSeconds(C.end.pts)},baseMediaDecodeTime:Ve.videoTsToSeconds(C.baseMediaDecodeTime)};C.prependedContentDuration&&(M.prependedContentDuration=Ve.videoTsToSeconds(C.prependedContentDuration)),y.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:M})}),E.on("audioSegmentTimingInfo",function(C){const M={start:{decode:Ve.videoTsToSeconds(C.start.dts),presentation:Ve.videoTsToSeconds(C.start.pts)},end:{decode:Ve.videoTsToSeconds(C.end.dts),presentation:Ve.videoTsToSeconds(C.end.pts)},baseMediaDecodeTime:Ve.videoTsToSeconds(C.baseMediaDecodeTime)};C.prependedContentDuration&&(M.prependedContentDuration=Ve.videoTsToSeconds(C.prependedContentDuration)),y.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:M})}),E.on("id3Frame",function(C){y.postMessage({action:"id3Frame",id3Frame:C})}),E.on("caption",function(C){y.postMessage({action:"caption",caption:C})}),E.on("trackinfo",function(C){y.postMessage({action:"trackinfo",trackInfo:C})}),E.on("audioTimingInfo",function(C){y.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ve.videoTsToSeconds(C.start),end:Ve.videoTsToSeconds(C.end)}})}),E.on("videoTimingInfo",function(C){y.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ve.videoTsToSeconds(C.start),end:Ve.videoTsToSeconds(C.end)}})}),E.on("log",function(C){y.postMessage({action:"log",log:C})})};class _0{constructor(E,C){this.options=C||{},this.self=E,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new yo.Transmuxer(this.options),kl(this.self,this.transmuxer)}pushMp4Captions(E){this.captionParser||(this.captionParser=new Mx,this.captionParser.init());const C=new Uint8Array(E.data,E.byteOffset,E.byteLength),M=this.captionParser.parse(C,E.trackIds,E.timescales);this.self.postMessage({action:"mp4Captions",captions:M&&M.captions||[],logs:M&&M.logs||[],data:C.buffer},[C.buffer])}initMp4WebVttParser(E){this.webVttParser||(this.webVttParser=new qd);const C=new Uint8Array(E.data,E.byteOffset,E.byteLength);this.webVttParser.init(C)}getMp4WebVttText(E){this.webVttParser||(this.webVttParser=new qd);const C=new Uint8Array(E.data,E.byteOffset,E.byteLength),M=this.webVttParser.parseSegment(C);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:M||[],data:C.buffer},[C.buffer])}probeMp4StartTime({timescales:E,data:C}){const M=Zu.startTime(E,C);this.self.postMessage({action:"probeMp4StartTime",startTime:M,data:C},[C.buffer])}probeMp4Tracks({data:E}){const C=Zu.tracks(E);this.self.postMessage({action:"probeMp4Tracks",tracks:C,data:E},[E.buffer])}probeEmsgID3({data:E,offset:C}){const M=Zu.getEmsgID3(E,C);this.self.postMessage({action:"probeEmsgID3",id3Frames:M,emsgData:E},[E.buffer])}probeTs({data:E,baseStartTime:C}){const M=typeof C=="number"&&!isNaN(C)?C*Ve.ONE_SECOND_IN_TS:void 0,R=Kd.inspect(E,M);let O=null;R&&(O={hasVideo:R.video&&R.video.length===2||!1,hasAudio:R.audio&&R.audio.length===2||!1},O.hasVideo&&(O.videoStart=R.video[0].ptsTime),O.hasAudio&&(O.audioStart=R.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:O,data:E},[E.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(E){const C=new Uint8Array(E.data,E.byteOffset,E.byteLength);this.transmuxer.push(C)}reset(){this.transmuxer.reset()}setTimestampOffset(E){const C=E.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ve.secondsToVideoTs(C)))}setAudioAppendStart(E){this.transmuxer.setAudioAppendStart(Math.ceil(Ve.secondsToVideoTs(E.appendStart)))}setRemux(E){this.transmuxer.setRemux(E.remux)}flush(E){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(E){this.transmuxer.alignGopsWith(E.gopsToAlignWith.slice())}}self.onmessage=function(y){if(y.data.action==="init"&&y.data.options){this.messageHandlers=new _0(self,y.data.options);return}this.messageHandlers||(this.messageHandlers=new _0(self)),y.data&&y.data.action&&y.data.action!=="init"&&this.messageHandlers[y.data.action]&&this.messageHandlers[y.data.action](y.data)}}));var eye=$7($0e);const tye=(i,e,t)=>{const{type:n,initSegment:s,captions:r,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=i.data.segment;e.buffer.push({captions:r,captionStreams:a,metadata:o});const f=i.data.segment.boxes||{data:i.data.segment.data},d={type:n,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),t(d)},iye=({transmuxedData:i,callback:e})=>{i.buffer=[],e(i)},nye=(i,e)=>{e.gopInfo=i.data.gopInfo},iq=i=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:s,remux:r,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:f,onAudioSegmentTimingInfo:d,onId3:p,onCaptions:m,onDone:_,onEndedTimeline:x,onTransmuxerLog:b,isEndOfTimeline:v,segment:T,triggerSegmentEventFn:A}=i,w={buffer:[]};let B=v;const I=F=>{e.currentTransmux===i&&(F.data.action==="data"&&tye(F,w,a),F.data.action==="trackinfo"&&o(F.data.trackInfo),F.data.action==="gopInfo"&&nye(F,w),F.data.action==="audioTimingInfo"&&l(F.data.audioTimingInfo),F.data.action==="videoTimingInfo"&&u(F.data.videoTimingInfo),F.data.action==="videoSegmentTimingInfo"&&f(F.data.videoSegmentTimingInfo),F.data.action==="audioSegmentTimingInfo"&&d(F.data.audioSegmentTimingInfo),F.data.action==="id3Frame"&&p([F.data.id3Frame],F.data.id3Frame.dispatchType),F.data.action==="caption"&&m(F.data.caption),F.data.action==="endedtimeline"&&(B=!1,x()),F.data.action==="log"&&b(F.data.log),F.data.type==="transmuxed"&&(B||(e.onmessage=null,iye({transmuxedData:w,callback:_}),nq(e))))},P=()=>{const F={message:"Received an error message from the transmuxer worker",metadata:{errorType:ye.Error.StreamingFailedToTransmuxSegment,segmentInfo:bf({segment:T})}};_(null,F)};if(e.onmessage=I,e.onerror=P,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),t.byteLength){const F=t instanceof ArrayBuffer?t:t.buffer,N=t instanceof ArrayBuffer?0:t.byteOffset;A({type:"segmenttransmuxingstart",segment:T}),e.postMessage({action:"push",data:F,byteOffset:N,byteLength:t.byteLength},[F])}v&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},nq=i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():iq(i.currentTransmux))},MF=(i,e)=>{i.postMessage({action:e}),nq(i)},sq=(i,e)=>{if(!e.currentTransmux){e.currentTransmux=i,MF(e,i);return}e.transmuxQueue.push(MF.bind(null,e,i))},sye=i=>{sq("reset",i)},rye=i=>{sq("endTimeline",i)},rq=i=>{if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,iq(i);return}i.transmuxer.transmuxQueue.push(i)},aye=i=>{const e=new eye;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:i}),e};var IM={reset:sye,endTimeline:rye,transmux:rq,createTransmuxer:aye};const Om=function(i){const e=i.transmuxer,t=i.endAction||i.action,n=i.callback,s=Ki({},i,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===t&&(e.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,i.byteOffset||0,i.byteLength||a.data.data.byteLength),i.data&&(i.data=a.data.data)),n(a.data))};if(e.addEventListener("message",r),i.data){const a=i.data instanceof ArrayBuffer;s.byteOffset=a?0:i.data.byteOffset,s.byteLength=i.data.byteLength;const o=[a?i.data:i.data.buffer];e.postMessage(s,o)}else e.postMessage(s)},fl={FAILURE:2,TIMEOUT:-101,ABORTED:-102},aq="wvtt",XD=i=>{i.forEach(e=>{e.abort()})},oye=i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),lye=i=>{const e=i.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=i.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},RL=(i,e)=>{const{requestType:t}=e,n=Yf({requestType:t,request:e,error:i});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:fl.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:fl.ABORTED,xhr:e,metadata:n}:i?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:fl.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:fl.FAILURE,xhr:e,metadata:n}:null},wF=(i,e,t,n)=>(s,r)=>{const a=r.response,o=RL(s,r);if(o)return t(o,i);if(a.byteLength!==16)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:fl.FAILURE,xhr:r},i);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const f={uri:r.uri};return n({type:"segmentkeyloadcomplete",segment:i,keyInfo:f}),t(null,i)},uye=(i,e)=>{e===aq&&i.transmuxer.postMessage({action:"initMp4WebVttParser",data:i.map.bytes})},cye=(i,e,t)=>{e===aq&&Om({action:"getMp4WebVttText",data:i.bytes,transmuxer:i.transmuxer,callback:({data:n,mp4VttCues:s})=>{i.bytes=n,t(null,i,{mp4VttCues:s})}})},oq=(i,e)=>{const t=J3(i.map.bytes);if(t!=="mp4"){const n=i.map.resolvedUri||i.map.uri,s=t||"unknown";return e({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${n}`,code:fl.FAILURE,metadata:{mediaType:s}})}Om({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:({tracks:n,data:s})=>(i.map.bytes=s,n.forEach(function(r){i.map.tracks=i.map.tracks||{},!i.map.tracks[r.type]&&(i.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[r.id]=r.timescale),r.type==="text"&&uye(i,r.codec))}),e(null))})},hye=({segment:i,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,s)=>{const r=RL(n,s);if(r)return e(r,i);const a=new Uint8Array(s.response);if(t({type:"segmentloaded",segment:i}),i.map.key)return i.map.encryptedBytes=a,e(null,i);i.map.bytes=a,oq(i,function(o){if(o)return o.xhr=s,o.status=s.status,e(o,i);e(null,i)})},fye=({segment:i,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(s,r)=>{const a=RL(s,r);if(a)return e(a,i);n({type:"segmentloaded",segment:i});const o=t==="arraybuffer"||!r.responseText?r.response:Q0e(r.responseText.substring(i.lastReachedChar||0));return i.stats=oye(r),i.key?i.encryptedBytes=new Uint8Array(o):i.bytes=new Uint8Array(o),e(null,i)},dye=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})=>{const _=i.map&&i.map.tracks||{},x=!!(_.audio&&_.video);let b=n.bind(null,i,"audio","start");const v=n.bind(null,i,"audio","end");let T=n.bind(null,i,"video","start");const A=n.bind(null,i,"video","end"),w=()=>rq({bytes:e,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:x,onData:B=>{B.type=B.type==="combined"?"video":B.type,f(i,B)},onTrackInfo:B=>{t&&(x&&(B.isMuxed=!0),t(i,B))},onAudioTimingInfo:B=>{b&&typeof B.start<"u"&&(b(B.start),b=null),v&&typeof B.end<"u"&&v(B.end)},onVideoTimingInfo:B=>{T&&typeof B.start<"u"&&(T(B.start),T=null),A&&typeof B.end<"u"&&A(B.end)},onVideoSegmentTimingInfo:B=>{const I={pts:{start:B.start.presentation,end:B.end.presentation},dts:{start:B.start.decode,end:B.end.decode}};m({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:I}),s(B)},onAudioSegmentTimingInfo:B=>{const I={pts:{start:B.start.pts,end:B.end.pts},dts:{start:B.start.dts,end:B.end.dts}};m({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:I}),r(B)},onId3:(B,I)=>{a(i,B,I)},onCaptions:B=>{o(i,[B])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:p,onDone:(B,I)=>{d&&(B.type=B.type==="combined"?"video":B.type,m({type:"segmenttransmuxingcomplete",segment:i}),d(I,i,B))},segment:i,triggerSegmentEventFn:m});Om({action:"probeTs",transmuxer:i.transmuxer,data:e,baseStartTime:i.baseStartTime,callback:B=>{i.bytes=e=B.data;const I=B.result;I&&(t(i,{hasAudio:I.hasAudio,hasVideo:I.hasVideo,isMuxed:x}),t=null),w()}})},lq=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})=>{let _=new Uint8Array(e);if(Ime(_)){i.isFmp4=!0;const{tracks:x}=i.map;if(x.text&&(!x.audio||!x.video)){f(i,{data:_,type:"text"}),cye(i,x.text.codec,d);return}const v={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(v.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(v.videoCodec=x.video.codec),x.video&&x.audio&&(v.isMuxed=!0),t(i,v);const T=(A,w)=>{f(i,{data:_,type:v.hasAudio&&!v.isMuxed?"audio":"video"}),w&&w.length&&a(i,w),A&&A.length&&o(i,A),d(null,i,{})};Om({action:"probeMp4StartTime",timescales:i.map.timescales,data:_,transmuxer:i.transmuxer,callback:({data:A,startTime:w})=>{e=A.buffer,i.bytes=_=A,v.hasAudio&&!v.isMuxed&&n(i,"audio","start",w),v.hasVideo&&n(i,"video","start",w),Om({action:"probeEmsgID3",data:_,transmuxer:i.transmuxer,offset:w,callback:({emsgData:B,id3Frames:I})=>{if(e=B.buffer,i.bytes=_=B,!x.video||!B.byteLength||!i.transmuxer){T(void 0,I);return}Om({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:_,timescales:i.map.timescales,trackIds:[x.video.id],callback:P=>{e=P.data.buffer,i.bytes=_=P.data,P.logs.forEach(function(F){p(Bi(F,{stream:"mp4CaptionParser"}))}),T(P.captions,I)}})}})}});return}if(!i.transmuxer){d(null,i,{});return}if(typeof i.container>"u"&&(i.container=J3(_)),i.container!=="ts"&&i.container!=="aac"){t(i,{hasAudio:!1,hasVideo:!1}),d(null,i,{});return}dye({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})},uq=function({id:i,key:e,encryptedBytes:t,decryptionWorker:n,segment:s,doneFn:r},a){const o=u=>{if(u.data.source===i){n.removeEventListener("message",o);const f=u.data.decrypted;a(new Uint8Array(f.bytes,f.byteOffset,f.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",f=bf({segment:s}),d={message:u,metadata:{error:new Error(u),errorType:ye.Error.StreamingFailedToDecryptSegment,segmentInfo:f,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};r(d,s)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(W7({source:i,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},pye=({decryptionWorker:i,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})=>{m({type:"segmentdecryptionstart"}),uq({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:i,segment:e,doneFn:d},_=>{e.bytes=_,m({type:"segmentdecryptioncomplete",segment:e}),lq({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})})},mye=({activeXhrs:i,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})=>{let _=0,x=!1;return(b,v)=>{if(!x){if(b)return x=!0,XD(i),d(b,v);if(_+=1,_===i.length){const T=function(){if(v.encryptedBytes)return pye({decryptionWorker:e,segment:v,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m});lq({segment:v,bytes:v.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f,doneFn:d,onTransmuxerLog:p,triggerSegmentEventFn:m})};if(v.endOfAllRequests=Date.now(),v.map&&v.map.encryptedBytes&&!v.map.bytes)return m({type:"segmentdecryptionstart",segment:v}),uq({decryptionWorker:e,id:v.requestId+"-init",encryptedBytes:v.map.encryptedBytes,key:v.map.key,segment:v,doneFn:d},A=>{v.map.bytes=A,m({type:"segmentdecryptioncomplete",segment:v}),oq(v,w=>{if(w)return XD(i),d(w,v);T()})});T()}}}},gye=({loadendState:i,abortFn:e})=>t=>{t.target.aborted&&e&&!i.calledAbortFn&&(e(),i.calledAbortFn=!0)},yye=({segment:i,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:f})=>d=>{if(!d.target.aborted)return i.stats=Bi(i.stats,lye(d)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),e(d,i)},vye=({xhr:i,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:s,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:f,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:m,dataFn:_,doneFn:x,onTransmuxerLog:b,triggerSegmentEventFn:v})=>{const T=[],A=mye({activeXhrs:T,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:f,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:m,dataFn:_,doneFn:x,onTransmuxerLog:b,triggerSegmentEventFn:v});if(n.key&&!n.key.bytes){const F=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&F.push(n.map.key);const N=Bi(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),U=wF(n,F,A,v),H={uri:n.key.resolvedUri};v({type:"segmentkeyloadstart",segment:n,keyInfo:H});const re=i(N,U);T.push(re)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const re=Bi(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),J=wF(n,[n.map.key],A,v),ae={uri:n.map.key.resolvedUri};v({type:"segmentkeyloadstart",segment:n,keyInfo:ae});const ce=i(re,J);T.push(ce)}const N=Bi(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:qD(n.map),requestType:"segment-media-initialization"}),U=hye({segment:n,finishProcessingFn:A,triggerSegmentEventFn:v});v({type:"segmentloadstart",segment:n});const H=i(N,U);T.push(H)}const w=Bi(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:qD(n),requestType:"segment"}),B=fye({segment:n,finishProcessingFn:A,responseType:w.responseType,triggerSegmentEventFn:v});v({type:"segmentloadstart",segment:n});const I=i(w,B);I.addEventListener("progress",yye({segment:n,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:f,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:m,dataFn:_})),T.push(I);const P={};return T.forEach(F=>{F.addEventListener("loadend",gye({loadendState:P,abortFn:s}))}),()=>XD(T)},CT=po("PlaylistSelector"),DF=function(i){if(!i||!i.playlist)return;const e=i.playlist;return JSON.stringify({id:e.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:e.attributes&&e.attributes.CODECS||""})},Pm=function(i,e){if(!i)return"";const t=Z.getComputedStyle(i);return t?t[e]:""},Um=function(i,e){const t=i.slice();i.sort(function(n,s){const r=e(n,s);return r===0?t.indexOf(n)-t.indexOf(s):r})},BL=function(i,e){let t,n;return i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH),t=t||Z.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Z.Number.MAX_VALUE,t-n},_ye=function(i,e){let t,n;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(t=i.attributes.RESOLUTION.width),t=t||Z.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Z.Number.MAX_VALUE,t===n&&i.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?i.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let cq=function(i){const{main:e,bandwidth:t,playerWidth:n,playerHeight:s,playerObjectFit:r,limitRenditionByPlayerDimensions:a,playlistController:o}=i;if(!e)return;const l={bandwidth:t,width:n,height:s,limitRenditionByPlayerDimensions:a};let u=e.playlists;Xr.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let f=u.map(P=>{let F;const N=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.width,U=P.attributes&&P.attributes.RESOLUTION&&P.attributes.RESOLUTION.height;return F=P.attributes&&P.attributes.BANDWIDTH,F=F||Z.Number.MAX_VALUE,{bandwidth:F,width:N,height:U,playlist:P}});Um(f,(P,F)=>P.bandwidth-F.bandwidth),f=f.filter(P=>!Xr.isIncompatible(P.playlist));let d=f.filter(P=>Xr.isEnabled(P.playlist));d.length||(d=f.filter(P=>!Xr.isDisabled(P.playlist)));const p=d.filter(P=>P.bandwidth*_s.BANDWIDTH_VARIANCE<t);let m=p[p.length-1];const _=p.filter(P=>P.bandwidth===m.bandwidth)[0];if(a===!1){const P=_||d[0]||f[0];if(P&&P.playlist){let F="sortedPlaylistReps";return _&&(F="bandwidthBestRep"),d[0]&&(F="enabledPlaylistReps"),CT(`choosing ${DF(P)} using ${F} with options`,l),P.playlist}return CT("could not choose a playlist with options",l),null}const x=p.filter(P=>P.width&&P.height);Um(x,(P,F)=>P.width-F.width);const b=x.filter(P=>P.width===n&&P.height===s);m=b[b.length-1];const v=b.filter(P=>P.bandwidth===m.bandwidth)[0];let T,A,w;v||(T=x.filter(P=>r==="cover"?P.width>n&&P.height>s:P.width>n||P.height>s),A=T.filter(P=>P.width===T[0].width&&P.height===T[0].height),m=A[A.length-1],w=A.filter(P=>P.bandwidth===m.bandwidth)[0]);let B;if(o.leastPixelDiffSelector){const P=x.map(F=>(F.pixelDiff=Math.abs(F.width-n)+Math.abs(F.height-s),F));Um(P,(F,N)=>F.pixelDiff===N.pixelDiff?N.bandwidth-F.bandwidth:F.pixelDiff-N.pixelDiff),B=P[0]}const I=B||w||v||_||d[0]||f[0];if(I&&I.playlist){let P="sortedPlaylistReps";return B?P="leastPixelDiffRep":w?P="resolutionPlusOneRep":v?P="resolutionBestRep":_?P="bandwidthBestRep":d[0]&&(P="enabledPlaylistReps"),CT(`choosing ${DF(I)} using ${P} with options`,l),I.playlist}return CT("could not choose a playlist with options",l),null};const RF=function(){let i=this.useDevicePixelRatio&&Z.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),cq({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(Pm(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(Pm(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?Pm(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},xye=function(i){let e=-1,t=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&Z.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=i*this.systemBandwidth+(1-i)*e,t=this.systemBandwidth),cq({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(Pm(this.tech_.el(),"width"),10)*n,playerHeight:parseInt(Pm(this.tech_.el(),"height"),10)*n,playerObjectFit:this.usePlayerObjectFit?Pm(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},bye=function(i){const{main:e,currentTime:t,bandwidth:n,duration:s,segmentDuration:r,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=i,u=e.playlists.filter(_=>!Xr.isIncompatible(_));let f=u.filter(Xr.isEnabled);f.length||(f=u.filter(_=>!Xr.isDisabled(_)));const p=f.filter(Xr.hasAttribute.bind(null,"BANDWIDTH")).map(_=>{const b=l.getSyncPoint(_,s,o,t)?1:2,T=Xr.estimateSegmentRequestTime(r,n,_)*b-a;return{playlist:_,rebufferingImpact:T}}),m=p.filter(_=>_.rebufferingImpact<=0);return Um(m,(_,x)=>BL(x.playlist,_.playlist)),m.length?m[0]:(Um(p,(_,x)=>_.rebufferingImpact-x.rebufferingImpact),p[0]||null)},Tye=function(){const i=this.playlists.main.playlists.filter(Xr.isEnabled);return Um(i,(t,n)=>BL(t,n)),i.filter(t=>!!cv(this.playlists.main,t).video)[0]||null},Sye=i=>{let e=0,t;return i.bytes&&(t=new Uint8Array(i.bytes),i.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function hq(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch{return""}}const Aye=function(i,e,t){if(!i[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const s=e.textTracks().getTrackById(n);if(s)i[t]=s;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=r[n];u&&(a=u.label,o=u.language,l=u.default),i[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},Eye=function({inbandTextTracks:i,captionArray:e,timestampOffset:t}){if(!e)return;const n=Z.WebKitDataCue||Z.VTTCue;e.forEach(s=>{const r=s.stream;s.content?s.content.forEach(a=>{const o=new n(s.startTime+t,s.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",i[r].addCue(o)}):i[r].addCue(new n(s.startTime+t,s.endTime+t,s.text))})},Cye=function(i){Object.defineProperties(i.frame,{id:{get(){return ye.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get(){return ye.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get(){return ye.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},Mye=({inbandTextTracks:i,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const s=Z.WebKitDataCue||Z.VTTCue,r=i.metadataTrack_;if(!r||(e.forEach(f=>{const d=f.cueTime+t;typeof d!="number"||Z.isNaN(d)||d<0||!(d<1/0)||!f.frames||!f.frames.length||f.frames.forEach(p=>{const m=new s(d,d,p.value||p.url||p.data||"");m.frame=p,m.value=p,Cye(m),r.addCue(m)})}),!r.cues||!r.cues.length))return;const a=r.cues,o=[];for(let f=0;f<a.length;f++)a[f]&&o.push(a[f]);const l=o.reduce((f,d)=>{const p=f[d.startTime]||[];return p.push(d),f[d.startTime]=p,f},{}),u=Object.keys(l).sort((f,d)=>Number(f)-Number(d));u.forEach((f,d)=>{const p=l[f],m=isFinite(n)?n:f,_=Number(u[d+1])||m;p.forEach(x=>{x.endTime=_})})},wye={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Dye=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Rye=({inbandTextTracks:i,dateRanges:e})=>{const t=i.metadataTrack_;if(!t)return;const n=Z.WebKitDataCue||Z.VTTCue;e.forEach(s=>{for(const r of Object.keys(s)){if(Dye.has(r))continue;const a=new n(s.startTime,s.endTime,"");a.id=s.id,a.type="com.apple.quicktime.HLS",a.value={key:wye[r],data:s[r]},(r==="scte35Out"||r==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}s.processDateRange()})},BF=(i,e,t)=>{i.metadataTrack_||(i.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ye.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=e))},Cy=function(i,e,t){let n,s;if(t&&t.cues)for(n=t.cues.length;n--;)s=t.cues[n],s.startTime>=i&&s.endTime<=e&&t.removeCue(s)},Bye=function(i){const e=i.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const s=e[n],r=`${s.startTime}-${s.endTime}-${s.text}`;t[r]?i.removeCue(s):t[r]=s}},Lye=(i,e,t)=>{if(typeof e>"u"||e===null||!i.length)return[];const n=Math.ceil((e-t+3)*Bf.ONE_SECOND_IN_TS);let s;for(s=0;s<i.length&&!(i[s].pts>n);s++);return i.slice(s)},Iye=(i,e,t)=>{if(!e.length)return i;if(t)return e.slice();const n=e[0].pts;let s=0;for(s;s<i.length&&!(i[s].pts>=n);s++);return i.slice(0,s).concat(e)},Oye=(i,e,t,n)=>{const s=Math.ceil((e-n)*Bf.ONE_SECOND_IN_TS),r=Math.ceil((t-n)*Bf.ONE_SECOND_IN_TS),a=i.slice();let o=i.length;for(;o--&&!(i[o].pts<=r););if(o===-1)return a;let l=o+1;for(;l--&&!(i[l].pts<=s););return l=Math.max(l,0),a.splice(l,o-l+1),a},Pye=function(i,e){if(!i&&!e||!i&&e||i&&!e)return!1;if(i===e)return!0;const t=Object.keys(i).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(r!==n[s]||i[r]!==e[r])return!1}return!0},Uye=function(i,e,t){e=e||[];const n=[];let s=0;for(let r=0;r<e.length;r++){const a=e[r];if(i===a.timeline&&(n.push(r),s+=a.duration,s>t))return r}return n.length===0?0:n[n.length-1]},hy=1,Nye=500,LF=i=>typeof i=="number"&&isFinite(i),MT=1/60,Fye=(i,e,t)=>i!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,kye=(i,e,t)=>{let n=e-_s.BACK_BUFFER_LENGTH;i.length&&(n=Math.max(n,i.start(0)));const s=e-t;return Math.min(s,n)},Vp=i=>{const{startOfSegment:e,duration:t,segment:n,part:s,playlist:{mediaSequence:r,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:f}=i,d=o.length-1;let p="mediaIndex/partIndex increment";i.getMediaInfoForTime?p=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(p+=` with independent ${i.independent}`);const m=typeof u=="number",_=i.segment.uri?"segment":"pre-segment",x=m?D7({preloadSegment:n})-1:0;return`${_} [${r+l}/${r+d}]`+(m?` part [${u}/${x}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(m?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${f}] selected by [${p}] playlist [${a}]`},IF=i=>`${i}TimingInfo`,Hye=({segmentTimeline:i,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:s})=>!s&&i===e?null:i<e?t:n.length?n.end(n.length-1):t,WD=({timelineChangeController:i,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:s})=>{if(e===t)return!1;if(n==="audio"){const r=i.lastTimelineChange({type:"main"});return!r||r.to!==t}if(n==="main"&&s){const r=i.pendingTimelineChange({type:"audio"});return!(r&&r.to===t)}return!1},zye=i=>{if(!i)return!1;const e=i.pendingTimelineChange({type:"audio"}),t=i.pendingTimelineChange({type:"main"}),n=e&&t,s=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&s)},Gye=i=>{const e=i.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=i.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Ec=i=>{const e=i.pendingSegment_;if(!e)return;if(WD({timelineChangeController:i.timelineChangeController_,currentTimeline:i.currentTimeline_,segmentTimeline:e.timeline,loaderType:i.loaderType_,audioDisabled:i.audioDisabled_})&&zye(i.timelineChangeController_)){if(Gye(i)){i.timelineChangeController_.trigger("audioTimelineBehind");return}i.timelineChangeController_.trigger("fixBadTimelineChange")}},Vye=i=>{let e=0;return["video","audio"].forEach(function(t){const n=i[`${t}TimingInfo`];if(!n)return;const{start:s,end:r}=n;let a;typeof s=="bigint"||typeof r=="bigint"?a=Z.BigInt(r)-Z.BigInt(s):typeof s=="number"&&typeof r=="number"&&(a=r-s),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},OF=({segmentDuration:i,maxDuration:e})=>i?Math.round(i)>e+cl:!1,qye=(i,e)=>{if(e!=="hls")return null;const t=Vye({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!t)return null;const n=i.playlist.targetDuration,s=OF({segmentDuration:t,maxDuration:n*2}),r=OF({segmentDuration:t,maxDuration:n}),a=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${t} when the reported duration is ${i.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:a}:null},bf=({type:i,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),s=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:i||e.type,uri:e.resolvedUri||e.uri,start:s,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};class YD extends ye.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=po(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ec(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(Ki({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ec(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(Ki({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Ec(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ec(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return IM.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Z.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Z.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&IM.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Ss();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:s}=e;if(n&&t&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Q1(e);let s=this.initSegments_[n];return t&&!s&&e.bytes&&(this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,t=!1){if(!e)return null;const n=Y7(e);let s=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!s&&e.bytes&&(this.keyCache_[n]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(s||e).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${BM(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}s&&(s.mediaIndex-=a,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(Z.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&IM.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},s=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const a=()=>{r--,r===0&&n()};(s||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,t,a)),(s||this.loaderType_==="main")&&(this.gopBuffer_=Oye(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)Cy(e,t,this.inbandTextTracks_[o]);Cy(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&Z.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Z.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&Z.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Z.setTimeout(this.monitorBufferTick_.bind(this),Nye)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:bf({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const s=typeof e=="number"&&t.segments[e],r=e+1===t.segments.length,a=!s||!s.parts||n+1===s.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){const e=this.buffered_(),t=BM(e)||0,n=CL(e,this.currentTime_()),s=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=Uye(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const p=a[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=p.end?p.end:t,p.parts&&p.parts[m+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=m+1):o.mediaIndex=this.mediaIndex+1}else{let p,m,_;const x=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${x}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const b=this.getSyncInfoFromMediaSequenceSync_(x);if(!b){const v="No sync info found while using media sequence sync";return this.error({message:v,metadata:{errorType:ye.Error.StreamingFailedToSelectNextSegment,error:new Error(v)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${b.start} --> ${b.end})`),p=b.segmentIndex,m=b.partIndex,_=b.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const b=Xr.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:x,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});p=b.segmentIndex,m=b.partIndex,_=b.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${x}`:`currentTime ${x}`,o.mediaIndex=p,o.startOfSegment=_,o.partIndex=m,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const f=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!f&&!u.independent)if(o.partIndex===0){const p=a[o.mediaIndex-1],m=p.parts&&p.parts.length&&p.parts[p.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=p.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const s=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:s,startOfSegment:r,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,f=n.segments[s],d=typeof o=="number"&&f.parts[o],p={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||f.resolvedUri,mediaIndex:s,partIndex:d?o:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:f.timeline,duration:d&&d.duration||f.duration,segment:f,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},m=typeof l<"u"?l:this.isPendingTimestampOffset_;p.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:f.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:m});const _=BM(this.sourceUpdater_.audioBuffered());return typeof _=="number"&&(p.audioAppendStart=_-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(p.gopsToAlignWith=Lye(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),p}timestampOffsetForSegment_(e){return Hye(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,s=this.pendingSegment_.duration,r=Xr.estimateSegmentRequestTime(s,n,this.playlist_,e.bytesReceived),a=l0e(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;const o=bye({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=r-a-o.rebufferingImpact;let f=.5;a<=cl&&(f=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<f)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*_s.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Vp(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:s}=t,r={segmentInfo:bf({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Pye(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ec(this))))}handleTimingInfo_(e,t,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,a=IF(t);r[a]=r[a]||{},r[a][n]=s,this.logger_(`timinginfo: ${t} - ${n} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ec(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(a=>{r[a.stream]=r[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=r[a.stream];o.startTime=Math.min(o.startTime,a.startTime+s),o.endTime=Math.max(o.endTime,a.endTime+s),o.captions.push(a)}),Object.keys(r).forEach(a=>{const{startTime:o,endTime:l,captions:u}=r[a],f=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Aye(f,this.vhs_.tech_,a),Cy(o,l,f[a]),Eye({captionArray:u,inbandTextTracks:f,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!WD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:s,isMuxed:r}=t;return!(s&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||WD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Ec(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[IF(t.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let a;r&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:s}){if(n){const r=Q1(n);if(this.activeInitSegmentId_===r)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=r}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},s){const r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Lf(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Lf(a).join(", "));const o=r.length?r.start(0):0,l=r.length?r.end(r.length-1):0,u=a.length?a.start(0):0,f=a.length?a.end(a.length-1):0;if(l-o<=hy&&f-u<=hy){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${Lf(r).join(", ")}, video buffer: ${Lf(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const p=this.currentTime_()-hy;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${p}`),this.remove(0,p,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${hy}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Z.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},hy*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},s){if(s){if(s.code===H7){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:ye.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:s,bytes:r}){if(!r){const o=[s];let l=s.byteLength;n&&(o.unshift(n),l+=n.byteLength),r=Sye({bytes:l,segments:o})}const a={segmentInfo:bf({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${e}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,s[r].transmuxedPresentationStart=n.start.presentation,s[r].transmuxedDecodeStart=n.start.decode,s[r].transmuxedPresentationEnd=n.end.presentation,s[r].transmuxedDecodeEnd=n.end.decode,s[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:s}=t;if(!s||!s.byteLength||n==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Ec(this),this.loadQueue_.push(()=>{const t=Ki({},e,{forceTimestampOffset:!0});Ki(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||s&&r;this.logger_(`Requesting
${hq(e.uri)}
${Vp(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=vye({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Vp(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:f,timingInfo:d})=>{const m={segmentInfo:bf({segment:l})};u&&(m.keyInfo=u),f&&(m.trackInfo=f),d&&(m.timingInfo=d),this.trigger({type:o,metadata:m})}})}trimBackBuffer_(e){const t=kye(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,s=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:s,isMediaInitialization:r},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<MT){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${MT}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===fl.ABORTED)return;if(this.pause(),e.code===fl.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,t.stats),s.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=Iye(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==s+r?s:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:s,isMuxed:r}=t,a=this.loaderType_==="main"&&s,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Fye(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),s=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:bf({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=qye(e,this.sourceType_);if(t&&(t.severity==="warn"?ye.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Vp(e)}`);return}this.logger_(`Appended ${Vp(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,s=e.part,r=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(r||a){this.logger_(`bad ${r?"segment":"part"} ${Vp(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<MT){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${MT}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(s-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,s=t.end;if(!LF(n)||!LF(s))return;Cy(n,s,this.segmentMetadataTrack_);const r=Z.WebKitDataCue||Z.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:s},o=JSON.stringify(a),l=new r(n,s,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function uu(){}const fq=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},jye=["video","audio"],KD=(i,e)=>{const t=e[`${i}Buffer`];return t&&t.updating||e.queuePending[i]},Xye=(i,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===i)return t}return null},Nm=(i,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),Nm("audio",e),Nm("video",e));return}if(i!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||KD(i,e))){if(n.type!==i){if(t=Xye(i,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[i]=n,n.action(i,e),!n.doneFn){e.queuePending[i]=null,Nm(i,e);return}}},dq=(i,e)=>{const t=e[`${i}Buffer`],n=fq(i);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[i]=null,e[`${i}Buffer`]=null)},al=(i,e)=>i&&e&&Array.prototype.indexOf.call(i.sourceBuffers,e)!==-1,da={appendBuffer:(i,e,t)=>(n,s)=>{const r=s[`${n}Buffer`];if(al(s.mediaSource,r)){s.logger_(`Appending segment ${e.mediaIndex}'s ${i.length} bytes to ${n}Buffer`);try{r.appendBuffer(i)}catch(a){s.logger_(`Error with code ${a.code} `+(a.code===H7?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),s.queuePending[n]=null,t(a)}}},remove:(i,e)=>(t,n)=>{const s=n[`${t}Buffer`];if(al(n.mediaSource,s)){n.logger_(`Removing ${i} to ${e} from ${t}Buffer`);try{s.remove(i,e)}catch{n.logger_(`Remove ${i} to ${e} from ${t}Buffer failed`)}}},timestampOffset:i=>(e,t)=>{const n=t[`${e}Buffer`];al(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${i}`),n.timestampOffset=i)},callback:i=>(e,t)=>{i()},endOfStream:i=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${i||""})`);try{e.mediaSource.endOfStream(i)}catch(t){ye.log.warn("Failed to call media source endOfStream",t)}}},duration:i=>e=>{e.logger_(`Setting mediaSource duration to ${i}`);try{e.mediaSource.duration=i}catch(t){ye.log.warn("Failed to set media source duration",t)}},abort:()=>(i,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${i}Buffer`];if(al(e.mediaSource,t)){e.logger_(`calling abort on ${i}Buffer`);try{t.abort()}catch(n){ye.log.warn(`Failed to abort on ${i}Buffer`,n)}}},addSourceBuffer:(i,e)=>t=>{const n=fq(i),s=cg(e);t.logger_(`Adding ${i}Buffer with codec ${e} to mediaSource`);const r=t.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",t[`on${n}UpdateEnd_`]),r.addEventListener("error",t[`on${n}Error_`]),t.codecs[i]=e,t[`${i}Buffer`]=r},removeSourceBuffer:i=>e=>{const t=e[`${i}Buffer`];if(dq(i,e),!!al(e.mediaSource,t)){e.logger_(`Removing ${i}Buffer with codec ${e.codecs[i]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){ye.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,n)}}},changeType:i=>(e,t)=>{const n=t[`${e}Buffer`],s=cg(i);if(!al(t.mediaSource,n))return;const r=i.substring(0,i.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===r)return;const l={codecsChangeInfo:{from:a,to:i}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${i}`);try{n.changeType(s),t.codecs[e]=i}catch(u){l.errorType=ye.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),ye.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},pa=({type:i,sourceUpdater:e,action:t,doneFn:n,name:s})=>{e.queue.push({type:i,action:t,doneFn:n,name:s}),Nm(i,e)},PF=(i,e)=>t=>{const n=e[`${i}Buffered`](),s=r0e(n);if(e.logger_(`received "updateend" event for ${i} Source Buffer: `,s),e.queuePending[i]){const r=e.queuePending[i].doneFn;e.queuePending[i]=null,r&&r(e[`${i}Error_`])}Nm(i,e)};class pq extends ye.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Nm("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=po("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=PF("video",this),this.onAudioUpdateEnd_=PF("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){pa({type:"mediaSource",sourceUpdater:this,action:da.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){pa({type:e,sourceUpdater:this,action:da.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){ye.log.error("removeSourceBuffer is not supported!");return}pa({type:"mediaSource",sourceUpdater:this,action:da.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!ye.browser.IS_FIREFOX&&Z.MediaSource&&Z.MediaSource.prototype&&typeof Z.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return Z.SourceBuffer&&Z.SourceBuffer.prototype&&typeof Z.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){ye.log.error("changeType is not supported!");return}pa({type:e,sourceUpdater:this,action:da.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:s,bytes:r}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const a=t;if(pa({type:s,sourceUpdater:this,action:da.appendBuffer(r,n||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return al(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ss()}videoBuffered(){return al(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ss()}buffered(){const e=al(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=al(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():o0e(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=uu){pa({type:"mediaSource",sourceUpdater:this,action:da.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=uu){typeof e!="string"&&(e=void 0),pa({type:"mediaSource",sourceUpdater:this,action:da.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=uu){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}pa({type:"audio",sourceUpdater:this,action:da.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=uu){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}pa({type:"video",sourceUpdater:this,action:da.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(KD("audio",this)||KD("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(pa({type:"audio",sourceUpdater:this,action:da.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(pa({type:"video",sourceUpdater:this,action:da.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&pa({type:"audio",sourceUpdater:this,action:da.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&pa({type:"video",sourceUpdater:this,action:da.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),jye.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>dq(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const UF=i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),Wye=i=>{const e=new Uint8Array(i);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},NF=new Uint8Array(`

`.split("").map(i=>i.charCodeAt(0)));class Yye extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class Kye extends YD{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ss();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Ss([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Q1(e);let s=this.initSegments_[n];if(t&&!s&&e.bytes){const r=NF.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(NF,e.bytes.byteLength),this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Cy(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===fl.TIMEOUT&&this.handleTimeout_(),e.code===fl.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_,r=n.mp4VttCues&&n.mp4VttCues.length;r&&(s.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const a=s.segment;if(a.map&&(a.map.bytes=t.map.bytes),s.bytes=t.bytes,typeof Z.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(s)}catch(o){this.stopForError({message:o.message,metadata:{errorType:ye.Error.StreamingVttParserError,error:o}});return}if(r||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,s.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new Z.VTTCue(o.startTime,o.endTime,o.text):o)}),Bye(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const n=e&&e.type==="vtt",s=t&&t.type==="text";n&&s&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const s=n.start+t,r=n.end+t,a=new Z.VTTCue(s,r,n.cueText);n.settings&&n.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],f=l[1];a[u]=isNaN(f)?f:Number(f)}),e.cues.push(a)})}parseVTTCues_(e){let t,n=!1;if(typeof Z.WebVTT!="function")throw new Yye;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof Z.TextDecoder=="function"?t=new Z.TextDecoder("utf8"):(t=Z.WebVTT.StringDecoder(),n=!0);const s=new Z.WebVTT.Parser(Z,Z.vttjs,t);if(s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=a=>{e.timestampmap=a},s.onparsingerror=a=>{ye.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=UF(a)),s.parse(a)}let r=e.bytes;n&&(r=UF(r)),s.parse(r),s.flush()}updateTimeMapping_(e,t,n){const s=e.segment;if(!t)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:r,LOCAL:a}=e.timestampmap,l=r/Bf.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const f=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+f,0)}),!n.syncInfo){const u=e.cues[0].startTime,f=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,f-s.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*Bf.ONE_SECOND_IN_TS;const s=t*Bf.ONE_SECOND_IN_TS;let r;for(s<n?r=-8589934592:r=8589934592;Math.abs(n-s)>4294967296;)n+=r;return n/Bf.ONE_SECOND_IN_TS}}const Jye=function(i,e){const t=i.cues;for(let n=0;n<t.length;n++){const s=t[n];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},Qye=function(i,e,t=0){if(!i.segments)return;let n=t,s;for(let r=0;r<i.segments.length;r++){const a=i.segments[r];if(s||(s=Jye(e,n+a.duration/2)),s){if("cueIn"in a){s.endTime=n,s.adEndTime=n,n+=a.duration,s=null;continue}if(n<s.endTime){n+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&(s=new Z.VTTCue(n,n+a.duration,a.cueOut),s.adStartTime=n,s.adEndTime=n+parseFloat(a.cueOut),e.addCue(s)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);s=new Z.VTTCue(n,n+a.duration,""),s.adStartTime=n-o,s.adEndTime=s.adStartTime+l,e.addCue(s)}n+=a.duration}};class FF{constructor({start:e,end:t,segmentIndex:n,partIndex:s=null,appended:r=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=s,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Zye{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class mq{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:s}=e;if(this.isReliable_=this.isReliablePlaylist_(n,s),!!this.isReliable_)return this.updateStorage_(s,n,this.calculateBaseTime_(n,s,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const s of n)if(s.isInRange(e))return s}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const s=new Map;let r=`
`,a=n,o=t;this.start_=a,e.forEach((l,u)=>{const f=this.storage_.get(o),d=a,p=d+l.duration,m=!!(f&&f.segmentSyncInfo&&f.segmentSyncInfo.isAppended),_=new FF({start:d,end:p,appended:m,segmentIndex:u});l.syncInfo=_;let x=a;const b=(l.parts||[]).map((v,T)=>{const A=x,w=x+v.duration,B=!!(f&&f.partsSyncInfo&&f.partsSyncInfo[T]&&f.partsSyncInfo[T].isAppended),I=new FF({start:A,end:w,appended:B,segmentIndex:u,partIndex:T});return x=w,r+=`Media Sequence: ${o}.${T} | Range: ${A} --> ${w} | Appended: ${B}
`,v.syncInfo=I,I});s.set(o,new Zye(_,b)),r+=`${hq(l.resolvedUri)} | Media Sequence: ${o} | Range: ${d} --> ${p} | Appended: ${m}
`,o++,a=p}),this.end_=a,this.storage_=s,this.diagnostics_=r}calculateBaseTime_(e,t,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(e<s){const r=s-e;let a=this.storage_.get(s).segmentSyncInfo.start;for(let o=0;o<r;o++){const l=t[o];a-=l.duration}return a}return n}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class kF extends mq{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,n){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,n)}}const $ye=86400,OM=[{name:"VOD",run:(i,e,t,n,s)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(i,e,t,n,s,r)=>{const a=i.getMediaSequenceSync(r);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(s);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(i,e,t,n,s)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let r=null,a=null;const o=kD(e);s=s||0;for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),f=o[u],d=f.segment,p=i.timelineToDatetimeMappings[d.timeline];if(!p||!d.dateTimeObject)continue;let _=d.dateTimeObject.getTime()/1e3+p;if(d.parts&&typeof f.partIndex=="number")for(let b=0;b<f.partIndex;b++)_+=d.parts[b].duration;const x=Math.abs(s-_);if(a!==null&&(x===0||a<x))break;a=x,r={time:_,segmentIndex:f.segmentIndex,partIndex:f.partIndex}}return r}},{name:"Segment",run:(i,e,t,n,s)=>{let r=null,a=null;s=s||0;const o=kD(e);for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),f=o[u],d=f.segment,p=f.part&&f.part.start||d&&d.start;if(d.timeline===n&&typeof p<"u"){const m=Math.abs(s-p);if(a!==null&&a<m)break;(!r||a===null||a>=m)&&(a=m,r={time:p,segmentIndex:f.segmentIndex,partIndex:f.partIndex})}}return r}},{name:"Discontinuity",run:(i,e,t,n,s)=>{let r=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,f=i.discontinuities[u];if(f){const d=Math.abs(s-f.time);if(a!==null&&a<d)break;(!r||a===null||a>=d)&&(a=d,r={time:f.time,segmentIndex:l,partIndex:null})}}}return r}},{name:"Playlist",run:(i,e,t,n,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class eve extends ye.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new mq,n=new kF(t),s=new kF(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:s},this.logger_=po("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,s,r){if(t!==1/0)return OM.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,n,s,r);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:f,time:d}=l;if(f<0)continue;const p=e.segments[f],m=d,_=m+p.duration;if(this.logger_(`Strategy: ${u}. Current time: ${s}. selected segment: ${f}. Time: [${m} -> ${_}]}`),s>=m&&s<_)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:s})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const s=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+uv({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,s,r){const a=[];for(let o=0;o<OM.length;o++){const l=OM[o],u=l.run(this,e,t,n,s,r);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let n=e[0].syncPoint,s=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<s&&(s=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>$ye){ye.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let s=n-1;s>=0;s--){const r=e.segments[s];if(r&&typeof r.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),s=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[s.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const s=e.segment,r=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return r&&(r.start=o,r.end=l),(!s.start||o<s.start)&&(s.start=o),s.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let s=0;s<t.discontinuityStarts.length;s++){const r=t.discontinuityStarts[s],a=t.discontinuitySequence+s+1,o=r-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-uv({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):u=n.end+uv({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class tve extends ye.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const s={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const ive=eq(tq(function(){var i=function(){function x(){this.listeners={}}var b=x.prototype;return b.on=function(T,A){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push(A)},b.off=function(T,A){if(!this.listeners[T])return!1;var w=this.listeners[T].indexOf(A);return this.listeners[T]=this.listeners[T].slice(0),this.listeners[T].splice(w,1),w>-1},b.trigger=function(T){var A=this.listeners[T];if(A)if(arguments.length===2)for(var w=A.length,B=0;B<w;++B)A[B].call(this,arguments[1]);else for(var I=Array.prototype.slice.call(arguments,1),P=A.length,F=0;F<P;++F)A[F].apply(this,I)},b.dispose=function(){this.listeners={}},b.pipe=function(T){this.on("data",function(A){T.push(A)})},x}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(x){return x.subarray(0,x.byteLength-x[x.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const x=[[[],[],[],[],[]],[[],[],[],[],[]]],b=x[0],v=x[1],T=b[4],A=v[4];let w,B,I;const P=[],F=[];let N,U,H,re,J,ae;for(w=0;w<256;w++)F[(P[w]=w<<1^(w>>7)*283)^w]=w;for(B=I=0;!T[B];B^=N||1,I=F[I]||1)for(re=I^I<<1^I<<2^I<<3^I<<4,re=re>>8^re&255^99,T[B]=re,A[re]=B,H=P[U=P[N=P[B]]],ae=H*16843009^U*65537^N*257^B*16843008,J=P[re]*257^re*16843008,w=0;w<4;w++)b[w][B]=J=J<<24^J>>>8,v[w][re]=ae=ae<<24^ae>>>8;for(w=0;w<5;w++)b[w]=b[w].slice(0),v[w]=v[w].slice(0);return x};let n=null;class s{constructor(b){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let v,T,A;const w=this._tables[0][4],B=this._tables[1],I=b.length;let P=1;if(I!==4&&I!==6&&I!==8)throw new Error("Invalid aes key size");const F=b.slice(0),N=[];for(this._key=[F,N],v=I;v<4*I+28;v++)A=F[v-1],(v%I===0||I===8&&v%I===4)&&(A=w[A>>>24]<<24^w[A>>16&255]<<16^w[A>>8&255]<<8^w[A&255],v%I===0&&(A=A<<8^A>>>24^P<<24,P=P<<1^(P>>7)*283)),F[v]=F[v-I]^A;for(T=0;v;T++,v--)A=F[T&3?v:v-4],v<=4||T<4?N[T]=A:N[T]=B[0][w[A>>>24]]^B[1][w[A>>16&255]]^B[2][w[A>>8&255]]^B[3][w[A&255]]}decrypt(b,v,T,A,w,B){const I=this._key[1];let P=b^I[0],F=A^I[1],N=T^I[2],U=v^I[3],H,re,J;const ae=I.length/4-2;let ce,j=4;const Q=this._tables[1],$=Q[0],pe=Q[1],Se=Q[2],Le=Q[3],qe=Q[4];for(ce=0;ce<ae;ce++)H=$[P>>>24]^pe[F>>16&255]^Se[N>>8&255]^Le[U&255]^I[j],re=$[F>>>24]^pe[N>>16&255]^Se[U>>8&255]^Le[P&255]^I[j+1],J=$[N>>>24]^pe[U>>16&255]^Se[P>>8&255]^Le[F&255]^I[j+2],U=$[U>>>24]^pe[P>>16&255]^Se[F>>8&255]^Le[N&255]^I[j+3],j+=4,P=H,F=re,N=J;for(ce=0;ce<4;ce++)w[(3&-ce)+B]=qe[P>>>24]<<24^qe[F>>16&255]<<16^qe[N>>8&255]<<8^qe[U&255]^I[j++],H=P,P=F,F=N,N=U,U=H}}class r extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(b){this.jobs.push(b),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24},o=function(x,b,v){const T=new Int32Array(x.buffer,x.byteOffset,x.byteLength>>2),A=new s(Array.prototype.slice.call(b)),w=new Uint8Array(x.byteLength),B=new Int32Array(w.buffer);let I,P,F,N,U,H,re,J,ae;for(I=v[0],P=v[1],F=v[2],N=v[3],ae=0;ae<T.length;ae+=4)U=a(T[ae]),H=a(T[ae+1]),re=a(T[ae+2]),J=a(T[ae+3]),A.decrypt(U,H,re,J,B,ae),B[ae]=a(B[ae]^I),B[ae+1]=a(B[ae+1]^P),B[ae+2]=a(B[ae+2]^F),B[ae+3]=a(B[ae+3]^N),I=U,P=H,F=re,N=J;return w};class l{constructor(b,v,T,A){const w=l.STEP,B=new Int32Array(b.buffer),I=new Uint8Array(b.byteLength);let P=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(B.subarray(P,P+w),v,T,I)),P=w;P<B.length;P+=w)T=new Uint32Array([a(B[P-4]),a(B[P-3]),a(B[P-2]),a(B[P-1])]),this.asyncStream_.push(this.decryptChunk_(B.subarray(P,P+w),v,T,I));this.asyncStream_.push(function(){A(null,e(I))})}static get STEP(){return 32e3}decryptChunk_(b,v,T,A){return function(){const w=o(b,v,T);A.set(w,b.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f;typeof window<"u"?f=window:typeof u<"u"?f=u:typeof self<"u"?f=self:f={};var d=f,p=function(b){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(b):b&&b.buffer instanceof ArrayBuffer},m=d.BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),function(){var x=new Uint16Array([65484]),b=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);return b[0]===255?"big":b[0]===204?"little":"unknown"}();const _=function(x){const b={};return Object.keys(x).forEach(v=>{const T=x[v];p(T)?b[v]={bytes:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength}:b[v]=T}),b};self.onmessage=function(x){const b=x.data,v=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),T=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),A=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new l(v,T,A,function(w,B){self.postMessage(_({source:b.source,decrypted:B}),[B.buffer])})}}));var nve=$7(ive);const sve=i=>{let e=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},gq=(i,e)=>{i.abort(),i.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},JD=(i,e)=>{e.activePlaylistLoader=i,i.load()},rve=(i,e)=>()=>{const{segmentLoaders:{[i]:t,main:n},mediaTypes:{[i]:s}}=e,r=s.activeTrack(),a=s.getActiveGroup(),o=s.activePlaylistLoader,l=s.lastGroup_;if(!(a&&l&&a.id===l.id)&&(s.lastGroup_=a,s.lastTrack_=r,gq(t,s),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}t.resyncLoader(),JD(a.playlistLoader,s)}},ave=(i,e)=>()=>{const{segmentLoaders:{[i]:t},mediaTypes:{[i]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},ove=(i,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[i]:n,main:s},mediaTypes:{[i]:r}}=e,a=r.activeTrack(),o=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if(!(u&&a&&u.id===a.id)&&(r.lastGroup_=o,r.lastTrack_=a,gq(n,r),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const f=e.vhs.playlistController_,d=f.selectPlaylist();if(f.media()===d)return;r.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),s.resetEverything(),f.fastQualityChange_(d);return}if(i==="AUDIO"){if(!o.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(l===o.playlistLoader){JD(o.playlistLoader,r);return}n.track&&n.track(a),n.resetEverything(),JD(o.playlistLoader,r)}},Z1={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:t},excludePlaylist:n}=e,s=t.activeTrack(),r=t.activeGroup(),a=(r.filter(l=>l.default)[0]||r[0]).id,o=t.tracks[a];if(s===o){n({error:{message:"Problem encountered loading the default audio track."}});return}ye.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:t}}=e;ye.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},HF={AUDIO:(i,e,t)=>{if(!e)return;const{tech:n,requestOptions:s,segmentLoaders:{[i]:r}}=t;e.on("loadedmetadata",()=>{const a=e.media();r.playlist(a,s),(!n.paused()||a.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Z1[i](i,t))},SUBTITLES:(i,e,t)=>{const{tech:n,requestOptions:s,segmentLoaders:{[i]:r},mediaTypes:{[i]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,s),r.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Z1[i](i,t))}},lve={AUDIO:(i,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[i]:s},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[i]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:f}=e,d=W_(f.main);(!a[i]||Object.keys(a[i]).length===0)&&(a[i]={main:{default:{default:!0}}},d&&(a[i].main.default.playlists=f.main.playlists));for(const p in a[i]){o[p]||(o[p]=[]);for(const m in a[i][p]){let _=a[i][p][m],x;if(d?(u(`AUDIO group '${p}' label '${m}' is a main playlist`),_.isMainPlaylist=!0,x=null):n==="vhs-json"&&_.playlists?x=new ym(_.playlists[0],t,r):_.resolvedUri?x=new ym(_.resolvedUri,t,r):_.playlists&&n==="dash"?x=new jD(_.playlists[0],t,r,f):x=null,_=Bi({id:m,playlistLoader:x},_),HF[i](i,_.playlistLoader,e),o[p].push(_),typeof l[m]>"u"){const b=new ye.AudioTrack({id:m,kind:sve(_),enabled:!1,language:_.language,default:_.default,label:m});l[m]=b}}}s.on("error",Z1[i](i,e))},SUBTITLES:(i,e)=>{const{tech:t,vhs:n,sourceType:s,segmentLoaders:{[i]:r},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[i]:{groups:l,tracks:u}},mainPlaylistLoader:f}=e;for(const d in o[i]){l[d]||(l[d]=[]);for(const p in o[i][d]){if(!n.options_.useForcedSubtitles&&o[i][d][p].forced)continue;let m=o[i][d][p],_;if(s==="hls")_=new ym(m.resolvedUri,n,a);else if(s==="dash"){if(!m.playlists.filter(b=>b.excludeUntil!==1/0).length)return;_=new jD(m.playlists[0],n,a,f)}else s==="vhs-json"&&(_=new ym(m.playlists?m.playlists[0]:m.resolvedUri,n,a));if(m=Bi({id:p,playlistLoader:_},m),HF[i](i,m.playlistLoader,e),l[d].push(m),typeof u[p]>"u"){const x=t.addRemoteTextTrack({id:p,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:p},!1).track;u[p]=x}}}r.on("error",Z1[i](i,e))},"CLOSED-CAPTIONS":(i,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[i]:{groups:s,tracks:r}}}=e;for(const a in n[i]){s[a]||(s[a]=[]);for(const o in n[i][a]){const l=n[i][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let f={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[f.instreamId]&&(f=Bi(f,u[f.instreamId])),f.default===void 0&&delete f.default,s[a].push(Bi({id:o},l)),typeof r[o]>"u"){const d=t.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;r[o]=d}}}}},yq=(i,e)=>{for(let t=0;t<i.length;t++)if(DL(e,i[t])||i[t].playlists&&yq(i[t].playlists,e))return!0;return!1},uve=(i,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[i]:{groups:s}}}=e,r=n.media();if(!r)return null;let a=null;r.attributes[i]&&(a=s[r.attributes[i]]);const o=Object.keys(s);if(!a)if(i==="AUDIO"&&o.length>1&&W_(e.main))for(let l=0;l<o.length;l++){const u=s[o[l]];if(yq(u,r)){a=u;break}}else s.main?a=s.main:o.length===1&&(a=s[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},cve={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},hve=(i,{mediaTypes:e})=>()=>{const t=e[i].activeTrack();return t?e[i].activeGroup(t):null},fve=i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{lve[u](u,i)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:s,segmentLoaders:{["AUDIO"]:r,main:a}}=i;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=uve(u,i),e[u].activeTrack=cve[u](u,i),e[u].onGroupChanged=rve(u,i),e[u].onGroupChanging=ave(u,i),e[u].onTrackChanged=ove(u,i),e[u].getActiveGroup=hve(u,i)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),r.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},dve=()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{i[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:uu,activeTrack:uu,getActiveGroup:uu,onGroupChanged:uu,onTrackChanged:uu,lastTrack_:null,logger_:po(`MediaGroups[${e}]`)}}),i};class zF{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=qr(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class pve extends ye.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new zF,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=po("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=qr(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const s={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(r,a)=>{if(r){if(a.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:s});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const f={errorType:ye.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:f})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new Z.URL(e),n=new Z.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(Z.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new Z.URL(e),n=this.getPathway(),s=this.getBandwidth_();if(n){const r=`_${this.manifestType_}_pathway`;t.searchParams.set(r,n)}if(s){const r=`_${this.manifestType_}_throughput`;t.searchParams.set(r,s)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(s=>{for(const r of s)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!t(s))return s}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=Z.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){Z.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new zF}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(qr(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const mve=(i,e)=>{let t=null;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{i.apply(null,n)},e)}},gve=10;let Cc;const yve=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],vve=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},_ve=function({currentPlaylist:i,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:a,bufferBasedABR:o,log:l}){if(!n)return ye.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${i&&i.id||"null"} -> ${n.id}`;if(!i)return l(`${u} as current playlist is not set`),!0;if(n.id===i.id)return!1;const f=!!gm(e,t).length;if(!i.endList)return!f&&typeof i.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=CL(e,t),p=o?_s.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:_s.MAX_BUFFER_LOW_WATER_LINE;if(a<p)return l(`${u} as duration < max low water line (${a} < ${p})`),!0;const m=n.attributes.BANDWIDTH,_=i.attributes.BANDWIDTH;if(m<_&&(!o||d<r)){let x=`${u} as next bandwidth < current bandwidth (${m} < ${_})`;return o&&(x+=` and forwardBuffer < bufferHighWaterLine (${d} < ${r})`),l(x),!0}if((!o||m>_)&&d>=s){let x=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${s})`;return o&&(x+=` and next bandwidth > current bandwidth (${m} > ${_})`),l(x),!0}return l(`not ${u} as no switching criteria met`),!1};class xve extends ye.EventTarget{constructor(e){super(),this.fastQualityChange_=mve(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:n,tech:s,bandwidth:r,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:f,cacheEncryptionKeys:d,bufferBasedABR:p,leastPixelDiffSelector:m,captionServices:_,experimentalUseMMS:x}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=e;(b===null||typeof b>"u")&&(b=1/0),Cc=a,this.bufferBasedABR=!!p,this.leastPixelDiffSelector=!!m,this.withCredentials=n,this.tech_=s,this.vhs_=s.vhs,this.player_=e.player_,this.sourceType_=f,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=dve(),x&&Z.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new Z.ManagedMediaSource,this.usingManagedMediaSource_=!0,ye.log("Using ManagedMediaSource")):Z.MediaSource&&(this.mediaSource=new Z.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Ss(),this.hasPlayed_=!1,this.syncController_=new eve(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new nve,this.sourceUpdater_=new pq(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new tve,this.keyStatusMap_=new Map;const v={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new jD(t,this.vhs_,Bi(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new ym(t,this.vhs_,Bi(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new YD(Bi(v,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new YD(Bi(v,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Kye(Bi(v,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((w,B)=>{function I(){s.off("vttjserror",P),w()}function P(){s.off("vttjsloaded",I),B()}s.one("vttjsloaded",I),s.one("vttjserror",P),s.addWebVttScript_()})}),e);const T=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new pve(this.vhs_.xhr,T),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),yve.forEach(w=>{this[w+"_"]=vve.bind(this,w)}),this.logger_=po("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const A=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(A,()=>{const w=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-w,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const s=this.media(),r=s&&(s.id||s.uri),a=e&&(e.id||e.uri);if(r&&r!==a){this.logger_(`switch media ${r} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,s=this.contentSteeringController_.getPathway();if(n&&s){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===s);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Z.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Z.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,s=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||s.length&&n[s[0]];for(const l in o)if(o[l].default){r={label:l};break}}if(!r)return t;const a=[];for(const o in n)if(n[o][r.label]){const l=n[o][r.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const f=e.playlists[u];f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===o&&a.push(f)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;HD(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),fve({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;HD(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(Ki({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let s=!0;const r=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Cc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),a=this.tech_.buffered();return _ve({buffered:a,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const s=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(s)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:gve}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,s=>{this.player_.trigger(Ki({},s))}),this.audioSegmentLoader_.on(n,s=>{this.player_.trigger(Ki({},s))}),this.subtitleSegmentLoader_.on(n,s=>{this.player_.trigger(Ki({},s))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let s=n;if(e.start){const r=e.start.timeOffset;r<0?s=Math.max(n+r,t.start(0)):s=Math.min(n,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const s=Cc.Playlist.playlistEnd(e,n),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return s-r<=hl;const o=a.end(a.length-1);return o-r<=hl&&s-o<=hl}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(RE),a=r.length===1&&r[0]===e;if(s.length===1&&n!==1/0)return ye.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const _=this.pathwayAttribute_(e),x=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(_),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(_)},x);return}let m=!1;s.forEach(_=>{if(_===e)return;const x=_.excludeUntil;typeof x<"u"&&x!==1/0&&(m=!0,delete _.excludeUntil)}),m&&(ye.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:ye.log.warn,f=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${f} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,p=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",a||p)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],s=e==="all";(s||e==="main")&&n.push(this.mainPlaylistLoader_);const r=[];(s||e==="audio")&&r.push("AUDIO"),(s||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=gm(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Cc.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const n=e.media();if(!n)return null;const s=this.syncController_.getMediaSequenceSync(t);if(s&&s.isReliable){const o=s.start,l=s.end;if(!isFinite(o)||!isFinite(l))return null;const u=Cc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n),f=Math.max(o,l-u);return Ss([[o,f]])}const r=this.syncController_.getExpiredTime(n,this.duration());if(r===null)return null;const a=Cc.Playlist.seekable(n,r,Cc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return a.length?a:null}computeFinalSeekable_(e,t){if(!t)return e;const n=e.start(0),s=e.end(0),r=t.start(0),a=t.end(0);return r>s||n>a?e:Ss([[Math.max(n,r),Math.min(s,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${M7(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const t=this.tech_.buffered();let n=Cc.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=cv(this.main(),t),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=n.video||e.main.videoCodec||Nde),e.main.isMuxed&&(s.video+=`,${n.audio||e.main.audioCodec||S4}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(s.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||S4,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,f)=>u?rv(f,this.usingManagedMediaSource_):yM(f),o={};let l;if(["video","audio"].forEach(function(u){if(s.hasOwnProperty(u)&&!a(e[u].isFmp4,s[u])){const f=e[u].isFmp4?"browser":"muxer";o[f]=o[f]||[],o[f].push(s[u]),u==="audio"&&(l=f)}}),r&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(f=>{(f.attributes&&f.attributes.AUDIO)===u&&f!==t&&(f.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${s.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((f,d)=>(f&&(f+=", "),f+=`${d} does not support codec(s): "${o[d].join(",")}"`,f),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(f=>{const d=(rl(this.sourceUpdater_.codecs[f]||"")[0]||{}).type,p=(rl(s[f]||"")[0]||{}).type;d&&p&&d.toLowerCase()!==p.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[f]}" -> "${s[f]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const s=e[n];if(t.indexOf(s.id)!==-1)return;t.push(s.id);const r=cv(this.main,s),a=[];r.audio&&!yM(r.audio)&&!rv(r.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${r.audio}`),r.video&&!yM(r.video)&&!rv(r.video,this.usingManagedMediaSource_)&&a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,s=t_(rl(e)),r=SF(s),a=s.video&&rl(s.video)[0]||null,o=s.audio&&rl(s.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const f=[],d=cv(this.mainPlaylistLoader_.main,u),p=SF(d);if(!(!d.audio&&!d.video)){if(p!==r&&f.push(`codec count "${p}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const m=d.video&&rl(d.video)[0]||null,_=d.audio&&rl(d.audio)[0]||null;m&&a&&m.type.toLowerCase()!==a.type.toLowerCase()&&f.push(`video codec "${m.type}" !== "${a.type}"`),_&&o&&_.type.toLowerCase()!==o.type.toLowerCase()&&f.push(`audio codec "${_.type}" !== "${o.type}"`)}f.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${f.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),Qye(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=_s.GOAL_BUFFER_LENGTH,n=_s.GOAL_BUFFER_LENGTH_RATE,s=Math.max(t,_s.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=_s.BUFFER_LOW_WATER_LINE,n=_s.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(t,_s.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,_s.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return _s.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){BF(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Rye({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();BF(this.inbandTextTracks_,e,this.tech_),Mye({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(Ki({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const r=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!r.has(l)))return!0}return!!(!a.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,s=new Set;let r=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!s.has(o.id)&&u&&d&&(s.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||s&&s.size){for(const[a,o]of n.entries())s.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of s.entries()){const l=n.get(a);if(!l){t.filter(f=>f.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(f=>{this.mainPlaylistLoader_.addClonePathway(o,f)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,s=t["URI-REPLACEMENT"].PARAMS;for(const r in n)if(n[r]!==s[r])return!1;for(const r in s)if(n[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=this.mainPlaylistLoader_.getKeyIdSet(n);!s||!s.size||s.forEach(r=>{const a="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,l=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${r} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,r=n.excludeUntil===1/0&&n.lastExcludeReason_===t;s&&r&&(delete n.excludeUntil,ye.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const r=(typeof e=="string"?e:Wye(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const bve=(i,e,t)=>n=>{const s=i.main.playlists[e],r=wL(s),a=RE(s);if(typeof n>"u")return a;n?delete s.disabled:s.disabled=!0;const o={renditionInfo:{id:e,bandwidth:s.attributes.BANDWIDTH,resolution:s.attributes.RESOLUTION,codecs:s.attributes.CODECS},cause:"fast-quality"};return n!==a&&!r&&(n?(t(s),i.trigger({type:"renditionenabled",metadata:o})):i.trigger({type:"renditiondisabled",metadata:o})),n};class Tve{constructor(e,t,n){const{playlistController_:s}=e,r=s.fastQualityChange_.bind(s);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=cv(s.main(),t),this.playlist=t,this.id=n,this.enabled=bve(e.playlists,t.id,r)}}const Sve=function(i){i.representations=()=>{const e=i.playlistController_.main(),t=W_(e)?i.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!wL(n)).map((n,s)=>new Tve(i,n,n.id)):[]}},GF=["seeking","seeked","pause","playing","error"];class Ave extends ye.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=po("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(f=>{l[f]={reset:()=>this.resetSegmentDownloads_(f),updateend:()=>this.checkSegmentDownloads_(f)},a[`${f}SegmentLoader_`].on("appendsdone",l[f].updateend),a[`${f}SegmentLoader_`].on("playlistupdate",l[f].reset),this.tech_.on(["seeked","seeking"],l[f].reset)});const u=f=>{["main","audio"].forEach(d=>{a[`${d}SegmentLoader_`][f]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(GF,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(GF,r),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(f=>{a[`${f}SegmentLoader_`].off("appendsdone",l[f].updateend),a[`${f}SegmentLoader_`].off("playlistupdate",l[f].reset),this.tech_.off(["seeked","seeking"],l[f].reset)}),this.checkCurrentTimeTimeout_&&Z.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Z.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Z.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],s=n.buffered_(),r=u0e(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,r){const a={bufferedRanges:s};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:Lf(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+hl>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Ss([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(s&&(r=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const _=t.start(0);r=_+(_===t.end(0)?0:hl)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${M7(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,f=this.media(),d=f.partTargetDuration?f.partTargetDuration:(f.targetDuration-cl)*2,p=[l,u];for(let _=0;_<p.length;_++){if(!p[_])continue;if(CL(p[_],n)<d)return!1}const m=ET(o,n);return m.length===0?!1:(r=m.start(0)+hl,this.logger_(`Buffered region starts (${m.start(0)})  just beyond seek point (${n}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=gm(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=ET(s,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,s=!1){if(!e.length)return!1;let r=e.end(e.length-1)+hl;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||s)&&(r=e.end(e.length-1)+n.targetDuration*3),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let s;if(e.length&&t.length){const r=gm(e,n-3),a=gm(e,n),o=gm(t,n);o.length&&!a.length&&r.length&&(s={start:r.end(0),end:o.end(0)})}else ET(e,n).length||(s=this.gapFromVideoUnderflow_(e,n));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),s=ET(t,n);if(this.resetTimeUpdate_(),s.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+cl);const r={gapInfo:{from:n,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=a0e(e);for(let s=0;s<n.length;s++){const r=n.start(s),a=n.end(s);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}}const Eve={errorInterval:30,getSource(i){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return i(t)}},vq=function(i,e){let t=0,n=0;const s=Bi(Eve,e);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){n&&i.currentTime(n)},a=function(f){f!=null&&(n=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",r),i.src(f),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},o=function(){if(Date.now()-t<s.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){ye.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),s.getSource.call(i,a)},l=function(){i.off("loadedmetadata",r),i.off("error",o),i.off("dispose",l)},u=function(f){l(),vq(i,f)};i.on("error",o),i.on("dispose",l),i.reloadSourceOnError=u},Cve=function(i){vq(this,i)};var _q="3.17.0",Mve="7.1.0",wve="1.3.1",Dve="7.2.0",Rve="4.0.2";const xn={PlaylistLoader:ym,Playlist:Xr,utils:P0e,STANDARD_PLAYLIST_SELECTOR:RF,INITIAL_PLAYLIST_SELECTOR:Tye,lastBandwidthSelector:RF,movingAverageBandwidthSelector:xye,comparePlaylistBandwidth:BL,comparePlaylistResolution:_ye,xhr:X7()};Object.keys(_s).forEach(i=>{Object.defineProperty(xn,i,{get(){return ye.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),_s[i]},set(e){if(ye.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){ye.log.warn(`value of Vhs.${i} must be greater than or equal to 0`);return}_s[i]=e}})});const xq="videojs-vhs",bq=function(i,e){const t=e.media();let n=-1;for(let s=0;s<i.length;s++)if(i[s].id===t.id){n=s;break}i.selectedIndex_=n,i.trigger({selectedIndex:n,type:"change"})},Bve=function(i,e){e.representations().forEach(t=>{i.addQualityLevel(t)}),bq(i,e.playlists)};xn.canPlaySource=function(){return ye.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Lve=(i,e,t)=>{if(!i)return i;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=t_(rl(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const s=cg(n.video),r=cg(n.audio),a={};for(const o in i)a[o]={},r&&(a[o].audioContentType=r),s&&(a[o].videoContentType=s),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof i[o]=="string"&&(a[o].url=i[o]);return Bi(i,a)},Ive=(i,e)=>i.reduce((t,n)=>{if(!n.contentProtection)return t;const s=e.reduce((r,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(r[a]={pssh:o.pssh}),r},{});return Object.keys(s).length&&t.push(s),t},[]),Ove=({player:i,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const s=t?n.concat([t]):n,r=Ive(s,Object.keys(e)),a=[],o=[];return r.forEach(l=>{o.push(new Promise((u,f)=>{i.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,f)=>{i.eme.initializeMediaKeys({keySystems:l},d=>{if(d){f(d);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Pve=({player:i,sourceKeySystems:e,media:t,audioMedia:n})=>{const s=Lve(e,t,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(ye.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Tq=()=>{if(!Z.localStorage)return null;const i=Z.localStorage.getItem(xq);if(!i)return null;try{return JSON.parse(i)}catch{return null}},Uve=i=>{if(!Z.localStorage)return!1;let e=Tq();e=e?Bi(e,i):i;try{Z.localStorage.setItem(xq,JSON.stringify(e))}catch{return!1}return e},Nve=i=>i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,Sq=(i,e)=>{i._requestCallbackSet||(i._requestCallbackSet=new Set),i._requestCallbackSet.add(e)},Aq=(i,e)=>{i._responseCallbackSet||(i._responseCallbackSet=new Set),i._responseCallbackSet.add(e)},Eq=(i,e)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(e),i._requestCallbackSet.size||delete i._requestCallbackSet)},Cq=(i,e)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(e),i._responseCallbackSet.size||delete i._responseCallbackSet)};xn.supportsNativeHls=function(){if(!Xe||!Xe.createElement)return!1;const i=Xe.createElement("video");return ye.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(i.canPlayType(t))}):!1}();xn.supportsNativeDash=function(){return!Xe||!Xe.createElement||!ye.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Xe.createElement("video").canPlayType("application/dash+xml"))}();xn.supportsTypeNatively=i=>i==="hls"?xn.supportsNativeHls:i==="dash"?xn.supportsNativeDash:!1;xn.isSupported=function(){return ye.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};xn.xhr.onRequest=function(i){Sq(xn.xhr,i)};xn.xhr.onResponse=function(i){Aq(xn.xhr,i)};xn.xhr.offRequest=function(i){Eq(xn.xhr,i)};xn.xhr.offResponse=function(i){Cq(xn.xhr,i)};const Fve=ye.getComponent("Component");class Mq extends Fve{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=po("VhsHandler"),t.options_&&t.options_.playerId){const s=ye.getPlayer(t.options_.playerId);this.player_=s}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Xe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=Xe.fullscreenElement||Xe.webkitFullscreenElement||Xe.mozFullScreenElement||Xe.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Bi(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=Tq();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=_s.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===_s.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Nve(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=xn,this.options_.sourceType=yG(t),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new xve(this.options_);const n=Bi({liveRangeSafeTimeDelta:hl},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Ave(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const r=ye.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),r.error(a)});const s=this.options_.bufferBasedABR?xn.movingAverageBandwidthSelector(.55):xn.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=xn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const a=Z.navigator.connection||Z.navigator.mozConnection||Z.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&r>=o?r=Math.max(r,l):r=l}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(r+a))},set(){ye.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Lf(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Lf(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Uve({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Sve(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Z.URL.createObjectURL(this.playlistController_.mediaSource),(ye.browser.IS_ANY_SAFARI||ye.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Ove({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Pve({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=ye.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Bve(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{bq(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":_q,"mux.js":Mve,"mpd-parser":wve,"m3u8-parser":Dve,"aes-decrypter":Rve}}version(){return this.constructor.version()}canChangeType(){return pq.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Z.URL.revokeObjectURL&&(Z.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return G0e({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,s=2){return Q7({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{Sq(this.xhr,e)},this.xhr.onResponse=e=>{Aq(this.xhr,e)},this.xhr.offRequest=e=>{Eq(this.xhr,e)},this.xhr.offResponse=e=>{Cq(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,s=>{this.player_.trigger(Ki({},s))})}),t.forEach(n=>{this.playbackWatcher_.on(n,s=>{this.player_.trigger(Ki({},s))})})}}const $1={name:"videojs-http-streaming",VERSION:_q,canHandleSource(i,e={}){const t=Bi(ye.options,e);return!t.vhs.experimentalUseMMS&&!rv("avc1.4d400d,mp4a.40.2",!1)?!1:$1.canPlayType(i.type,t)},handleSource(i,e,t={}){const n=Bi(ye.options,t);return e.vhs=new Mq(i,e,n),e.vhs.xhr=X7(),e.vhs.setupXhrHooks_(),e.vhs.src(i.src,i.type),e.vhs},canPlayType(i,e){const t=yG(i);if(!t)return"";const n=$1.getOverrideNative(e);return!xn.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(i={}){const{vhs:e={}}=i,t=!(ye.browser.IS_ANY_SAFARI||ye.browser.IS_IOS),{overrideNative:n=t}=e;return n}},kve=()=>rv("avc1.4d400d,mp4a.40.2",!0);kve()&&ye.getTech("Html5").registerSourceHandler($1,0);ye.VhsHandler=Mq;ye.VhsSourceHandler=$1;ye.Vhs=xn;ye.use||ye.registerComponent("Vhs",xn);ye.options.vhs=ye.options.vhs||{};(!ye.getPlugin||!ye.getPlugin("reloadSourceOnError"))&&ye.registerPlugin("reloadSourceOnError",Cve);const VF=({src:i,poster:e,options:t={}})=>{const n=ee.useRef(null),s=ee.useRef(null);return ee.useEffect(()=>{if(s.current)return;const r=n.current;if(!r)return;const a={controls:!0,fluid:!0,notSupportedMessage:"La vidéo n'est pas disponible.",preload:"auto",sources:[{src:i,type:"video/mp4"}],poster:e||"",...t};return s.current=ye(r,a),()=>{s.current&&(s.current.dispose(),s.current=null)}},[i,t,e]),Ge("div",{"data-vjs-player":!0,children:Ge("video",{ref:n,className:"video-js vjs-default-skin"})})};function Hve(i,e=100){const t=i.position.clone();return[new W(-1,-1,-1),new W(-1,1,-1),new W(1,1,-1),new W(1,-1,-1)].map(s=>{const a=s.clone().unproject(i).sub(t).normalize();return t.clone().addScaledVector(a,e)})}function zve({modelPath:i,speed:e,scale:t,delay:n,corners:s}){const r=I_(i),a=ee.useRef(),o=ee.useRef(new W),l=ee.useRef(new W),u=ee.useRef(new W),f=ee.useRef(0),d=ee.useRef(new as),p=ee.useRef(0),m=ee.useRef(),[_,x]=ee.useState(!1),b=()=>{const A=tg.randInt(0,s.length-1);return{spawn:s[A].clone(),target:s[(A+2)%s.length].clone()}},v=()=>{const A=b();o.current.copy(A.spawn),l.current.copy(A.target),u.current.copy(A.target).sub(A.spawn).normalize(),f.current=A.spawn.distanceTo(A.target),d.current.setFromUnitVectors(new W(0,0,1),u.current),a.current&&(a.current.position.copy(o.current),a.current.quaternion.copy(d.current)),p.current=0},T=()=>{x(!1),m.current=setTimeout(()=>{v(),x(!0)},n*1e3)};return ee.useLayoutEffect(()=>{v();const A=setTimeout(()=>x(!0),n*1e3);return()=>{clearTimeout(A),clearTimeout(m.current)}},[n,s]),vh((A,w)=>{if(!_||!a.current)return;const B=e*w;a.current.position.addScaledVector(u.current,B),p.current+=B,a.current.quaternion.copy(d.current),p.current>=f.current&&T()}),Ge("primitive",{ref:a,object:r.scene.clone(),scale:t,dispose:null,visible:_})}function Gve({configs:i}){const e=is(n=>n.camera),t=ee.useMemo(()=>Hve(e,100),[e]);return Yi(WF,{children:[Ge(JC,{count:1e4,depth:300,factor:10,fade:!0,radius:250,speed:.02,saturation:0}),Ge(JC,{count:5e3,depth:200,factor:5,fade:!0,radius:200,speed:.05,saturation:.3}),Ge(JC,{count:2e3,depth:100,factor:2,fade:!0,radius:150,speed:.1,saturation:.6}),Ge(oae,{count:500,size:1.5,scale:[200,200,200],speed:.5,noise:.2,position:[0,0,0]}),i.map((n,s)=>Ge(zve,{...n,corners:t},s))]})}const Vve=Kf.memo(Gve),qve=()=>{const[i,e]=ee.useState(!1),[t,n]=ee.useState(!1),[s,r]=ee.useState(!1),[a,o]=ee.useState([]),[l,u]=ee.useState(!1);ee.useEffect(()=>{fetch("https://api.github.com/users/sebf33/repos").then(x=>x.json()).then(x=>{const T=x.filter(A=>!A.archived).filter(A=>A.name!=="sebf33").sort((A,w)=>new Date(w.pushed_at)-new Date(A.pushed_at));o(T)}).catch(x=>console.error(x))},[]),ee.useEffect(()=>{const x=window.matchMedia("(max-width: 500px)"),b=v=>{u(v.matches),e(!1),n(!1),r(!1)};return u(x.matches),x.addEventListener("change",b),()=>x.removeEventListener("change",b)},[]);const f=i||t||s,d=()=>{f||e(!0)},p=()=>{f||n(!0)},m=()=>{f||r(!0)},_=ee.useMemo(()=>[{modelPath:"./models/tie_fighter/scene.gltf",speed:10,scale:.003,delay:tg.randFloat(2,8)},{modelPath:"./models/x-wing/scene.gltf",speed:9,scale:.02,delay:tg.randFloat(3,11)}],[]);return Yi(qse,{frameloop:"always",shadows:!0,dpr:[1,2],camera:{position:[20,3,5],fov:25},gl:{preserveDrawingBuffer:!0},children:[Yi(ee.Suspense,{fallback:Ge(Afe,{}),children:[Ge(Vve,{configs:_}),Ge(tae,{autoRotate:!0,autoRotateSpeed:.1,enablePan:!1,enableZoom:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),Ge(Efe,{isMobile:l,setHud1Open:d,setHud2Open:p,setHud3Open:m}),Ge(iae,{position:[0,-3.5,0],opacity:.3,width:10,height:10,blur:1,far:4}),Yi(Poe,{children:[Ge(Noe,{height:300,luminanceThreshold:.8,luminanceSmoothing:.5,mipmapBlur:!0}),Ge(Foe,{offset:[3e-4,3e-4]}),Ge(koe,{opacity:.02})]}),Ge($C,{children:i&&Ge(WT,{center:!0,children:Yi(nl.div,{className:"hud-popup hud-popup--smartphone",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},children:[Ge("button",{className:"hud-close",onClick:()=>e(!1),children:"✕"}),Ge(nl.h2,{className:"hud-title sw-font",animate:{textShadow:["0 0 4px #0ff","0 0 12px #0ff","0 0 4px #0ff"]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},children:"YouTube"}),Yi(nl.p,{className:"hud-text typewriter",initial:{width:0},animate:{width:"100%"},transition:{duration:2.5,ease:"linear"},children:["Observe ma stack technique sur ma chaîne ",Ge("a",{href:"https://www.youtube.com/@ifseb",target:"_blank",rel:"noopener noreferrer",className:"hud-link",children:"@ifseb"}),"."]}),Ge("div",{className:"mx-auto",children:Ge(VF,{src:"./videos/creativite.mp4",poster:"./img/creativite.png",options:{autoplay:!0,loop:!0,muted:!1}})})]})})}),Ge($C,{children:t&&Ge(WT,{center:!0,children:Yi(nl.div,{className:"hud-popup hud-popup--laptop",initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.3},children:[Ge("button",{className:"hud-close",onClick:()=>n(!1),children:"✕"}),Ge(nl.h2,{className:"hud-title sw-font",animate:{textShadow:["0 0 4px #0ff","0 0 12px #0ff","0 0 4px #0ff"]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},children:"GitHub"}),Yi(nl.p,{className:"hud-text typewriter",initial:{width:0},animate:{width:"100%"},transition:{duration:2.5,ease:"linear"},children:["Regarde mes projets en vidéo ou sur ",Ge("a",{href:"https://github.com/sebf33",target:"_blank",rel:"noopener noreferrer",className:"hud-link",children:"SebF33"}),"."]}),Ge("div",{className:"repo-list",children:a.map((x,b)=>Yi(nl.div,{className:"repo-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.1,duration:.4},children:[Yi("h3",{className:"repo-title",children:[Ge("a",{href:x.html_url,target:"_blank",rel:"noopener noreferrer",className:"hud-link",children:x.name}),x.homepage&&Ge("a",{href:x.homepage,target:"_blank",rel:"noopener noreferrer",className:"deathstar-icon",children:Yi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:[Ge("circle",{cx:"32",cy:"32",r:"30",stroke:"#ff1a1a",strokeWidth:"2",fill:"none"}),Ge("circle",{cx:"44",cy:"20",r:"6",fill:"#ff1a1a"}),Ge("line",{x1:"2",y1:"32",x2:"62",y2:"32",stroke:"#ff1a1a",strokeWidth:"1"}),Ge("line",{x1:"32",y1:"2",x2:"32",y2:"62",stroke:"#ff1a1a",strokeWidth:"1"}),Ge("path",{d:"M2 32 A30 30 0 0 1 62 32",stroke:"#ff1a1a",strokeWidth:"1",fill:"none"})]})})]}),Ge(VF,{src:`./videos/${x.name}.mp4`,poster:`./img/${x.name}.png`,options:{autoplay:b===0,loop:!0,muted:!0}})]},x.id))})]})})}),Ge($C,{children:s&&Ge(WT,{center:!0,children:Yi(nl.div,{className:"hud-popup hud-popup--screen",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},children:[Ge("button",{className:"hud-close",onClick:()=>r(!1),children:"✕"}),Ge(nl.h2,{className:"hud-title sw-font",animate:{textShadow:["0 0 4px #0ff","0 0 12px #0ff","0 0 4px #0ff"]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},children:"Code"}),Ge(nl.p,{className:"hud-text typewriter",initial:{width:0},animate:{width:"100%"},transition:{duration:2.5,ease:"linear"},children:"Juge quelques technos utilisées..."}),Ge(Mfe,{technologies:Sfe})]})})})]}),Ge(lae,{all:!0})]})},jve=()=>Yi("section",{className:"relative w-full h-screen mx-auto overflow-hidden",children:[Yi("div",{className:`absolute inset-0 top-[60px] md:top-[120px] max-w-7xl mx-auto ${K2.paddingX} flex flex-row items-start gap-5`,children:[Yi("div",{className:"flex flex-col justify-center items-center mt-5",children:[Ge("div",{className:"w-5 h-5 rounded-full bg-lighter-sith"}),Ge("div",{className:`w-1 sm:h-80 h-44\r
             bg-gradient-to-b\r
             from-lighter-sith\r
             to-lighter-jedi`})]}),Yi("div",{children:[Yi("h1",{className:`${K2.headText} sw-font text-white leading-10`,children:["Salut, je suis"," ",Ge("span",{className:"sw-font text-lighter-sith",children:"Sébastien"})]}),Yi("p",{className:`${K2.subText} mt-2 text-white max-w-2xl text-base leading-6`,children:[Ge("span",{className:"text-[#E44D26]",children:"HTML"}),","," ",Ge("span",{className:"text-[#1572B6]",children:"CSS"}),","," ",Ge("span",{className:"text-[#FFDA3E]",children:"JavaScript"}),","," ",Ge("span",{className:"text-[#7E93D1]",children:"PHP"})," &"," ",Ge("span",{className:"text-[#00758F]",children:"MySQL"})," : découvre sur les écrans mes travaux issus de ces 5 piliers fondateurs."]})]})]}),Ge(qve,{})]}),Xve=()=>Ge(mK,{children:Ge("div",{className:"relative z-0",children:Ge(jve,{})})});nK.createRoot(document.getElementById("root")).render(Ge(Kf.StrictMode,{children:Ge(Xve,{})}));
